import{_ as A,C as z}from"./index.3e0040d4.js";/* empty css               *//* empty css                */import{d as I,e as g,B as m,aD as $,aG as a,aH as e,aL as r,aM as k,bC as M,bA as U,b2 as F,b1 as J,bK as H,aU as q,b5 as N,C as S,aJ as K,aI as B,aT as P,bi as T,bz as X,F as Z,bs as Q,aE as W,u as Y,aK as x,aF as ee,bL as ae,bM as te,bJ as le,bN as oe}from"./arco.47b3c23b.js";import{u as D}from"./loading.b238ab8e.js";import{d as E,e as se}from"./key.33a08405.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as R}from"./vue.94924b34.js";/* empty css               */import{q as ne}from"./model.0498f73b.js";import{f as ue}from"./agent.22c91532.js";/* empty css               */import"./chart.49ffccb2.js";import"./base.87fcf6e2.js";const re=I({__name:"base-info",emits:["changeStep"],setup(y,{emit:f}){const{setLoading:c}=D(!1),d=R(),_=g(),n=g({id:"",corp:"",key:"",remark:"",status:1});(async(l={id:d.query.id})=>{c(!0);try{const{data:t}=await E(l);n.value.id=t.id,n.value.corp=t.corp,n.value.key=t.key,n.value.remark=t.remark,n.value.status=t.status}catch{}finally{c(!1)}})();const s=async()=>{var t;await((t=_.value)==null?void 0:t.validate())||f("changeStep","forward",{...n.value})};return(l,t)=>{const i=M,C=U,v=F,o=J,u=H,w=q,V=N;return m(),$(V,{ref_key:"formRef",ref:_,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(v,{field:"corp",label:l.$t("key.label.corp"),rules:[{required:!0,message:l.$t("key.error.corp.required")}]},{default:a(()=>[e(C,{modelValue:n.value.corp,"onUpdate:modelValue":t[0]||(t[0]=b=>n.value.corp=b),placeholder:l.$t("key.placeholder.corp"),"allow-search":""},{default:a(()=>[e(i,{value:"OpenAI"},{default:a(()=>[r("OpenAI")]),_:1}),e(i,{value:"Baidu"},{default:a(()=>[r("\u767E\u5EA6")]),_:1}),e(i,{value:"Xfyun"},{default:a(()=>[r("\u79D1\u5927\u8BAF\u98DE")]),_:1}),e(i,{value:"Aliyun"},{default:a(()=>[r("\u963F\u91CC\u4E91")]),_:1}),e(i,{value:"ZhipuAI"},{default:a(()=>[r("\u667A\u8C31AI")]),_:1}),e(i,{value:"Google"},{default:a(()=>[r("Google")]),_:1}),e(i,{value:"DeepSeek"},{default:a(()=>[r("DeepSeek")]),_:1}),e(i,{value:"Midjourney"},{default:a(()=>[r("Midjourney")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(v,{field:"key",label:l.$t("key.label.key"),rules:[{required:!0,message:l.$t("key.error.key.required")}]},{default:a(()=>[e(o,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=b=>n.value.key=b),placeholder:l.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(v,{field:"remark",label:l.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(u,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=b=>n.value.remark=b),placeholder:l.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,null,{default:a(()=>[e(w,{type:"primary",onClick:s},{default:a(()=>[r(k(l.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=A(re,[["__scopeId","data-v-4c26e1b5"]]),ce=I({__name:"advanced",emits:["changeStep"],setup(y,{emit:f}){const{setLoading:c}=D(!0),d=R(),_=g([]);(async()=>{c(!0);try{const{data:o}=await ne();_.value=o.items}catch{}finally{c(!1)}})();const h=g([]);(async()=>{c(!0);try{const{data:o}=await ue();h.value=o.items}catch{}finally{c(!1)}})();const l=g(),t=g({models:[],model_agents:[],is_agents_only:!1});(async(o={id:d.query.id})=>{c(!0);try{const{data:u}=await E(o);t.value.models=u.models,t.value.model_agents=u.model_agents,t.value.is_agents_only=u.is_agents_only}catch{}finally{c(!1)}})();const C=async()=>{var u;await((u=l.value)==null?void 0:u.validate())||f("changeStep","submit",{...t.value})},v=()=>{f("changeStep","backward")};return(o,u)=>{const w=M,V=U,b=F,O=P,L=q,G=T,j=N;return m(),$(j,{ref_key:"formRef",ref:l,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"models",label:o.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:t.value.models,"onUpdate:modelValue":u[0]||(u[0]=p=>t.value.models=p),placeholder:o.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(m(!0),S(K,null,B(_.value,p=>(m(),$(w,{key:p.id,value:p.id,label:p.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,{field:"model_agents",label:o.$t("key.label.modelAgents")},{default:a(()=>[e(V,{modelValue:t.value.model_agents,"onUpdate:modelValue":u[1]||(u[1]=p=>t.value.model_agents=p),placeholder:o.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(m(!0),S(K,null,B(h.value,p=>(m(),$(w,{key:p.id,value:p.id,label:p.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,{field:"is_agents_only",label:o.$t("key.label.isAgentsOnly")},{default:a(()=>[e(O,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":u[2]||(u[2]=p=>t.value.is_agents_only=p)},null,8,["modelValue"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(G,null,{default:a(()=>[e(L,{type:"secondary",onClick:v},{default:a(()=>[r(k(o.$t("key.button.prev")),1)]),_:1}),e(L,{type:"primary",onClick:C},{default:a(()=>[r(k(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ie=A(ce,[["__scopeId","data-v-fb87cd23"]]);const pe={},_e={class:"success-wrap"};function me(y,f){const c=X,d=q,_=T;return m(),S("div",_e,[e(c,{status:"success",title:y.$t("key.success.title"),subtitle:y.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(_,{size:16},{default:a(()=>[e(d,{key:"finish",type:"secondary",onClick:f[0]||(f[0]=n=>y.$router.push({name:"KeyModelList"}))},{default:a(()=>[r(k(y.$t("key.button.return")),1)]),_:1}),e(d,{key:"again",type:"primary",onClick:f[1]||(f[1]=n=>y.$router.push({name:"KeyDetail",query:{id:`${y.$route.query.id}`}}))},{default:a(()=>[r(k(y.$t("key.button.view")),1)]),_:1})]),_:1})])}const fe=A(pe,[["render",me],["__scopeId","data-v-016ee704"]]),ye={class:"container"},ve={class:"wrapper"},be={name:"KeyUpdate"},ke=I({...be,setup(y){const{loading:f,setLoading:c}=D(!1),d=g(1),_=g({}),n=async()=>{c(!0);try{await se(_.value),d.value=3,_.value={}}catch{}finally{c(!1)}},h=(s,l)=>{if(typeof s=="number"){d.value=s;return}if(s==="forward"||s==="submit"){if(_.value={..._.value,...l},s==="submit"){n();return}d.value+=1}else s==="backward"&&(d.value-=1)};return(s,l)=>{const t=z,i=x,C=ee,v=ae,o=te,u=le,w=oe;return m(),S("div",ye,[e(C,{class:"container-breadcrumb"},{default:a(()=>[e(i,null,{default:a(()=>[e(t)]),_:1}),e(i,null,{default:a(()=>[r(k(s.$t("menu.key")),1)]),_:1}),e(i,null,{default:a(()=>[r(k(s.$t("menu.key.update")),1)]),_:1})]),_:1}),e(w,{loading:Y(f),style:{width:"100%"}},{default:a(()=>[e(u,{class:"general-card",bordered:!1},{default:a(()=>[Z("div",ve,[e(o,{current:d.value,"onUpdate:current":l[0]||(l[0]=V=>d.value=V),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(v,{description:s.$t("key.subTitle.baseInfo")},{default:a(()=>[r(k(s.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(v,{description:s.$t("key.subTitle.advanced")},{default:a(()=>[r(k(s.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(v,{description:s.$t("key.subTitle.update.finish")},{default:a(()=>[r(k(s.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(m(),$(Q,null,[d.value===1?(m(),$(de,{key:0,onChangeStep:h})):d.value===2?(m(),$(ie,{key:1,onChangeStep:h})):d.value===3?(m(),$(fe,{key:2,onChangeStep:h})):W("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ee=A(ke,[["__scopeId","data-v-42cfec23"]]);export{Ee as default};

import{b as ee,T as le,j as ae,_ as oe}from"./index.3ddc5c8a.js";/* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as ue,e as V,B as i,C as $,aH as e,aG as u,aL as g,aM as _,D as N,aD as v,u as I,aE as S,aJ as k,aI as C,aK as te,aF as re,b1 as ne,b2 as de,aS as se,bQ as ie,bR as me,bT as pe,bH as ce,bI as fe,a5 as ge,aU as _e,a4 as ve,bi as be,b5 as Ve,bU as he,bV as $e,g as ye}from"./arco.088e2a49.js";import{u as we}from"./loading.6f488126.js";import{p as Ue}from"./common.051a2527.js";import{f as ke}from"./vue.bd25b247.js";import{Q as f}from"./quota.5da00edc.js";import"./chart.0bfa65d3.js";const Ce={class:"container"},je={class:"wrapper"},qe={class:"submit-btn"},Ie={name:"SiteConfigCreate"},Se=ue({...Ie,setup(Re){const{proxy:T}=ye(),z=ee(),Q=ke(),R=V(),l=V({domain:"",title:"",logo:"",favicon:"",avatar:"",bg_img:"",copyright:"",jump_url:"",keywords:"",description:"",icp_beian:"",ga_beian:"",register_tips:"",grant_quota:V(),quota_expires_at:V(),support_email_suffix:V(),register_welcome:"",default_language:"",currency_symbol:"",host:"",port:V(),user_name:"",password:"",from_name:"",carousel1_title:"",carousels1:[],carousel2_title:"",carousels2:[],announcement_title:"",announcement_more_url:"",announcements:[],document_title:"",document_more_url:"",documents:[],recharge_tips:"",remark:""}),{loading:L,setLoading:E}=we(!1),G=async()=>{var o;if(!await((o=R.value)==null?void 0:o.validate())){E(!0);try{l.value.support_email_suffix&&(l.value.support_email_suffix=l.value.support_email_suffix.split(","));const h=[];l.value.carousels1.forEach((r,m)=>{!r.image_url&&!r.jump_url&&h.push(m)}),h.reverse().forEach(r=>{l.value.carousels1.splice(r,1)});const b=[];l.value.carousels2.forEach((r,m)=>{!r.image_url&&!r.jump_url&&b.push(m)}),b.reverse().forEach(r=>{l.value.carousels2.splice(r,1)});const y=[];l.value.announcements.forEach((r,m)=>{!r.content&&!r.jump_url&&y.push(m)}),y.reverse().forEach(r=>{l.value.announcements.splice(r,1)});const n=[];l.value.documents.forEach((r,m)=>{!r.title&&!r.jump_url&&n.push(m)}),n.reverse().forEach(r=>{l.value.documents.splice(r,1)}),await le(l.value).then(()=>{T.$message.success("\u65B0\u5EFA\u6210\u529F"),Q.push({name:"SiteConfig"})})}catch{l.value.support_email_suffix&&(l.value.support_email_suffix=l.value.support_email_suffix.join(","))}finally{E(!1)}}},H=a=>{l.value.grant_quota=a},D=()=>{const a={image_url:"",jump_url:""};l.value.carousels1.push(a)},M=a=>{l.value.carousels1.length>1&&l.value.carousels1.splice(a,1)},B=()=>{const a={image_url:"",jump_url:""};l.value.carousels2.push(a)},P=a=>{l.value.carousels2.length>1&&l.value.carousels2.splice(a,1)},A=()=>{const a={content:"",jump_url:""};l.value.announcements.push(a)},W=a=>{l.value.announcements.length>1&&l.value.announcements.splice(a,1)},j=()=>{const a={title:"",jump_url:""};l.value.documents.push(a)},J=a=>{l.value.documents.length>1&&l.value.documents.splice(a,1)};for(let a=0;a<3;a+=1)D(),B(),A(),j();return j(),(a,o)=>{const h=ae,b=te,y=re,n=ne,r=de,m=se,p=ie,K=me,F=pe,q=ce,O=fe,w=ge,c=_e,U=ve,X=be,Y=Ve,Z=he,x=$e;return i(),$("div",Ce,[e(y,{class:"container-breadcrumb"},{default:u(()=>[e(b,null,{default:u(()=>[e(h)]),_:1}),e(b,null,{default:u(()=>[g(_(a.$t("menu.sys")),1)]),_:1}),e(b,null,{default:u(()=>[g(_(a.$t("menu.site.config.create")),1)]),_:1})]),_:1}),e(x,{loading:I(L),style:{width:"100%"}},{default:u(()=>[e(Z,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:u(()=>[N("div",je,[e(Y,{ref_key:"formRef",ref:R,model:l.value,class:"form","label-col-props":{span:4}},{default:u(()=>[e(r,{field:"domain",label:a.$t("site.config.label.domain"),rules:[{required:!0,message:a.$t("site.config.error.domain.required")}]},{default:u(()=>[e(n,{modelValue:l.value.domain,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.domain=t),placeholder:a.$t("site.config.placeholder.domain"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(r,{field:"title",label:a.$t("site.config.label.title"),rules:[{required:!0,message:a.$t("site.config.error.title.required")}]},{default:u(()=>[e(n,{modelValue:l.value.title,"onUpdate:modelValue":o[1]||(o[1]=t=>l.value.title=t),placeholder:a.$t("site.config.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(r,{field:"logo",label:a.$t("site.config.label.logo"),rules:[{required:!0,message:a.$t("site.config.error.logo.required")}]},{default:u(()=>[e(n,{modelValue:l.value.logo,"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.logo=t),placeholder:a.$t("site.config.placeholder.logo"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(r,{field:"favicon",label:a.$t("site.config.label.favicon"),rules:[{required:!0,message:a.$t("site.config.error.favicon.required")}]},{default:u(()=>[e(n,{modelValue:l.value.favicon,"onUpdate:modelValue":o[3]||(o[3]=t=>l.value.favicon=t),placeholder:a.$t("site.config.placeholder.favicon"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(r,{field:"avatar",label:a.$t("site.config.label.avatar")},{default:u(()=>[e(n,{modelValue:l.value.avatar,"onUpdate:modelValue":o[4]||(o[4]=t=>l.value.avatar=t),placeholder:a.$t("site.config.placeholder.avatar"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"bg_img",label:a.$t("site.config.label.bg_img")},{default:u(()=>[e(n,{modelValue:l.value.bg_img,"onUpdate:modelValue":o[5]||(o[5]=t=>l.value.bg_img=t),placeholder:a.$t("site.config.placeholder.bg_img"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"copyright",label:a.$t("site.config.label.copyright")},{default:u(()=>[e(n,{modelValue:l.value.copyright,"onUpdate:modelValue":o[6]||(o[6]=t=>l.value.copyright=t),placeholder:a.$t("site.config.placeholder.copyright"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"jump_url",label:a.$t("site.config.label.jump_url")},{default:u(()=>[e(n,{modelValue:l.value.jump_url,"onUpdate:modelValue":o[7]||(o[7]=t=>l.value.jump_url=t),placeholder:a.$t("site.config.placeholder.jump_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"keywords",label:a.$t("site.config.label.keywords")},{default:u(()=>[e(n,{modelValue:l.value.keywords,"onUpdate:modelValue":o[8]||(o[8]=t=>l.value.keywords=t),placeholder:a.$t("site.config.placeholder.keywords"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"description",label:a.$t("site.config.label.description")},{default:u(()=>[e(n,{modelValue:l.value.description,"onUpdate:modelValue":o[9]||(o[9]=t=>l.value.description=t),placeholder:a.$t("site.config.placeholder.description"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"icp_beian",label:a.$t("site.config.label.icp_beian")},{default:u(()=>[e(n,{modelValue:l.value.icp_beian,"onUpdate:modelValue":o[10]||(o[10]=t=>l.value.icp_beian=t),placeholder:a.$t("site.config.placeholder.icp_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"ga_beian",label:a.$t("site.config.label.ga_beian")},{default:u(()=>[e(n,{modelValue:l.value.ga_beian,"onUpdate:modelValue":o[11]||(o[11]=t=>l.value.ga_beian=t),placeholder:a.$t("site.config.placeholder.ga_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"register_tips",label:a.$t("site.config.label.register_tips")},{default:u(()=>[e(n,{modelValue:l.value.register_tips,"onUpdate:modelValue":o[12]||(o[12]=t=>l.value.register_tips=t),placeholder:a.$t("site.config.placeholder.register_tips"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l.value.register_tips?S("",!0):(i(),v(r,{key:0,field:"grant_quota",label:a.$t("site.config.label.grant_quota")},{default:u(()=>[e(m,{modelValue:l.value.grant_quota,"onUpdate:modelValue":o[13]||(o[13]=t=>l.value.grant_quota=t),placeholder:a.$t("site.config.placeholder.grant_quota"),min:1e-6,max:9999999999999,parser:I(Ue),"allow-clear":""},{prefix:u(()=>[g(_(I(z).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label"])),l.value.register_tips?S("",!0):(i(),v(r,{key:1},{default:u(()=>[e(K,{type:"button",onChange:H},{default:u(()=>[e(p,{value:1},{default:u(()=>[e(f,{"model-value":1})]),_:1}),e(p,{value:5},{default:u(()=>[e(f,{"model-value":5})]),_:1}),e(p,{value:10},{default:u(()=>[e(f,{"model-value":10})]),_:1}),e(p,{value:20},{default:u(()=>[e(f,{"model-value":20})]),_:1}),e(p,{value:50},{default:u(()=>[e(f,{"model-value":50})]),_:1}),e(p,{value:100},{default:u(()=>[e(f,{"model-value":100})]),_:1}),e(p,{value:200},{default:u(()=>[e(f,{"model-value":200})]),_:1}),e(p,{value:500},{default:u(()=>[e(f,{"model-value":500})]),_:1}),e(p,{value:1e3},{default:u(()=>[e(f,{"model-value":1e3})]),_:1}),e(p,{value:1e4},{default:u(()=>[e(f,{"model-value":1e4})]),_:1})]),_:1})]),_:1})),l.value.register_tips?S("",!0):(i(),v(r,{key:2,field:"quota_expires_at",label:a.$t("site.config.label.quota_expires_at")},{default:u(()=>[e(m,{modelValue:l.value.quota_expires_at,"onUpdate:modelValue":o[14]||(o[14]=t=>l.value.quota_expires_at=t),placeholder:a.$t("site.config.placeholder.quota_expires_at"),precision:0,min:1,"allow-clear":""},{append:u(()=>[g(" \u5206\u949F ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])),e(r,{field:"support_email_suffix",label:a.$t("site.config.label.support_email_suffix")},{default:u(()=>[e(n,{modelValue:l.value.support_email_suffix,"onUpdate:modelValue":o[15]||(o[15]=t=>l.value.support_email_suffix=t),placeholder:a.$t("site.config.placeholder.support_email_suffix"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"register_welcome",label:a.$t("site.config.label.register_welcome")},{default:u(()=>[e(F,{modelValue:l.value.register_welcome,"onUpdate:modelValue":o[16]||(o[16]=t=>l.value.register_welcome=t),placeholder:a.$t("site.config.placeholder.register_welcome"),"auto-size":{minRows:3,maxRows:20}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"default_language",label:a.$t("site.config.label.default_language")},{default:u(()=>[e(O,{modelValue:l.value.default_language,"onUpdate:modelValue":o[17]||(o[17]=t=>l.value.default_language=t),placeholder:a.$t("site.config.placeholder.default_language"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:u(()=>[e(q,{value:"zh-CN"},{default:u(()=>[g(_(a.$t("dict.language.zh-CN")),1)]),_:1}),e(q,{value:"zh-TW"},{default:u(()=>[g(_(a.$t("dict.language.zh-TW")),1)]),_:1}),e(q,{value:"en-US"},{default:u(()=>[g(_(a.$t("dict.language.en-US")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"currency_symbol",label:a.$t("site.config.label.currency_symbol")},{default:u(()=>[e(n,{modelValue:l.value.currency_symbol,"onUpdate:modelValue":o[18]||(o[18]=t=>l.value.currency_symbol=t),placeholder:a.$t("site.config.placeholder.currency_symbol"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"host",label:a.$t("site.config.label.host")},{default:u(()=>[e(n,{modelValue:l.value.host,"onUpdate:modelValue":o[19]||(o[19]=t=>l.value.host=t),placeholder:a.$t("site.config.placeholder.host"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"port",label:a.$t("site.config.label.port")},{default:u(()=>[e(m,{modelValue:l.value.port,"onUpdate:modelValue":o[20]||(o[20]=t=>l.value.port=t),placeholder:a.$t("site.config.placeholder.port"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"user_name",label:a.$t("site.config.label.user_name")},{default:u(()=>[e(n,{modelValue:l.value.user_name,"onUpdate:modelValue":o[21]||(o[21]=t=>l.value.user_name=t),placeholder:a.$t("site.config.placeholder.user_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"password",label:a.$t("site.config.label.password")},{default:u(()=>[e(n,{modelValue:l.value.password,"onUpdate:modelValue":o[22]||(o[22]=t=>l.value.password=t),placeholder:a.$t("site.config.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"from_name",label:a.$t("site.config.label.from_name")},{default:u(()=>[e(n,{modelValue:l.value.from_name,"onUpdate:modelValue":o[23]||(o[23]=t=>l.value.from_name=t),placeholder:a.$t("site.config.placeholder.from_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"carousel1_title",label:a.$t("site.config.label.carousel1_title")},{default:u(()=>[e(n,{modelValue:l.value.carousel1_title,"onUpdate:modelValue":o[24]||(o[24]=t=>l.value.carousel1_title=t),placeholder:a.$t("site.config.placeholder.carousel1_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(i(!0),$(k,null,C(l.value.carousels1,(t,d)=>(i(),v(r,{key:d,label:`${d+1}. `+a.$t("site.config.label.carousels1")},{default:u(()=>[e(n,{modelValue:l.value.carousels1[d].image_url,"onUpdate:modelValue":s=>l.value.carousels1[d].image_url=s,placeholder:a.$t("site.config.placeholder.carousels1.image_url"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(n,{modelValue:l.value.carousels1[d].jump_url,"onUpdate:modelValue":s=>l.value.carousels1[d].jump_url=s,placeholder:a.$t("site.config.placeholder.carousels1.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[25]||(o[25]=s=>D())},{default:u(()=>[e(w)]),_:1}),e(c,{type:"secondary",shape:"circle",onClick:s=>M(d)},{default:u(()=>[e(U)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),e(r,{field:"carousel2_title",label:a.$t("site.config.label.carousel2_title")},{default:u(()=>[e(n,{modelValue:l.value.carousel2_title,"onUpdate:modelValue":o[26]||(o[26]=t=>l.value.carousel2_title=t),placeholder:a.$t("site.config.placeholder.carousel2_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(i(!0),$(k,null,C(l.value.carousels2,(t,d)=>(i(),v(r,{key:d,label:`${d+1}. `+a.$t("site.config.label.carousels2")},{default:u(()=>[e(n,{modelValue:l.value.carousels2[d].image_url,"onUpdate:modelValue":s=>l.value.carousels2[d].image_url=s,placeholder:a.$t("site.config.placeholder.carousels2.image_url"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(n,{modelValue:l.value.carousels2[d].jump_url,"onUpdate:modelValue":s=>l.value.carousels2[d].jump_url=s,placeholder:a.$t("site.config.placeholder.carousels2.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[27]||(o[27]=s=>B())},{default:u(()=>[e(w)]),_:1}),e(c,{type:"secondary",shape:"circle",onClick:s=>P(d)},{default:u(()=>[e(U)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),e(r,{field:"announcement_title",label:a.$t("site.config.label.announcement_title")},{default:u(()=>[e(n,{modelValue:l.value.announcement_title,"onUpdate:modelValue":o[28]||(o[28]=t=>l.value.announcement_title=t),placeholder:a.$t("site.config.placeholder.announcement_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"announcement_more_url",label:a.$t("site.config.label.announcement_more_url")},{default:u(()=>[e(n,{modelValue:l.value.announcement_more_url,"onUpdate:modelValue":o[29]||(o[29]=t=>l.value.announcement_more_url=t),placeholder:a.$t("site.config.placeholder.announcement_more_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(i(!0),$(k,null,C(l.value.announcements,(t,d)=>(i(),v(r,{key:d,label:`${d+1}. `+a.$t("site.config.label.announcements")},{default:u(()=>[e(n,{modelValue:l.value.announcements[d].content,"onUpdate:modelValue":s=>l.value.announcements[d].content=s,placeholder:a.$t("site.config.placeholder.announcements.content"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(n,{modelValue:l.value.announcements[d].jump_url,"onUpdate:modelValue":s=>l.value.announcements[d].jump_url=s,placeholder:a.$t("site.config.placeholder.announcements.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[30]||(o[30]=s=>A())},{default:u(()=>[e(w)]),_:1}),e(c,{type:"secondary",shape:"circle",onClick:s=>W(d)},{default:u(()=>[e(U)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),e(r,{field:"document_title",label:a.$t("site.config.label.document_title")},{default:u(()=>[e(n,{modelValue:l.value.document_title,"onUpdate:modelValue":o[31]||(o[31]=t=>l.value.document_title=t),placeholder:a.$t("site.config.placeholder.document_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"document_more_url",label:a.$t("site.config.label.document_more_url")},{default:u(()=>[e(n,{modelValue:l.value.document_more_url,"onUpdate:modelValue":o[32]||(o[32]=t=>l.value.document_more_url=t),placeholder:a.$t("site.config.placeholder.document_more_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(i(!0),$(k,null,C(l.value.documents,(t,d)=>(i(),v(r,{key:d,label:`${d+1}. `+a.$t("site.config.label.documents")},{default:u(()=>[e(n,{modelValue:l.value.documents[d].title,"onUpdate:modelValue":s=>l.value.documents[d].title=s,placeholder:a.$t("site.config.placeholder.documents.title"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(n,{modelValue:l.value.documents[d].jump_url,"onUpdate:modelValue":s=>l.value.documents[d].jump_url=s,placeholder:a.$t("site.config.placeholder.documents.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[33]||(o[33]=s=>j())},{default:u(()=>[e(w)]),_:1}),e(c,{type:"secondary",shape:"circle",onClick:s=>J(d)},{default:u(()=>[e(U)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),e(r,{field:"recharge_tips",label:a.$t("site.config.label.recharge_tips")},{default:u(()=>[e(n,{modelValue:l.value.recharge_tips,"onUpdate:modelValue":o[34]||(o[34]=t=>l.value.recharge_tips=t),placeholder:a.$t("site.config.placeholder.recharge_tips"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(r,{field:"remark",label:a.$t("site.config.label.remark")},{default:u(()=>[e(F,{modelValue:l.value.remark,"onUpdate:modelValue":o[35]||(o[35]=t=>l.value.remark=t),placeholder:a.$t("site.config.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(X,null,{default:u(()=>[N("div",qe,[e(c,{type:"secondary",onClick:o[36]||(o[36]=t=>a.$router.push({name:"SiteConfig"}))},{default:u(()=>[g(_(a.$t("button.cancel")),1)]),_:1}),e(c,{type:"primary",onClick:G},{default:u(()=>[g(_(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ke=oe(Se,[["__scopeId","data-v-22b479b3"]]);export{Ke as default};

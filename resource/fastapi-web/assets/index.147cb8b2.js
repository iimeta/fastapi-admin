import{_ as C,B as z}from"./index.75d20446.js";/* empty css               *//* empty css                */import{d as S,e as y,B as u,aD as b,aG as a,aH as e,C as V,aJ as I,aI as q,aL as _,aM as m,bA as U,bB as K,b2 as N,bK as E,aU as B,b5 as R,aT as J,bi as T,bz as O,F as G,bs as H,aE as P,u as j,aK as Q,aF as W,bL as X,bM as Y,bJ as Z,bN as x}from"./arco.4a860a7b.js";import{u as A}from"./loading.e639bbf4.js";import{c as ee}from"./key.74d2ed05.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{q as ae}from"./corp.cb0b2e84.js";/* empty css                */import{q as te}from"./model.4070cf47.js";import{f as le}from"./agent.c30570c2.js";/* empty css                */import"./chart.e67bf0c7.js";import"./vue.2ee6e12c.js";import"./base.87fcf6e2.js";const oe=S({__name:"base-info",emits:["changeStep"],setup(L,{emit:v}){const{setLoading:i}=A(!0),o=y(),r=y({corp:"",key:"",remark:""}),f=y([]);(async()=>{i(!0);try{const{data:t}=await ae();f.value=t.items}catch{}finally{i(!1)}})();const l=async()=>{var c;await((c=o.value)==null?void 0:c.validate())||v("changeStep","forward",{...r.value})};return(t,c)=>{const h=U,s=K,n=N,$=E,w=B,g=R;return u(),b(g,{ref_key:"formRef",ref:o,model:r.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(n,{field:"corp",label:t.$t("key.label.corp"),rules:[{required:!0,message:t.$t("key.error.corp.required")}]},{default:a(()=>[e(s,{modelValue:r.value.corp,"onUpdate:modelValue":c[0]||(c[0]=d=>r.value.corp=d),placeholder:t.$t("key.placeholder.corp"),"allow-search":""},{default:a(()=>[(u(!0),V(I,null,q(f.value,d=>(u(),b(h,{key:d.id,value:d.id,label:d.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"key",label:t.$t("key.label.key"),rules:[{required:!0,message:t.$t("key.error.key.required")}]},{default:a(()=>[e($,{modelValue:r.value.key,"onUpdate:modelValue":c[1]||(c[1]=d=>r.value.key=d),placeholder:t.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"remark",label:t.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e($,{modelValue:r.value.remark,"onUpdate:modelValue":c[2]||(c[2]=d=>r.value.remark=d),placeholder:t.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(n,null,{default:a(()=>[e(w,{type:"primary",onClick:l},{default:a(()=>[_(m(t.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const se=C(oe,[["__scopeId","data-v-cc604c49"]]),ne=S({__name:"advanced",emits:["changeStep"],setup(L,{emit:v}){const{setLoading:i}=A(!0),o=y([]);(async()=>{i(!0);try{const{data:s}=await te();o.value=s.items}catch{}finally{i(!1)}})();const f=y([]);(async()=>{i(!0);try{const{data:s}=await le();f.value=s.items}catch{}finally{i(!1)}})();const l=y(),t=y({models:[],model_agents:[],is_agents_only:!1}),c=async()=>{var n;await((n=l.value)==null?void 0:n.validate())||v("changeStep","submit",{...t.value})},h=()=>{v("changeStep","backward")};return(s,n)=>{const $=U,w=K,g=N,d=J,M=B,F=T,D=R;return u(),b(D,{ref_key:"formRef",ref:l,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(g,{field:"models",label:s.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(w,{modelValue:t.value.models,"onUpdate:modelValue":n[0]||(n[0]=p=>t.value.models=p),placeholder:s.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(u(!0),V(I,null,q(o.value,p=>(u(),b($,{key:p.id,value:p.id,label:p.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,{field:"model_agents",label:s.$t("key.label.modelAgents")},{default:a(()=>[e(w,{modelValue:t.value.model_agents,"onUpdate:modelValue":n[1]||(n[1]=p=>t.value.model_agents=p),placeholder:s.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(u(!0),V(I,null,q(f.value,p=>(u(),b($,{key:p.id,value:p.id,label:p.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,{field:"is_agents_only",label:s.$t("key.label.isAgentsOnly")},{default:a(()=>[e(d,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":n[2]||(n[2]=p=>t.value.is_agents_only=p)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,null,{default:a(()=>[e(F,null,{default:a(()=>[e(M,{type:"secondary",onClick:h},{default:a(()=>[_(m(s.$t("key.button.prev")),1)]),_:1}),e(M,{type:"primary",onClick:c},{default:a(()=>[_(m(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const re=C(ne,[["__scopeId","data-v-4abfd773"]]),ue={class:"success-wrap"},ce=S({__name:"success",emits:["changeStep"],setup(L,{emit:v}){const i=()=>{v("changeStep",1)};return(o,r)=>{const f=O,k=B,l=T;return u(),V("div",ue,[e(f,{status:"success",title:o.$t("key.success.title"),subtitle:o.$t("key.success.create.subTitle")},null,8,["title","subtitle"]),e(l,{size:16},{default:a(()=>[e(k,{key:"finish",type:"secondary",onClick:r[0]||(r[0]=t=>o.$router.push({name:"ModelKeyList"}))},{default:a(()=>[_(m(o.$t("key.button.finish")),1)]),_:1}),e(k,{key:"again",type:"primary",onClick:i},{default:a(()=>[_(m(o.$t("key.button.again")),1)]),_:1})]),_:1})])}}});const de=C(ce,[["__scopeId","data-v-f9395f0f"]]),pe={class:"container"},ie={class:"wrapper"},_e={name:"KeyCreate"},me=S({..._e,setup(L){const{loading:v,setLoading:i}=A(!1),o=y(1),r=y({}),f=async()=>{i(!0);try{await ee(r.value),o.value=3,r.value={}}catch{}finally{i(!1)}},k=(l,t)=>{if(typeof l=="number"){o.value=l;return}if(l==="forward"||l==="submit"){if(r.value={...r.value,...t},l==="submit"){f();return}o.value+=1}else l==="backward"&&(o.value-=1)};return(l,t)=>{const c=z,h=Q,s=W,n=X,$=Y,w=Z,g=x;return u(),V("div",pe,[e(s,{class:"container-breadcrumb"},{default:a(()=>[e(h,null,{default:a(()=>[e(c)]),_:1}),e(h,null,{default:a(()=>[_(m(l.$t("menu.key")),1)]),_:1}),e(h,null,{default:a(()=>[_(m(l.$t("menu.key.create")),1)]),_:1})]),_:1}),e(g,{loading:j(v),style:{width:"100%"}},{default:a(()=>[e(w,{class:"general-card",bordered:!1},{default:a(()=>[G("div",ie,[e($,{current:o.value,"onUpdate:current":t[0]||(t[0]=d=>o.value=d),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(n,{description:l.$t("key.subTitle.baseInfo")},{default:a(()=>[_(m(l.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(n,{description:l.$t("key.subTitle.advanced")},{default:a(()=>[_(m(l.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(n,{description:l.$t("key.subTitle.create.finish")},{default:a(()=>[_(m(l.$t("key.title.create.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(u(),b(H,null,[o.value===1?(u(),b(se,{key:0,onChangeStep:k})):o.value===2?(u(),b(re,{key:1,onChangeStep:k})):o.value===3?(u(),b(de,{key:2,onChangeStep:k})):P("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Re=C(me,[["__scopeId","data-v-2be39207"]]);export{Re as default};

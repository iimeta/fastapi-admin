import{_ as Le,u as pt,H as ft,p as vt,y as yt,i as kt,z as ht}from"./index.d34c6242.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as ze,e as w,w as Me,bS as Ne,B as a,C as _,bu as v,aD as u,aG as e,aH as t,u as m,aL as d,aM as n,aE as bt,g as Pe,bJ as gt,bK as wt,ad as Ft,bL as Et,bM as Te,bN as $t,bi as He,bb as Ct,b6 as Dt,r as Ie,c as ce,bq as Vt,b as Bt,aJ as H,aI as R,F as L,D as qt,bT as Ue,n as xt,aK as At,aF as It,bA as Ut,bB as St,b2 as Lt,bC as zt,b1 as Mt,aS as Nt,bU as Pt,bD as Tt,b5 as Ht,bE as Rt,ab as Ot,aU as Yt,bj as jt,bl as Jt,bm as Gt,b4 as Kt,bF as Qt,bH as Wt,aV as Xt,a_ as Zt,bI as ea}from"./arco.75032696.js";import{u as Re}from"./loading.96e1cbd7.js";import{q as ta}from"./common.df364eef.js";import{V as Se,q as aa,c as la,a as ua,s as oa,b as na}from"./styles.0d646238.js";import{h as sa}from"./app.36346daf.js";import{b as ia}from"./dashboard.db86a0a9.js";import{c as pe,S as da}from"./sortable.esm.95f7b760.js";import{q as ra}from"./model.9b79b8a9.js";import{f as _a}from"./agent.4735a7b5.js";/* empty css               *//* empty css                *//* empty css                */import{u as ma}from"./vue.ebfaaf45.js";import"./chart.f8f3ffb1.js";const ca={style:{margin:"10px 0 30px 10px"}},pa={key:1},fa={key:1},va={key:1},ya={key:1},ka={key:1},ha={key:1},ba={key:1},ga={key:1},wa={key:1},Fa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ea={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},$a={key:1},Ca={key:1},Da={key:1},Va={key:1},Ba={key:1},qa={key:1},xa={key:1},Aa={key:1},Ia={key:1},Ua={key:1},Sa={key:1},La={key:1},za={key:1},Ma={key:1},Na={key:1},Pa={key:1},Ta={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ha={key:1},Ra={key:1},Oa={key:1},Ya={key:1},ja={key:1},Ja={key:1},Ga={key:1},Ka={key:1},Qa={key:1},Wa={key:1},Xa={key:1},Za={key:1},el={key:1},tl={key:1},al={key:1},ll={key:1},ul={key:1},ol={key:1},nl={key:1},sl={key:1},il={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},dl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},rl={key:1},_l={key:1},ml={key:1},cl={key:1},pl={key:1},fl={key:1},vl={key:1},yl={key:1},kl={key:1},hl={key:1},bl={key:1},gl={key:1},wl={key:1},Fl={key:1},El={key:1},$l={key:1},Cl={key:1},Dl={key:1},Vl={key:1},Bl={key:1},ql={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},xl={key:1},Al={key:1},Il={name:"ChatDetail"},Ul=ze({...Il,props:{id:{type:String,default:""}},setup(fe){const B=fe,{loading:f,setLoading:O}=Re(!0),o=w({}),{copy:M,copied:oe}=ma(),{proxy:X}=Pe();(async(g={id:B.id})=>{O(!0);try{const{data:h}=await aa(g);o.value=h}catch{}finally{O(!1)}})();const Y=g=>{M(g)};Me(oe,()=>{oe.value&&X.$message.success("\u590D\u5236\u6210\u529F")});const j=async(g,h)=>{const{data:c}=await la({id:g,field:h});M(c.value)};return(g,h)=>{const c=gt,s=wt,q=Ft,p=Et,k=Te,A=$t,Z=He,N=Ct,U=Dt,S=Ne("permission");return a(),_("div",ca,[v((a(),u(A,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(p,{label:"Trace ID",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",pa,[d(n(o.value.trace_id)+" ",1),t(q,{class:"copy-btn",onClick:h[0]||(h[0]=D=>Y(o.value.trace_id))})]))]),_:1}),t(p,{label:"Host",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",fa,n(o.value.host||"-"),1))]),_:1}),t(p,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",va,[d(n(o.value.creator)+" ",1),t(q,{class:"copy-btn",onClick:h[1]||(h[1]=D=>j(o.value.id,"creator"))})]))]),_:1}),t(p,{label:"\u7528\u6237ID"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",ya,n(o.value.user_id||"-"),1))]),_:1}),t(p,{label:"\u5E94\u7528ID",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",ka,n(o.value.app_id||"-"),1))]),_:1}),t(p,{label:"\u516C\u53F8"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ha,n(o.value.corp_name),1))]),_:1}),t(p,{label:"\u6A21\u578B"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ba,n(o.value.model||"-"),1))]),_:1}),t(p,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ga,n(g.$t(`dict.model_type.${o.value.type}`)),1))]),_:1}),t(p,{label:"\u6D41\u5F0F"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",wa,n(g.$t(`chat.dict.stream.${o.value.stream||!1}`)),1))]),_:1}),t(p,{label:"\u63D0\u95EE",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Fa,n(o.value.prompt||"-"),1))]),_:1}),t(p,{label:"\u56DE\u7B54"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ea,n(o.value.completion||"-"),1))]),_:1}),t(p,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",$a,n(o.value.group_name||"-"),1))]),_:1}),t(p,{label:"\u5206\u7EC4\u6298\u6263",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ca,n(o.value.discount>0?Number((o.value.discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(p,{label:"\u63D0\u95EE\u500D\u7387"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Da,n(o.value.type!==100?o.value.text_quota.prompt_ratio||"-":o.value.multimodal_quota.text_quota.prompt_ratio||"-"),1))]),_:1}),t(p,{label:"\u56DE\u7B54\u500D\u7387",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Va,n(o.value.type!==100?o.value.text_quota.completion_ratio||"-":o.value.multimodal_quota.text_quota.completion_ratio||"-"),1))]),_:1}),t(p,{label:"\u63D0\u95EE\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ba,n(o.value.prompt_tokens||"-"),1))]),_:1}),t(p,{label:"\u56DE\u7B54\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",qa,n(o.value.completion_tokens||"-"),1))]),_:1}),t(p,{label:"\u7F13\u5B58\u5199\u5165\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",xa,n(o.value.cache_write_tokens||"-"),1))]),_:1}),t(p,{label:"\u7F13\u5B58\u547D\u4E2D\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Aa,n(o.value.cache_hit_tokens||"-"),1))]),_:1}),t(p,{label:"\u641C\u7D22\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ia,n(o.value.search_tokens||"-"),1))]),_:1}),t(p,{label:"\u82B1\u8D39\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ua,n(o.value.total_tokens?o.value.total_tokens:o.value.status===1&&o.value.text_quota.billing_method===2?0:"-"),1))]),_:1}),t(p,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Sa,[o.value.conn_time>3e4?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>15e3?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>5e3?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.conn_time)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",La,[o.value.duration>18e4?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>12e4?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>9e4?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.duration)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u603B\u8017\u65F6"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",za,[o.value.total_time>18e4?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>12e4?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>9e4?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.total_time)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u7ED3\u679C"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ma,[o.value.status===1?(a(),u(k,{key:0,color:"green"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===2?(a(),u(k,{key:1,color:"gold"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===3?(a(),u(k,{key:2,color:"orange"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):(a(),u(k,{key:3,color:"red"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1}))]))]),_:1}),t(p,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Na,n(o.value.client_ip||"-"),1))]),_:1}),t(p,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Pa,n(o.value.req_time||"-"),1))]),_:1}),t(p,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ta,n(o.value.err_msg||"-"),1))]),_:1})]),_:1})),[[S,["reseller","user"]]]),v((a(),u(A,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(p,{label:"Trace ID",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ha,[d(n(o.value.trace_id)+" ",1),t(q,{class:"copy-btn",onClick:h[2]||(h[2]=D=>Y(o.value.trace_id))})]))]),_:1}),t(p,{label:"Host"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ra,n(o.value.host||"-"),1))]),_:1}),t(p,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Oa,[d(n(o.value.is_smart_match?"-":o.value.creator)+" ",1),o.value.is_smart_match?bt("",!0):(a(),u(q,{key:0,class:"copy-btn",onClick:h[3]||(h[3]=D=>j(o.value.id,"creator"))}))]))]),_:1}),t(p,{label:"\u7528\u6237ID"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ya,n(o.value.is_smart_match?"-":o.value.user_id||"-"),1))]),_:1}),t(p,{label:"\u5E94\u7528ID",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",ja,n(o.value.is_smart_match?"-":o.value.app_id||"-"),1))]),_:1}),t(p,{label:"\u516C\u53F8"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ja,n(o.value.corp_name),1))]),_:1}),t(p,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Ga,n(g.$t(`dict.model_type.${o.value.type}`)),1))]),_:1}),t(p,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ka,n(o.value.name||"-"),1))]),_:1}),t(p,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Qa,n(o.value.model||"-"),1))]),_:1}),t(p,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Wa,n(o.value.real_model_name),1))]),_:1}),t(p,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Xa,n(o.value.real_model),1))]),_:1}),t(p,{label:"\u6D41\u5F0F"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Za,n(g.$t(`chat.dict.stream.${o.value.stream||!1}`)),1))]),_:1}),t(p,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",el,n(g.$t(`chat.dict.is_enable_fallback.${o.value.is_enable_fallback||!1}`)),1))]),_:1}),t(p,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var D,I;return[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",tl,n(((I=(D=o.value)==null?void 0:D.fallback_config)==null?void 0:I.model_agent_name)||"-"),1))]}),_:1}),t(p,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var D,I;return[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",al,n(((I=(D=o.value)==null?void 0:D.fallback_config)==null?void 0:I.model)||"-"),1))]}),_:1}),t(p,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ll,n(g.$t(`chat.dict.is_enable_forward.${o.value.is_enable_forward||!1}`)),1))]),_:1}),t(p,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ul,n(o.value.is_enable_forward?g.$t(`chat.dict.forward_rule.${o.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),t(p,{label:"\u542F\u7528\u4EE3\u7406",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ol,n(g.$t(`chat.dict.is_enable_model_agent.${o.value.is_enable_model_agent||!1}`)),1))]),_:1}),t(p,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var D,I;return[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",nl,n(((I=(D=o.value)==null?void 0:D.model_agent)==null?void 0:I.name)||"-"),1))]}),_:1}),t(p,{label:"\u5BC6\u94A5"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",sl,[d(n(o.value.key?o.value.key.length>0?o.value.key.substr(0,o.value.key.length/2>10?10:o.value.key.length/2)+"************************************"+o.value.key.substr(-(o.value.key.length/2>5?5:o.value.key.length/2)):o.value.key:"-")+" ",1),t(q,{class:"copy-btn",onClick:h[4]||(h[4]=D=>j(o.value.id,"key"))})]))]),_:1}),t(p,{label:"\u63D0\u95EE",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",il,n(o.value.prompt||"-"),1))]),_:1}),t(p,{label:"\u56DE\u7B54"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",dl,n(o.value.completion||"-"),1))]),_:1}),t(p,{label:"\u5206\u7EC4\u540D\u79F0",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",rl,n(o.value.group_name||"-"),1))]),_:1}),t(p,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",_l,n(o.value.discount>0?Number((o.value.discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(p,{label:"\u63D0\u95EE\u500D\u7387",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ml,n(o.value.type!==100?o.value.text_quota.prompt_ratio||"-":o.value.multimodal_quota.text_quota.prompt_ratio||"-"),1))]),_:1}),t(p,{label:"\u56DE\u7B54\u500D\u7387"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",cl,n(o.value.type!==100?o.value.text_quota.completion_ratio||"-":o.value.multimodal_quota.text_quota.completion_ratio||"-"),1))]),_:1}),t(p,{label:"\u63D0\u95EE\u4EE4\u724C\u6570",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",pl,n(o.value.prompt_tokens||"-"),1))]),_:1}),t(p,{label:"\u56DE\u7B54\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",fl,n(o.value.completion_tokens||"-"),1))]),_:1}),t(p,{label:"\u7F13\u5B58\u5199\u5165\u4EE4\u724C\u6570",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",vl,n(o.value.cache_write_tokens||"-"),1))]),_:1}),t(p,{label:"\u7F13\u5B58\u547D\u4E2D\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",yl,n(o.value.cache_hit_tokens||"-"),1))]),_:1}),t(p,{label:"\u641C\u7D22\u4EE4\u724C\u6570",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",kl,n(o.value.search_tokens||"-"),1))]),_:1}),t(p,{label:"\u82B1\u8D39\u4EE4\u724C\u6570"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",hl,n(o.value.total_tokens?o.value.total_tokens:o.value.status===1&&o.value.text_quota.billing_method===2?0:"-"),1))]),_:1}),t(p,{label:"\u8FDE\u63A5\u8017\u65F6",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",bl,[o.value.conn_time>1e4?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>5e3?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>3e3?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.conn_time)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",gl,[o.value.duration>12e4?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>9e4?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>6e4?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.duration)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u603B\u8017\u65F6"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",wl,[o.value.total_time>12e4?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>9e4?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>6e4?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.total_time)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u5185\u8017"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",Fl,[o.value.internal_time>500?(a(),u(k,{key:0,color:"red"},{default:e(()=>[d(n(o.value.internal_time)+" ms ",1)]),_:1})):o.value.internal_time>300?(a(),u(k,{key:1,color:"orange"},{default:e(()=>[d(n(o.value.internal_time)+" ms ",1)]),_:1})):o.value.internal_time>100?(a(),u(k,{key:2,color:"gold"},{default:e(()=>[d(n(o.value.internal_time)+" ms ",1)]),_:1})):(a(),u(k,{key:3,color:"green"},{default:e(()=>[d(n(o.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(p,{label:"\u7ED3\u679C"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",El,[o.value.status===1?(a(),u(k,{key:0,color:"green"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===2?(a(),u(k,{key:1,color:"gold"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===3?(a(),u(k,{key:2,color:"orange"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):(a(),u(k,{key:3,color:"red"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1}))]))]),_:1}),t(p,{label:"\u672C\u5730IP"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",$l,n(o.value.local_ip||"-"),1))]),_:1}),t(p,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Cl,n(o.value.client_ip||"-"),1))]),_:1}),t(p,{label:"\u8FDC\u7A0BIP",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Dl,n(o.value.remote_ip||"-"),1))]),_:1}),t(p,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Vl,n(o.value.req_time||"-"),1))]),_:1}),t(p,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Bl,n(o.value.created_at||"-"),1))]),_:1}),t(p,{label:"\u9519\u8BEF\u4FE1\u606F",span:2},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:1})]),_:1})):(a(),_("span",ql,n(o.value.err_msg||"-"),1))]),_:1})]),_:1})),[[S,["admin"]]]),t(A,{layout:"inline-vertical",column:2,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(p,{span:2},{default:e(()=>[t(U,{type:"card"},{default:e(()=>[t(N,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:3})]),_:1})):(a(),u(Z,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[o.value.messages?(a(),u(m(Se),{key:0,path:"res",data:o.value.messages,"show-length":!0},null,8,["data"])):(a(),_("span",xl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),v((a(),u(A,{layout:"inline-vertical",column:2,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(p,{span:2},{default:e(()=>[t(U,{type:"card"},{default:e(()=>[t(N,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[m(f)?(a(),u(s,{key:0,animation:!0},{default:e(()=>[t(c,{rows:3})]),_:1})):(a(),u(Z,{key:1},{default:e(()=>[o.value.model_agent?(a(),u(m(Se),{key:0,data:o.value.model_agent,"show-length":!0},null,8,["data"])):(a(),_("span",Al,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[S,["admin"]]])])}}});const Sl=Le(Ul,[["__scopeId","data-v-1227ace1"]]),Ll={class:"container"},zl={class:"action-icon"},Ml={class:"action-icon"},Nl={id:"tableSetting"},Pl={style:{"margin-right":"4px",cursor:"move"}},Tl={class:"title"},Hl={name:"ChatList"},Rl=ze({...Hl,setup(fe){const B=localStorage.getItem("userRole"),f=Ie({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),O=w([]);B==="user"&&(async()=>{try{const{data:i}=await sa();O.value=i.items}catch{}})();const M=w([]);(async()=>{try{const{data:i}=await ra();M.value=i.items}catch{}})();const X=w([]);B==="admin"&&(async()=>{try{const{data:i}=await _a();X.value=i.items}catch{}})();const Y=()=>({app_id:w(),trace_id:w(),user_id:w(),key:"",models:[],model_agents:[],total_time:w(),status:w(),req_time:[Ue().format("YYYY-MM-DD 00:00:00"),Ue().format("YYYY-MM-DD 23:59:59")]}),{loading:j,setLoading:g}=Re(!0),{t:h}=pt(),c=w([]),s=w(Y()),q=w([]),p=w([]),k=w("medium"),A=w([]),Z=w(!0),N=w(),U={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},S=Ie({...U}),D=ce(()=>[{name:h("size.mini"),value:"mini"},{name:h("size.small"),value:"small"},{name:h("size.medium"),value:"medium"},{name:h("size.large"),value:"large"}]),I=ce(()=>[{title:h(B==="reseller"||B==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:B==="reseller"||B==="admin"?"user_id":"app_id",slotName:B==="reseller"||B==="admin"?"user_id":"app_id",align:"center",width:75},{title:h("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:h("chat.columns.prompt_tokens"),dataIndex:"prompt_tokens",slotName:"prompt_tokens",align:"center",width:75},{title:h("chat.columns.completion_tokens"),dataIndex:"completion_tokens",slotName:"completion_tokens",align:"center",width:75},{title:h("chat.columns.total_price"),dataIndex:"total_tokens",slotName:"total_tokens",align:"center"},{title:h("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:h("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:h("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:h("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center"},{title:h("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:h("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:h("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:h("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);(B==="reseller"||B==="user")&&I.value.splice(9,1);const ne=ce(()=>[{label:h("chat.dict.status.1"),value:1},{label:h("chat.dict.status.2"),value:2},{label:h("chat.dict.status.-1"),value:-1}]);B==="admin"&&ne.value.push({label:h("chat.dict.status.3"),value:3},{label:h("chat.dict.status.-100"),value:-100});const ee=async(i={...U,...s.value})=>{g(!0);try{const{data:r}=await ua(i);c.value=r.items,S.current=i.current,S.pageSize=i.pageSize,S.total=r.paging.total}catch{}finally{g(!1)}},se=()=>{ee({...U,...s.value})},Ye=i=>{ee({...U,...s.value,current:i})},je=i=>{U.pageSize=i,ee({...U,...s.value})};ee();const Je=()=>{s.value=Y()},Ge=(i,r)=>{k.value=i},Ke=(i,r,$)=>{i?q.value.splice($,0,r):q.value=p.value.filter(x=>x.dataIndex!==r.dataIndex)},ve=(i,r,$,x=!1)=>{const V=x?pe(i):i;return r>-1&&$>-1&&V.splice(r,1,V.splice($,1,V[r]).pop()),V},Qe=i=>{i&&xt(()=>{const r=document.getElementById("tableSetting");new da(r,{onEnd($){const{oldIndex:x,newIndex:V}=$;ve(q.value,x,V),ve(p.value,x,V)}})})};Me(()=>I.value,i=>{q.value=pe(i),q.value.forEach((r,$)=>{r.checked=!0}),p.value=pe(q.value)},{deep:!0,immediate:!0});const{proxy:te}=Pe(),ie=w(!1),ye=w(),We=i=>{ie.value=!0,ye.value=i},Xe=()=>{ie.value=!1},ke=w(0),he=w(0),be=async(i={...s.value})=>{const{data:r}=await ia(i);ke.value=r.rpm,he.value=r.tpm};be();let ge;const we=()=>{clearInterval(ge)},Fe=()=>{ge=setInterval(be,3e3)},Ee=()=>{document.visibilityState==="hidden"?we():Fe()};Vt(()=>{Fe(),document.addEventListener("visibilitychange",Ee)}),Bt(()=>{we(),document.removeEventListener("visibilitychange",Ee)});const $e=w(),J=w(!1),z=w({}),Ze=async i=>{var $;if(await(($=$e.value)==null?void 0:$.validate())){J.value=!0,i(!1);return}i(),Ce({req_time:z.value.req_time,user_id:z.value.user_id})},et=()=>{J.value=!1},Ce=i=>{if(A.value.length===0&&!i.req_time){J.value=!0;return}g(!0),i.ids=A.value,oa(i).then(r=>{g(!1),te.$message.success("\u5BFC\u51FA\u6210\u529F"),N.value.selectAll(!1);const $=new Blob([r.data],{type:"application/vnd.ms-excel"}),x=window.URL.createObjectURL($),V=document.createElement("a");V.href=x,V.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(x)}).catch(r=>{te.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",r)})},De=w(),G=w(!1),C=w({status:[1,2,3,-1]}),tt=async i=>{var $;if(await(($=De.value)==null?void 0:$.validate())){G.value=!0,i(!1);return}i(),Ve({action:"time",value:C.value.value,user_id:C.value.user_id,status:C.value.status})},at=()=>{G.value=!1},lt=i=>{A.value=i,Z.value=!i.length},Ve=i=>{if(A.value.length===0&&!i.value)G.value=!0;else{let r=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${A.value.length}\u6761\u6570\u636E?`;switch(i.action){case"delete":r=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${A.value.length}\u6761\u6570\u636E?`;break;case"time":i.user_id?r=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${i.user_id} \u8BF7\u6C42\u65F6\u95F4: ${i.value[0]} \u81F3 ${i.value[1]} \u7684\u6570\u636E?`:r=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${i.value[0]} \u81F3 ${i.value[1]} \u7684\u6570\u636E?`;break}te.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:r,hideCancel:!1,onOk:()=>{g(!0),i.ids=A.value,na(i).then($=>{g(!1),te.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),se(),N.value.selectAll(!1)})}})}};return(i,r)=>{const $=ft,x=At,V=It,ae=Ut,P=St,E=Lt,F=zt,K=Mt,T=Nt,le=Pt,ue=Tt,de=Ht,Be=Rt,ut=Ot,Q=Yt,qe=vt,re=He,_e=jt,ot=yt,nt=Jt,st=Gt,it=kt,dt=ht,W=Kt,rt=Qt,b=Te,_t=Wt,mt=Xt,xe=Zt,ct=ea,y=Ne("permission");return a(),_("div",Ll,[t(V,{class:"container-breadcrumb"},{default:e(()=>[t(x,null,{default:e(()=>[t($)]),_:1}),t(x,null,{default:e(()=>[d(n(i.$t("menu.chat")),1)]),_:1}),t(x,null,{default:e(()=>[d(n(i.$t("menu.chat.list")),1)]),_:1})]),_:1}),t(ct,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[t(ue,null,{default:e(()=>[t(F,{flex:1},{default:e(()=>[t(de,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[v((a(),u(ue,{gutter:16},{default:e(()=>[v((a(),u(F,{span:8},{default:e(()=>[t(E,{field:"app_id",label:i.$t("chat.form.app_id")},{default:e(()=>[t(P,{modelValue:s.value.app_id,"onUpdate:modelValue":r[0]||(r[0]=l=>s.value.app_id=l),placeholder:i.$t("chat.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(H,null,R(O.value,l=>(a(),u(ae,{key:l.app_id,value:l.app_id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[y,["user"]]]),v((a(),u(F,{span:8},{default:e(()=>[t(E,{field:"trace_id",label:i.$t("chat.form.user.trace_id")},{default:e(()=>[t(K,{modelValue:s.value.trace_id,"onUpdate:modelValue":r[1]||(r[1]=l=>s.value.trace_id=l),placeholder:i.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[y,["reseller"]]]),v((a(),u(F,{span:8},{default:e(()=>[t(E,{field:"user_id",label:i.$t("chat.form.reseller.user_id")},{default:e(()=>[t(T,{modelValue:s.value.user_id,"onUpdate:modelValue":r[2]||(r[2]=l=>s.value.user_id=l),placeholder:i.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[y,["reseller"]]]),v((a(),u(F,{span:8},{default:e(()=>[t(E,{field:"key",label:i.$t("chat.form.key")},{default:e(()=>[t(K,{modelValue:s.value.key,"onUpdate:modelValue":r[3]||(r[3]=l=>s.value.key=l),placeholder:i.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[y,["user"]]]),v((a(),u(F,{span:8},{default:e(()=>[t(E,{field:"trace_id",label:i.$t("chat.form.user.trace_id")},{default:e(()=>[t(K,{modelValue:s.value.trace_id,"onUpdate:modelValue":r[4]||(r[4]=l=>s.value.trace_id=l),placeholder:i.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[y,["user"]]]),v((a(),u(F,{span:8},{default:e(()=>[t(E,{field:"total_time",label:i.$t("chat.form.total_time")},{default:e(()=>[t(T,{modelValue:s.value.total_time,"onUpdate:modelValue":r[5]||(r[5]=l=>s.value.total_time=l),placeholder:i.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[y,["reseller"]]]),t(F,{span:8},{default:e(()=>[t(E,{field:"models",label:i.$t("chat.form.models")},{default:e(()=>[t(P,{modelValue:s.value.models,"onUpdate:modelValue":r[6]||(r[6]=l=>s.value.models=l),placeholder:i.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(H,null,R(M.value,l=>(a(),u(ae,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t(E,{field:"status",label:i.$t("chat.form.status")},{default:e(()=>[t(P,{modelValue:s.value.status,"onUpdate:modelValue":r[7]||(r[7]=l=>s.value.status=l),placeholder:i.$t("chat.form.selectDefault"),options:m(ne),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t(E,{field:"req_time",label:i.$t("chat.form.req_time")},{default:e(()=>[t(le,{modelValue:s.value.req_time,"onUpdate:modelValue":r[8]||(r[8]=l=>s.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[y,["reseller","user"]]]),v((a(),u(ue,{gutter:16},{default:e(()=>[t(F,{span:5},{default:e(()=>[t(E,{field:"trace_id",label:i.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[t(K,{modelValue:s.value.trace_id,"onUpdate:modelValue":r[9]||(r[9]=l=>s.value.trace_id=l),placeholder:i.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:6},{default:e(()=>[t(E,{field:"models",label:i.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[t(P,{modelValue:s.value.models,"onUpdate:modelValue":r[10]||(r[10]=l=>s.value.models=l),placeholder:i.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(H,null,R(M.value,l=>(a(),u(ae,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:5},{default:e(()=>[t(E,{field:"key",label:i.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[t(K,{modelValue:s.value.key,"onUpdate:modelValue":r[11]||(r[11]=l=>s.value.key=l),placeholder:i.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t(E,{field:"total_time",label:i.$t("chat.form.total_time")},{default:e(()=>[t(T,{modelValue:s.value.total_time,"onUpdate:modelValue":r[12]||(r[12]=l=>s.value.total_time=l),placeholder:i.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:5},{default:e(()=>[t(E,{field:"user_id",label:i.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[t(T,{modelValue:s.value.user_id,"onUpdate:modelValue":r[13]||(r[13]=l=>s.value.user_id=l),placeholder:i.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:6},{default:e(()=>[t(E,{field:"model_agents",label:i.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[t(P,{modelValue:s.value.model_agents,"onUpdate:modelValue":r[14]||(r[14]=l=>s.value.model_agents=l),placeholder:i.$t("key.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(H,null,R(X.value,l=>(a(),u(ae,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:5},{default:e(()=>[t(E,{field:"status",label:i.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[t(P,{modelValue:s.value.status,"onUpdate:modelValue":r[15]||(r[15]=l=>s.value.status=l),placeholder:i.$t("chat.form.selectDefault"),options:m(ne),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t(E,{field:"req_time",label:i.$t("chat.form.req_time")},{default:e(()=>[t(le,{modelValue:s.value.req_time,"onUpdate:modelValue":r[16]||(r[16]=l=>s.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[y,["admin"]]])]),_:1},8,["model"])]),_:1}),t(Be,{style:{height:"84px"},direction:"vertical"}),t(F,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[t(re,{direction:"vertical",size:18},{default:e(()=>[t(Q,{type:"primary",onClick:se},{icon:e(()=>[t(ut)]),default:e(()=>[d(" "+n(i.$t("chat.form.search")),1)]),_:1}),t(Q,{onClick:Je},{icon:e(()=>[t(qe)]),default:e(()=>[d(" "+n(i.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(Be,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(ue,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[t(F,{span:3},{default:e(()=>[t(re,null,{default:e(()=>[t(Q,{type:"primary",onClick:r[17]||(r[17]=l=>Ce({}))},{default:e(()=>[d(" \u5BFC\u51FA ")]),_:1}),v((a(),u(Q,{type:"primary",status:"danger",onClick:r[18]||(r[18]=l=>Ve({action:"delete"}))},{default:e(()=>[d(" \u5220\u9664 ")]),_:1})),[[y,["admin"]]])]),_:1})]),_:1}),t(F,{span:14},{default:e(()=>[d(" \u82B1\u8D39 = ( \u63D0\u95EE \xD7 \u63D0\u95EE\u500D\u7387 + \u56DE\u7B54 \xD7 \u56DE\u7B54\u500D\u7387 ) \xD7 \u5206\u7EC4\u6298\u6263 \xF7 500000 \xA0\xA0\u6216\xA0\xA0 \u56DE\u7B54 \xD7 \u5206\u7EC4\u6298\u6263 \xF7 500000 ")]),_:1}),t(F,{span:2},{default:e(()=>[d(" RPM: \xA0"+n(ke.value.toLocaleString()),1)]),_:1}),t(F,{span:3},{default:e(()=>[d(" TPM: \xA0"+n(he.value.toLocaleString()),1)]),_:1}),t(F,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[t(_e,{content:i.$t("actions.refresh")},{default:e(()=>[L("div",{class:"action-icon",onClick:se},[t(qe,{size:"18"})])]),_:1},8,["content"]),t(st,{onSelect:Ge},{content:e(()=>[(a(!0),_(H,null,R(m(D),l=>(a(),u(nt,{key:l.value,value:l.value,class:qt({active:l.value===k.value})},{default:e(()=>[L("span",null,n(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[t(_e,{content:i.$t("actions.density")},{default:e(()=>[L("div",zl,[t(ot,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(_e,{content:i.$t("actions.column_setting")},{default:e(()=>[t(rt,{trigger:"click",position:"bl",onPopupVisibleChange:Qe},{content:e(()=>[L("div",Nl,[(a(!0),_(H,null,R(p.value,(l,Ae)=>(a(),_("div",{key:l.dataIndex,class:"setting"},[L("div",Pl,[t(dt)]),L("div",null,[t(W,{modelValue:l.checked,"onUpdate:modelValue":me=>l.checked=me,onChange:me=>Ke(me,l,Ae)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),L("div",Tl,n(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:e(()=>[L("div",Ml,[t(it,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t(_t,{ref_key:"tableRef",ref:N,"row-key":"id",loading:m(j),pagination:S,columns:q.value,data:c.value,bordered:!1,size:k.value,"row-selection":f,onPageChange:Ye,onPageSizeChange:je,onSelectionChange:lt},{user_id:e(({record:l})=>[d(n(l.is_smart_match?"-":l.user_id),1)]),prompt_tokens:e(({record:l})=>[d(n(l.prompt_tokens?l.prompt_tokens:l.status===1&&l.billing_method===2?0:"-"),1)]),completion_tokens:e(({record:l})=>[d(n(l.completion_tokens?l.completion_tokens:l.status===1&&l.billing_method===2?0:"-"),1)]),total_tokens:e(({record:l})=>[d(n(l.total_tokens?`$${m(ta)(l.total_tokens)}`:l.status===1&&l.billing_method===2?0:"-"),1)]),stream:e(({record:l})=>[d(n(i.$t(`chat.dict.stream.${l.stream||!1}`)),1)]),conn_time:e(({record:l})=>[l.conn_time>3e4?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.conn_time>15e3?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.conn_time>5e3?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[d(n(l.conn_time||"-"),1)]),_:2},1024)),[[y,["reseller","user"]]]),l.conn_time>1e4?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[y,["admin"]]]):l.conn_time>5e3?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[y,["admin"]]]):l.conn_time>3e3?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[y,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[d(n(l.conn_time||"-"),1)]),_:2},1024)),[[y,["admin"]]])]),duration:e(({record:l})=>[l.duration>18e4?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.duration>12e4?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.duration>9e4?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[y,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[d(n(l.duration||"-"),1)]),_:2},1024)),[[y,["reseller","user"]]]),l.duration>12e4?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[y,["admin"]]]):l.duration>9e4?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[y,["admin"]]]):l.duration>6e4?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[y,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[d(n(l.duration||"-"),1)]),_:2},1024)),[[y,["admin"]]])]),total_time:e(({record:l})=>[l.total_time>18e4?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.total_time>12e4?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.total_time>9e4?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[d(n(l.total_time||"-"),1)]),_:2},1024)),[[y,["reseller","user"]]]),l.total_time>12e4?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[y,["admin"]]]):l.total_time>9e4?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[y,["admin"]]]):l.total_time>6e4?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[y,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[d(n(l.total_time||"-"),1)]),_:2},1024)),[[y,["admin"]]])]),internal_time:e(({record:l})=>[l.internal_time>1e3?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.internal_time>500?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):l.internal_time>300?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[y,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[d(n(l.internal_time||"-"),1)]),_:2},1024)),[[y,["reseller","user"]]]),l.internal_time>500?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[y,["admin"]]]):l.internal_time>300?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[y,["admin"]]]):l.internal_time>100?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[y,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[d(n(l.internal_time||"-"),1)]),_:2},1024)),[[y,["admin"]]])]),status:e(({record:l})=>[l.status===-1?(a(),u(b,{key:0,color:"red"},{default:e(()=>[d(n(i.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===2?(a(),u(b,{key:1,color:"gold"},{default:e(()=>[d(n(i.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===3?(a(),u(b,{key:2,color:"orange"},{default:e(()=>[d(n(i.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):(a(),u(b,{key:3,color:"green"},{default:e(()=>[d(n(i.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024))]),operations:e(({record:l})=>[t(Q,{type:"text",size:"small",onClick:Ae=>We(l.id)},{default:e(()=>[d(n(i.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),t(mt,{title:i.$t("menu.chat.detail"),width:700,footer:!1,visible:ie.value,"unmount-on-close":"","render-to-body":"",onCancel:Xe},{default:e(()=>[t(Sl,{id:ye.value},null,8,["id"])]),_:1},8,["title","visible"]),t(xe,{visible:J.value,"onUpdate:visible":r[21]||(r[21]=l=>J.value=l),title:i.$t("chat.form.title.chat_export"),onCancel:et,onBeforeOk:Ze},{default:e(()=>[t(de,{ref_key:"chatExportForm",ref:$e,model:z.value},{default:e(()=>[t(E,{field:"req_time",label:i.$t("chat.form.req_time"),rules:[{required:!0,message:i.$t("chat.error.req_time.required")}]},{default:e(()=>[t(le,{modelValue:z.value.req_time,"onUpdate:modelValue":r[19]||(r[19]=l=>z.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),v((a(),u(E,{field:"user_id",label:i.$t("chat.form.req.user_id")},{default:e(()=>[t(T,{modelValue:z.value.user_id,"onUpdate:modelValue":r[20]||(r[20]=l=>z.value.user_id=l),placeholder:i.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[y,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(xe,{visible:G.value,"onUpdate:visible":r[28]||(r[28]=l=>G.value=l),title:i.$t("chat.form.title.chat_del"),onCancel:at,onBeforeOk:tt},{default:e(()=>[t(de,{ref_key:"chatDelForm",ref:De,model:C.value},{default:e(()=>[t(E,{field:"value",label:i.$t("chat.form.req_time"),rules:[{required:!0,message:i.$t("chat.error.req_time.required")}]},{default:e(()=>[t(le,{modelValue:C.value.value,"onUpdate:modelValue":r[22]||(r[22]=l=>C.value.value=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(E,{field:"status",label:i.$t("chat.form.req.status"),rules:[{required:!0,message:i.$t("chat.error.req.status.required")}]},{default:e(()=>[t(re,{size:"large"},{default:e(()=>[t(W,{modelValue:C.value.status,"onUpdate:modelValue":r[23]||(r[23]=l=>C.value.status=l),value:1},{default:e(()=>[d(" \u6210\u529F ")]),_:1},8,["modelValue"]),t(W,{modelValue:C.value.status,"onUpdate:modelValue":r[24]||(r[24]=l=>C.value.status=l),value:2},{default:e(()=>[d(" \u4E2D\u6B62 ")]),_:1},8,["modelValue"]),t(W,{modelValue:C.value.status,"onUpdate:modelValue":r[25]||(r[25]=l=>C.value.status=l),value:3},{default:e(()=>[d(" \u91CD\u8BD5 ")]),_:1},8,["modelValue"]),t(W,{modelValue:C.value.status,"onUpdate:modelValue":r[26]||(r[26]=l=>C.value.status=l),value:-1},{default:e(()=>[d(" \u5931\u8D25 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),t(E,{field:"user_id",label:i.$t("chat.form.req.user_id")},{default:e(()=>[t(T,{modelValue:C.value.user_id,"onUpdate:modelValue":r[27]||(r[27]=l=>C.value.user_id=l),placeholder:i.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const Fu=Le(Rl,[["__scopeId","data-v-ce510ed2"]]);export{Fu as default};

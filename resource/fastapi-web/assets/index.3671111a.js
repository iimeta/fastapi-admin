import{u as ae,N as Ae,s as Le,A as Ue,k as Pe,B as Te,_ as He}from"./index.801a426f.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as oe,e as g,B as n,C as v,aH as e,aG as t,u as s,aD as y,aM as i,aL as m,bA as Oe,bB as qe,bC as Re,bD as le,bE as je,r as Z,c as L,w as Me,D as F,aJ as ee,aI as te,E as Ge,n as Je,aK as Ke,aF as Qe,b1 as We,b2 as Xe,bH as Ye,bG as Ze,bT as et,bI as tt,b5 as at,bJ as ot,ab as lt,aU as nt,bi as st,bj as it,bk as ut,bl as ct,b4 as rt,bK as dt,bL as pt,bM as mt,aV as _t,bN as ft,g as vt}from"./arco.cbac690a.js";import{u as ne}from"./loading.b56ef223.js";import{q as bt,a as gt,s as yt,b as ht}from"./notice.04b57795.js";import{c as j,S as kt}from"./sortable.esm.59243d4c.js";/* empty css                *//* empty css                */import"./chart.e521dee8.js";import"./vue.4014b72a.js";const $t={style:{margin:"10px 0 30px 10px"}},wt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ct=["innerHTML"],Dt={key:1},Vt={key:1},xt={key:1,style:{"max-height":"200px",display:"block",overflow:"auto"}},Ft={key:1,style:{"max-height":"200px",display:"block",overflow:"auto"}},It={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Et={key:1},St={key:1},Nt={key:1},zt={key:1},Bt={name:"NoticeDetail"},At=oe({...Bt,props:{id:{type:String,default:""}},setup(M){const U=M,{t:p}=ae(),{loading:_,setLoading:c}=ne(!0),u=g({});return(async(V={id:U.id})=>{c(!0);try{const{data:r}=await bt(V);u.value=r}catch{}finally{c(!1)}})(),(V,r)=>{const d=Oe,f=qe,b=Re,x=le,I=je;return n(),v("div",$t,[e(I,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(b,{label:s(p)("notice.detail.title"),span:2},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",wt,i(u.value.title),1))]),_:1},8,["label"]),e(b,{label:s(p)("notice.detail.content"),span:2},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",{key:1,style:{"max-height":"500px",display:"block",overflow:"auto"},innerHTML:u.value.content},null,8,Ct))]),_:1},8,["label"]),e(b,{label:s(p)("notice.detail.category")},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",Dt,i(V.$t(`notice.dict.category.${u.value.category}`)),1))]),_:1},8,["label"]),e(b,{label:s(p)("notice.detail.scope")},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",Vt,i(V.$t(`notice.dict.scope.${u.value.scope}`)),1))]),_:1},8,["label"]),e(b,{label:s(p)("notice.detail.users")},{default:t(()=>{var w;return[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",xt,i(u.value.scope===1||u.value.scope===2?"\u5168\u90E8":(u.value.scope===4||u.value.scope===6)&&((w=u.value.users)==null?void 0:w.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(b,{label:s(p)("notice.detail.resellers"),span:2},{default:t(()=>{var w;return[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",Ft,i(u.value.scope===1||u.value.scope===3?"\u5168\u90E8":(u.value.scope===5||u.value.scope===6)&&((w=u.value.resellers)==null?void 0:w.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(b,{label:s(p)("common.remark"),span:2},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",It,i(u.value.remark||"-"),1))]),_:1},8,["label"]),e(b,{label:s(p)("common.status")},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",Et,[e(x,{color:u.value.status===1?"green":""},{default:t(()=>[m(i(V.$t(`notice.dict.status.${u.value.status}`)),1)]),_:1},8,["color"])]))]),_:1},8,["label"]),e(b,{label:s(p)("notice.detail.publish_time")},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",St,i(u.value.publish_time||"-"),1))]),_:1},8,["label"]),e(b,{label:s(p)("common.created_at")},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",Nt,i(u.value.created_at),1))]),_:1},8,["label"]),e(b,{label:s(p)("common.updated_at")},{default:t(()=>[s(_)?(n(),y(f,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(n(),v("span",zt,i(u.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Lt={class:"container"},Ut={class:"action-icon"},Pt={class:"action-icon"},Tt={id:"tableSetting"},Ht={style:{"margin-right":"4px",cursor:"move"}},Ot={class:"title"},qt={name:"NoticeList"},Rt=oe({...qt,setup(M){const{loading:U,setLoading:p}=ne(!0),{proxy:_}=vt(),{t:c}=ae(),u=Z({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),P=()=>({title:"",content:"",category:g(),remark:"",status:g(),publish_time:[]}),V=g([]),r=g(P()),d=g([]),f=g([]),b=g("medium"),x=g([]),I=g(!0),w=g(),E={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},B=Z({...E}),se=L(()=>[{name:c("size.mini"),value:"mini"},{name:c("size.small"),value:"small"},{name:c("size.medium"),value:"medium"},{name:c("size.large"),value:"large"}]),ie=L(()=>[{title:c("notice.columns.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:c("notice.columns.category"),dataIndex:"category",slotName:"category",align:"center"},{title:c("notice.columns.scope"),dataIndex:"scope",slotName:"scope",align:"center",ellipsis:!0,tooltip:!0},{title:c("notice.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:c("notice.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:c("notice.columns.publish_time"),dataIndex:"publish_time",slotName:"publish_time",align:"center",width:170},{title:c("notice.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),ue=L(()=>[{label:c("notice.dict.status.1"),value:1},{label:c("notice.dict.status.2"),value:2}]),ce=L(()=>[{label:c("notice.dict.category.service"),value:"service"},{label:c("notice.dict.category.activity"),value:"activity"},{label:c("notice.dict.category.safety"),value:"safety"},{label:c("notice.dict.category.maint"),value:"maint"},{label:c("notice.dict.category.product"),value:"product"},{label:c("notice.dict.category.fault"),value:"fault"}]),A=async(a={...E})=>{p(!0);try{const{data:l}=await gt(a);V.value=l.items,B.current=a.current,B.pageSize=a.pageSize,B.total=l.paging.total}catch{}finally{p(!1),w.value.selectAll(!1)}};A();const N=()=>{A({...E,...r.value})},re=a=>{A({...E,...r.value,current:a})},de=a=>{E.pageSize=a,A({...E,...r.value})},pe=()=>{r.value=P(),N()},me=(a,l)=>{b.value=a},_e=(a,l,h)=>{a?d.value.splice(h,0,l):d.value=f.value.filter(k=>k.dataIndex!==l.dataIndex)},G=(a,l,h,k=!1)=>{const C=k?j(a):a;return l>-1&&h>-1&&C.splice(l,1,C.splice(h,1,C[l]).pop()),C},fe=a=>{a&&Je(()=>{const l=document.getElementById("tableSetting");new kt(l,{onEnd(h){const{oldIndex:k,newIndex:C}=h;G(d.value,k,C),G(f.value,k,C)}})})};Me(()=>ie.value,a=>{d.value=j(a),d.value.forEach((l,h)=>{l.checked=!0}),f.value=j(d.value)},{deep:!0,immediate:!0});const ve=async a=>{p(!0);try{await yt(a),_.$message.success("\u5220\u9664\u6210\u529F"),N()}catch{}finally{p(!1)}},be=a=>{x.value=a,I.value=!a.length},J=a=>{if(x.value.length===0)_.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let l=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${x.value.length}\u6761\u6570\u636E?`;switch(a.action){case"notice":l=`\u662F\u5426\u786E\u5B9A\u6240\u9009\u7684${x.value.length}\u6761\u6570\u636E\u518D\u6B21\u53D1\u9001\u901A\u77E5?`;break;case"delete":l=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${x.value.length}\u6761\u6570\u636E?`;break}_.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:l,hideCancel:!1,onOk:()=>{p(!0),a.ids=x.value,ht(a).then(h=>{p(!1),_.$message.success("\u64CD\u4F5C\u6210\u529F"),N(),w.value.selectAll(!1)})}})}},T=g(!1),K=g(),ge=a=>{T.value=!0,K.value=a},ye=()=>{T.value=!1};return(a,l)=>{const h=Ae,k=Ke,C=Qe,H=We,S=Xe,$=Ye,Q=Ze,he=et,O=tt,ke=at,W=ot,$e=lt,D=nt,X=Le,Y=st,q=it,we=Ue,Ce=ut,De=ct,Ve=Pe,xe=Te,Fe=rt,Ie=dt,Ee=le,Se=pt,Ne=mt,ze=_t,Be=ft;return n(),v("div",Lt,[e(C,{class:"container-breadcrumb"},{default:t(()=>[e(k,null,{default:t(()=>[e(h)]),_:1}),e(k,null,{default:t(()=>[m(i(a.$t("menu.notice")),1)]),_:1}),e(k,null,{default:t(()=>[m(i(a.$t("menu.notice.list")),1)]),_:1})]),_:1}),e(Be,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(O,null,{default:t(()=>[e($,{flex:1},{default:t(()=>[e(ke,{model:r.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e($,{span:8},{default:t(()=>[e(S,{field:"title",label:a.$t("notice.form.title")},{default:t(()=>[e(H,{modelValue:r.value.title,"onUpdate:modelValue":l[0]||(l[0]=o=>r.value.title=o),placeholder:a.$t("notice.form.title.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(S,{field:"content",label:a.$t("notice.form.content")},{default:t(()=>[e(H,{modelValue:r.value.content,"onUpdate:modelValue":l[1]||(l[1]=o=>r.value.content=o),placeholder:a.$t("notice.form.content.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(S,{field:"category",label:a.$t("notice.form.category")},{default:t(()=>[e(Q,{modelValue:r.value.category,"onUpdate:modelValue":l[2]||(l[2]=o=>r.value.category=o),placeholder:a.$t("notice.form.selectDefault"),options:s(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(S,{field:"remark",label:a.$t("notice.form.remark")},{default:t(()=>[e(H,{modelValue:r.value.remark,"onUpdate:modelValue":l[3]||(l[3]=o=>r.value.remark=o),placeholder:a.$t("notice.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(S,{field:"status",label:a.$t("notice.form.status")},{default:t(()=>[e(Q,{modelValue:r.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>r.value.status=o),placeholder:a.$t("notice.form.selectDefault"),options:s(ue),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(S,{field:"publish_time",label:a.$t("notice.form.publish_time")},{default:t(()=>[e(he,{modelValue:r.value.publish_time,"onUpdate:modelValue":l[5]||(l[5]=o=>r.value.publish_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(W,{style:{height:"84px"},direction:"vertical"}),e($,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Y,{direction:"vertical",size:18},{default:t(()=>[e(D,{type:"primary",onClick:N},{icon:t(()=>[e($e)]),default:t(()=>[m(" "+i(a.$t("notice.form.search")),1)]),_:1}),e(D,{onClick:pe},{icon:t(()=>[e(X)]),default:t(()=>[m(" "+i(a.$t("notice.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(O,{style:{"margin-bottom":"16px"}},{default:t(()=>[e($,{span:12},{default:t(()=>[e(Y,null,{default:t(()=>[e(D,{type:"primary",onClick:l[6]||(l[6]=o=>a.$router.push({name:"NoticeCreate"}))},{default:t(()=>[m(i(a.$t("notice.operation.create")),1)]),_:1}),e(D,{type:"primary",status:"success",disabled:I.value,title:I.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[7]||(l[7]=o=>J({action:"notice"}))},{default:t(()=>[m(" \u53D1\u9001\u901A\u77E5 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:I.value,title:I.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[8]||(l[8]=o=>J({action:"delete"}))},{default:t(()=>[m(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e($,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(q,{content:a.$t("actions.refresh")},{default:t(()=>[F("div",{class:"action-icon",onClick:N},[e(X,{size:"18"})])]),_:1},8,["content"]),e(De,{onSelect:me},{content:t(()=>[(n(!0),v(ee,null,te(s(se),o=>(n(),y(Ce,{key:o.value,value:o.value,class:Ge({active:o.value===b.value})},{default:t(()=>[F("span",null,i(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(q,{content:a.$t("actions.density")},{default:t(()=>[F("div",Ut,[e(we,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(q,{content:a.$t("actions.column_setting")},{default:t(()=>[e(Ie,{trigger:"click",position:"bl",onPopupVisibleChange:fe},{content:t(()=>[F("div",Tt,[(n(!0),v(ee,null,te(f.value,(o,z)=>(n(),v("div",{key:o.dataIndex,class:"setting"},[F("div",Ht,[e(xe)]),F("div",null,[e(Fe,{modelValue:o.checked,"onUpdate:modelValue":R=>o.checked=R,onChange:R=>_e(R,o,z)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),F("div",Ot,i(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:t(()=>[F("div",Pt,[e(Ve,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(Ne,{ref_key:"tableRef",ref:w,"row-key":"id",loading:s(U),pagination:B,columns:d.value,data:V.value,bordered:!1,size:b.value,"row-selection":u,onPageChange:re,onPageSizeChange:de,onSelectionChange:be},{category:t(({record:o})=>[m(i(a.$t(`notice.dict.category.${o.category}`)),1)]),scope:t(({record:o})=>[m(i(a.$t(`notice.dict.scope.${o.scope}`)),1)]),remark:t(({record:o})=>[m(i(o.remark||"-"),1)]),status:t(({record:o})=>[e(Ee,{color:o.status===1?"green":""},{default:t(()=>[m(i(a.$t(`notice.dict.status.${o.status}`)),1)]),_:2},1032,["color"])]),publish_time:t(({record:o})=>[m(i(o.publish_time||"-"),1)]),operations:t(({record:o})=>[e(D,{type:"text",size:"small",onClick:z=>ge(o.id)},{default:t(()=>[m(i(a.$t("operations.view")),1)]),_:2},1032,["onClick"]),e(D,{type:"text",size:"small",onClick:z=>a.$router.push({name:"NoticeUpdate",query:{id:`${o.id}`,action:"copy"}})},{default:t(()=>[m(i(a.$t("notice.columns.operations.copy")),1)]),_:2},1032,["onClick"]),e(D,{type:"text",size:"small",disabled:o.status===1,onClick:z=>a.$router.push({name:"NoticeUpdate",query:{id:`${o.id}`}})},{default:t(()=>[m(i(a.$t("notice.columns.operations.update")),1)]),_:2},1032,["disabled","onClick"]),e(Se,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:z=>ve({id:`${o.id}`})},{default:t(()=>[e(D,{type:"text",size:"small"},{default:t(()=>[m(i(a.$t("notice.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(ze,{title:a.$t("menu.notice.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:T.value,onCancel:ye},{default:t(()=>[e(At,{id:K.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const va=He(Rt,[["__scopeId","data-v-b22d1792"]]);export{va as default};

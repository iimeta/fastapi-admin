import{u as H,C as X,_ as j}from"./index.6bac872f.js";/* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                */import{d as Q,e as d,B as _,C as f,aH as t,aG as s,aL as m,aM as p,F as M,aJ as U,aI as q,aD as I,u as W,aK as Y,aF as Z,bJ as x,bF as ee,bG as ae,b2 as le,b1 as te,aS as oe,bO as se,bP as re,aT as ne,aU as de,bi as ue,b5 as ie,bN as me,bR as pe,g as ce}from"./arco.ba78a5b2.js";import{u as _e}from"./loading.0618e973.js";import{f as ye,h as fe}from"./vue.2736b3ca.js";import{e as be,c as ve}from"./key.2796a1e8.js";import{q as ge}from"./corp.0f6eef64.js";import{b as ke}from"./model.d7ccccd1.js";import{f as he}from"./agent.e88bc5c6.js";import"./chart.df189e8a.js";const we={class:"container"},Ve={class:"wrapper"},$e={class:"submit-btn"},Ce={name:"KeyUpdate"},Le=Q({...Ce,setup(Be){const{loading:D,setLoading:r}=_e(!1),{proxy:F}=ce(),K=ye(),S=fe(),{t:u}=H(),c=d([]),b=new Map;(async()=>{r(!0);try{const{data:a}=await ge();c.value=a.items;for(let e=0;e<c.value.length;e+=1)b.set(c.value[e].id,c.value[e])}catch{}finally{r(!1)}})();const i=d(u("key.placeholder.update.key")),v=async()=>{switch(b.get(l.value.corp).code){case"Baidu":i.value=u("key.placeholder.update.key.baidu");break;case"Xfyun":i.value=u("key.placeholder.update.key.xfyun");break;case"DeepSeek-Baidu":i.value=u("key.placeholder.update.key.deepseek.baidu");break;case"VolcEngine":i.value=u("key.placeholder.update.key.volcengine");break;default:i.value=u("key.placeholder.update.key")}},g=d([]);(async()=>{r(!0);try{const{data:a}=await ke();g.value=a.items}catch{}finally{r(!1)}})();const k=d([]);(async()=>{r(!0);try{const{data:a}=await he();k.value=a.items}catch{}finally{r(!1)}})();const h=d(),l=d({id:"",corp:"",key:"",weight:d(20),remark:"",status:1,models:[],model_agents:[],is_agents_only:!1,is_never_disable:!1}),A=async()=>{var e;if(!await((e=h.value)==null?void 0:e.validate())){r(!0);try{await be(l.value).then(()=>{F.$message.success("\u66F4\u65B0\u6210\u529F"),K.push({name:"ModelKeyList"})})}catch{}finally{r(!1)}}};return(async(a={id:S.query.id})=>{r(!0);try{const{data:e}=await ve(a);l.value.id=e.id,l.value.corp=e.corp,l.value.key=e.key,l.value.weight=e.weight,l.value.remark=e.remark,l.value.status=e.status,l.value.models=e.models,l.value.model_agents=e.model_agents,l.value.is_agents_only=e.is_agents_only,l.value.is_never_disable=e.is_never_disable,v()}catch{}finally{r(!1)}})(),(a,e)=>{const w=X,y=Y,R=Z,V=x,$=ee,C=ae,n=le,T=te,N=oe,O=se,P=re,L=ne,B=de,E=ue,G=ie,J=me,z=pe;return _(),f("div",we,[t(R,{class:"container-breadcrumb"},{default:s(()=>[t(y,null,{default:s(()=>[t(w)]),_:1}),t(y,null,{default:s(()=>[m(p(a.$t("menu.key")),1)]),_:1}),t(y,null,{default:s(()=>[m(p(a.$t("menu.key.update")),1)]),_:1})]),_:1}),t(z,{loading:W(D),style:{width:"100%"}},{default:s(()=>[t(J,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:s(()=>[M("div",Ve,[t(G,{ref_key:"formRef",ref:h,model:l.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:s(()=>[t(V,{orientation:"left"},{default:s(()=>[m(p(a.$t("common.title.baseInfo")),1)]),_:1}),t(n,{field:"corp",label:a.$t("key.label.corp"),rules:[{required:!0,message:a.$t("key.error.corp.required")}]},{default:s(()=>[t(C,{modelValue:l.value.corp,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.corp=o),placeholder:a.$t("key.placeholder.corp"),scrollbar:!1,"allow-search":"",onChange:v},{default:s(()=>[(_(!0),f(U,null,q(c.value,o=>(_(),I($,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"key",label:a.$t("key.label.key"),rules:[{required:!0,message:a.$t("key.error.key.required")}]},{default:s(()=>[t(T,{modelValue:l.value.key,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.key=o),placeholder:i.value,"auto-size":{minRows:5,maxRows:10},"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"weight",label:a.$t("model.agent.label.weight")},{default:s(()=>[t(N,{modelValue:l.value.weight,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.weight=o),placeholder:a.$t("model.agent.placeholder.weight"),precision:0,min:0,max:999},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"remark",label:a.$t("key.label.remark")},{default:s(()=>[t(O,{modelValue:l.value.remark,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.remark=o),placeholder:a.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(V,{orientation:"left"},{default:s(()=>[m(p(a.$t("common.title.advanced")),1)]),_:1}),t(n,{field:"models",label:a.$t("key.label.models")},{default:s(()=>[t(P,{modelValue:l.value.models,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.models=o),placeholder:a.$t("key.placeholder.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:g.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),t(n,{field:"model_agents",label:a.$t("key.label.modelAgents")},{default:s(()=>[t(C,{modelValue:l.value.model_agents,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.model_agents=o),placeholder:a.$t("key.placeholder.modelAgents"),"max-tag-count":3,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:s(()=>[(_(!0),f(U,null,q(k.value,o=>(_(),I($,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"is_agents_only",label:a.$t("key.label.isAgentsOnly")},{default:s(()=>[t(L,{modelValue:l.value.is_agents_only,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(n,{field:"is_never_disable",label:a.$t("key.label.is_never_disable")},{default:s(()=>[t(L,{modelValue:l.value.is_never_disable,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.is_never_disable=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(E,null,{default:s(()=>[M("div",$e,[t(B,{type:"secondary",onClick:e[8]||(e[8]=o=>a.$router.push({name:"ModelKeyList"}))},{default:s(()=>[m(p(a.$t("button.cancel")),1)]),_:1}),t(B,{type:"primary",onClick:A},{default:s(()=>[m(p(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ze=j(Le,[["__scopeId","data-v-703da2e4"]]);export{Ze as default};

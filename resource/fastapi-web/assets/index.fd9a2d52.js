import{u as ct,G as pt,p as ft,y as vt,i as yt,z as kt,_ as ht}from"./index.6c4129d6.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as Ue,e as w,w as Le,bS as ze,B as a,C as r,bu as k,aD as u,aG as e,aH as t,u as _,aL as d,aM as n,aE as bt,g as Me,bJ as gt,bK as wt,ad as Ft,bL as Et,bM as Ne,bN as $t,bi as Pe,bb as Ct,b6 as Dt,r as qe,c as _e,bq as Bt,b as Vt,aJ as T,aI as R,F as U,D as xt,bT as Ie,n as At,aK as qt,aF as It,bA as St,bB as Ut,b2 as Lt,bC as zt,b1 as Mt,bU as Nt,bD as Pt,aS as Tt,b5 as Rt,bE as Ht,ab as Ot,aU as Yt,bj as jt,bl as Jt,bm as Gt,b4 as Kt,bF as Qt,bH as Wt,aV as Xt,a_ as Zt,bI as ea}from"./arco.91d8d802.js";import{u as Te}from"./loading.d8a03711.js";import{q as ta}from"./common.df364eef.js";import{V as Se,q as aa,c as la,a as oa,s as ua,b as na}from"./styles.add524f4.js";import{g as sa}from"./app.efb153ba.js";import{b as ia}from"./dashboard.fdda96d4.js";import{c as me,S as da}from"./sortable.esm.2649578f.js";import{q as ra}from"./model.c6cbbe25.js";import{f as _a}from"./agent.3b6184d9.js";/* empty css               *//* empty css                *//* empty css                */import{u as ma}from"./vue.90059513.js";import"./chart.1c4d013e.js";const ca={style:{margin:"10px 0 30px 10px"}},pa={key:1},fa={key:1},va={key:1},ya={key:1},ka={key:1},ha={key:1},ba={key:1},ga={key:1},wa={key:1},Fa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ea={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},$a={key:1},Ca={key:1},Da={key:1},Ba={key:1},Va={key:1},xa={key:1},Aa={key:1},qa={key:1},Ia={key:1},Sa={key:1},Ua={key:1},La={key:1},za={key:1},Ma={key:1},Na={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Pa={key:1},Ta={key:1},Ra={key:1},Ha={key:1},Oa={key:1},Ya={key:1},ja={key:1},Ja={key:1},Ga={key:1},Ka={key:1},Qa={key:1},Wa={key:1},Xa={key:1},Za={key:1},el={key:1},tl={key:1},al={key:1},ll={key:1},ol={key:1},ul={key:1},nl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},sl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},il={key:1},dl={key:1},rl={key:1},_l={key:1},ml={key:1},cl={key:1},pl={key:1},fl={key:1},vl={key:1},yl={key:1},kl={key:1},hl={key:1},bl={key:1},gl={key:1},wl={key:1},Fl={key:1},El={key:1},$l={key:1},Cl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Dl={key:1},Bl={key:1},Vl={name:"ChatDetail"},xl=Ue({...Vl,props:{id:{type:String,default:""}},setup(ce){const q=ce,{loading:f,setLoading:H}=Te(!0),l=w({}),{copy:M,copied:oe}=ma(),{proxy:K}=Me();(async(g={id:q.id})=>{H(!0);try{const{data:y}=await aa(g);l.value=y}catch{}finally{H(!1)}})();const O=g=>{M(g)};Le(oe,()=>{oe.value&&K.$message.success("\u590D\u5236\u6210\u529F")});const Y=async(g,y)=>{const{data:m}=await la({id:g,field:y});M(m.value)};return(g,y)=>{const m=gt,i=wt,B=Ft,c=Et,v=Ne,x=$t,Q=Pe,N=Ct,I=Dt,S=ze("permission");return a(),r("div",ca,[k((a(),u(x,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",pa,[d(n(l.value.trace_id)+" ",1),t(B,{class:"copy-btn",onClick:y[0]||(y[0]=C=>O(l.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",fa,n(l.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",va,[d(n(l.value.creator)+" ",1),t(B,{class:"copy-btn",onClick:y[1]||(y[1]=C=>Y(l.value.id,"creator"))})]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",ya,n(l.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",ka,n(l.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u516C\u53F8"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ha,n(l.value.corp_name),1))]),_:1}),t(c,{label:"\u6A21\u578B"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ba,n(l.value.model||"-"),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ga,n(g.$t(`dict.model_type.${l.value.type}`)),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",wa,n(g.$t(`chat.dict.stream.${l.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Fa,n(l.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ea,n(l.value.completion||"-"),1))]),_:1}),t(c,{label:"\u63D0\u95EE\u500D\u7387"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",$a,n(l.value.type!==100?l.value.text_quota.prompt_ratio||"-":l.value.multimodal_quota.text_quota.prompt_ratio||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54\u500D\u7387",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ca,n(l.value.type!==100?l.value.text_quota.completion_ratio||"-":l.value.multimodal_quota.text_quota.completion_ratio||"-"),1))]),_:1}),t(c,{label:"\u63D0\u95EE\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Da,n(l.value.prompt_tokens||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54\u4EE4\u724C\u6570",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ba,n(l.value.completion_tokens||"-"),1))]),_:1}),t(c,{label:"\u7F13\u5B58\u5199\u5165\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Va,n(l.value.cache_write_tokens||"-"),1))]),_:1}),t(c,{label:"\u7F13\u5B58\u547D\u4E2D\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",xa,n(l.value.cache_hit_tokens||"-"),1))]),_:1}),t(c,{label:"\u641C\u7D22\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Aa,n(l.value.search_tokens||"-"),1))]),_:1}),t(c,{label:"\u82B1\u8D39\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",qa,n(l.value.total_tokens?l.value.total_tokens:l.value.status===1&&l.value.text_quota.billing_method===2?0:"-"),1))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ia,[l.value.conn_time>3e4?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>15e3?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>5e3?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.conn_time)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Sa,[l.value.duration>18e4?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>12e4?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>9e4?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.duration)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ua,[l.value.total_time>18e4?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>12e4?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>9e4?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.total_time)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",La,[l.value.status===1?(a(),u(v,{key:0,color:"green"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===2?(a(),u(v,{key:1,color:"gold"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===3?(a(),u(v,{key:2,color:"orange"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):(a(),u(v,{key:3,color:"red"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",za,n(l.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ma,n(l.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Na,n(l.value.err_msg||"-"),1))]),_:1})]),_:1})),[[S,["user"]]]),k((a(),u(x,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Pa,[d(n(l.value.trace_id)+" ",1),t(B,{class:"copy-btn",onClick:y[2]||(y[2]=C=>O(l.value.trace_id))})]))]),_:1}),t(c,{label:"Host"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ta,n(l.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ra,[d(n(l.value.is_smart_match?"-":l.value.creator)+" ",1),l.value.is_smart_match?bt("",!0):(a(),u(B,{key:0,class:"copy-btn",onClick:y[3]||(y[3]=C=>Y(l.value.id,"creator"))}))]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ha,n(l.value.is_smart_match?"-":l.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Oa,n(l.value.is_smart_match?"-":l.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u516C\u53F8"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ya,n(l.value.corp_name),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ja,n(g.$t(`dict.model_type.${l.value.type}`)),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ja,n(l.value.name||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ga,n(l.value.model||"-"),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Ka,n(l.value.real_model_name),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Qa,n(l.value.real_model),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Wa,n(g.$t(`chat.dict.stream.${l.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Xa,n(g.$t(`chat.dict.is_enable_fallback.${l.value.is_enable_fallback||!1}`)),1))]),_:1}),t(c,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var C,A;return[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Za,n(((A=(C=l.value)==null?void 0:C.fallback_config)==null?void 0:A.model_agent_name)||"-"),1))]}),_:1}),t(c,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var C,A;return[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",el,n(((A=(C=l.value)==null?void 0:C.fallback_config)==null?void 0:A.model)||"-"),1))]}),_:1}),t(c,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",tl,n(g.$t(`chat.dict.is_enable_forward.${l.value.is_enable_forward||!1}`)),1))]),_:1}),t(c,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",al,n(l.value.is_enable_forward?g.$t(`chat.dict.forward_rule.${l.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),t(c,{label:"\u542F\u7528\u4EE3\u7406",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ll,n(g.$t(`chat.dict.is_enable_model_agent.${l.value.is_enable_model_agent||!1}`)),1))]),_:1}),t(c,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var C,A;return[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",ol,n(((A=(C=l.value)==null?void 0:C.model_agent)==null?void 0:A.name)||"-"),1))]}),_:1}),t(c,{label:"\u5BC6\u94A5"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ul,[d(n(l.value.key?l.value.key.length>0?l.value.key.substr(0,l.value.key.length/2>10?10:l.value.key.length/2)+"************************************"+l.value.key.substr(-(l.value.key.length/2>5?5:l.value.key.length/2)):l.value.key:"-")+" ",1),t(B,{class:"copy-btn",onClick:y[4]||(y[4]=C=>Y(l.value.id,"key"))})]))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",nl,n(l.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",sl,n(l.value.completion||"-"),1))]),_:1}),t(c,{label:"\u63D0\u95EE\u500D\u7387",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",il,n(l.value.type!==100?l.value.text_quota.prompt_ratio||"-":l.value.multimodal_quota.text_quota.prompt_ratio||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54\u500D\u7387"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",dl,n(l.value.type!==100?l.value.text_quota.completion_ratio||"-":l.value.multimodal_quota.text_quota.completion_ratio||"-"),1))]),_:1}),t(c,{label:"\u63D0\u95EE\u4EE4\u724C\u6570",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",rl,n(l.value.prompt_tokens||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",_l,n(l.value.completion_tokens||"-"),1))]),_:1}),t(c,{label:"\u7F13\u5B58\u5199\u5165\u4EE4\u724C\u6570",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",ml,n(l.value.cache_write_tokens||"-"),1))]),_:1}),t(c,{label:"\u7F13\u5B58\u547D\u4E2D\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",cl,n(l.value.cache_hit_tokens||"-"),1))]),_:1}),t(c,{label:"\u641C\u7D22\u4EE4\u724C\u6570",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",pl,n(l.value.search_tokens||"-"),1))]),_:1}),t(c,{label:"\u82B1\u8D39\u4EE4\u724C\u6570"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",fl,n(l.value.total_tokens?l.value.total_tokens:l.value.status===1&&l.value.text_quota.billing_method===2?0:"-"),1))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",vl,[l.value.conn_time>1e4?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>5e3?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>3e3?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.conn_time)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",yl,[l.value.duration>12e4?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>9e4?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>6e4?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.duration)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",kl,[l.value.total_time>12e4?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>9e4?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>6e4?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.total_time)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u5185\u8017"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",hl,[l.value.internal_time>500?(a(),u(v,{key:0,color:"red"},{default:e(()=>[d(n(l.value.internal_time)+" ms ",1)]),_:1})):l.value.internal_time>300?(a(),u(v,{key:1,color:"orange"},{default:e(()=>[d(n(l.value.internal_time)+" ms ",1)]),_:1})):l.value.internal_time>100?(a(),u(v,{key:2,color:"gold"},{default:e(()=>[d(n(l.value.internal_time)+" ms ",1)]),_:1})):(a(),u(v,{key:3,color:"green"},{default:e(()=>[d(n(l.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",bl,[l.value.status===1?(a(),u(v,{key:0,color:"green"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===2?(a(),u(v,{key:1,color:"gold"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===3?(a(),u(v,{key:2,color:"orange"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):(a(),u(v,{key:3,color:"red"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u672C\u5730IP"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",gl,n(l.value.local_ip||"-"),1))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",wl,n(l.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8FDC\u7A0BIP",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Fl,n(l.value.remote_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",El,n(l.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",$l,n(l.value.created_at||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F",span:2},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:1})]),_:1})):(a(),r("span",Cl,n(l.value.err_msg||"-"),1))]),_:1})]),_:1})),[[S,["admin"]]]),t(x,{layout:"inline-vertical",column:2,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,{span:2},{default:e(()=>[t(I,{type:"card"},{default:e(()=>[t(N,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:3})]),_:1})):(a(),u(Q,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[l.value.messages?(a(),u(_(Se),{key:0,path:"res",data:l.value.messages,"show-length":!0},null,8,["data"])):(a(),r("span",Dl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),k((a(),u(x,{layout:"inline-vertical",column:2,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,{span:2},{default:e(()=>[t(I,{type:"card"},{default:e(()=>[t(N,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[_(f)?(a(),u(i,{key:0,animation:!0},{default:e(()=>[t(m,{rows:3})]),_:1})):(a(),u(Q,{key:1},{default:e(()=>[l.value.model_agent?(a(),u(_(Se),{key:0,data:l.value.model_agent,"show-length":!0},null,8,["data"])):(a(),r("span",Bl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[S,["admin"]]])])}}}),Al={class:"container"},ql={class:"action-icon"},Il={class:"action-icon"},Sl={id:"tableSetting"},Ul={style:{"margin-right":"4px",cursor:"move"}},Ll={class:"title"},zl={name:"ChatList"},Ml=Ue({...zl,setup(ce){const q=localStorage.getItem("userRole"),f=qe({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),H=w([]);q==="user"&&(async()=>{try{const{data:s}=await sa();H.value=s.items}catch{}})();const M=w([]);(async()=>{try{const{data:s}=await ra();M.value=s.items}catch{}})();const K=w([]);q==="admin"&&(async()=>{try{const{data:s}=await _a();K.value=s.items}catch{}})();const O=()=>({app_id:w(),trace_id:w(),user_id:w(),key:"",models:[],model_agents:[],total_time:w(),status:w(),req_time:[Ie().format("YYYY-MM-DD 00:00:00"),Ie().format("YYYY-MM-DD 23:59:59")]}),{loading:Y,setLoading:g}=Te(!0),{t:y}=ct(),m=w([]),i=w(O()),B=w([]),c=w([]),v=w("medium"),x=w([]),Q=w(!0),N=w(),I={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},S=qe({...I}),C=_e(()=>[{name:y("size.mini"),value:"mini"},{name:y("size.small"),value:"small"},{name:y("size.medium"),value:"medium"},{name:y("size.large"),value:"large"}]),A=_e(()=>[{title:y(q==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:q==="admin"?"user_id":"app_id",slotName:q==="admin"?"user_id":"app_id",align:"center",width:75},{title:y("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:y("chat.columns.prompt_tokens"),dataIndex:"prompt_tokens",slotName:"prompt_tokens",align:"center",width:75},{title:y("chat.columns.completion_tokens"),dataIndex:"completion_tokens",slotName:"completion_tokens",align:"center",width:75},{title:y("chat.columns.total_price"),dataIndex:"total_tokens",slotName:"total_tokens",align:"center"},{title:y("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:y("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:y("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:y("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center"},{title:y("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:y("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:y("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:y("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);q==="user"&&A.value.splice(9,1);const ue=_e(()=>[{label:y("chat.dict.status.1"),value:1},{label:y("chat.dict.status.2"),value:2},{label:y("chat.dict.status.-1"),value:-1}]);q==="admin"&&ue.value.push({label:y("chat.dict.status.3"),value:3},{label:y("chat.dict.status.-100"),value:-100});const W=async(s={...I,...i.value})=>{g(!0);try{const{data:p}=await oa(s);m.value=p.items,S.current=s.current,S.pageSize=s.pageSize,S.total=p.paging.total}catch{}finally{g(!1)}},ne=()=>{W({...I,...i.value})},He=s=>{W({...I,...i.value,current:s})},Oe=s=>{I.pageSize=s,W({...I,...i.value})};W();const Ye=()=>{i.value=O()},je=(s,p)=>{v.value=s},Je=(s,p,E)=>{s?B.value.splice(E,0,p):B.value=c.value.filter(V=>V.dataIndex!==p.dataIndex)},pe=(s,p,E,V=!1)=>{const D=V?me(s):s;return p>-1&&E>-1&&D.splice(p,1,D.splice(E,1,D[p]).pop()),D},Ge=s=>{s&&At(()=>{const p=document.getElementById("tableSetting");new da(p,{onEnd(E){const{oldIndex:V,newIndex:D}=E;pe(B.value,V,D),pe(c.value,V,D)}})})};Le(()=>A.value,s=>{B.value=me(s),B.value.forEach((p,E)=>{p.checked=!0}),c.value=me(B.value)},{deep:!0,immediate:!0});const{proxy:X}=Me(),se=w(!1),fe=w(),Ke=s=>{se.value=!0,fe.value=s},Qe=()=>{se.value=!1},ve=w(0),ye=w(0),ke=async(s={...i.value})=>{const{data:p}=await ia(s);ve.value=p.rpm,ye.value=p.tpm};ke();let he;const be=()=>{clearInterval(he)},ge=()=>{he=setInterval(ke,3e3)},we=()=>{document.visibilityState==="hidden"?be():ge()};Bt(()=>{ge(),document.addEventListener("visibilitychange",we)}),Vt(()=>{be(),document.removeEventListener("visibilitychange",we)});const Fe=w(),j=w(!1),L=w({}),We=async s=>{var E;if(await((E=Fe.value)==null?void 0:E.validate())){j.value=!0,s(!1);return}s(),Ee({req_time:L.value.req_time,user_id:L.value.user_id})},Xe=()=>{j.value=!1},Ee=s=>{if(x.value.length===0&&!s.req_time){j.value=!0;return}g(!0),s.ids=x.value,ua(s).then(p=>{g(!1),X.$message.success("\u5BFC\u51FA\u6210\u529F"),N.value.selectAll(!1);const E=new Blob([p.data],{type:"application/vnd.ms-excel"}),V=window.URL.createObjectURL(E),D=document.createElement("a");D.href=V,D.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(D),D.click(),document.body.removeChild(D),window.URL.revokeObjectURL(V)}).catch(p=>{X.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",p)})},$e=w(),J=w(!1),z=w({}),Ze=async s=>{var E;if(await((E=$e.value)==null?void 0:E.validate())){J.value=!0,s(!1);return}s(),Ce({action:"time",value:z.value.value,user_id:z.value.user_id})},et=()=>{J.value=!1},tt=s=>{x.value=s,Q.value=!s.length},Ce=s=>{if(x.value.length===0&&!s.value)J.value=!0;else{let p=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${x.value.length}\u6761\u6570\u636E?`;switch(s.action){case"delete":p=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${x.value.length}\u6761\u6570\u636E?`;break;case"time":s.user_id?p=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${s.user_id} \u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`:p=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`;break}X.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:p,hideCancel:!1,onOk:()=>{g(!0),s.ids=x.value,na(s).then(E=>{g(!1),X.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),ne(),N.value.selectAll(!1)})}})}};return(s,p)=>{const E=pt,V=qt,D=It,Z=St,P=Ut,$=Lt,F=zt,ee=Mt,te=Nt,ae=Pt,le=Tt,ie=Rt,De=Ht,at=Ot,G=Yt,Be=ft,Ve=Pe,de=jt,lt=vt,ot=Jt,ut=Gt,nt=yt,st=kt,it=Kt,dt=Qt,h=Ne,rt=Wt,_t=Xt,xe=Zt,mt=ea,b=ze("permission");return a(),r("div",Al,[t(D,{class:"container-breadcrumb"},{default:e(()=>[t(V,null,{default:e(()=>[t(E)]),_:1}),t(V,null,{default:e(()=>[d(n(s.$t("menu.chat")),1)]),_:1}),t(V,null,{default:e(()=>[d(n(s.$t("menu.chat.list")),1)]),_:1})]),_:1}),t(mt,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[t(ae,null,{default:e(()=>[t(F,{flex:1},{default:e(()=>[t(ie,{model:i.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[k((a(),u(ae,{gutter:16},{default:e(()=>[t(F,{span:8},{default:e(()=>[t($,{field:"app_id",label:s.$t("chat.form.app_id")},{default:e(()=>[t(P,{modelValue:i.value.app_id,"onUpdate:modelValue":p[0]||(p[0]=o=>i.value.app_id=o),placeholder:s.$t("chat.form.selectDefault"),"allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(T,null,R(H.value,o=>(a(),u(Z,{key:o.app_id,value:o.app_id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"key",label:s.$t("chat.form.key")},{default:e(()=>[t(ee,{modelValue:i.value.key,"onUpdate:modelValue":p[1]||(p[1]=o=>i.value.key=o),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(ee,{modelValue:i.value.trace_id,"onUpdate:modelValue":p[2]||(p[2]=o=>i.value.trace_id=o),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"models",label:s.$t("chat.form.models")},{default:e(()=>[t(P,{modelValue:i.value.models,"onUpdate:modelValue":p[3]||(p[3]=o=>i.value.models=o),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(T,null,R(M.value,o=>(a(),u(Z,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"status",label:s.$t("chat.form.status")},{default:e(()=>[t(P,{modelValue:i.value.status,"onUpdate:modelValue":p[4]||(p[4]=o=>i.value.status=o),options:_(ue),placeholder:s.$t("chat.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(te,{modelValue:i.value.req_time,"onUpdate:modelValue":p[5]||(p[5]=o=>i.value.req_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[b,["user"]]]),k((a(),u(ae,{gutter:16},{default:e(()=>[t(F,{span:5},{default:e(()=>[t($,{field:"trace_id",label:s.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[t(ee,{modelValue:i.value.trace_id,"onUpdate:modelValue":p[6]||(p[6]=o=>i.value.trace_id=o),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:6},{default:e(()=>[t($,{field:"models",label:s.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[t(P,{modelValue:i.value.models,"onUpdate:modelValue":p[7]||(p[7]=o=>i.value.models=o),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(T,null,R(M.value,o=>(a(),u(Z,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:5},{default:e(()=>[t($,{field:"key",label:s.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[t(ee,{modelValue:i.value.key,"onUpdate:modelValue":p[8]||(p[8]=o=>i.value.key=o),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(le,{modelValue:i.value.total_time,"onUpdate:modelValue":p[9]||(p[9]=o=>i.value.total_time=o),precision:0,min:1,placeholder:s.$t("chat.form.total_time.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:5},{default:e(()=>[t($,{field:"user_id",label:s.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[t(le,{modelValue:i.value.user_id,"onUpdate:modelValue":p[10]||(p[10]=o=>i.value.user_id=o),placeholder:s.$t("chat.form.user_id.placeholder"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:6},{default:e(()=>[t($,{field:"model_agents",label:s.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[t(P,{modelValue:i.value.model_agents,"onUpdate:modelValue":p[11]||(p[11]=o=>i.value.model_agents=o),placeholder:s.$t("key.form.selectDefault"),"max-tag-count":1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(T,null,R(K.value,o=>(a(),u(Z,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:5},{default:e(()=>[t($,{field:"status",label:s.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[t(P,{modelValue:i.value.status,"onUpdate:modelValue":p[12]||(p[12]=o=>i.value.status=o),options:_(ue),placeholder:s.$t("chat.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(F,{span:8},{default:e(()=>[t($,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(te,{modelValue:i.value.req_time,"onUpdate:modelValue":p[13]||(p[13]=o=>i.value.req_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[b,["admin"]]])]),_:1},8,["model"])]),_:1}),t(De,{style:{height:"84px"},direction:"vertical"}),t(F,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[t(Ve,{direction:"vertical",size:18},{default:e(()=>[t(G,{type:"primary",onClick:ne},{icon:e(()=>[t(at)]),default:e(()=>[d(" "+n(s.$t("chat.form.search")),1)]),_:1}),t(G,{onClick:Ye},{icon:e(()=>[t(Be)]),default:e(()=>[d(" "+n(s.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(ae,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[t(F,{span:4},{default:e(()=>[t(Ve,null,{default:e(()=>[t(G,{type:"primary",onClick:p[14]||(p[14]=o=>Ee({}))},{default:e(()=>[d(" \u5BFC\u51FA ")]),_:1}),k((a(),u(G,{type:"primary",status:"danger",onClick:p[15]||(p[15]=o=>Ce({action:"delete"}))},{default:e(()=>[d(" \u5220\u9664 ")]),_:1})),[[b,["admin"]]])]),_:1})]),_:1}),t(F,{span:12},{default:e(()=>[d(" \u82B1\u8D39 = ( \u63D0\u95EE \xD7 \u63D0\u95EE\u500D\u7387 + \u56DE\u7B54 \xD7 \u56DE\u7B54\u500D\u7387 ) \xF7 500000 \xA0\xA0\u6216\xA0\xA0 \u56DE\u7B54 \xF7 500000 ")]),_:1}),t(F,{span:3},{default:e(()=>[d(" RPM: \xA0"+n(ve.value.toLocaleString()),1)]),_:1}),t(F,{span:3},{default:e(()=>[d(" TPM: \xA0"+n(ye.value.toLocaleString()),1)]),_:1}),t(F,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[t(de,{content:s.$t("actions.refresh")},{default:e(()=>[U("div",{class:"action-icon",onClick:ne},[t(Be,{size:"18"})])]),_:1},8,["content"]),t(ut,{onSelect:je},{content:e(()=>[(a(!0),r(T,null,R(_(C),o=>(a(),u(ot,{key:o.value,value:o.value,class:xt({active:o.value===v.value})},{default:e(()=>[U("span",null,n(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[t(de,{content:s.$t("actions.density")},{default:e(()=>[U("div",ql,[t(lt,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(de,{content:s.$t("actions.column_setting")},{default:e(()=>[t(dt,{trigger:"click",position:"bl",onPopupVisibleChange:Ge},{content:e(()=>[U("div",Sl,[(a(!0),r(T,null,R(c.value,(o,Ae)=>(a(),r("div",{key:o.dataIndex,class:"setting"},[U("div",Ul,[t(st)]),U("div",null,[t(it,{modelValue:o.checked,"onUpdate:modelValue":re=>o.checked=re,onChange:re=>Je(re,o,Ae)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),U("div",Ll,n(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:e(()=>[U("div",Il,[t(nt,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t(rt,{ref_key:"tableRef",ref:N,"row-key":"id",loading:_(Y),pagination:S,columns:B.value,data:m.value,bordered:!1,size:v.value,"row-selection":f,onPageChange:He,onPageSizeChange:Oe,onSelectionChange:tt},{user_id:e(({record:o})=>[d(n(o.is_smart_match?"-":o.user_id),1)]),prompt_tokens:e(({record:o})=>[d(n(o.prompt_tokens?o.prompt_tokens:o.status===1&&o.billing_method===2?0:"-"),1)]),completion_tokens:e(({record:o})=>[d(n(o.completion_tokens?o.completion_tokens:o.status===1&&o.billing_method===2?0:"-"),1)]),total_tokens:e(({record:o})=>[d(n(o.total_tokens?`$${_(ta)(o.total_tokens)}`:o.status===1&&o.billing_method===2?0:"-"),1)]),stream:e(({record:o})=>[d(n(s.$t(`chat.dict.stream.${o.stream||!1}`)),1)]),conn_time:e(({record:o})=>[o.conn_time>3e4?k((a(),u(h,{key:0,color:"red"},{default:e(()=>[d(n(o.conn_time),1)]),_:2},1024)),[[b,["user"]]]):o.conn_time>15e3?k((a(),u(h,{key:1,color:"orange"},{default:e(()=>[d(n(o.conn_time),1)]),_:2},1024)),[[b,["user"]]]):o.conn_time>5e3?k((a(),u(h,{key:2,color:"gold"},{default:e(()=>[d(n(o.conn_time),1)]),_:2},1024)),[[b,["user"]]]):k((a(),u(h,{key:3,color:"green"},{default:e(()=>[d(n(o.conn_time||"-"),1)]),_:2},1024)),[[b,["user"]]]),o.conn_time>1e4?k((a(),u(h,{key:4,color:"red"},{default:e(()=>[d(n(o.conn_time),1)]),_:2},1024)),[[b,["admin"]]]):o.conn_time>5e3?k((a(),u(h,{key:5,color:"orange"},{default:e(()=>[d(n(o.conn_time),1)]),_:2},1024)),[[b,["admin"]]]):o.conn_time>3e3?k((a(),u(h,{key:6,color:"gold"},{default:e(()=>[d(n(o.conn_time),1)]),_:2},1024)),[[b,["admin"]]]):k((a(),u(h,{key:7,color:"green"},{default:e(()=>[d(n(o.conn_time||"-"),1)]),_:2},1024)),[[b,["admin"]]])]),duration:e(({record:o})=>[o.duration>18e4?k((a(),u(h,{key:0,color:"red"},{default:e(()=>[d(n(o.duration),1)]),_:2},1024)),[[b,["user"]]]):o.duration>12e4?k((a(),u(h,{key:1,color:"orange"},{default:e(()=>[d(n(o.duration),1)]),_:2},1024)),[[b,["user"]]]):o.duration>9e4?k((a(),u(h,{key:2,color:"gold"},{default:e(()=>[d(n(o.duration),1)]),_:2},1024)),[[b,["user"]]]):k((a(),u(h,{key:3,color:"green"},{default:e(()=>[d(n(o.duration||"-"),1)]),_:2},1024)),[[b,["user"]]]),o.duration>12e4?k((a(),u(h,{key:4,color:"red"},{default:e(()=>[d(n(o.duration),1)]),_:2},1024)),[[b,["admin"]]]):o.duration>9e4?k((a(),u(h,{key:5,color:"orange"},{default:e(()=>[d(n(o.duration),1)]),_:2},1024)),[[b,["admin"]]]):o.duration>6e4?k((a(),u(h,{key:6,color:"gold"},{default:e(()=>[d(n(o.duration),1)]),_:2},1024)),[[b,["admin"]]]):k((a(),u(h,{key:7,color:"green"},{default:e(()=>[d(n(o.duration||"-"),1)]),_:2},1024)),[[b,["admin"]]])]),total_time:e(({record:o})=>[o.total_time>18e4?k((a(),u(h,{key:0,color:"red"},{default:e(()=>[d(n(o.total_time),1)]),_:2},1024)),[[b,["user"]]]):o.total_time>12e4?k((a(),u(h,{key:1,color:"orange"},{default:e(()=>[d(n(o.total_time),1)]),_:2},1024)),[[b,["user"]]]):o.total_time>9e4?k((a(),u(h,{key:2,color:"gold"},{default:e(()=>[d(n(o.total_time),1)]),_:2},1024)),[[b,["user"]]]):k((a(),u(h,{key:3,color:"green"},{default:e(()=>[d(n(o.total_time||"-"),1)]),_:2},1024)),[[b,["user"]]]),o.total_time>12e4?k((a(),u(h,{key:4,color:"red"},{default:e(()=>[d(n(o.total_time),1)]),_:2},1024)),[[b,["admin"]]]):o.total_time>9e4?k((a(),u(h,{key:5,color:"orange"},{default:e(()=>[d(n(o.total_time),1)]),_:2},1024)),[[b,["admin"]]]):o.total_time>6e4?k((a(),u(h,{key:6,color:"gold"},{default:e(()=>[d(n(o.total_time),1)]),_:2},1024)),[[b,["admin"]]]):k((a(),u(h,{key:7,color:"green"},{default:e(()=>[d(n(o.total_time||"-"),1)]),_:2},1024)),[[b,["admin"]]])]),internal_time:e(({record:o})=>[o.internal_time>1e3?k((a(),u(h,{key:0,color:"red"},{default:e(()=>[d(n(o.internal_time),1)]),_:2},1024)),[[b,["user"]]]):o.internal_time>500?k((a(),u(h,{key:1,color:"orange"},{default:e(()=>[d(n(o.internal_time),1)]),_:2},1024)),[[b,["user"]]]):o.internal_time>300?k((a(),u(h,{key:2,color:"gold"},{default:e(()=>[d(n(o.internal_time),1)]),_:2},1024)),[[b,["user"]]]):k((a(),u(h,{key:3,color:"green"},{default:e(()=>[d(n(o.internal_time||"-"),1)]),_:2},1024)),[[b,["user"]]]),o.internal_time>500?k((a(),u(h,{key:4,color:"red"},{default:e(()=>[d(n(o.internal_time),1)]),_:2},1024)),[[b,["admin"]]]):o.internal_time>300?k((a(),u(h,{key:5,color:"orange"},{default:e(()=>[d(n(o.internal_time),1)]),_:2},1024)),[[b,["admin"]]]):o.internal_time>100?k((a(),u(h,{key:6,color:"gold"},{default:e(()=>[d(n(o.internal_time),1)]),_:2},1024)),[[b,["admin"]]]):k((a(),u(h,{key:7,color:"green"},{default:e(()=>[d(n(o.internal_time||"-"),1)]),_:2},1024)),[[b,["admin"]]])]),status:e(({record:o})=>[o.status===-1?(a(),u(h,{key:0,color:"red"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024)):o.status===2?(a(),u(h,{key:1,color:"gold"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024)):o.status===3?(a(),u(h,{key:2,color:"orange"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024)):(a(),u(h,{key:3,color:"green"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024))]),operations:e(({record:o})=>[t(G,{type:"text",size:"small",onClick:Ae=>Ke(o.id)},{default:e(()=>[d(n(s.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),t(_t,{title:s.$t("menu.chat.detail"),width:700,footer:!1,visible:se.value,"unmount-on-close":"","render-to-body":"",onCancel:Qe},{default:e(()=>[t(xl,{id:fe.value},null,8,["id"])]),_:1},8,["title","visible"]),t(xe,{visible:j.value,"onUpdate:visible":p[18]||(p[18]=o=>j.value=o),title:s.$t("chat.form.title.chat_export"),onCancel:Xe,onBeforeOk:We},{default:e(()=>[t(ie,{ref_key:"chatExportForm",ref:Fe,model:L.value},{default:e(()=>[t($,{field:"req_time",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(te,{modelValue:L.value.req_time,"onUpdate:modelValue":p[16]||(p[16]=o=>L.value.req_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),k((a(),u($,{field:"user_id",label:s.$t("chat.form.user_id")},{default:e(()=>[t(le,{modelValue:L.value.user_id,"onUpdate:modelValue":p[17]||(p[17]=o=>L.value.user_id=o),placeholder:s.$t("chat.form.user_id.placeholder"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[b,["admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(xe,{visible:J.value,"onUpdate:visible":p[21]||(p[21]=o=>J.value=o),title:s.$t("chat.form.title.chat_del"),onCancel:et,onBeforeOk:Ze},{default:e(()=>[t(ie,{ref_key:"chatDelForm",ref:$e,model:z.value},{default:e(()=>[t($,{field:"value",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(te,{modelValue:z.value.value,"onUpdate:modelValue":p[19]||(p[19]=o=>z.value.value=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),t($,{field:"user_id",label:s.$t("chat.form.user_id")},{default:e(()=>[t(le,{modelValue:z.value.user_id,"onUpdate:modelValue":p[20]||(p[20]=o=>z.value.user_id=o),placeholder:s.$t("chat.form.user_id.placeholder"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const go=ht(Ml,[["__scopeId","data-v-38fda89e"]]);export{go as default};

import{u as be,F as he,p as ye,y as we,i as ke,z as Ce,_ as xe}from"./index.9262e174.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Ie,r as R,e as d,c as $,w as Se,bS as ze,B as p,C as b,aH as e,aG as t,aL as f,aM as u,bu as U,aD as E,u as h,F as _,aJ as A,aI as T,D as $e,n as Ve,aK as De,aF as qe,aS as Be,b2 as Fe,bC as Ne,bB as Pe,bU as Le,bD as Re,b5 as Ue,bE as Ee,ab as Ae,aU as Te,bi as He,bj as Me,bl as je,bm as Oe,b4 as Ge,bF as Je,bH as Ke,bI as We}from"./arco.75032696.js";import{u as Qe}from"./loading.96e1cbd7.js";import{q as H}from"./common.df364eef.js";import{b as Xe}from"./finance.1b8cf276.js";import{c as V,S as Ye}from"./sortable.esm.95f7b760.js";import"./chart.f8f3ffb1.js";import"./vue.ebfaaf45.js";const Ze={class:"container"},et={class:"action-icon"},tt={class:"action-icon"},at={id:"tableSetting"},nt={style:{"margin-right":"4px",cursor:"move"}},ot={class:"title"},lt={key:0,class:"circle red"},st={key:1,class:"circle"},ct={name:"DealRecordList"},it=Ie({...ct,setup(rt){const M=R({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),j=()=>({user_id:d(),status:d(),created_at:[]}),{loading:O,setLoading:D}=Qe(!0),{t:l}=be(),q=d([]),s=d(j()),m=d([]),y=d([]),C=d("medium"),B=d(),g={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},w=R({...g}),G=$(()=>[{name:l("size.mini"),value:"mini"},{name:l("size.small"),value:"small"},{name:l("size.medium"),value:"medium"},{name:l("size.large"),value:"large"}]),J=$(()=>[{title:l("finance.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center"},{title:l("finance.columns.quota"),dataIndex:"quota",slotName:"quota",align:"center"},{title:l("finance.columns.type"),dataIndex:"type",slotName:"type",align:"center"},{title:l("finance.columns.status"),dataIndex:"status",slotName:"status",align:"center"},{title:l("finance.columns.created_at"),dataIndex:"created_at",slotName:"created_at",align:"center"}]),K=$(()=>[{label:l("finance.dict.status.1"),value:1}]),k=async(a={...g})=>{D(!0);try{const{data:o}=await Xe(a);q.value=o.items,w.current=a.current,w.pageSize=a.pageSize,w.total=o.paging.total}catch{}finally{D(!1),B.value.selectAll(!1)}},F=()=>{k({...g,...s.value})},W=a=>{k({...g,...s.value,current:a})},Q=a=>{g.pageSize=a,k({...g,...s.value})};k();const X=(a,o)=>{C.value=a},Y=(a,o,i)=>{a?m.value.splice(i,0,o):m.value=y.value.filter(c=>c.dataIndex!==o.dataIndex)},N=(a,o,i,c=!1)=>{const r=c?V(a):a;return o>-1&&i>-1&&r.splice(o,1,r.splice(i,1,r[o]).pop()),r},Z=a=>{a&&Ve(()=>{const o=document.getElementById("tableSetting");new Ye(o,{onEnd(i){const{oldIndex:c,newIndex:r}=i;N(m.value,c,r),N(y.value,c,r)}})})};return Se(()=>J.value,a=>{m.value=V(a),m.value.forEach((o,i)=>{o.checked=!0}),y.value=V(m.value)},{deep:!0,immediate:!0}),(a,o)=>{const i=he,c=De,r=qe,ee=Be,x=Fe,v=Ne,te=Pe,ae=Le,I=Re,ne=Ue,P=Ee,oe=Ae,le=Te,se=He,ce=ye,S=Me,ie=we,re=je,ue=Oe,de=ke,pe=Ce,_e=Ge,me=Je,fe=Ke,ge=We,L=ze("permission");return p(),b("div",Ze,[e(r,{class:"container-breadcrumb"},{default:t(()=>[e(c,null,{default:t(()=>[e(i)]),_:1}),e(c,null,{default:t(()=>[f(u(a.$t("menu.finance")),1)]),_:1}),e(c,null,{default:t(()=>[f(u(a.$t("menu.deal_record.list")),1)]),_:1})]),_:1}),e(ge,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[U((p(),E(I,null,{default:t(()=>[e(v,{flex:1},{default:t(()=>[e(ne,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(I,{gutter:16},{default:t(()=>[e(v,{span:8},{default:t(()=>[e(x,{field:"name",label:a.$t("finance.form.user_id")},{default:t(()=>[e(ee,{modelValue:s.value.user_id,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value.user_id=n),placeholder:a.$t("finance.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(v,{span:8},{default:t(()=>[e(x,{field:"status",label:a.$t("finance.form.status")},{default:t(()=>[e(te,{modelValue:s.value.status,"onUpdate:modelValue":o[1]||(o[1]=n=>s.value.status=n),placeholder:a.$t("finance.form.selectDefault"),options:h(K),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(v,{span:8},{default:t(()=>[e(x,{field:"created_at",label:a.$t("finance.form.created_at")},{default:t(()=>[e(ae,{modelValue:s.value.created_at,"onUpdate:modelValue":o[2]||(o[2]=n=>s.value.created_at=n),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{style:{height:"32px"},direction:"vertical"}),e(v,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(se,{direction:"vertical",size:18},{default:t(()=>[e(le,{type:"primary",onClick:F},{icon:t(()=>[e(oe)]),default:t(()=>[f(" "+u(a.$t("finance.form.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})),[[L,["reseller","admin"]]]),U(e(P,{style:{"margin-top":"0","margin-bottom":"16px"}},null,512),[[L,["reseller","admin"]]]),e(I,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(v,{span:24,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(S,{content:a.$t("actions.refresh")},{default:t(()=>[_("div",{class:"action-icon",onClick:F},[e(ce,{size:"18"})])]),_:1},8,["content"]),e(ue,{onSelect:X},{content:t(()=>[(p(!0),b(A,null,T(h(G),n=>(p(),E(re,{key:n.value,value:n.value,class:$e({active:n.value===C.value})},{default:t(()=>[_("span",null,u(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(S,{content:a.$t("actions.density")},{default:t(()=>[_("div",et,[e(ie,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(S,{content:a.$t("actions.column_setting")},{default:t(()=>[e(me,{trigger:"click",position:"bl",onPopupVisibleChange:Z},{content:t(()=>[_("div",at,[(p(!0),b(A,null,T(y.value,(n,ve)=>(p(),b("div",{key:n.dataIndex,class:"setting"},[_("div",nt,[e(pe)]),_("div",null,[e(_e,{modelValue:n.checked,"onUpdate:modelValue":z=>n.checked=z,onChange:z=>Y(z,n,ve)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_("div",ot,u(n.title==="#"?"\u5E8F\u5217\u53F7":n.title),1)]))),128))])]),default:t(()=>[_("div",tt,[e(de,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(fe,{ref_key:"tableRef",ref:B,"row-key":"id",loading:h(O),pagination:w,columns:m.value,data:q.value,bordered:!1,size:C.value,"row-selection":M,onPageChange:W,onPageSizeChange:Q},{quota:t(({record:n})=>[f(u(n.quota>0?`$${h(H)(n.quota)}`:n.quota<0?`-$${h(H)(-n.quota)}`:"$0.00"),1)]),type:t(({record:n})=>[f(u(a.$t(`finance.dict.deal_type.${n.type?n.type:n.quota>0?1:2}`)),1)]),remark:t(({record:n})=>[f(u(n.remark||"-"),1)]),status:t(({record:n})=>[n.status===2?(p(),b("span",lt)):(p(),b("span",st)),f(" "+u(a.$t(`finance.dict.status.${n.status}`)),1)]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Lt=xe(it,[["__scopeId","data-v-3ac5d4f9"]]);export{Lt as default};

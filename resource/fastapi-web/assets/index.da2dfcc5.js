import{u as K,x as G,_ as H}from"./index.b24b4575.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as J,e as p,B as _,C as M,aH as t,aG as r,aL as d,aM as i,F as q,aJ as Q,aI as X,aD as j,u as W,aK as Y,aF as Z,bE as x,bA as ee,bB as ae,b2 as le,b1 as te,aS as oe,bO as re,bP as ne,bQ as se,bi as de,aT as ue,aU as me,b5 as pe,bI as ie,bR as ce,g as be}from"./arco.a9260898.js";import{u as ge}from"./loading.1f346a94.js";import{h as _e,f as fe}from"./vue.ad52ddbe.js";import{e as ye,c as ve}from"./agent.53baf448.js";import{q as he}from"./corp.4e269a74.js";import{b as ke}from"./model.13b6297c.js";import"./chart.d103b168.js";const Ve={class:"container"},$e={class:"wrapper"},we={class:"submit-btn"},Ue={name:"ModelAgentUpdate"},Be=J({...Ue,setup(Me){const{loading:C,setLoading:s}=ge(!1),{proxy:I}=be(),D=_e(),A=fe(),{t:u}=K(),c=p([]),f=new Map;(async()=>{s(!0);try{const{data:a}=await he();c.value=a.items;for(let e=0;e<c.value.length;e+=1)f.set(c.value[e].id,c.value[e])}catch{}finally{s(!1)}})();const m=p(u("key.placeholder.key")),y=async()=>{switch(f.get(l.value.corp).code){case"Baidu":m.value=u("key.placeholder.key.baidu");break;case"Xfyun":m.value=u("key.placeholder.key.xfyun");break;case"DeepSeek-Baidu":m.value=u("key.placeholder.key.deepseek.baidu");break;case"VolcEngine":m.value=u("key.placeholder.key.volcengine");break;default:m.value=u("key.placeholder.key")}},v=p([]);(async()=>{s(!0);try{const{data:a}=await ke();v.value=a.items}catch{}finally{s(!1)}})();const h=p(),l=p({id:"",corp:"",name:"",base_url:"",path:"",weight:p(20),remark:"",status:1,models:[],lb_strategy:"",key:"",is_agents_only:!0}),F=async()=>{var e;if(!await((e=h.value)==null?void 0:e.validate())){s(!0);try{await ye(l.value).then(()=>{I.$message.success("\u66F4\u65B0\u6210\u529F"),A.push({name:"ModelAgentList"})})}catch{}finally{s(!1)}}};return(async(a={id:D.query.id})=>{s(!0);try{const{data:e}=await ve(a);l.value.id=e.id,l.value.corp=e.corp,l.value.name=e.name,l.value.base_url=e.base_url,l.value.path=e.path,l.value.weight=e.weight,l.value.remark=e.remark,l.value.status=e.status,l.value.models=e.models,l.value.lb_strategy=String(e.lb_strategy),l.value.key=e.key,y()}catch{}finally{s(!1)}})(),(a,e)=>{const k=G,b=Y,L=Z,V=x,S=ee,R=ae,n=le,g=te,T=oe,$=re,E=ne,w=se,U=de,N=ue,B=me,O=pe,P=ie,z=ce;return _(),M("div",Ve,[t(L,{class:"container-breadcrumb"},{default:r(()=>[t(b,null,{default:r(()=>[t(k)]),_:1}),t(b,null,{default:r(()=>[d(i(a.$t("menu.agent")),1)]),_:1}),t(b,null,{default:r(()=>[d(i(a.$t("menu.model.agent.update")),1)]),_:1})]),_:1}),t(z,{loading:W(C),style:{width:"100%"}},{default:r(()=>[t(P,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[q("div",$e,[t(O,{ref_key:"formRef",ref:h,model:l.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:r(()=>[t(V,{orientation:"left"},{default:r(()=>[d(i(a.$t("common.title.baseInfo")),1)]),_:1}),t(n,{field:"corp",label:a.$t("model.agent.label.corp"),rules:[{required:!0,message:a.$t("model.agent.error.corp.required")}]},{default:r(()=>[t(R,{modelValue:l.value.corp,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.corp=o),placeholder:a.$t("model.agent.placeholder.corp"),"allow-search":"",onChange:y},{default:r(()=>[(_(!0),M(Q,null,X(c.value,o=>(_(),j(S,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"name",label:a.$t("model.agent.label.name"),rules:[{required:!0,message:a.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:a.$t("model.agent.error.name.pattern")}]},{default:r(()=>[t(g,{modelValue:l.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.name=o),placeholder:a.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"base_url",label:a.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:a.$t("model.agent.error.baseUrl.required")}]},{default:r(()=>[t(g,{modelValue:l.value.base_url,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.base_url=o),placeholder:a.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"path",label:a.$t("model.agent.label.path")},{default:r(()=>[t(g,{modelValue:l.value.path,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.path=o),placeholder:a.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"weight",label:a.$t("model.agent.label.weight")},{default:r(()=>[t(T,{modelValue:l.value.weight,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.weight=o),precision:0,min:0,max:999,placeholder:a.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"remark",label:a.$t("model.agent.label.remark")},{default:r(()=>[t($,{modelValue:l.value.remark,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.remark=o),placeholder:a.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(V,{orientation:"left"},{default:r(()=>[d(i(a.$t("common.title.advanced")),1)]),_:1}),t(n,{field:"models",label:a.$t("model.agent.label.models"),rules:[{required:!1}]},{default:r(()=>[t(E,{modelValue:l.value.models,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.models=o),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:v.value,placeholder:a.$t("model.agent.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),t(n,{field:"lb_strategy",label:a.$t("model.agent.label.lb_strategy")},{default:r(()=>[t(U,{size:"large"},{default:r(()=>[t(w,{modelValue:l.value.lb_strategy,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.lb_strategy=o),value:"1","default-checked":!0},{default:r(()=>[d(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),t(w,{modelValue:l.value.lb_strategy,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.lb_strategy=o),value:"2"},{default:r(()=>[d("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),t(n,{field:"key",label:a.$t("model.agent.label.key")},{default:r(()=>[t($,{modelValue:l.value.key,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.key=o),placeholder:m.value,"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"is_agents_only",label:a.$t("model.agent.label.isAgentsOnly")},{default:r(()=>[t(N,{modelValue:l.value.is_agents_only,"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(U,null,{default:r(()=>[q("div",we,[t(B,{type:"secondary",onClick:e[11]||(e[11]=o=>a.$router.push({name:"ModelAgentList"}))},{default:r(()=>[d(i(a.$t("button.cancel")),1)]),_:1}),t(B,{type:"primary",onClick:F},{default:r(()=>[d(i(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const ea=H(Be,[["__scopeId","data-v-bf94eb67"]]);export{ea as default};

import{u as Qe,b as Al,C as Il,q as Sl,z as zl,j as Rl,A as Ll,_ as Hl}from"./index.2adbf4c1.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as Ge,e as y,B as o,C as b,aH as e,aG as a,u as i,aD as r,aM as _,aL as c,bA as Kl,bB as Nl,bC as Ol,bD as Tl,bE as Ml,r as Te,c as qe,w as Me,bF as Pl,bu as _e,aJ as N,aI as O,D as z,E as jl,aE as x,g as Ql,n as Gl,aZ as $e,aK as Jl,aF as Zl,aS as Wl,b2 as Xl,bG as Yl,bH as ea,bI as la,b1 as aa,bJ as ta,bK as ua,b5 as oa,bL as sa,ab as ia,aU as da,bi as na,bj as ra,bl as pa,bm as ma,b4 as _a,bM as va,ad as ca,aT as ba,bN as fa,bO as ya,aV as ka,bP as ga,bQ as ha,bR as qa,bS as $a,bT as Va,a_ as wa,bU as Ca}from"./arco.088e2a49.js";import{h as xa,u as Fa}from"./vue.bd25b247.js";import{u as Je}from"./loading.6f488126.js";import{p as Pe,d as je,a as U}from"./common.051a2527.js";import{f as Ea}from"./app.6383f6ac.js";import{q as Ze,b as Da,c as Ba,d as Ua,a as Aa,e as Ve,f as Ia}from"./app_key.2750ccc1.js";import{c as we,S as Sa}from"./sortable.esm.70bb3f9a.js";import{q as za,a as Ra}from"./model.0d2c84b5.js";import{q as La}from"./group.c9456a0d.js";import{M as Ha}from"./models.87094009.js";import{Q as V}from"./quota.ddc6f79a.js";/* empty css                *//* empty css                */import"./chart.0bfa65d3.js";import"./provider.e807eb26.js";const Ka={style:{margin:"10px 0 30px 10px"}},Na={key:1},Oa={key:1},Ta={key:1},Ma={key:1},Pa={key:1},ja={key:1},Qa={key:1},Ga={key:1},Ja={key:1},Za={key:1},Wa={key:1},Xa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ya={key:1},et={key:1},lt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},at={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},tt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},ut={key:1},ot={key:1},st={key:1},it={name:"AppKeyDetail"},dt=Ge({...it,props:{id:{type:String,default:""}},setup(Ce){const le=Ce,{t:g}=Qe(),{loading:f,setLoading:se}=Je(!0),p=y({});return(async(R={id:le.id})=>{se(!0);try{const{data:Q}=await Ze(R);p.value=Q}catch{}finally{se(!1)}})(),(R,Q)=>{const q=Kl,n=Nl,k=Ol,T=Tl,ae=Ml;return o(),b("div",Ka,[e(ae,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:a(()=>[e(k,{label:i(g)("common.key"),span:2},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Na,_(p.value.key),1))]),_:1},8,["label"]),e(k,{label:i(g)("common.app_id")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Oa,_(p.value.app_id),1))]),_:1},8,["label"]),e(k,{label:i(g)("common.user_id")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Ta,_(p.value.user_id),1))]),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.is_limit_quota")},{default:a(()=>{var v;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Ma,_(i(g)(`dict.${((v=p.value)==null?void 0:v.is_limit_quota)||!1}`)),1))]}),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.quota")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Pa,[p.value.is_limit_quota?(o(),r(V,{key:0,"model-value":p.value.quota},null,8,["model-value"])):(o(),b("span",ja,_(R.$t("key.columns.quota.no_limit")),1))]))]),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.used_quota")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Qa,[e(V,{"model-value":p.value.used_quota},null,8,["model-value"])]))]),_:1},8,["label"]),e(k,{label:i(g)("app.key.detail.label.billing_methods")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Ga,_(R.$t(`model.dict.billing_methods.${p.value.billing_methods||1}`)),1))]),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.quota_expires_rule")},{default:a(()=>{var v;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Ja,_((v=p.value)!=null&&v.is_limit_quota&&R.$t(`key.dict.quota_expires_rule.${p.value.quota_expires_rule||1}`)||"-"),1))]}),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.quota_expires_minutes")},{default:a(()=>{var v;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Za,_((v=p.value)!=null&&v.is_limit_quota&&p.value.quota_expires_minutes||"-"),1))]}),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.quota_expires_at")},{default:a(()=>{var v;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Wa,_((v=p.value)!=null&&v.is_limit_quota&&p.value.quota_expires_at||"-"),1))]}),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.models"),span:2},{default:a(()=>{var v,F;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Xa,_(((F=(v=p.value)==null?void 0:v.model_names)==null?void 0:F.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(k,{label:i(g)("app.detail.label.is_bind_group")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",Ya,_(i(g)(`dict.enable.${p.value.is_bind_group||!1}`)),1))]),_:1},8,["label"]),e(k,{label:i(g)("app.detail.label.group")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",et,_(p.value.group_name||"-"),1))]),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.ip_whitelist")},{default:a(()=>{var v,F;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",lt,_(((F=(v=p.value)==null?void 0:v.ip_whitelist)==null?void 0:F.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(k,{label:i(g)("key.detail.label.ip_blacklist")},{default:a(()=>{var v,F;return[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",at,_(((F=(v=p.value)==null?void 0:v.ip_blacklist)==null?void 0:F.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(k,{label:i(g)("common.remark")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",tt,_(p.value.remark||"-"),1))]),_:1},8,["label"]),e(k,{label:i(g)("common.status")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",ut,[p.value.status===1?(o(),r(T,{key:0,color:"green"},{default:a(()=>[c(_(R.$t(`dict.status.${p.value.status}`)),1)]),_:1})):(o(),r(T,{key:1,color:"red"},{default:a(()=>[c(_(R.$t(`dict.status.${p.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),e(k,{label:i(g)("common.created_at")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",ot,_(p.value.created_at),1))]),_:1},8,["label"]),e(k,{label:i(g)("common.updated_at")},{default:a(()=>[i(f)?(o(),r(n,{key:0,animation:!0},{default:a(()=>[e(q,{rows:1})]),_:1})):(o(),b("span",st,_(p.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),nt={class:"container"},rt={class:"action-icon"},pt={class:"action-icon"},mt={id:"tableSetting"},_t={style:{"margin-right":"4px",cursor:"move"}},vt={class:"title"},ct={key:1},bt={key:0},ft={key:1},yt={style:{"margin-left":"-15px"}},kt={style:{"margin-left":"-15px"}},gt={name:"AppKeyList"},ht=Ge({...gt,setup(Ce){const le=xa(),g=Al(),{proxy:f}=Ql(),{loading:se,setLoading:p}=Je(!0),{t:w}=Qe(),R=Te({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),Q=()=>({type:1,user_id:y(),app_id:y(),key:"",models:[],quota:y(),quota_expires_at:[],status:y()}),q=y([]),n=y(Q()),k=y([]),T=y([]),ae=y("medium"),v=y([]),F=y(!0),S=y(!0),G=y(),J={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},M=Te({...J}),We=qe(()=>[{name:w("size.mini"),value:"mini"},{name:w("size.small"),value:"small"},{name:w("size.medium"),value:"medium"},{name:w("size.large"),value:"large"}]),xe=qe(()=>[{title:w("key.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center",width:80},{title:w("key.columns.app_id"),dataIndex:"app_id",slotName:"app_id",align:"center",width:80},{title:w("key.columns.key"),dataIndex:"key",slotName:"key",align:"center",width:220},{title:w("key.columns.quota"),dataIndex:"quota",slotName:"quota",align:"center",ellipsis:!0,tooltip:!0},{title:w("key.columns.used_quota"),dataIndex:"used_quota",slotName:"used_quota",align:"center",ellipsis:!0,tooltip:!0},{title:w("app.key.columns.billing_methods"),dataIndex:"billing_methods",slotName:"billing_methods",align:"center",ellipsis:!0,tooltip:!0},{title:w("key.columns.quota_expires_at"),dataIndex:"quota_expires_at",slotName:"quota_expires_at",align:"center",ellipsis:!0,tooltip:!0},{title:w("key.columns.app.models"),dataIndex:"models",slotName:"models",align:"center",ellipsis:!0,tooltip:!0},{title:w("key.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:w("key.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:w("key.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:170}]),E=localStorage.getItem("userRole");E==="user"&&xe.value.splice(0,1);const Xe=qe(()=>[{label:w("key.dict.status.1"),value:1},{label:w("key.dict.status.2"),value:2}]),ie=async(l={...J,type:1,app_id:le.query.app_id})=>{p(!0);try{const{data:u}=await Da(l);q.value=u.items,M.current=l.current,M.pageSize=l.pageSize,M.total=u.paging.total,u.items.length>0&&(n.value.user_id||n.value.app_id||n.value.key||n.value.models.length>0||n.value.quota||n.value.status||n.value.quota_expires_at&&n.value.quota_expires_at.length>0)?S.value=!1:S.value=!0}catch{}finally{p(!1),G.value.selectAll(!1)}};ie();const L=()=>{ie({...J,...n.value})},Ye=l=>{ie({...J,...n.value,current:l})},el=l=>{J.pageSize=l,ie({...J,...n.value})},ll=()=>{n.value=Q(),L()},al=(l,u)=>{ae.value=l},tl=(l,u,h)=>{l?k.value.splice(h,0,u):k.value=T.value.filter(C=>C.dataIndex!==u.dataIndex)},Fe=(l,u,h,C=!1)=>{const B=C?we(l):l;return u>-1&&h>-1&&B.splice(u,1,B.splice(h,1,B[u]).pop()),B},ul=l=>{l&&Gl(()=>{const u=document.getElementById("tableSetting");new Sa(u,{onEnd(h){const{oldIndex:C,newIndex:B}=h;Fe(k.value,C,B),Fe(T.value,C,B)}})})};Me(()=>xe.value,l=>{k.value=we(l),k.value.forEach((u,h)=>{u.checked=!0}),T.value=we(k.value)},{deep:!0,immediate:!0});const de=y([]);(async()=>{try{const{data:l}=await Ea();de.value=l.items,le.query.app_id&&(n.value.app_id=Number(le.query.app_id))}catch{}})();const Ee=y([]);(async()=>{try{const{data:l}=await za();Ee.value=l.items}catch{}})();const ve=y([]);(async()=>{p(!0);try{const{data:l}=await Ra();ve.value=l.items}catch{}finally{p(!1)}})();const ce=y([]);(async()=>{try{const{data:l}=await La();ce.value=l.items}catch{}finally{p(!1)}})();const ol=async l=>{p(!0);try{await Ba(l),f.$message.success("\u5220\u9664\u6210\u529F"),L()}catch{}finally{p(!1)}},sl=async l=>{p(!0);try{await Ua(l),f.$message.success("\u64CD\u4F5C\u6210\u529F"),L()}catch{}finally{p(!1)}},te=y(!1),P=y(!1),De=y(),Be=y(),d=y({}),s=y({billing_methods:[1]}),Ue=l=>{d.value.quota=l,s.value.quota=l},il=async l=>{var u,h;p(!0);try{d.value.id=l.id,d.value.key=l.key,d.value.billing_methods=l.billing_methods||[1],d.value.models=l.models,d.value.is_limit_quota=l.is_limit_quota,d.value.quota=l.quota,d.value.quota_expires_rule=String(l.quota_expires_rule)||"1",d.value.quota_expires_at=l.quota_expires_at,d.value.quota_expires_minutes=l.quota_expires_minutes,d.value.is_bind_group=l.is_bind_group,d.value.group=l.group,d.value.ip_whitelist=((u=l.ip_whitelist)==null?void 0:u.join(`
`))||"",d.value.ip_blacklist=((h=l.ip_blacklist)==null?void 0:h.join(`
`))||"",d.value.remark=l.remark,te.value=!0}catch{}finally{p(!1)}},dl=async l=>{var h;if(await((h=De.value)==null?void 0:h.validate())){te.value=!0,l(!1);return}p(!0),d.value.quota_expires_rule==="1"&&(d.value.quota_expires_minutes=""),d.value.quota_expires_rule==="2"&&(d.value.quota_expires_at="");try{const{data:C}=await Aa(d.value);navigator.clipboard.writeText(C.key),$e.success(w("app.success.key_config")),l(),L()}catch{l(!1)}finally{p(!1)}},nl=()=>{te.value=!1},rl=async l=>{var h;if(await((h=Be.value)==null?void 0:h.validate())){P.value=!0,l(!1);return}p(!0),s.value.quota_expires_rule==="1"&&(s.value.quota_expires_minutes=""),s.value.quota_expires_rule==="2"&&(s.value.quota_expires_at="");try{s.value.ids=v.value,s.value.query_params={},s.value.query_params.user_id=n.value.user_id,s.value.query_params.app_id=n.value.app_id,s.value.query_params.key=n.value.key,s.value.query_params.models=n.value.models,s.value.query_params.quota=n.value.quota,s.value.query_params.quota_expires_at=n.value.quota_expires_at,s.value.query_params.status=n.value.status;const{data:C}=await Ve(s.value);navigator.clipboard.writeText(C.keys),s.value.action==="create"?$e.success("\u64CD\u4F5C\u6210\u529F, \u5BC6\u94A5\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"):$e.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),l(),L(),G.value.selectAll(!1)}catch{l(!1)}finally{p(!1)}},pl=()=>{P.value=!1},ml=l=>{v.value=l,F.value=!l.length},be=l=>{if(v.value.length===0)f.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let u=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${v.value.length}\u6761\u6570\u636E?`;switch(l.action){case"status":l.value===1?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${v.value.length}\u6761\u6570\u636E?`:u=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${v.value.length}\u6761\u6570\u636E?`;break;case"delete":u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${v.value.length}\u6761\u6570\u636E?`;break}f.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{p(!0),l.ids=v.value,Ve(l).then(h=>{p(!1),f.$message.success("\u64CD\u4F5C\u6210\u529F"),L(),G.value.selectAll(!1)})}})}},Z=l=>{if(s.value.action=l.action,S.value&&v.value.length===0&&l.action!=="create")f.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let u=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${v.value.length}\u6761\u6570\u636E?`;switch(l.action){case"create":s.value={billing_methods:[1]},s.value.action=l.action,s.value.n=1,P.value=!0;return;case"update":s.value={billing_methods:[1]},s.value.action=l.action,P.value=!0;return;case"all-update":s.value={billing_methods:[1]},s.value.action=l.action,P.value=!0;return;case"all-status":l.value===1?u=`\u662F\u5426\u786E\u5B9A\u5168\u90E8\u542F\u7528\u67E5\u8BE2\u7ED3\u679C\u7684${M.total}\u6761\u6570\u636E?`:u=`\u662F\u5426\u786E\u5B9A\u5168\u90E8\u7981\u7528\u67E5\u8BE2\u7ED3\u679C\u7684${M.total}\u6761\u6570\u636E?`;break;case"all-delete":u=`\u662F\u5426\u786E\u5B9A\u5168\u90E8\u5220\u9664\u67E5\u8BE2\u7ED3\u679C\u7684${M.total}\u6761\u6570\u636E?`;break}f.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{p(!0),l.ids=v.value,l.query_params={},l.query_params.user_id=n.value.user_id,l.query_params.app_id=n.value.app_id,l.query_params.key=n.value.key,l.query_params.models=n.value.models,l.query_params.quota=n.value.quota,l.query_params.quota_expires_at=n.value.quota_expires_at,l.query_params.status=n.value.status,Ve({...l,...n.value}).then(h=>{p(!1),f.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),L(),G.value.selectAll(!1)})}})}},{copy:_l,copied:Ae}=Fa(),vl=async l=>{const{data:u}=await Ze({id:l});_l(u.key)};Me(Ae,()=>{Ae.value&&f.$message.success("\u590D\u5236\u6210\u529F")});const fe=y(!1),ne=y(),cl=l=>{fe.value=!0,ne.value=l},bl=()=>{fe.value=!1},ye=y(!1),Ie=y(),fl=l=>{ye.value=!0,ne.value=l,Ie.value="app_key"},Se=y(),W=y(!1),K=y({}),yl=async l=>{var h;if(await((h=Se.value)==null?void 0:h.validate())){W.value=!0,l(!1);return}l(),ze(K.value)},kl=()=>{W.value=!1},ze=l=>{if(!W.value&&v.value.length===0){W.value=!0;return}p(!0),l.ids=v.value,Ia(l).then(u=>{p(!1),f.$message.success("\u5BFC\u51FA\u6210\u529F"),G.value.selectAll(!1);const h=new Blob([u.data],{type:"application/vnd.ms-excel"}),C=window.URL.createObjectURL(h),B=document.createElement("a");B.href=C,B.setAttribute("download","\u5E94\u7528\u5BC6\u94A5.xlsx"),document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(C)}).catch(u=>{f.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",u)})};return(l,u)=>{const h=Il,C=Jl,B=Zl,A=Wl,m=Xl,I=Yl,X=ea,j=la,Re=aa,gl=ta,ke=ua,re=oa,Le=sa,hl=ia,D=da,He=Sl,Y=na,ge=ra,ql=zl,$l=pa,Vl=ma,wl=Rl,Cl=Ll,ue=_a,xl=va,Fl=ca,oe=ba,El=fa,Dl=ya,Bl=ka,Ke=ga,$=ha,Ne=qa,Oe=$a,ee=Va,pe=wa,Ul=Ca,me=Pl("permission");return o(),b("div",nt,[e(B,{class:"container-breadcrumb"},{default:a(()=>[e(C,null,{default:a(()=>[e(h)]),_:1}),e(C,null,{default:a(()=>[c(_(l.$t("menu.key.app")),1)]),_:1})]),_:1}),e(Ul,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(ke,null,{default:a(()=>[e(I,{flex:1},{default:a(()=>[e(re,{model:n.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(ke,{gutter:16},{default:a(()=>[_e((o(),r(I,{span:8},{default:a(()=>[e(m,{field:"user_id",label:l.$t("key.form.userId")},{default:a(()=>[e(A,{modelValue:n.value.user_id,"onUpdate:modelValue":u[0]||(u[0]=t=>n.value.user_id=t),placeholder:l.$t("key.form.userId.placeholder"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[me,["reseller","admin"]]]),_e((o(),r(I,{span:8},{default:a(()=>[e(m,{field:"app_id",label:l.$t("key.form.appId")},{default:a(()=>[e(A,{modelValue:n.value.app_id,"onUpdate:modelValue":u[1]||(u[1]=t=>n.value.app_id=t),placeholder:l.$t("key.form.appId.placeholder"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[me,["reseller","admin"]]]),_e((o(),r(I,{span:8},{default:a(()=>[e(m,{field:"app_id",label:l.$t("key.form.app")},{default:a(()=>[e(j,{modelValue:n.value.app_id,"onUpdate:modelValue":u[2]||(u[2]=t=>n.value.app_id=t),placeholder:l.$t("key.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:a(()=>[(o(!0),b(N,null,O(de.value,t=>(o(),r(X,{key:t.app_id,value:t.app_id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[me,["user"]]]),e(I,{span:8},{default:a(()=>[e(m,{field:"key",label:l.$t("key.form.appkey")},{default:a(()=>[e(Re,{modelValue:n.value.key,"onUpdate:modelValue":u[3]||(u[3]=t=>n.value.key=t),placeholder:l.$t("key.form.appkey.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),_e((o(),r(I,{span:8},{default:a(()=>[e(m,{field:"models",label:l.$t("key.form.app.models")},{default:a(()=>[e(j,{modelValue:n.value.models,"onUpdate:modelValue":u[4]||(u[4]=t=>n.value.models=t),placeholder:l.$t("key.form.selectDefault"),"max-tag-count":2,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(o(!0),b(N,null,O(Ee.value,t=>(o(),r(X,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[me,["user"]]]),e(I,{span:8},{default:a(()=>[e(m,{field:"quota",label:l.$t("key.form.quota")},{default:a(()=>[e(A,{modelValue:n.value.quota,"onUpdate:modelValue":u[5]||(u[5]=t=>n.value.quota=t),placeholder:l.$t("key.form.quota.placeholder"),min:1e-6,max:9999999999999,"allow-clear":""},{prefix:a(()=>[c(_(i(g).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min"])]),_:1},8,["label"])]),_:1}),e(I,{span:8},{default:a(()=>[e(m,{field:"status",label:l.$t("key.form.status")},{default:a(()=>[e(j,{modelValue:n.value.status,"onUpdate:modelValue":u[6]||(u[6]=t=>n.value.status=t),placeholder:l.$t("key.form.selectDefault"),options:i(Xe),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(I,{span:8},{default:a(()=>[e(m,{field:"quota_expires_at",label:l.$t("key.form.quota_expires_at")},{default:a(()=>[e(gl,{modelValue:n.value.quota_expires_at,"onUpdate:modelValue":u[7]||(u[7]=t=>n.value.quota_expires_at=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Le,{style:{height:"84px"},direction:"vertical"}),e(I,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(Y,{direction:"vertical",size:18},{default:a(()=>[e(D,{type:"primary",onClick:L},{icon:a(()=>[e(hl)]),default:a(()=>[c(" "+_(l.$t("key.form.search")),1)]),_:1}),e(D,{onClick:ll},{icon:a(()=>[e(He)]),default:a(()=>[c(" "+_(l.$t("key.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Le,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(ke,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(I,{span:12},{default:a(()=>[e(Y,null,{default:a(()=>[e(D,{type:"primary",onClick:u[8]||(u[8]=t=>Z({action:"create"}))},{default:a(()=>[c(_(l.$t("key.operation.create")),1)]),_:1}),e(D,{type:"primary",status:"warning",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[9]||(u[9]=t=>Z({action:"update"}))},{default:a(()=>[c(" \u4FEE\u6539 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"success",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[10]||(u[10]=t=>be({action:"status",value:1}))},{default:a(()=>[c(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[11]||(u[11]=t=>be({action:"status",value:2}))},{default:a(()=>[c(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[12]||(u[12]=t=>be({action:"delete"}))},{default:a(()=>[c(" \u5220\u9664 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"warning",disabled:S.value,title:S.value?"\u8BF7\u67E5\u8BE2\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[13]||(u[13]=t=>Z({action:"all-update"}))},{default:a(()=>[c(" \u5168\u90E8\u4FEE\u6539 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"success",disabled:S.value,title:S.value?"\u8BF7\u67E5\u8BE2\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[14]||(u[14]=t=>Z({action:"all-status",value:1}))},{default:a(()=>[c(" \u5168\u90E8\u542F\u7528 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:S.value,title:S.value?"\u8BF7\u67E5\u8BE2\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[15]||(u[15]=t=>Z({action:"all-status",value:2}))},{default:a(()=>[c(" \u5168\u90E8\u7981\u7528 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:S.value,title:S.value?"\u8BF7\u67E5\u8BE2\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[16]||(u[16]=t=>Z({action:"all-delete"}))},{default:a(()=>[c(" \u5168\u90E8\u5220\u9664 ")]),_:1},8,["disabled","title"]),e(D,{type:"primary",onClick:u[17]||(u[17]=t=>ze({}))},{default:a(()=>[c(" \u5BFC\u51FA ")]),_:1})]),_:1})]),_:1}),e(I,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(ge,{content:l.$t("actions.refresh")},{default:a(()=>[z("div",{class:"action-icon",onClick:L},[e(He,{size:"18"})])]),_:1},8,["content"]),e(Vl,{onSelect:al},{content:a(()=>[(o(!0),b(N,null,O(i(We),t=>(o(),r($l,{key:t.value,value:t.value,class:jl({active:t.value===ae.value})},{default:a(()=>[z("span",null,_(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(ge,{content:l.$t("actions.density")},{default:a(()=>[z("div",rt,[e(ql,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(ge,{content:l.$t("actions.column_setting")},{default:a(()=>[e(xl,{trigger:"click",position:"bl",onPopupVisibleChange:ul},{content:a(()=>[z("div",mt,[(o(!0),b(N,null,O(T.value,(t,H)=>(o(),b("div",{key:t.dataIndex,class:"setting"},[z("div",_t,[e(Cl)]),z("div",null,[e(ue,{modelValue:t.checked,"onUpdate:modelValue":he=>t.checked=he,onChange:he=>tl(he,t,H)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),z("div",vt,_(t.title==="#"?"\u5E8F\u5217\u53F7":t.title),1)]))),128))])]),default:a(()=>[z("div",pt,[e(wl,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(Dl,{ref_key:"tableRef",ref:G,"row-key":"id",loading:i(se),pagination:M,columns:k.value,data:q.value,bordered:!1,size:ae.value,"row-selection":R,onPageChange:Ye,onPageSizeChange:el,onSelectionChange:ml},{key:a(({record:t})=>[c(_(t.key.substr(0,10)+t.key.substr(-10))+" ",1),e(Fl,{class:"copy-btn",onClick:H=>vl(t.id)},null,8,["onClick"])]),quota:a(({record:t})=>[t.is_limit_quota?(o(),r(V,{key:0,"model-value":t.quota},null,8,["model-value"])):(o(),b("span",ct,_(l.$t("key.columns.quota.no_limit")),1))]),used_quota:a(({record:t})=>[e(V,{"model-value":t.used_quota},null,8,["model-value"])]),billing_methods:a(({record:t})=>[c(_(l.$t(`model.dict.billing_methods.${t.billing_methods||1}`)),1)]),quota_expires_at:a(({record:t})=>[c(_(t.is_limit_quota&&t.quota_expires_at||"-"),1)]),models:a(({record:t})=>[t.models?(o(),b("span",bt,[e(D,{type:"text",size:"small",onClick:H=>fl(t.id)},{default:a(()=>[c(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):(o(),b("span",ft,_(l.$t("key.columns.app.models.no_limit")),1))]),remark:a(({record:t})=>[c(_(t.remark||"-"),1)]),status:a(({record:t})=>[e(oe,{modelValue:t.status,"onUpdate:modelValue":H=>t.status=H,"checked-value":1,"unchecked-value":2,onChange:H=>sl({id:t.id,status:t.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:t})=>[e(D,{type:"text",size:"small",onClick:H=>cl(t.id)},{default:a(()=>[c(_(l.$t("key.columns.operations.view")),1)]),_:2},1032,["onClick"]),e(D,{type:"text",size:"small",onClick:H=>il(t)},{default:a(()=>[c(_(l.$t("key.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(El,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:H=>ol({id:t.id})},{default:a(()=>[e(D,{type:"text",size:"small"},{default:a(()=>[c(_(l.$t("key.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(Bl,{title:l.$t("menu.key.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:fe.value,onCancel:bl},{default:a(()=>[e(dt,{id:ne.value},null,8,["id"])]),_:1},8,["title","visible"]),e(pe,{visible:te.value,"onUpdate:visible":u[33]||(u[33]=t=>te.value=t),width:726,title:l.$t("app.form.title.keyConfig"),"ok-text":l.$t("button.save"),"body-style":{height:"520px"},onCancel:nl,onBeforeOk:dl},{default:a(()=>[e(re,{ref_key:"formRef",ref:De,model:d.value,"label-col-props":{span:4}},{default:a(()=>[e(m,{field:"key",label:l.$t("app.label.key")},{default:a(()=>[e(Re,{modelValue:d.value.key,"onUpdate:modelValue":u[18]||(u[18]=t=>d.value.key=t),placeholder:l.$t("app.placeholder.key"),readonly:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(m,{field:"billing_methods",label:l.$t("app.label.key.billing_methods"),rules:[{required:!0,message:l.$t("app.error.key.billing_methods.required")}]},{default:a(()=>[e(Y,{size:"large"},{default:a(()=>[e(ue,{modelValue:d.value.billing_methods,"onUpdate:modelValue":u[19]||(u[19]=t=>d.value.billing_methods=t),value:1,disabled:""},null,8,["modelValue"]),z("span",yt,_(l.$t("app.key.dict.billing_methods.1")),1),e(ue,{modelValue:d.value.billing_methods,"onUpdate:modelValue":u[20]||(u[20]=t=>d.value.billing_methods=t),value:2},{default:a(()=>[c(_(l.$t("app.key.dict.billing_methods.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(m,{field:"models",label:l.$t("app.label.models")},{default:a(()=>[e(Ke,{modelValue:d.value.models,"onUpdate:modelValue":u[21]||(u[21]=t=>d.value.models=t),placeholder:l.$t("app.placeholder.key.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:ve.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),e(m,{field:"is_limit_quota",label:l.$t("app.label.isLimitQuota")},{default:a(()=>[e(oe,{modelValue:d.value.is_limit_quota,"onUpdate:modelValue":u[22]||(u[22]=t=>d.value.is_limit_quota=t)},null,8,["modelValue"])]),_:1},8,["label"]),d.value.is_limit_quota?(o(),r(m,{key:0,field:"quota",label:l.$t("app.label.quota"),rules:[{required:!0,message:l.$t("app.error.quota.required")}]},{default:a(()=>[e(A,{modelValue:d.value.quota,"onUpdate:modelValue":u[23]||(u[23]=t=>d.value.quota=t),placeholder:l.$t("app.placeholder.quota"),min:1e-6,max:9999999999999,parser:i(Pe),"allow-clear":""},{prefix:a(()=>[c(_(i(g).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label","rules"])):x("",!0),d.value.is_limit_quota?(o(),r(m,{key:1},{default:a(()=>[e(Ne,{type:"button",onChange:Ue},{default:a(()=>[e($,{value:10},{default:a(()=>[e(V,{"model-value":10})]),_:1}),e($,{value:20},{default:a(()=>[e(V,{"model-value":20})]),_:1}),e($,{value:50},{default:a(()=>[e(V,{"model-value":50})]),_:1}),e($,{value:100},{default:a(()=>[e(V,{"model-value":100})]),_:1}),e($,{value:200},{default:a(()=>[e(V,{"model-value":200})]),_:1}),e($,{value:500},{default:a(()=>[e(V,{"model-value":500})]),_:1}),e($,{value:1e3},{default:a(()=>[e(V,{"model-value":1e3})]),_:1}),e($,{value:2e3},{default:a(()=>[e(V,{"model-value":2e3})]),_:1}),e($,{value:5e3},{default:a(()=>[e(V,{"model-value":5e3})]),_:1})]),_:1})]),_:1})):x("",!0),d.value.is_limit_quota?(o(),r(m,{key:2,field:"quota_expires_rule",label:l.$t("app.label.quota_expires_rule")},{default:a(()=>[e(Y,{size:"large"},{default:a(()=>[e($,{modelValue:d.value.quota_expires_rule,"onUpdate:modelValue":u[24]||(u[24]=t=>d.value.quota_expires_rule=t),value:"1","default-checked":!0},{default:a(()=>[c(" \u56FA\u5B9A ")]),_:1},8,["modelValue"]),e($,{modelValue:d.value.quota_expires_rule,"onUpdate:modelValue":u[25]||(u[25]=t=>d.value.quota_expires_rule=t),value:"2"},{default:a(()=>[c("\u65F6\u957F")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])):x("",!0),d.value.is_limit_quota&&d.value.quota_expires_rule==="1"?(o(),r(m,{key:3,field:"quota_expires_at",label:l.$t("app.label.quota_expires_at")},{default:a(()=>[e(Oe,{modelValue:d.value.quota_expires_at,"onUpdate:modelValue":u[26]||(u[26]=t=>d.value.quota_expires_at=t),placeholder:l.$t("app.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":i(je),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>i(U)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"])):x("",!0),d.value.is_limit_quota&&d.value.quota_expires_rule==="2"?(o(),r(m,{key:4,field:"quota_expires_minutes",label:l.$t("app.label.quota_expires_minutes")},{default:a(()=>[e(A,{modelValue:d.value.quota_expires_minutes,"onUpdate:modelValue":u[27]||(u[27]=t=>d.value.quota_expires_minutes=t),placeholder:l.$t("app.placeholder.quota_expires_minutes"),precision:0,min:1,max:9999999999999},{append:a(()=>[c(" \u5206\u949F ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0),e(m,{field:"is_bind_group",label:l.$t("app.label.is_bind_group")},{default:a(()=>[e(oe,{modelValue:d.value.is_bind_group,"onUpdate:modelValue":u[28]||(u[28]=t=>d.value.is_bind_group=t)},null,8,["modelValue"])]),_:1},8,["label"]),d.value.is_bind_group?(o(),r(m,{key:5,field:"group",label:l.$t("app.label.group"),rules:[{required:!0,message:l.$t("app.error.group.required")}]},{default:a(()=>[e(j,{modelValue:d.value.group,"onUpdate:modelValue":u[29]||(u[29]=t=>d.value.group=t),placeholder:l.$t("app.key.placeholder.group"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:a(()=>[(o(!0),b(N,null,O(ce.value,t=>(o(),r(X,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):x("",!0),e(m,{field:"ip_whitelist",label:l.$t("app.label.ip_whitelist")},{default:a(()=>[e(ee,{modelValue:d.value.ip_whitelist,"onUpdate:modelValue":u[30]||(u[30]=t=>d.value.ip_whitelist=t),placeholder:l.$t("app.placeholder.ip_whitelist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(m,{field:"ip_blacklist",label:l.$t("app.label.ip_blacklist")},{default:a(()=>[e(ee,{modelValue:d.value.ip_blacklist,"onUpdate:modelValue":u[31]||(u[31]=t=>d.value.ip_blacklist=t),placeholder:l.$t("app.placeholder.ip_blacklist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(m,{field:"remark",label:l.$t("common.remark")},{default:a(()=>[e(ee,{modelValue:d.value.remark,"onUpdate:modelValue":u[32]||(u[32]=t=>d.value.remark=t),placeholder:l.$t("app.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),e(pe,{visible:ye.value,"onUpdate:visible":u[34]||(u[34]=t=>ye.value=t),title:l.$t("common.models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":"\u5173\u95ED"},{default:a(()=>[e(Ha,{id:ne.value,action:Ie.value},null,8,["id","action"])]),_:1},8,["visible","title"]),e(pe,{visible:P.value,"onUpdate:visible":u[53]||(u[53]=t=>P.value=t),width:726,title:s.value.action==="create"?l.$t("app.form.title.batch.create"):l.$t("app.form.title.batch.update"),"body-style":{height:"520px"},onCancel:pl,onBeforeOk:rl},{default:a(()=>[e(re,{ref_key:"batchFormRef",ref:Be,model:s.value,"label-col-props":{span:4}},{default:a(()=>[s.value.action==="create"&&(i(E)==="reseller"||i(E)==="admin")?(o(),r(m,{key:0,field:"user_id",label:l.$t("app.label.user_id"),rules:[{required:i(E)==="reseller"||i(E)==="admin",message:l.$t("app.error.user_id.required")}]},{default:a(()=>[e(A,{modelValue:s.value.user_id,"onUpdate:modelValue":u[35]||(u[35]=t=>s.value.user_id=t),placeholder:l.$t("app.placeholder.user_id"),precision:0,min:1},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):x("",!0),s.value.action==="create"&&(i(E)==="reseller"||i(E)==="admin")?(o(),r(m,{key:1,field:"app_id",label:l.$t("app.label.app_id"),rules:[{required:i(E)==="reseller"||i(E)==="admin",message:l.$t("app.error.app_id.required")}]},{default:a(()=>[e(A,{modelValue:s.value.app_id,"onUpdate:modelValue":u[36]||(u[36]=t=>s.value.app_id=t),placeholder:l.$t("app.placeholder.app_id"),precision:0,min:1},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):x("",!0),s.value.action==="create"&&i(E)==="user"?(o(),r(m,{key:2,field:"app_id",label:l.$t("key.form.app"),rules:[{required:i(E)==="user",message:l.$t("app.error.app.required")}]},{default:a(()=>[e(j,{modelValue:s.value.app_id,"onUpdate:modelValue":u[37]||(u[37]=t=>s.value.app_id=t),placeholder:l.$t("app.placeholder.app"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:a(()=>[(o(!0),b(N,null,O(de.value,t=>(o(),r(X,{key:t.app_id,value:t.app_id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):x("",!0),s.value.action==="create"?(o(),r(m,{key:3,field:"n",label:l.$t("app.label.n"),rules:[{required:!0,message:l.$t("app.error.n.required")}]},{default:a(()=>[e(A,{modelValue:s.value.n,"onUpdate:modelValue":u[38]||(u[38]=t=>s.value.n=t),placeholder:l.$t("app.placeholder.n"),precision:0,min:1,max:1e5},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):x("",!0),e(m,{field:"billing_methods",label:l.$t("app.label.key.billing_methods"),rules:[{required:!0,message:l.$t("app.error.key.billing_methods.required")}]},{default:a(()=>[e(Y,{size:"large"},{default:a(()=>[e(ue,{modelValue:s.value.billing_methods,"onUpdate:modelValue":u[39]||(u[39]=t=>s.value.billing_methods=t),value:1,disabled:""},null,8,["modelValue"]),z("span",kt,_(l.$t("app.key.dict.billing_methods.1")),1),e(ue,{modelValue:s.value.billing_methods,"onUpdate:modelValue":u[40]||(u[40]=t=>s.value.billing_methods=t),value:2},{default:a(()=>[c(_(l.$t("app.key.dict.billing_methods.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(m,{field:"models",label:l.$t("app.label.models")},{default:a(()=>[e(Ke,{modelValue:s.value.models,"onUpdate:modelValue":u[41]||(u[41]=t=>s.value.models=t),placeholder:l.$t("app.placeholder.key.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:ve.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),e(m,{field:"is_limit_quota",label:l.$t("app.label.isLimitQuota")},{default:a(()=>[e(oe,{modelValue:s.value.is_limit_quota,"onUpdate:modelValue":u[42]||(u[42]=t=>s.value.is_limit_quota=t)},null,8,["modelValue"])]),_:1},8,["label"]),s.value.is_limit_quota?(o(),r(m,{key:4,field:"quota",label:l.$t("app.label.quota"),rules:[{required:!0,message:l.$t("app.error.quota.required")}]},{default:a(()=>[e(A,{modelValue:s.value.quota,"onUpdate:modelValue":u[43]||(u[43]=t=>s.value.quota=t),placeholder:l.$t("app.placeholder.quota"),min:1e-6,max:9999999999999,parser:i(Pe),"allow-clear":""},{prefix:a(()=>[c(_(i(g).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label","rules"])):x("",!0),s.value.is_limit_quota?(o(),r(m,{key:5},{default:a(()=>[e(Ne,{type:"button",onChange:Ue},{default:a(()=>[e($,{value:10},{default:a(()=>[e(V,{"model-value":10})]),_:1}),e($,{value:20},{default:a(()=>[e(V,{"model-value":20})]),_:1}),e($,{value:50},{default:a(()=>[e(V,{"model-value":50})]),_:1}),e($,{value:100},{default:a(()=>[e(V,{"model-value":100})]),_:1}),e($,{value:200},{default:a(()=>[e(V,{"model-value":200})]),_:1}),e($,{value:500},{default:a(()=>[e(V,{"model-value":500})]),_:1}),e($,{value:1e3},{default:a(()=>[e(V,{"model-value":1e3})]),_:1}),e($,{value:2e3},{default:a(()=>[e(V,{"model-value":2e3})]),_:1}),e($,{value:5e3},{default:a(()=>[e(V,{"model-value":5e3})]),_:1})]),_:1})]),_:1})):x("",!0),s.value.is_limit_quota?(o(),r(m,{key:6,field:"quota_expires_rule",label:l.$t("app.label.quota_expires_rule")},{default:a(()=>[e(Y,{size:"large"},{default:a(()=>[e($,{modelValue:s.value.quota_expires_rule,"onUpdate:modelValue":u[44]||(u[44]=t=>s.value.quota_expires_rule=t),value:"1","default-checked":!0},{default:a(()=>[c(" \u56FA\u5B9A ")]),_:1},8,["modelValue"]),e($,{modelValue:s.value.quota_expires_rule,"onUpdate:modelValue":u[45]||(u[45]=t=>s.value.quota_expires_rule=t),value:"2"},{default:a(()=>[c("\u65F6\u957F")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])):x("",!0),s.value.is_limit_quota&&s.value.quota_expires_rule==="1"?(o(),r(m,{key:7,field:"quota_expires_at",label:l.$t("app.label.quota_expires_at")},{default:a(()=>[e(Oe,{modelValue:s.value.quota_expires_at,"onUpdate:modelValue":u[46]||(u[46]=t=>s.value.quota_expires_at=t),placeholder:l.$t("app.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":i(je),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>i(U)(s.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"])):x("",!0),s.value.is_limit_quota&&s.value.quota_expires_rule==="2"?(o(),r(m,{key:8,field:"quota_expires_minutes",label:l.$t("app.label.quota_expires_minutes")},{default:a(()=>[e(A,{modelValue:s.value.quota_expires_minutes,"onUpdate:modelValue":u[47]||(u[47]=t=>s.value.quota_expires_minutes=t),placeholder:l.$t("app.placeholder.quota_expires_minutes"),precision:0,min:1,max:9999999999999},{append:a(()=>[c(" \u5206\u949F ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0),e(m,{field:"is_bind_group",label:l.$t("app.label.is_bind_group")},{default:a(()=>[e(oe,{modelValue:s.value.is_bind_group,"onUpdate:modelValue":u[48]||(u[48]=t=>s.value.is_bind_group=t)},null,8,["modelValue"])]),_:1},8,["label"]),s.value.is_bind_group?(o(),r(m,{key:9,field:"group",label:l.$t("app.label.group"),rules:[{required:!0,message:l.$t("app.error.group.required")}]},{default:a(()=>[e(j,{modelValue:s.value.group,"onUpdate:modelValue":u[49]||(u[49]=t=>s.value.group=t),placeholder:l.$t("app.key.placeholder.group"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:a(()=>[(o(!0),b(N,null,O(ce.value,t=>(o(),r(X,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):x("",!0),e(m,{field:"ip_whitelist",label:l.$t("app.label.ip_whitelist")},{default:a(()=>[e(ee,{modelValue:s.value.ip_whitelist,"onUpdate:modelValue":u[50]||(u[50]=t=>s.value.ip_whitelist=t),placeholder:l.$t("app.placeholder.ip_whitelist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(m,{field:"ip_blacklist",label:l.$t("app.label.ip_blacklist")},{default:a(()=>[e(ee,{modelValue:s.value.ip_blacklist,"onUpdate:modelValue":u[51]||(u[51]=t=>s.value.ip_blacklist=t),placeholder:l.$t("app.placeholder.ip_blacklist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(m,{field:"remark",label:l.$t("common.remark")},{default:a(()=>[e(ee,{modelValue:s.value.remark,"onUpdate:modelValue":u[52]||(u[52]=t=>s.value.remark=t),placeholder:l.$t("app.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),e(pe,{visible:W.value,"onUpdate:visible":u[57]||(u[57]=t=>W.value=t),title:l.$t("app.form.title.app_key_export"),onCancel:kl,onBeforeOk:yl},{default:a(()=>[e(re,{ref_key:"appKeyExportForm",ref:Se,model:K.value},{default:a(()=>[i(E)==="reseller"||i(E)==="admin"?(o(),r(m,{key:0,field:"user_id",label:l.$t("app.form.userId")},{default:a(()=>[e(A,{modelValue:K.value.user_id,"onUpdate:modelValue":u[54]||(u[54]=t=>K.value.user_id=t),placeholder:l.$t("app.form.userId.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0),i(E)==="reseller"||i(E)==="admin"?(o(),r(m,{key:1,field:"app_id",label:l.$t("app.form.appId")},{default:a(()=>[e(A,{modelValue:K.value.app_id,"onUpdate:modelValue":u[55]||(u[55]=t=>K.value.app_id=t),placeholder:l.$t("app.form.appId.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0),i(E)==="user"?(o(),r(m,{key:2,field:"app_id",label:l.$t("key.form.app")},{default:a(()=>[e(j,{modelValue:K.value.app_id,"onUpdate:modelValue":u[56]||(u[56]=t=>K.value.app_id=t),placeholder:l.$t("key.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:a(()=>[(o(!0),b(N,null,O(de.value,t=>(o(),r(X,{key:t.app_id,value:t.app_id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0)]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const su=Hl(ht,[["__scopeId","data-v-a0b2aeff"]]);export{su as default};

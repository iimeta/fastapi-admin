import{_ as A,C as J}from"./index.14c9197f.js";/* empty css               *//* empty css                */import{d as I,e as g,B as _,aD as $,aG as a,aH as e,aL as r,aM as y,bB as M,bC as U,b2 as F,b1 as G,bK as H,aU as q,b5 as N,C as S,aJ as B,aI as D,aT as P,bi as T,bz as X,F as Z,bs as Q,aE as W,u as Y,aK as x,aF as ee,bL as ae,bM as te,bJ as le,bN as oe}from"./arco.aed15247.js";import{u as L}from"./loading.b5911e1d.js";import{c as E,d as se}from"./key.1a32dcb8.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as R}from"./vue.0cc5b64a.js";/* empty css               */import{q as ne}from"./model.7cf95b1b.js";import{e as ue}from"./agent.df67de10.js";/* empty css               */import"./chart.9aa6eafa.js";import"./base.87fcf6e2.js";const re=I({__name:"base-info",emits:["changeStep"],setup(v,{emit:m}){const{setLoading:i}=L(!1),d=R(),p=g(),n=g({id:"",corp:"",key:"",remark:"",status:1});(async(o={id:d.query.id})=>{i(!0);try{const{data:t}=await E(o);n.value.id=t.id,n.value.corp=t.corp,n.value.key=t.key,n.value.remark=t.remark,n.value.status=t.status}catch{}finally{i(!1)}})();const l=async()=>{var t;await((t=p.value)==null?void 0:t.validate())||m("changeStep","forward",{...n.value})};return(o,t)=>{const f=M,C=U,b=F,s=G,u=H,w=q,V=N;return _(),$(V,{ref_key:"formRef",ref:p,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"corp",label:o.$t("key.label.corp"),rules:[{required:!0,message:o.$t("key.error.corp.required")}]},{default:a(()=>[e(C,{modelValue:n.value.corp,"onUpdate:modelValue":t[0]||(t[0]=k=>n.value.corp=k),placeholder:o.$t("key.placeholder.corp")},{default:a(()=>[e(f,{value:"OpenAI"},{default:a(()=>[r("OpenAI")]),_:1}),e(f,{value:"Baidu"},{default:a(()=>[r("\u767E\u5EA6")]),_:1}),e(f,{value:"Xfyun"},{default:a(()=>[r("\u79D1\u5927\u8BAF\u98DE")]),_:1}),e(f,{value:"Aliyun"},{default:a(()=>[r("\u963F\u91CC\u4E91")]),_:1}),e(f,{value:"ZhipuAI"},{default:a(()=>[r("\u667A\u8C31AI")]),_:1}),e(f,{value:"Midjourney"},{default:a(()=>[r("Midjourney")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"key",label:o.$t("key.label.key"),rules:[{required:!0,message:o.$t("key.error.key.required")}]},{default:a(()=>[e(s,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=k=>n.value.key=k),placeholder:o.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"remark",label:o.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(u,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=k=>n.value.remark=k),placeholder:o.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(w,{type:"primary",onClick:l},{default:a(()=>[r(y(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=A(re,[["__scopeId","data-v-3d3fbc73"]]),ie=I({__name:"advanced",emits:["changeStep"],setup(v,{emit:m}){const{setLoading:i}=L(!0),d=R(),p=g([]);(async()=>{i(!0);try{const{data:s}=await ne();p.value=s.items}catch{}finally{i(!1)}})();const h=g([]);(async()=>{i(!0);try{const{data:s}=await ue();h.value=s.items}catch{}finally{i(!1)}})();const o=g(),t=g({models:[],model_agents:[],is_agents_only:!1});(async(s={id:d.query.id})=>{i(!0);try{const{data:u}=await E(s);t.value.models=u.models,t.value.model_agents=u.model_agents,t.value.is_agents_only=u.is_agents_only}catch{}finally{i(!1)}})();const C=async()=>{var u;await((u=o.value)==null?void 0:u.validate())||m("changeStep","submit",{...t.value})},b=()=>{m("changeStep","backward")};return(s,u)=>{const w=M,V=U,k=F,O=P,K=q,j=T,z=N;return _(),$(z,{ref_key:"formRef",ref:o,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(k,{field:"models",label:s.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:t.value.models,"onUpdate:modelValue":u[0]||(u[0]=c=>t.value.models=c),placeholder:s.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),S(B,null,D(p.value,c=>(_(),$(w,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(k,{field:"model_agents",label:s.$t("key.label.modelAgents")},{default:a(()=>[e(V,{modelValue:t.value.model_agents,"onUpdate:modelValue":u[1]||(u[1]=c=>t.value.model_agents=c),placeholder:s.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),S(B,null,D(h.value,c=>(_(),$(w,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(k,{field:"is_agents_only",label:s.$t("key.label.isAgentsOnly")},{default:a(()=>[e(O,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":u[2]||(u[2]=c=>t.value.is_agents_only=c)},null,8,["modelValue"])]),_:1},8,["label"]),e(k,null,{default:a(()=>[e(j,null,{default:a(()=>[e(K,{type:"secondary",onClick:b},{default:a(()=>[r(y(s.$t("key.button.prev")),1)]),_:1}),e(K,{type:"primary",onClick:C},{default:a(()=>[r(y(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ce=A(ie,[["__scopeId","data-v-d826004b"]]);const pe={},_e={class:"success-wrap"};function me(v,m){const i=X,d=q,p=T;return _(),S("div",_e,[e(i,{status:"success",title:v.$t("key.success.title"),subtitle:v.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(p,{size:16},{default:a(()=>[e(d,{key:"finish",type:"secondary",onClick:m[0]||(m[0]=n=>v.$router.push({name:"KeyModelList"}))},{default:a(()=>[r(y(v.$t("key.button.return")),1)]),_:1}),e(d,{key:"again",type:"primary",onClick:m[1]||(m[1]=n=>v.$router.push({name:"KeyDetail",query:{id:`${v.$route.query.id}`}}))},{default:a(()=>[r(y(v.$t("key.button.view")),1)]),_:1})]),_:1})])}const fe=A(pe,[["render",me],["__scopeId","data-v-016ee704"]]),ye={class:"container"},ve={class:"wrapper"},be={name:"KeyUpdate"},ke=I({...be,setup(v){const{loading:m,setLoading:i}=L(!1),d=g(1),p=g({}),n=async()=>{i(!0);try{await se(p.value),d.value=3,p.value={}}catch{}finally{i(!1)}},h=(l,o)=>{if(typeof l=="number"){d.value=l;return}if(l==="forward"||l==="submit"){if(p.value={...p.value,...o},l==="submit"){n();return}d.value+=1}else l==="backward"&&(d.value-=1)};return(l,o)=>{const t=J,f=x,C=ee,b=ae,s=te,u=le,w=oe;return _(),S("div",ye,[e(C,{class:"container-breadcrumb"},{default:a(()=>[e(f,null,{default:a(()=>[e(t)]),_:1}),e(f,null,{default:a(()=>[r(y(l.$t("menu.key")),1)]),_:1}),e(f,null,{default:a(()=>[r(y(l.$t("menu.key.update")),1)]),_:1})]),_:1}),e(w,{loading:Y(m),style:{width:"100%"}},{default:a(()=>[e(u,{class:"general-card",bordered:!1},{title:a(()=>[r(y(l.$t("key.title.update")),1)]),default:a(()=>[Z("div",ve,[e(s,{current:d.value,"onUpdate:current":o[0]||(o[0]=V=>d.value=V),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(b,{description:l.$t("key.subTitle.baseInfo")},{default:a(()=>[r(y(l.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(b,{description:l.$t("key.subTitle.advanced")},{default:a(()=>[r(y(l.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(b,{description:l.$t("key.subTitle.update.finish")},{default:a(()=>[r(y(l.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(_(),$(Q,null,[d.value===1?(_(),$(de,{key:0,onChangeStep:h})):d.value===2?(_(),$(ce,{key:1,onChangeStep:h})):d.value===3?(_(),$(fe,{key:2,onChangeStep:h})):W("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ee=A(ke,[["__scopeId","data-v-b0da38cd"]]);export{Ee as default};

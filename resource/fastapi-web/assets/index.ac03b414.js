import{_ as V,C as O}from"./index.dc70f908.js";/* empty css               *//* empty css                */import{d as C,e as k,B as i,aD as g,aG as a,aH as e,aL as d,aM as _,bB as q,bC as U,b2 as K,bK as z,aU as L,b5 as N,C as w,aJ as M,aI as B,aT as j,bi as R,bz as E,F as G,bs as J,aE as H,u as P,aK as Q,aF as W,bL as X,bM as Y,bJ as Z,bN as x}from"./arco.aed15247.js";import{u as T}from"./loading.b5911e1d.js";import{b as ee}from"./key.b6046ac2.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{q as ae}from"./model.4c1fb15d.js";import{e as te}from"./agent.4d9ba6a8.js";/* empty css               */import"./chart.9aa6eafa.js";import"./vue.0cc5b64a.js";import"./base.87fcf6e2.js";const le=C({__name:"base-info",emits:["changeStep"],setup(S,{emit:y}){const p=k(),t=k({corp:"",key:"",remark:""}),m=async()=>{var n;await((n=p.value)==null?void 0:n.validate())||y("changeStep","forward",{...t.value})};return(s,n)=>{const l=q,r=U,b=K,v=z,o=L,u=N;return i(),g(u,{ref_key:"formRef",ref:p,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"corp",label:s.$t("key.label.corp"),rules:[{required:!0,message:s.$t("key.error.corp.required")}]},{default:a(()=>[e(r,{modelValue:t.value.corp,"onUpdate:modelValue":n[0]||(n[0]=f=>t.value.corp=f),placeholder:s.$t("key.placeholder.corp")},{default:a(()=>[e(l,{value:"OpenAI"},{default:a(()=>[d("OpenAI")]),_:1}),e(l,{value:"Midjourney"},{default:a(()=>[d("Midjourney")]),_:1}),e(l,{value:"GLM"},{default:a(()=>[d("\u667A\u8C31AI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"key",label:s.$t("key.label.key"),rules:[{required:!0,message:s.$t("key.error.key.required")}]},{default:a(()=>[e(v,{modelValue:t.value.key,"onUpdate:modelValue":n[1]||(n[1]=f=>t.value.key=f),placeholder:s.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"remark",label:s.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(v,{modelValue:t.value.remark,"onUpdate:modelValue":n[2]||(n[2]=f=>t.value.remark=f),placeholder:s.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(o,{type:"primary",onClick:m},{default:a(()=>[d(_(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const oe=V(le,[["__scopeId","data-v-9cb9e87e"]]),se=C({__name:"advanced",emits:["changeStep"],setup(S,{emit:y}){const{setLoading:p}=T(!0),t=k([]);(async()=>{p(!0);try{const{data:o}=await ae();t.value=o.items}catch{}finally{p(!1)}})();const s=k([]);(async()=>{p(!0);try{const{data:o}=await te();s.value=o.items}catch{}finally{p(!1)}})();const l=k(),r=k({models:[],model_agents:[],is_agents_only:!1}),b=async()=>{var u;await((u=l.value)==null?void 0:u.validate())||y("changeStep","submit",{...r.value})},v=()=>{y("changeStep","backward")};return(o,u)=>{const f=q,h=U,$=K,I=j,A=L,F=R,D=N;return i(),g(D,{ref_key:"formRef",ref:l,model:r.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e($,{field:"models",label:o.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(h,{modelValue:r.value.models,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value.models=c),placeholder:o.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(i(!0),w(M,null,B(t.value,c=>(i(),g(f,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e($,{field:"model_agents",label:o.$t("key.label.modelAgents")},{default:a(()=>[e(h,{modelValue:r.value.model_agents,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value.model_agents=c),placeholder:o.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(i(!0),w(M,null,B(s.value,c=>(i(),g(f,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e($,{field:"is_agents_only",label:o.$t("key.label.isAgentsOnly")},{default:a(()=>[e(I,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":u[2]||(u[2]=c=>r.value.is_agents_only=c)},null,8,["modelValue"])]),_:1},8,["label"]),e($,null,{default:a(()=>[e(F,null,{default:a(()=>[e(A,{type:"secondary",onClick:v},{default:a(()=>[d(_(o.$t("key.button.prev")),1)]),_:1}),e(A,{type:"primary",onClick:b},{default:a(()=>[d(_(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ne=V(se,[["__scopeId","data-v-5ac548db"]]),re={class:"success-wrap"},ue=C({__name:"success",emits:["changeStep"],setup(S,{emit:y}){const p=()=>{y("changeStep",1)};return(t,m)=>{const s=E,n=L,l=R;return i(),w("div",re,[e(s,{status:"success",title:t.$t("key.success.title"),subtitle:t.$t("key.success.create.subTitle")},null,8,["title","subtitle"]),e(l,{size:16},{default:a(()=>[e(n,{key:"finish",type:"secondary",onClick:m[0]||(m[0]=r=>t.$router.push({name:"KeyModelList"}))},{default:a(()=>[d(_(t.$t("key.button.finish")),1)]),_:1}),e(n,{key:"again",type:"primary",onClick:p},{default:a(()=>[d(_(t.$t("key.button.again")),1)]),_:1})]),_:1})])}}});const de=V(ue,[["__scopeId","data-v-9a43fb75"]]),ce={class:"container"},pe={class:"wrapper"},ie={name:"KeyCreate"},_e=C({...ie,setup(S){const{loading:y,setLoading:p}=T(!1),t=k(1),m=k({}),s=async()=>{p(!0);try{await ee(m.value),t.value=3,m.value={}}catch{}finally{p(!1)}},n=(l,r)=>{if(typeof l=="number"){t.value=l;return}if(l==="forward"||l==="submit"){if(m.value={...m.value,...r},l==="submit"){s();return}t.value+=1}else l==="backward"&&(t.value-=1)};return(l,r)=>{const b=O,v=Q,o=W,u=X,f=Y,h=Z,$=x;return i(),w("div",ce,[e(o,{class:"container-breadcrumb"},{default:a(()=>[e(v,null,{default:a(()=>[e(b)]),_:1}),e(v,null,{default:a(()=>[d(_(l.$t("menu.key")),1)]),_:1}),e(v,null,{default:a(()=>[d(_(l.$t("menu.key.create")),1)]),_:1})]),_:1}),e($,{loading:P(y),style:{width:"100%"}},{default:a(()=>[e(h,{class:"general-card",bordered:!1},{title:a(()=>[d(_(l.$t("key.title.create")),1)]),default:a(()=>[G("div",pe,[e(f,{current:t.value,"onUpdate:current":r[0]||(r[0]=I=>t.value=I),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(u,{description:l.$t("key.subTitle.baseInfo")},{default:a(()=>[d(_(l.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(u,{description:l.$t("key.subTitle.advanced")},{default:a(()=>[d(_(l.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(u,{description:l.$t("key.subTitle.create.finish")},{default:a(()=>[d(_(l.$t("key.title.create.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(i(),g(J,null,[t.value===1?(i(),g(oe,{key:0,onChangeStep:n})):t.value===2?(i(),g(ne,{key:1,onChangeStep:n})):t.value===3?(i(),g(de,{key:2,onChangeStep:n})):H("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ue=V(_e,[["__scopeId","data-v-832ac543"]]);export{Ue as default};

import{u as le,N as Te,s as Ae,A as Ue,k as qe,B as Le,_ as Pe}from"./index.495022ee.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as ne,e as y,B as i,C as g,aH as e,aG as t,u as r,aD as D,aM as d,aL as f,bA as He,bB as Oe,bC as Me,bD as Re,bE as je,r as ee,c as A,w as Ge,D as F,aJ as te,aI as ae,E as Je,n as Ke,aK as Qe,aF as We,b1 as Xe,b2 as Ye,bH as Ze,bG as et,bI as tt,b5 as at,bJ as lt,ab as nt,aU as ot,bi as st,bj as it,bk as ut,bl as ct,b4 as rt,bK as dt,aT as pt,bL as mt,bM as _t,aV as ft,bN as vt,g as gt}from"./arco.cbac690a.js";import{u as oe}from"./loading.b56ef223.js";import{a as bt,b as ht,s as yt,c as kt,d as $t,e as wt}from"./notice_template.2b94d05e.js";import{c as j,S as Ct}from"./sortable.esm.59243d4c.js";/* empty css                *//* empty css                */import"./chart.e521dee8.js";import"./vue.4014b72a.js";const xt={style:{margin:"10px 0 30px 10px"}},Vt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Dt={key:1},Ft={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},St=["innerHTML"],Nt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},It={key:1},Et={key:1},zt={key:1},Bt={name:"NoticeTemplateDetail"},Tt=ne({...Bt,props:{id:{type:String,default:""}},setup(G){const U=G,{t:c}=le(),{loading:m,setLoading:o}=oe(!0),b=y({});return(async(N={id:U.id})=>{o(!0);try{const{data:s}=await bt(N);for(let u=0;u<s.scenes.length;u+=1)s.scenes[u]=c(`notice.template.dict.scenes.${s.scenes[u]}`);b.value=s}catch{}finally{o(!1)}})(),(N,s)=>{const u=He,v=Oe,h=Me,C=Re,x=je;return i(),g("div",xt,[e(x,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(h,{label:r(c)("notice.template.detail.name")},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",Vt,d(b.value.name),1))]),_:1},8,["label"]),e(h,{label:r(c)("notice.template.detail.scenes")},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",Dt,d(b.value.scenes.toString()),1))]),_:1},8,["label"]),e(h,{label:r(c)("notice.template.detail.title"),span:2},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",Ft,d(b.value.title),1))]),_:1},8,["label"]),e(h,{label:r(c)("notice.template.detail.content"),span:2},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",{key:1,style:{"max-height":"500px",display:"block",overflow:"auto"},innerHTML:b.value.content},null,8,St))]),_:1},8,["label"]),e(h,{label:r(c)("common.remark")},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",Nt,d(b.value.remark||"-"),1))]),_:1},8,["label"]),e(h,{label:r(c)("common.status")},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",It,[e(C,{color:b.value.status===1?"green":"red"},{default:t(()=>[f(d(N.$t(`dict.status.${b.value.status}`)),1)]),_:1},8,["color"])]))]),_:1},8,["label"]),e(h,{label:r(c)("common.created_at")},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",Et,d(b.value.created_at),1))]),_:1},8,["label"]),e(h,{label:r(c)("common.updated_at")},{default:t(()=>[r(m)?(i(),D(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),g("span",zt,d(b.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),At={class:"container"},Ut={class:"action-icon"},qt={class:"action-icon"},Lt={id:"tableSetting"},Pt={style:{"margin-right":"4px",cursor:"move"}},Ht={class:"title"},Ot={name:"NoticeTemplateList"},Mt=ne({...Ot,setup(G){const{loading:U,setLoading:c}=oe(!0),{proxy:m}=gt(),{t:o}=le(),b=ee({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),q=()=>({name:"",scenes:[],status:y(),title:"",content:"",remark:""}),N=y([]),s=y(q()),u=y([]),v=y([]),h=y("medium"),C=y([]),x=y(!0),L=y(),I={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},z=ee({...I}),se=A(()=>[{name:o("size.mini"),value:"mini"},{name:o("size.small"),value:"small"},{name:o("size.medium"),value:"medium"},{name:o("size.large"),value:"large"}]),ie=A(()=>[{title:o("notice.template.columns.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:o("notice.template.columns.scenes"),dataIndex:"scenes",slotName:"scenes",align:"center",ellipsis:!0,tooltip:!0},{title:o("notice.template.columns.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:o("notice.template.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:o("notice.template.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:o("notice.template.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:o("notice.template.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),ue=A(()=>[{label:o("notice.template.dict.scenes.code"),value:"code"},{label:o("notice.template.dict.scenes.register"),value:"register"},{label:o("notice.template.dict.scenes.login"),value:"login"},{label:o("notice.template.dict.scenes.forget_password"),value:"forget_password"},{label:o("notice.template.dict.scenes.change_password"),value:"change_password"},{label:o("notice.template.dict.scenes.change_email"),value:"change_email"},{label:o("notice.template.dict.scenes.quota_recharge"),value:"quota_recharge"},{label:o("notice.template.dict.scenes.quota_warning"),value:"quota_warning"},{label:o("notice.template.dict.scenes.quota_exhaustion"),value:"quota_exhaustion"},{label:o("notice.template.dict.scenes.quota_expire_warning"),value:"quota_expire_warning"},{label:o("notice.template.dict.scenes.quota_expire"),value:"quota_expire"},{label:o("notice.template.dict.scenes.notice"),value:"notice"},{label:o("notice.template.dict.scenes.notice_register"),value:"notice_register"},{label:o("notice.template.dict.scenes.notice_login"),value:"notice_login"}]),ce=A(()=>[{label:o("model.dict.status.1"),value:1},{label:o("model.dict.status.2"),value:2}]),B=async(a={...I})=>{c(!0);try{const{data:l}=await ht(a);for(let p=0;p<l.items.length;p+=1)for(let _=0;_<l.items[p].scenes.length;_+=1)l.items[p].scenes[_]=o(`notice.template.dict.scenes.${l.items[p].scenes[_]}`);N.value=l.items,z.current=a.current,z.pageSize=a.pageSize,z.total=l.paging.total}catch{}finally{c(!1),L.value.selectAll(!1)}};B();const S=()=>{B({...I,...s.value})},re=a=>{B({...I,...s.value,current:a})},de=a=>{I.pageSize=a,B({...I,...s.value})},pe=()=>{s.value=q(),S()},me=(a,l)=>{h.value=a},_e=(a,l,p)=>{a?u.value.splice(p,0,l):u.value=v.value.filter(_=>_.dataIndex!==l.dataIndex)},J=(a,l,p,_=!1)=>{const V=_?j(a):a;return l>-1&&p>-1&&V.splice(l,1,V.splice(p,1,V[l]).pop()),V},fe=a=>{a&&Ke(()=>{const l=document.getElementById("tableSetting");new Ct(l,{onEnd(p){const{oldIndex:_,newIndex:V}=p;J(u.value,_,V),J(v.value,_,V)}})})};Ge(()=>ie.value,a=>{u.value=j(a),u.value.forEach((l,p)=>{l.checked=!0}),v.value=j(u.value)},{deep:!0,immediate:!0});const ve=async a=>{c(!0);try{await yt(a),m.$message.success("\u5220\u9664\u6210\u529F"),S()}catch{}finally{c(!1)}},ge=async a=>{c(!0);try{await kt(a),m.$message.success("\u64CD\u4F5C\u6210\u529F"),S()}catch{}finally{c(!1)}},be=async a=>{c(!0);try{await $t(a),m.$message.success("\u64CD\u4F5C\u6210\u529F"),S()}catch{}finally{c(!1)}},he=a=>{C.value=a,x.value=!a.length},P=a=>{if(C.value.length===0)m.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let l=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${C.value.length}\u6761\u6570\u636E?`;switch(a.action){case"status":a.value===1?l=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${C.value.length}\u6761\u6570\u636E?`:l=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${C.value.length}\u6761\u6570\u636E?`;break;case"delete":l=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${C.value.length}\u6761\u6570\u636E?`;break}m.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:l,hideCancel:!1,onOk:()=>{c(!0),a.ids=C.value,wt(a).then(p=>{c(!1),m.$message.success("\u64CD\u4F5C\u6210\u529F"),S(),L.value.selectAll(!1)})}})}},H=y(!1),K=y(),ye=a=>{H.value=!0,K.value=a},ke=()=>{H.value=!1};return(a,l)=>{const p=Te,_=Qe,V=We,T=Xe,E=Ye,$=Ze,Q=et,O=tt,$e=at,W=lt,we=nt,w=ot,X=Ae,Y=st,M=it,Ce=Ue,xe=ut,Ve=ct,De=qe,Fe=Le,Se=rt,Ne=dt,Z=pt,Ie=mt,Ee=_t,ze=ft,Be=vt;return i(),g("div",At,[e(V,{class:"container-breadcrumb"},{default:t(()=>[e(_,null,{default:t(()=>[e(p)]),_:1}),e(_,null,{default:t(()=>[f(d(a.$t("menu.notice")),1)]),_:1}),e(_,null,{default:t(()=>[f(d(a.$t("menu.notice.template.list")),1)]),_:1})]),_:1}),e(Be,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(O,null,{default:t(()=>[e($,{flex:1},{default:t(()=>[e($e,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e($,{span:8},{default:t(()=>[e(E,{field:"name",label:a.$t("notice.template.form.name")},{default:t(()=>[e(T,{modelValue:s.value.name,"onUpdate:modelValue":l[0]||(l[0]=n=>s.value.name=n),placeholder:a.$t("notice.template.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(E,{field:"title",label:a.$t("notice.template.form.title")},{default:t(()=>[e(T,{modelValue:s.value.title,"onUpdate:modelValue":l[1]||(l[1]=n=>s.value.title=n),placeholder:a.$t("notice.template.form.title.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(E,{field:"content",label:a.$t("notice.template.form.content")},{default:t(()=>[e(T,{modelValue:s.value.content,"onUpdate:modelValue":l[2]||(l[2]=n=>s.value.content=n),placeholder:a.$t("notice.template.form.content.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(E,{field:"scenes",label:a.$t("notice.template.form.scenes")},{default:t(()=>[e(Q,{modelValue:s.value.scenes,"onUpdate:modelValue":l[3]||(l[3]=n=>s.value.scenes=n),placeholder:a.$t("notice.template.form.selectDefault"),options:r(ue),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(E,{field:"status",label:a.$t("notice.template.form.status")},{default:t(()=>[e(Q,{modelValue:s.value.status,"onUpdate:modelValue":l[4]||(l[4]=n=>s.value.status=n),placeholder:a.$t("notice.template.form.selectDefault"),options:r(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(E,{field:"remark",label:a.$t("notice.template.form.remark")},{default:t(()=>[e(T,{modelValue:s.value.remark,"onUpdate:modelValue":l[5]||(l[5]=n=>s.value.remark=n),placeholder:a.$t("notice.template.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(W,{style:{height:"84px"},direction:"vertical"}),e($,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Y,{direction:"vertical",size:18},{default:t(()=>[e(w,{type:"primary",onClick:S},{icon:t(()=>[e(we)]),default:t(()=>[f(" "+d(a.$t("notice.template.form.search")),1)]),_:1}),e(w,{onClick:pe},{icon:t(()=>[e(X)]),default:t(()=>[f(" "+d(a.$t("notice.template.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(O,{style:{"margin-bottom":"16px"}},{default:t(()=>[e($,{span:12},{default:t(()=>[e(Y,null,{default:t(()=>[e(w,{type:"primary",onClick:l[6]||(l[6]=n=>a.$router.push({name:"NoticeTemplateCreate"}))},{default:t(()=>[f(d(a.$t("notice.template.operation.create")),1)]),_:1}),e(w,{type:"primary",status:"success",disabled:x.value,title:x.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[7]||(l[7]=n=>P({action:"status",value:1}))},{default:t(()=>[f(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(w,{type:"primary",status:"danger",disabled:x.value,title:x.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[8]||(l[8]=n=>P({action:"status",value:2}))},{default:t(()=>[f(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(w,{type:"primary",status:"danger",disabled:x.value,title:x.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[9]||(l[9]=n=>P({action:"delete"}))},{default:t(()=>[f(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e($,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(M,{content:a.$t("actions.refresh")},{default:t(()=>[F("div",{class:"action-icon",onClick:S},[e(X,{size:"18"})])]),_:1},8,["content"]),e(Ve,{onSelect:me},{content:t(()=>[(i(!0),g(te,null,ae(r(se),n=>(i(),D(xe,{key:n.value,value:n.value,class:Je({active:n.value===h.value})},{default:t(()=>[F("span",null,d(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(M,{content:a.$t("actions.density")},{default:t(()=>[F("div",Ut,[e(Ce,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(M,{content:a.$t("actions.column_setting")},{default:t(()=>[e(Ne,{trigger:"click",position:"bl",onPopupVisibleChange:fe},{content:t(()=>[F("div",Lt,[(i(!0),g(te,null,ae(v.value,(n,k)=>(i(),g("div",{key:n.dataIndex,class:"setting"},[F("div",Pt,[e(Fe)]),F("div",null,[e(Se,{modelValue:n.checked,"onUpdate:modelValue":R=>n.checked=R,onChange:R=>_e(R,n,k)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),F("div",Ht,d(n.title==="#"?"\u5E8F\u5217\u53F7":n.title),1)]))),128))])]),default:t(()=>[F("div",qt,[e(De,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(Ee,{ref_key:"tableRef",ref:L,"row-key":"id",loading:r(U),pagination:z,columns:u.value,data:N.value,bordered:!1,size:h.value,"row-selection":b,onPageChange:re,onPageSizeChange:de,onSelectionChange:he},{is_public:t(({record:n})=>[e(Z,{modelValue:n.is_public,"onUpdate:modelValue":k=>n.is_public=k,"checked-value":!0,"unchecked-value":!1,onChange:k=>ge({id:`${n.id}`,is_public:`${n.is_public}`})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),status:t(({record:n})=>[e(Z,{modelValue:n.status,"onUpdate:modelValue":k=>n.status=k,"checked-value":1,"unchecked-value":2,onChange:k=>be({id:`${n.id}`,status:Number(`${n.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),remark:t(({record:n})=>[f(d(n.remark||"-"),1)]),operations:t(({record:n})=>[e(w,{type:"text",size:"small",onClick:k=>ye(n.id)},{default:t(()=>[f(d(a.$t("operations.view")),1)]),_:2},1032,["onClick"]),e(w,{type:"text",size:"small",onClick:k=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:`${n.id}`,action:"copy"}})},{default:t(()=>[f(d(a.$t("notice.template.columns.operations.copy")),1)]),_:2},1032,["onClick"]),e(w,{type:"text",size:"small",onClick:k=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:`${n.id}`}})},{default:t(()=>[f(d(a.$t("notice.template.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(Ie,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:k=>ve({id:`${n.id}`})},{default:t(()=>[e(w,{type:"text",size:"small"},{default:t(()=>[f(d(a.$t("notice.template.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(ze,{title:a.$t("menu.notice.template.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:H.value,onCancel:ke},{default:t(()=>[e(Tt,{id:K.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const _a=Pe(Mt,[["__scopeId","data-v-93014a83"]]);export{_a as default};

import{_ as A,C as J}from"./index.119b0b08.js";/* empty css               *//* empty css                */import{d as I,e as g,B as _,aD as $,aG as a,aH as e,aL as d,aM as k,bB as M,bC as U,b2 as F,b1 as G,bK as H,aU as q,b5 as N,C as S,aJ as B,aI as D,aT as P,bi as T,bz as X,F as Z,bs as Q,aE as W,u as Y,aK as x,aF as ee,bL as ae,bM as te,bJ as le,bN as oe}from"./arco.aed15247.js";import{u as L}from"./loading.b5911e1d.js";import{d as E,e as se}from"./key.5f2ea03c.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as R}from"./vue.0cc5b64a.js";/* empty css               */import{q as ne}from"./model.066bc2e6.js";import{f as ue}from"./agent.d97bd73c.js";/* empty css               */import"./chart.9aa6eafa.js";import"./base.87fcf6e2.js";const re=I({__name:"base-info",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:c}=L(!1),r=R(),p=g(),n=g({id:"",corp:"",key:"",remark:"",status:1});(async(l={id:r.query.id})=>{c(!0);try{const{data:t}=await E(l);n.value.id=t.id,n.value.corp=t.corp,n.value.key=t.key,n.value.remark=t.remark,n.value.status=t.status}catch{}finally{c(!1)}})();const s=async()=>{var t;await((t=p.value)==null?void 0:t.validate())||m("changeStep","forward",{...n.value})};return(l,t)=>{const f=M,C=U,v=F,o=G,u=H,w=q,V=N;return _(),$(V,{ref_key:"formRef",ref:p,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(v,{field:"corp",label:l.$t("key.label.corp"),rules:[{required:!0,message:l.$t("key.error.corp.required")}]},{default:a(()=>[e(C,{modelValue:n.value.corp,"onUpdate:modelValue":t[0]||(t[0]=b=>n.value.corp=b),placeholder:l.$t("key.placeholder.corp")},{default:a(()=>[e(f,{value:"OpenAI"},{default:a(()=>[d("OpenAI")]),_:1}),e(f,{value:"Baidu"},{default:a(()=>[d("\u767E\u5EA6")]),_:1}),e(f,{value:"Xfyun"},{default:a(()=>[d("\u79D1\u5927\u8BAF\u98DE")]),_:1}),e(f,{value:"Aliyun"},{default:a(()=>[d("\u963F\u91CC\u4E91")]),_:1}),e(f,{value:"ZhipuAI"},{default:a(()=>[d("\u667A\u8C31AI")]),_:1}),e(f,{value:"Midjourney"},{default:a(()=>[d("Midjourney")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(v,{field:"key",label:l.$t("key.label.key"),rules:[{required:!0,message:l.$t("key.error.key.required")}]},{default:a(()=>[e(o,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=b=>n.value.key=b),placeholder:l.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(v,{field:"remark",label:l.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(u,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=b=>n.value.remark=b),placeholder:l.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,null,{default:a(()=>[e(w,{type:"primary",onClick:s},{default:a(()=>[d(k(l.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=A(re,[["__scopeId","data-v-3d3fbc73"]]),ce=I({__name:"advanced",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:c}=L(!0),r=R(),p=g([]);(async()=>{c(!0);try{const{data:o}=await ne();p.value=o.items}catch{}finally{c(!1)}})();const h=g([]);(async()=>{c(!0);try{const{data:o}=await ue();h.value=o.items}catch{}finally{c(!1)}})();const l=g(),t=g({models:[],model_agents:[],is_agents_only:!1});(async(o={id:r.query.id})=>{c(!0);try{const{data:u}=await E(o);t.value.models=u.models,t.value.model_agents=u.model_agents,t.value.is_agents_only=u.is_agents_only}catch{}finally{c(!1)}})();const C=async()=>{var u;await((u=l.value)==null?void 0:u.validate())||m("changeStep","submit",{...t.value})},v=()=>{m("changeStep","backward")};return(o,u)=>{const w=M,V=U,b=F,O=P,K=q,j=T,z=N;return _(),$(z,{ref_key:"formRef",ref:l,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"models",label:o.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:t.value.models,"onUpdate:modelValue":u[0]||(u[0]=i=>t.value.models=i),placeholder:o.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),S(B,null,D(p.value,i=>(_(),$(w,{key:i.id,value:i.id,label:i.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,{field:"model_agents",label:o.$t("key.label.modelAgents")},{default:a(()=>[e(V,{modelValue:t.value.model_agents,"onUpdate:modelValue":u[1]||(u[1]=i=>t.value.model_agents=i),placeholder:o.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),S(B,null,D(h.value,i=>(_(),$(w,{key:i.id,value:i.id,label:i.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,{field:"is_agents_only",label:o.$t("key.label.isAgentsOnly")},{default:a(()=>[e(O,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":u[2]||(u[2]=i=>t.value.is_agents_only=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(j,null,{default:a(()=>[e(K,{type:"secondary",onClick:v},{default:a(()=>[d(k(o.$t("key.button.prev")),1)]),_:1}),e(K,{type:"primary",onClick:C},{default:a(()=>[d(k(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ie=A(ce,[["__scopeId","data-v-d826004b"]]);const pe={},_e={class:"success-wrap"};function me(y,m){const c=X,r=q,p=T;return _(),S("div",_e,[e(c,{status:"success",title:y.$t("key.success.title"),subtitle:y.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(p,{size:16},{default:a(()=>[e(r,{key:"finish",type:"secondary",onClick:m[0]||(m[0]=n=>y.$router.push({name:"KeyModelList"}))},{default:a(()=>[d(k(y.$t("key.button.return")),1)]),_:1}),e(r,{key:"again",type:"primary",onClick:m[1]||(m[1]=n=>y.$router.push({name:"KeyDetail",query:{id:`${y.$route.query.id}`}}))},{default:a(()=>[d(k(y.$t("key.button.view")),1)]),_:1})]),_:1})])}const fe=A(pe,[["render",me],["__scopeId","data-v-016ee704"]]),ye={class:"container"},ve={class:"wrapper"},be={name:"KeyUpdate"},ke=I({...be,setup(y){const{loading:m,setLoading:c}=L(!1),r=g(1),p=g({}),n=async()=>{c(!0);try{await se(p.value),r.value=3,p.value={}}catch{}finally{c(!1)}},h=(s,l)=>{if(typeof s=="number"){r.value=s;return}if(s==="forward"||s==="submit"){if(p.value={...p.value,...l},s==="submit"){n();return}r.value+=1}else s==="backward"&&(r.value-=1)};return(s,l)=>{const t=J,f=x,C=ee,v=ae,o=te,u=le,w=oe;return _(),S("div",ye,[e(C,{class:"container-breadcrumb"},{default:a(()=>[e(f,null,{default:a(()=>[e(t)]),_:1}),e(f,null,{default:a(()=>[d(k(s.$t("menu.key")),1)]),_:1}),e(f,null,{default:a(()=>[d(k(s.$t("menu.key.update")),1)]),_:1})]),_:1}),e(w,{loading:Y(m),style:{width:"100%"}},{default:a(()=>[e(u,{class:"general-card",bordered:!1},{default:a(()=>[Z("div",ve,[e(o,{current:r.value,"onUpdate:current":l[0]||(l[0]=V=>r.value=V),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(v,{description:s.$t("key.subTitle.baseInfo")},{default:a(()=>[d(k(s.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(v,{description:s.$t("key.subTitle.advanced")},{default:a(()=>[d(k(s.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(v,{description:s.$t("key.subTitle.update.finish")},{default:a(()=>[d(k(s.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(_(),$(Q,null,[r.value===1?(_(),$(de,{key:0,onChangeStep:h})):r.value===2?(_(),$(ie,{key:1,onChangeStep:h})):r.value===3?(_(),$(fe,{key:2,onChangeStep:h})):W("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ee=A(ke,[["__scopeId","data-v-42cfec23"]]);export{Ee as default};

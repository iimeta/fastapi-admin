import{u as le,O as Be,s as Le,A as Pe,k as Ae,B as Oe,_ as Ee}from"./index.dcc2ae0d.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as ne,e as g,B as i,C as f,aH as e,aG as t,u as y,aD as S,aM as c,aL as _,bA as He,bB as Me,bC as Fe,bD as Re,bE as je,r as ee,c as P,w as Ge,D as I,aJ as te,aI as ae,E as Je,n as Ke,aZ as D,a_ as Ze,aK as Qe,aF as We,b1 as Xe,b2 as Ye,bG as et,bI as tt,bK as at,b5 as lt,bL as nt,ab as ot,aU as st,bi as it,bj as ct,bk as ut,bl as dt,b4 as rt,bM as pt,aT as mt,bN as _t,bO as bt,aV as ft,bU as vt}from"./arco.73de4031.js";import{u as oe}from"./loading.0c20cf1b.js";import{a as ht,b as gt,s as yt,c as kt,d as $t,e as wt}from"./notice_template.fe22b622.js";import{c as j,S as Ct}from"./sortable.esm.7de80f5d.js";/* empty css                *//* empty css                */import"./chart.b5ad42b0.js";import"./vue.e54f3d1e.js";const Vt={style:{margin:"10px 0 30px 10px"}},St={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},It={key:1},Nt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Tt=["innerHTML"],xt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},zt={key:1},Dt={key:1},Ut={key:1},qt={name:"NoticeTemplateDetail"},Bt=ne({...qt,props:{id:{type:String,default:""}},setup(G){const A=G,{t:v}=le(),{loading:l,setLoading:U}=oe(!0),b=g({});return(async(s={id:A.id})=>{U(!0);try{const{data:m}=await ht(s);for(let u=0;u<m.scenes.length;u+=1)m.scenes[u]=v(`notice.template.dict.scenes.${m.scenes[u]}`);b.value=m}catch{}finally{U(!1)}})(),(s,m)=>{const u=He,h=Me,d=Fe,C=Re,z=je;return i(),f("div",Vt,[e(z,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(d,{label:s.$t("notice.template.label.name")},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",St,c(b.value.name),1))]),_:1},8,["label"]),e(d,{label:s.$t("notice.template.label.scenes")},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",It,c(b.value.scenes.toString()),1))]),_:1},8,["label"]),e(d,{label:s.$t("notice.template.label.title"),span:2},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",Nt,c(b.value.title),1))]),_:1},8,["label"]),e(d,{label:s.$t("notice.template.label.content"),span:2},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",{key:1,style:{"max-height":"500px",display:"block",overflow:"auto"},innerHTML:b.value.content},null,8,Tt))]),_:1},8,["label"]),e(d,{label:s.$t("common.remark")},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",xt,c(b.value.remark||"-"),1))]),_:1},8,["label"]),e(d,{label:s.$t("common.status")},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",zt,[e(C,{color:b.value.status===1?"green":"red"},{default:t(()=>[_(c(s.$t(`dict.status.${b.value.status}`)),1)]),_:1},8,["color"])]))]),_:1},8,["label"]),e(d,{label:s.$t("common.created_at")},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",Dt,c(b.value.created_at),1))]),_:1},8,["label"]),e(d,{label:s.$t("common.updated_at")},{default:t(()=>[y(l)?(i(),S(h,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",Ut,c(b.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Lt={class:"container"},Pt={class:"action-icon"},At={class:"action-icon"},Ot={id:"tableSetting"},Et={style:{"margin-right":"4px",cursor:"move"}},Ht={class:"title"},Mt={name:"NoticeTemplateList"},Ft=ne({...Mt,setup(G){const{loading:A,setLoading:v}=oe(!0),{t:l}=le(),U=ee({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),b=()=>({name:"",scenes:[],status:g(),title:"",content:"",remark:""}),O=g([]),s=g(b()),m=g([]),u=g([]),h=g("medium"),d=g([]),C=g(!0),z=g(),T={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},q=ee({...T}),se=P(()=>[{name:l("size.mini"),value:"mini"},{name:l("size.small"),value:"small"},{name:l("size.medium"),value:"medium"},{name:l("size.large"),value:"large"}]),ie=P(()=>[{title:l("notice.template.label.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:l("notice.template.label.scenes"),dataIndex:"scenes",slotName:"scenes",align:"center",ellipsis:!0,tooltip:!0},{title:l("notice.template.label.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:l("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:l("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:l("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:l("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),ce=P(()=>[{label:l("notice.template.dict.scenes.code"),value:"code"},{label:l("notice.template.dict.scenes.register"),value:"register"},{label:l("notice.template.dict.scenes.login"),value:"login"},{label:l("notice.template.dict.scenes.forget_password"),value:"forget_password"},{label:l("notice.template.dict.scenes.change_password"),value:"change_password"},{label:l("notice.template.dict.scenes.change_email"),value:"change_email"},{label:l("notice.template.dict.scenes.quota_recharge"),value:"quota_recharge"},{label:l("notice.template.dict.scenes.quota_warning"),value:"quota_warning"},{label:l("notice.template.dict.scenes.quota_exhaustion"),value:"quota_exhaustion"},{label:l("notice.template.dict.scenes.quota_expire_warning"),value:"quota_expire_warning"},{label:l("notice.template.dict.scenes.quota_expire"),value:"quota_expire"},{label:l("notice.template.dict.scenes.notice"),value:"notice"},{label:l("notice.template.dict.scenes.notice_register"),value:"notice_register"},{label:l("notice.template.dict.scenes.notice_login"),value:"notice_login"}]),ue=P(()=>[{label:l("dict.status.1"),value:1},{label:l("dict.status.2"),value:2}]),B=async(a={...T})=>{v(!0);try{const{data:n}=await gt(a);for(let r=0;r<n.items.length;r+=1)for(let p=0;p<n.items[r].scenes.length;p+=1)n.items[r].scenes[p]=l(`notice.template.dict.scenes.${n.items[r].scenes[p]}`);O.value=n.items,q.current=a.current,q.pageSize=a.pageSize,q.total=n.paging.total}catch{}finally{v(!1),z.value.selectAll(!1)}};B();const N=()=>{B({...T,...s.value})},de=a=>{B({...T,...s.value,current:a})},re=a=>{T.pageSize=a,B({...T,...s.value})},pe=()=>{s.value=b(),N()},me=(a,n)=>{h.value=a},_e=(a,n,r)=>{a?m.value.splice(r,0,n):m.value=u.value.filter(p=>p.dataIndex!==n.dataIndex)},J=(a,n,r,p=!1)=>{const V=p?j(a):a;return n>-1&&r>-1&&V.splice(n,1,V.splice(r,1,V[n]).pop()),V},be=a=>{a&&Ke(()=>{const n=document.getElementById("tableSetting");new Ct(n,{onEnd(r){const{oldIndex:p,newIndex:V}=r;J(m.value,p,V),J(u.value,p,V)}})})};Ge(()=>ie.value,a=>{m.value=j(a),m.value.forEach((n,r)=>{n.checked=!0}),u.value=j(m.value)},{deep:!0,immediate:!0});const fe=async a=>{v(!0);try{await yt(a),D.success(l("success.delete")),N()}catch{}finally{v(!1)}},ve=async a=>{v(!0);try{await kt(a),D.success(l("success.operate")),N()}catch{}finally{v(!1)}},he=async a=>{v(!0);try{await $t(a),D.success(l("success.operate")),N()}catch{}finally{v(!1)}},ge=a=>{d.value=a,C.value=!a.length},E=a=>{if(d.value.length===0)D.info(l("placeholder.operation.data"));else{let n=l("placeholder.batch.operation",{count:d.value.length});switch(a.action){case"status":a.value===1?n=l("placeholder.batch.operation.enable",{count:d.value.length}):n=l("placeholder.batch.operation.disable",{count:d.value.length});break;case"delete":n=l("placeholder.batch.operation.delete",{count:d.value.length});break}Ze.warning({title:l("modal.warning.title"),titleAlign:"center",content:n,okText:l("button.ok"),cancelText:l("button.cancel"),hideCancel:!1,onOk:()=>{v(!0),a.ids=d.value,wt(a).then(r=>{v(!1),D.success(l("success.operate")),N(),z.value.selectAll(!1)})}})}},H=g(!1),K=g(),ye=a=>{H.value=!0,K.value=a},ke=()=>{H.value=!1};return(a,n)=>{const r=Be,p=Qe,V=We,L=Xe,x=Ye,$=et,Z=tt,M=at,$e=lt,Q=nt,we=ot,w=st,W=Le,X=it,F=ct,Ce=Pe,Ve=ut,Se=dt,Ie=Ae,Ne=Oe,Te=rt,xe=pt,Y=mt,ze=_t,De=bt,Ue=ft,qe=vt;return i(),f("div",Lt,[e(V,{class:"container-breadcrumb"},{default:t(()=>[e(p,null,{default:t(()=>[e(r)]),_:1}),e(p,null,{default:t(()=>[_(c(a.$t("notice.menu")),1)]),_:1}),e(p,null,{default:t(()=>[_(c(a.$t("notice.template.menu")),1)]),_:1})]),_:1}),e(qe,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(M,null,{default:t(()=>[e($,{flex:1},{default:t(()=>[e($e,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(M,{gutter:16},{default:t(()=>[e($,{span:8},{default:t(()=>[e(x,{field:"name",label:a.$t("notice.template.label.name")},{default:t(()=>[e(L,{modelValue:s.value.name,"onUpdate:modelValue":n[0]||(n[0]=o=>s.value.name=o),placeholder:a.$t("notice.template.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{field:"title",label:a.$t("notice.template.label.title")},{default:t(()=>[e(L,{modelValue:s.value.title,"onUpdate:modelValue":n[1]||(n[1]=o=>s.value.title=o),placeholder:a.$t("notice.template.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{field:"content",label:a.$t("notice.template.label.content")},{default:t(()=>[e(L,{modelValue:s.value.content,"onUpdate:modelValue":n[2]||(n[2]=o=>s.value.content=o),placeholder:a.$t("notice.template.placeholder.content"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{field:"scenes",label:a.$t("notice.template.label.scenes")},{default:t(()=>[e(Z,{modelValue:s.value.scenes,"onUpdate:modelValue":n[3]||(n[3]=o=>s.value.scenes=o),placeholder:a.$t("common.all"),options:y(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{field:"status",label:a.$t("common.status")},{default:t(()=>[e(Z,{modelValue:s.value.status,"onUpdate:modelValue":n[4]||(n[4]=o=>s.value.status=o),placeholder:a.$t("common.all"),options:y(ue),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{field:"remark",label:a.$t("common.remark")},{default:t(()=>[e(L,{modelValue:s.value.remark,"onUpdate:modelValue":n[5]||(n[5]=o=>s.value.remark=o),placeholder:a.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{style:{height:"84px"},direction:"vertical"}),e($,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(X,{direction:"vertical",size:18},{default:t(()=>[e(w,{type:"primary",onClick:N},{icon:t(()=>[e(we)]),default:t(()=>[_(" "+c(a.$t("button.search")),1)]),_:1}),e(w,{onClick:pe},{icon:t(()=>[e(W)]),default:t(()=>[_(" "+c(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(M,{style:{"margin-bottom":"16px"}},{default:t(()=>[e($,{span:12},{default:t(()=>[e(X,null,{default:t(()=>[e(w,{type:"primary",onClick:n[6]||(n[6]=o=>a.$router.push({name:"NoticeTemplateCreate"}))},{default:t(()=>[_(c(a.$t("button.create")),1)]),_:1}),e(w,{type:"primary",status:"success",disabled:C.value,title:C.value?a.$t("placeholder.operation.data"):"",onClick:n[7]||(n[7]=o=>E({action:"status",value:1}))},{default:t(()=>[_(c(a.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(w,{type:"primary",status:"danger",disabled:C.value,title:C.value?a.$t("placeholder.operation.data"):"",onClick:n[8]||(n[8]=o=>E({action:"status",value:2}))},{default:t(()=>[_(c(a.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(w,{type:"primary",status:"danger",disabled:C.value,title:C.value?a.$t("placeholder.operation.data"):"",onClick:n[9]||(n[9]=o=>E({action:"delete"}))},{default:t(()=>[_(c(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e($,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(F,{content:a.$t("action.refresh")},{default:t(()=>[I("div",{class:"action-icon",onClick:N},[e(W,{size:"18"})])]),_:1},8,["content"]),e(Se,{onSelect:me},{content:t(()=>[(i(!0),f(te,null,ae(y(se),o=>(i(),S(Ve,{key:o.value,value:o.value,class:Je({active:o.value===h.value})},{default:t(()=>[I("span",null,c(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(F,{content:a.$t("action.density")},{default:t(()=>[I("div",Pt,[e(Ce,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(F,{content:a.$t("action.column_setting")},{default:t(()=>[e(xe,{trigger:"click",position:"bl",onPopupVisibleChange:be},{content:t(()=>[I("div",Ot,[(i(!0),f(te,null,ae(u.value,(o,k)=>(i(),f("div",{key:o.dataIndex,class:"setting"},[I("div",Et,[e(Ne)]),I("div",null,[e(Te,{modelValue:o.checked,"onUpdate:modelValue":R=>o.checked=R,onChange:R=>_e(R,o,k)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),I("div",Ht,c(o.title),1)]))),128))])]),default:t(()=>[I("div",At,[e(Ie,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(De,{ref_key:"tableRef",ref:z,"row-key":"id",loading:y(A),pagination:q,columns:m.value,data:O.value,bordered:!1,size:h.value,"row-selection":U,onPageChange:de,onPageSizeChange:re,onSelectionChange:ge},{is_public:t(({record:o})=>[e(Y,{modelValue:o.is_public,"onUpdate:modelValue":k=>o.is_public=k,"checked-value":!0,"unchecked-value":!1,onChange:k=>ve({id:o.id,is_public:o.is_public})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),status:t(({record:o})=>[e(Y,{modelValue:o.status,"onUpdate:modelValue":k=>o.status=k,"checked-value":1,"unchecked-value":2,onChange:k=>he({id:o.id,status:o.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),remark:t(({record:o})=>[_(c(o.remark||"-"),1)]),operations:t(({record:o})=>[e(w,{type:"text",size:"small",onClick:k=>ye(o.id)},{default:t(()=>[_(c(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(w,{type:"text",size:"small",onClick:k=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:o.id,action:"copy"}})},{default:t(()=>[_(c(a.$t("button.copy")),1)]),_:2},1032,["onClick"]),e(w,{type:"text",size:"small",onClick:k=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:o.id}})},{default:t(()=>[_(c(a.$t("button.update")),1)]),_:2},1032,["onClick"]),e(ze,{content:a.$t("placeholder.operation.delete"),onOk:k=>fe({id:o.id})},{default:t(()=>[e(w,{type:"text",size:"small"},{default:t(()=>[_(c(a.$t("button.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(Ue,{title:a.$t("notice.template.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:H.value,onCancel:ke},{default:t(()=>[e(Bt,{id:K.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const pa=Ee(Ft,[["__scopeId","data-v-a5db3c03"]]);export{pa as default};

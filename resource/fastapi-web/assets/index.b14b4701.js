import{u as _e,_ as ze,N as st,s as it,A as dt,k as ut,B as rt}from"./index.79fdc057.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as be,e as g,B as l,C as u,aH as e,aG as t,u as $,aD as m,aM as n,aL as f,bA as ct,bB as mt,bC as pt,bD as xe,bE as _t,c as ee,w as De,aJ as K,aI as J,bH as Le,bI as Me,b2 as Ae,bG as Ne,b1 as Ue,bK as Pe,b5 as Be,bL as Te,ab as qe,aU as He,bi as Ee,bU as bt,b7 as ft,bN as je,bT as Fe,r as Ie,D as P,E as vt,n as gt,aZ as pe,a_ as Se,aK as ht,aF as yt,bj as kt,bk as $t,bl as wt,b4 as Ct,bM as Vt,aT as It,aV as St}from"./arco.3f46b4ae.js";import{u as fe}from"./loading.37fd256d.js";import{a as zt,t as xt,b as Dt,s as Lt,c as Mt}from"./model_agent.bceddebc.js";import{c as Z,S as At}from"./sortable.esm.078712c4.js";import{q as Oe}from"./provider.99343481.js";import{b as Nt,q as Ut}from"./model.2e696793.js";import{M as Pt}from"./models.48d5c5df.js";/* empty css                *//* empty css                *//* empty css              */import{f as Bt}from"./vue.dbcf9bc3.js";import"./chart.2cea905d.js";const Tt={style:{margin:"10px 0 30px 10px"}},qt={key:1},Ht={key:1},Et={key:1},jt={key:1},Ft={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ot={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Rt={key:1},Gt={key:1},Kt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Jt={key:1},Zt={key:1},Qt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Wt={key:1},Xt={key:1},Yt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},ea={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},ta={key:1},aa={key:1},la={name:"ModelAgentDetail"},oa=be({...la,props:{id:{type:String,default:""}},setup(Q){const L=Q;_e();const{loading:v,setLoading:d}=fe(!0),_=g({});return(async(c={id:L.id})=>{d(!0);try{const{data:h}=await zt(c);_.value=h}catch{}finally{d(!1)}})(),(c,h)=>{const i=ct,b=mt,y=pt,V=xe,S=_t;return l(),u("div",Tt,[e(S,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(y,{label:c.$t("common.provider")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",qt,n(_.value.provider_name),1))]),_:1},8,["label"]),e(y,{label:c.$t("model.agent.label.name")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Ht,n(_.value.name),1))]),_:1},8,["label"]),e(y,{label:c.$t("model.agent.label.base_url"),span:2},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Et,n(_.value.base_url),1))]),_:1},8,["label"]),e(y,{label:c.$t("model.agent.label.path"),span:2},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",jt,n(_.value.path||"-"),1))]),_:1},8,["label"]),e(y,{label:c.$t("common.bind_group"),span:2},{default:t(()=>{var w,C;return[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Ft,n(((C=(w=_.value)==null?void 0:w.group_names)==null?void 0:C.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(y,{label:c.$t("common.bind_models"),span:2},{default:t(()=>{var w,C;return[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Ot,n(((C=(w=_.value)==null?void 0:w.model_names)==null?void 0:C.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(y,{label:c.$t("common.billing_methods"),span:2},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Rt,n(c.$t(`dict.billing_methods.${_.value.billing_methods||1}`)),1))]),_:1},8,["label"]),e(y,{label:c.$t("common.weight")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Gt,n(_.value.weight||0),1))]),_:1},8,["label"]),e(y,{label:c.$t("model.agent.detail.fallback_models")},{default:t(()=>{var w,C;return[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Kt,n(((C=(w=_.value)==null?void 0:w.fallback_model_names)==null?void 0:C.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(y,{label:c.$t("model.agent.label.is_never_disable")},{default:t(()=>{var w;return[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Jt,n(c.$t(`dict.${((w=_.value)==null?void 0:w.is_never_disable)||!1}`)),1))]}),_:1},8,["label"]),e(y,{label:c.$t("model.agent.label.lb_strategy")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Zt,n(c.$t(`dict.lb_strategy.${_.value.lb_strategy||1}`)),1))]),_:1},8,["label"]),e(y,{label:c.$t("common.key"),span:2},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Qt,n(_.value.key||"-"),1))]),_:1},8,["label"]),e(y,{label:c.$t("key.detail.is_auto_disabled")},{default:t(()=>{var w;return[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Wt,n(c.$t(`dict.${((w=_.value)==null?void 0:w.is_auto_disabled)||!1}`)),1))]}),_:1},8,["label"]),e(y,{label:c.$t("common.status")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Xt,[_.value.status===1?(l(),m(V,{key:0,color:"green"},{default:t(()=>[f(n(c.$t(`dict.status.${_.value.status}`)),1)]),_:1})):(l(),m(V,{key:1,color:"red"},{default:t(()=>[f(n(c.$t(`dict.status.${_.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),e(y,{label:c.$t("key.detail.auto_disabled_reason"),span:2},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",Yt,n(_.value.auto_disabled_reason||"-"),1))]),_:1},8,["label"]),e(y,{label:c.$t("common.remark"),span:2},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",ea,n(_.value.remark||"-"),1))]),_:1},8,["label"]),e(y,{label:c.$t("common.created_at")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",ta,n(_.value.created_at),1))]),_:1},8,["label"]),e(y,{label:c.$t("common.updated_at")},{default:t(()=>[$(v)?(l(),m(b,{key:0,animation:!0},{default:t(()=>[e(i,{rows:1})]),_:1})):(l(),u("span",aa,n(_.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),na={class:"container"},sa={key:1},ia={key:0},da={key:1},ua={key:2},ra={key:3},ca={name:"Models"},ma=be({...ca,props:{id:{type:String,default:""},action:{type:String,default:""}},setup(Q){const L=Q,{loading:v,setLoading:d}=fe(!0),{t:_}=_e(),H=Bt(),c=()=>({provider_id:"",name:"",model:"",type:g(),status:g()}),h=g([]),i=g(c()),b=g([]),y=g([]),V=g("medium"),S=ee(()=>[{title:_("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center"},{title:_("common.model_name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:_("common.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:_("model.agent.columns.result_total_time"),dataIndex:"result_total_time",slotName:"result_total_time",align:"center"},{title:_("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:120}]),w=async(r={id:L.id,action:L.action})=>{d(!0);try{const{data:k}=await Nt(r);h.value=k.items}catch{}finally{d(!1)}};w();const C=()=>{w({id:L.id,action:L.action,...i.value})};De(()=>S.value,r=>{b.value=Z(r),b.value.forEach((k,W)=>{k.checked=!0}),y.value=Z(b.value)},{deep:!0,immediate:!0});const B=g([]);(async()=>{d(!0);try{const{data:r}=await Oe();B.value=r.items}catch{}finally{d(!1)}})();const te=async r=>{r.testing=!0,r.trace_id="";const{data:k}=await xt({model_agent_id:L.id,model_id:r.id});r.trace_id=k.trace_id,r.result=k.result,r.total_time=k.total_time,r.testing=!1},ae=r=>H.resolve({name:"LogTextList",query:{trace_id:r}}).href;return(r,k)=>{const W=Le,le=Me,E=Ae,T=Ne,X=Ue,j=Pe,oe=Be,F=Te,ge=qe,O=He,he=Ee,ne=bt,N=xe,R=ft,G=je,U=Fe;return l(),u("div",na,[e(U,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"0px"}},{default:t(()=>[e(j,null,{default:t(()=>[e(T,{flex:1},{default:t(()=>[e(oe,{model:i.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(j,{gutter:16},{default:t(()=>[e(T,{span:8},{default:t(()=>[e(E,{field:"provider_id",label:r.$t("common.provider"),"label-col-props":{span:6}},{default:t(()=>[e(le,{modelValue:i.value.provider_id,"onUpdate:modelValue":k[0]||(k[0]=p=>i.value.provider_id=p),placeholder:r.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),u(K,null,J(B.value,p=>(l(),m(W,{key:p.id,value:p.id,label:p.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(T,{span:8},{default:t(()=>[e(E,{field:"name",label:r.$t("common.model_name"),"label-col-props":{span:6}},{default:t(()=>[e(X,{modelValue:i.value.name,"onUpdate:modelValue":k[1]||(k[1]=p=>i.value.name=p),placeholder:r.$t("model.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(T,{span:8},{default:t(()=>[e(E,{field:"model",label:r.$t("common.model"),"label-col-props":{span:6}},{default:t(()=>[e(X,{modelValue:i.value.model,"onUpdate:modelValue":k[2]||(k[2]=p=>i.value.model=p),placeholder:r.$t("model.form.placeholder.model"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{style:{height:"32px"},direction:"vertical"}),e(T,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(he,{direction:"vertical",size:18},{default:t(()=>[e(O,{type:"primary",onClick:C},{icon:t(()=>[e(ge)]),default:t(()=>[f(" "+n(r.$t("button.search")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{style:{"margin-top":"0"}}),e(G,{"row-key":"id",loading:$(v),pagination:!1,columns:b.value,data:h.value,bordered:!1,size:V.value,scroll:{y:"380px"},scrollbar:!1},{result_total_time:t(({record:p})=>[p.testing?(l(),m(ne,{key:0})):(l(),u("span",sa,[p.result?(l(),u("span",ia,[p.result===1?(l(),m(N,{key:0,color:"green"},{default:t(()=>[f(n(r.$t(`log.dict.status.${p.result}`)),1)]),_:2},1024)):(l(),m(N,{key:1,color:"red"},{default:t(()=>[f(n(r.$t(`log.dict.status.${p.result}`)),1)]),_:2},1024))])):(l(),u("span",da," - ")),f(" / "),p.total_time?(l(),u("span",ua,[p.total_time>12e4?(l(),m(N,{key:0,color:"red"},{default:t(()=>[f(n(p.total_time)+" ms ",1)]),_:2},1024)):p.total_time>9e4?(l(),m(N,{key:1,color:"orange"},{default:t(()=>[f(n(p.total_time)+" ms ",1)]),_:2},1024)):p.total_time>6e4?(l(),m(N,{key:2,color:"gold"},{default:t(()=>[f(n(p.total_time)+" ms ",1)]),_:2},1024)):(l(),m(N,{key:3,color:"green"},{default:t(()=>[f(n(p.total_time||"-")+" ms",1)]),_:2},1024))])):(l(),u("span",ra," - "))]))]),operations:t(({record:p})=>[e(O,{type:"text",size:"small",disabled:p.testing,onClick:ye=>te(p)},{default:t(()=>[f(n(r.$t("button.test")),1)]),_:2},1032,["disabled","onClick"]),e(R,{href:ae(p.trace_id),disabled:p.trace_id==="",target:"_blank"},{default:t(()=>[f(n(r.$t("button.detail")),1)]),_:2},1032,["href","disabled"])]),_:1},8,["loading","columns","data","size"])]),_:1})])}}});const pa=ze(ma,[["__scopeId","data-v-4c7550f2"]]),_a={class:"container"},ba={class:"action-icon"},fa={class:"action-icon"},va={id:"tableSetting"},ga={style:{"margin-right":"4px",cursor:"move"}},ha={class:"title"},ya={key:0},ka={key:1},$a={name:"ModelAgentList"},wa=be({...$a,setup(Q){const{loading:L,setLoading:v}=fe(!0),{t:d}=_e(),_=Ie({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),H=()=>({provider_id:"",name:"",base_url:"",models:[],status:g(),remark:""}),c=g([]),h=g(H()),i=g([]),b=g([]),y=g("medium"),V=g([]),S=g(!0),w=g(),C={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},B=Ie({...C}),ve=ee(()=>[{name:d("size.mini"),value:"mini"},{name:d("size.small"),value:"small"},{name:d("size.medium"),value:"medium"},{name:d("size.large"),value:"large"}]),te=ee(()=>[{title:d("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center",width:120},{title:d("model.agent.label.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:d("common.bind_group"),dataIndex:"group_names",slotName:"group_names",align:"center",ellipsis:!0,tooltip:!0},{title:d("common.bind_models"),dataIndex:"model_names",slotName:"model_names",align:"center",ellipsis:!0,tooltip:!0},{title:d("common.weight"),dataIndex:"weight",slotName:"weight",align:"center"},{title:d("common.lb_strategy"),dataIndex:"lb_strategy",slotName:"lb_strategy",align:"center"},{title:d("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:d("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:d("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:d("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:200}]),ae=ee(()=>[{label:d("dict.status.1"),value:1},{label:d("dict.status.2"),value:2}]),r=async(a={...C})=>{v(!0);try{const{data:s}=await Dt(a);c.value=s.items,B.current=a.current,B.pageSize=a.pageSize,B.total=s.paging.total}catch{}finally{v(!1),w.value.selectAll(!1)}};r();const k=()=>{r({...C,...h.value})},W=a=>{r({...C,...h.value,current:a})},le=a=>{C.pageSize=a,r({...C,...h.value})},E=()=>{h.value=H(),k()},T=(a,s)=>{y.value=a},X=(a,s,x)=>{a?i.value.splice(x,0,s):i.value=b.value.filter(M=>M.dataIndex!==s.dataIndex)},j=(a,s,x,M=!1)=>{const A=M?Z(a):a;return s>-1&&x>-1&&A.splice(s,1,A.splice(x,1,A[s]).pop()),A},oe=a=>{a&&gt(()=>{const s=document.getElementById("tableSetting");new At(s,{onEnd(x){const{oldIndex:M,newIndex:A}=x;j(i.value,M,A),j(b.value,M,A)}})})};De(()=>te.value,a=>{i.value=Z(a),i.value.forEach((s,x)=>{s.checked=!0}),b.value=Z(i.value)},{deep:!0,immediate:!0});const F=g([]);(async()=>{try{const{data:a}=await Oe();F.value=a.items}catch{}})();const O=g([]);(async()=>{try{const{data:a}=await Ut();O.value=a.items}catch{}})();const ne=async a=>{v(!0);try{await Lt(a),pe.success(d("success.operate")),k()}catch{}finally{v(!1)}},N=a=>{V.value=a,S.value=!a.length},R=a=>{if(V.value.length===0)pe.info(d("placeholder.operation.data"));else{let s=d("placeholder.batch.operation",{count:V.value.length});switch(a.action){case"status":a.value===1?s=d("placeholder.batch.operation.enable",{count:V.value.length}):s=d("placeholder.batch.operation.disable",{count:V.value.length});break;case"delete":s=d("placeholder.batch.operation.delete",{count:V.value.length});break}Se.warning({title:d("modal.warning.title"),titleAlign:"center",content:s,okText:d("button.ok"),cancelText:d("button.cancel"),hideCancel:!1,onOk:()=>{v(!0),a.ids=V.value,Mt(a).then(x=>{v(!1),pe.success(d("success.operate")),k(),w.value.selectAll(!1)})}})}},G=g(!1),U=g(),p=a=>{G.value=!0,U.value=a},ye=()=>{G.value=!1},se=g(!1),ie=g(!1),Y=g(),Re=a=>{se.value=!0,U.value=a,Y.value="agent"},Ge=a=>{ie.value=!0,U.value=a,Y.value="agent"};return(a,s)=>{const x=st,M=ht,A=yt,ke=Le,de=Me,q=Ae,D=Ne,ue=Ue,re=Pe,Ke=Be,$e=Te,Je=qe,z=He,we=it,Ce=Ee,ce=kt,Ze=dt,Qe=$t,We=wt,Xe=ut,Ye=rt,et=Ct,tt=Vt,at=It,lt=je,ot=St,Ve=Se,nt=Fe;return l(),u("div",_a,[e(A,{class:"container-breadcrumb"},{default:t(()=>[e(M,null,{default:t(()=>[e(x)]),_:1}),e(M,null,{default:t(()=>[f(n(a.$t("model.agent.menu")),1)]),_:1})]),_:1}),e(nt,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(re,null,{default:t(()=>[e(D,{flex:1},{default:t(()=>[e(Ke,{model:h.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(re,{gutter:16},{default:t(()=>[e(D,{span:8},{default:t(()=>[e(q,{field:"provider_id",label:a.$t("common.provider")},{default:t(()=>[e(de,{modelValue:h.value.provider_id,"onUpdate:modelValue":s[0]||(s[0]=o=>h.value.provider_id=o),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),u(K,null,J(F.value,o=>(l(),m(ke,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(D,{span:8},{default:t(()=>[e(q,{field:"name",label:a.$t("model.agent.label.name")},{default:t(()=>[e(ue,{modelValue:h.value.name,"onUpdate:modelValue":s[1]||(s[1]=o=>h.value.name=o),placeholder:a.$t("model.agent.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(D,{span:8},{default:t(()=>[e(q,{field:"base_url",label:a.$t("model.agent.label.base_url")},{default:t(()=>[e(ue,{modelValue:h.value.base_url,"onUpdate:modelValue":s[2]||(s[2]=o=>h.value.base_url=o),placeholder:a.$t("model.agent.error.required.base_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(D,{span:8},{default:t(()=>[e(q,{field:"models",label:a.$t("common.bind_models")},{default:t(()=>[e(de,{modelValue:h.value.models,"onUpdate:modelValue":s[3]||(s[3]=o=>h.value.models=o),placeholder:a.$t("common.all"),"max-tag-count":2,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),u(K,null,J(O.value,o=>(l(),m(ke,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(D,{span:8},{default:t(()=>[e(q,{field:"status",label:a.$t("common.status")},{default:t(()=>[e(de,{modelValue:h.value.status,"onUpdate:modelValue":s[4]||(s[4]=o=>h.value.status=o),placeholder:a.$t("common.all"),options:$(ae),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(D,{span:8},{default:t(()=>[e(q,{field:"remark",label:a.$t("common.remark")},{default:t(()=>[e(ue,{modelValue:h.value.remark,"onUpdate:modelValue":s[5]||(s[5]=o=>h.value.remark=o),placeholder:a.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e($e,{style:{height:"84px"},direction:"vertical"}),e(D,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Ce,{direction:"vertical",size:18},{default:t(()=>[e(z,{type:"primary",onClick:k},{icon:t(()=>[e(Je)]),default:t(()=>[f(" "+n(a.$t("button.search")),1)]),_:1}),e(z,{onClick:E},{icon:t(()=>[e(we)]),default:t(()=>[f(" "+n(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e($e,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(re,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(D,{span:12},{default:t(()=>[e(Ce,null,{default:t(()=>[e(z,{type:"primary",onClick:s[6]||(s[6]=o=>a.$router.push({name:"ModelAgentCreate"}))},{default:t(()=>[f(n(a.$t("button.create")),1)]),_:1}),e(z,{type:"primary",status:"success",disabled:S.value,title:S.value?a.$t("placeholder.operation.data"):"",onClick:s[7]||(s[7]=o=>R({action:"status",value:1}))},{default:t(()=>[f(n(a.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(z,{type:"primary",status:"danger",disabled:S.value,title:S.value?a.$t("placeholder.operation.data"):"",onClick:s[8]||(s[8]=o=>R({action:"status",value:2}))},{default:t(()=>[f(n(a.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(z,{type:"primary",status:"danger",disabled:S.value,title:S.value?a.$t("placeholder.operation.data"):"",onClick:s[9]||(s[9]=o=>R({action:"delete"}))},{default:t(()=>[f(n(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(D,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(ce,{content:a.$t("action.refresh")},{default:t(()=>[P("div",{class:"action-icon",onClick:k},[e(we,{size:"18"})])]),_:1},8,["content"]),e(We,{onSelect:T},{content:t(()=>[(l(!0),u(K,null,J($(ve),o=>(l(),m(Qe,{key:o.value,value:o.value,class:vt({active:o.value===y.value})},{default:t(()=>[P("span",null,n(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(ce,{content:a.$t("action.density")},{default:t(()=>[P("div",ba,[e(Ze,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(ce,{content:a.$t("action.column_setting")},{default:t(()=>[e(tt,{trigger:"click",position:"bl",onPopupVisibleChange:oe},{content:t(()=>[P("div",va,[(l(!0),u(K,null,J(b.value,(o,I)=>(l(),u("div",{key:o.dataIndex,class:"setting"},[P("div",ga,[e(Ye)]),P("div",null,[e(et,{modelValue:o.checked,"onUpdate:modelValue":me=>o.checked=me,onChange:me=>X(me,o,I)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),P("div",ha,n(o.title),1)]))),128))])]),default:t(()=>[P("div",fa,[e(Xe,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(lt,{ref_key:"tableRef",ref:w,"row-key":"id",loading:$(L),pagination:B,columns:i.value,data:c.value,bordered:!1,size:y.value,"row-selection":_,onPageChange:W,onPageSizeChange:le,onSelectionChange:N},{group_names:t(({record:o})=>{var I;return[f(n(((I=o==null?void 0:o.group_names)==null?void 0:I.join(","))||"-"),1)]}),model_names:t(({record:o})=>[o.model_names?(l(),u("span",ya,[e(z,{type:"text",size:"small",onClick:I=>Re(o.id)},{default:t(()=>[f(n(a.$t("button.view")),1)]),_:2},1032,["onClick"])])):(l(),u("span",ka,n("-")))]),weight:t(({record:o})=>[f(n(o.weight||0),1)]),lb_strategy:t(({record:o})=>[f(n(a.$t(`dict.lb_strategy.${o.lb_strategy||1}`)),1)]),remark:t(({record:o})=>[f(n(o.remark||"-"),1)]),status:t(({record:o})=>[e(at,{modelValue:o.status,"onUpdate:modelValue":I=>o.status=I,"checked-value":1,"unchecked-value":2,onChange:I=>ne({id:o.id,status:o.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:t(({record:o})=>[e(z,{type:"text",size:"small",onClick:I=>p(o.id)},{default:t(()=>[f(n(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(z,{type:"text",size:"small",onClick:I=>a.$router.push({name:"ModelAgentUpdate",query:{id:o.id}})},{default:t(()=>[f(n(a.$t("button.update")),1)]),_:2},1032,["onClick"]),e(z,{type:"text",size:"small",onClick:I=>a.$router.push({name:"ModelKeyList",query:{agent_id:o.id}})},{default:t(()=>[f(n(a.$t("button.key")),1)]),_:2},1032,["onClick"]),e(z,{type:"text",size:"small",onClick:I=>Ge(o.id)},{default:t(()=>[f(n(a.$t("button.test")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(ot,{title:a.$t("model.agent.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:G.value,onCancel:ye},{default:t(()=>[e(oa,{id:U.value},null,8,["id"])]),_:1},8,["title","visible"]),e(Ve,{visible:se.value,"onUpdate:visible":s[10]||(s[10]=o=>se.value=o),title:a.$t("common.bind_models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":a.$t("button.close")},{default:t(()=>[e(Pt,{id:U.value,action:Y.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"]),e(Ve,{visible:ie.value,"onUpdate:visible":s[11]||(s[11]=o=>ie.value=o),title:a.$t("model.agent.title.test_models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":a.$t("button.close")},{default:t(()=>[e(pa,{id:U.value,action:Y.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"])]),_:1})])}}});const Za=ze(wa,[["__scopeId","data-v-171937a4"]]);export{Za as default};

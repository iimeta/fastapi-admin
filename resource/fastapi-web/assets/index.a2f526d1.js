import{u as fl,M as _l,s as bl,A as vl,k as gl,B as yl,_ as kl}from"./index.b80693be.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as Ne,e as y,B as n,C as _,aH as l,aG as e,u as v,aD as r,aM as d,aL as k,bA as hl,bB as $l,bC as wl,bD as Vl,bE as Cl,r as Oe,c as pe,w as Ul,aJ as E,aI as G,aE as M,D as J,E as Sl,n as Il,aZ as we,a_ as Ae,aK as Ml,aF as ql,bH as Dl,bI as zl,b2 as Ll,bG as Bl,b1 as Fl,bK as Hl,b5 as Ol,bL as Al,ab as Nl,aU as Pl,bi as Tl,bj as jl,bk as El,bl as Gl,b4 as Rl,bM as Jl,aT as Kl,bN as Zl,aV as Ql,bP as Wl,bT as Xl}from"./arco.3f46b4ae.js";import{u as Pe}from"./loading.37fd256d.js";import{c as Yl,d as xl,q as ea,s as la,e as aa,f as ta}from"./model.4f5741d3.js";import{c as Ve,S as oa}from"./sortable.esm.078712c4.js";import{q as na}from"./model_agent.00299daa.js";import{q as da}from"./provider.09d70a12.js";import{q as sa}from"./group.4d712dca.js";/* empty css                *//* empty css                */import{_ as Te}from"./pricing_detail.vue_vue_type_script_setup_true_lang.67d1c7ac.js";import"./chart.2cea905d.js";import"./vue.dbcf9bc3.js";import"./quota.ab5a7aef.js";import"./common.cfd92899.js";const ua={style:{margin:"10px 0 30px 10px"}},ra={key:1},ia={key:1},ma={key:1},pa={key:1},ca={key:1},fa={key:1},_a={key:1},ba={key:1},va={key:1},ga={key:1},ya={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},ka={key:1},ha={key:1},$a={key:1},wa={key:1},Va={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ca={key:1},Ua={key:1},Sa={key:1},Ia={key:1},Ma={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},qa={key:1},Da={key:1},za={key:1},La={key:1},Ba={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Fa={key:1},Ha={key:1},Oa={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Aa={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Na={key:1},Pa={key:1},Ta={key:1},ja={key:1},Ea={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ga={key:1},Ra={key:1},Ja={name:"ModelDetail"},Ka=Ne({...Ja,props:{id:{type:String,default:""}},setup(Ce){const te=Ce,{loading:b,setLoading:f}=Pe(!0),p=y({}),Z=y({billing_items:[]}),C=y(0);return(async(s={id:te.id})=>{f(!0);try{const{data:B}=await Yl(s);p.value=B,Z.value=B.pricing,C.value=B.type}catch{}finally{f(!1)}})(),(s,B)=>{const g=hl,m=$l,u=wl,Q=Vl,R=Cl;return n(),_("div",ua,[l(R,{column:2,bordered:"","label-style":{padding:"5px 8px 5px 15px"},"value-style":{width:"350px",padding:"5px 8px 5px 15px"},style:{"margin-bottom":"15px"}},{default:e(()=>[l(u,{label:s.$t("common.provider")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ra,d(p.value.provider_name),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.model_name")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ia,d(p.value.name),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.model")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ma,d(p.value.model),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.model_type")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",pa,d(s.$t(`dict.model_type.${p.value.type}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.base_url")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ca,d(p.value.base_url||"-"),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.path")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",fa,d(p.value.path||"-"),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.billing_rule")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",_a,d(s.$t(`model.dict.billing_rule.${p.value.pricing.billing_rule||1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.billing_methods")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ba,d(s.$t(`dict.billing_methods.${p.value.pricing.billing_methods||1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.request_data_format")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",va,d(s.$t(`dict.data_format.${p.value.request_data_format||1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.response_data_format")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ga,d(s.$t(`dict.data_format.${p.value.response_data_format||1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.group"),span:2},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ya,d(((c=(i=p.value)==null?void 0:i.group_names)==null?void 0:c.join(`
`))||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("common.is_public")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ka,d(s.$t(`dict.public.${p.value.is_public||!1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.is_enable_preset_config")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ha,d(s.$t(`dict.enable.${p.value.is_enable_preset_config||!1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.preset_config.is_support_system_role")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",$a,d(s.$t(`model.dict.is_support_system_role.${((c=(i=p.value)==null?void 0:i.preset_config)==null?void 0:c.is_support_system_role)||!1}`)),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.preset_config.is_support_stream")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",wa,d(s.$t(`model.dict.is_support_system_role.${((c=(i=p.value)==null?void 0:i.preset_config)==null?void 0:c.is_support_stream)||!1}`)),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.preset_config.system_role_prompt"),span:2},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Va,d(((c=(i=p.value)==null?void 0:i.preset_config)==null?void 0:c.system_role_prompt)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.placeholder.preset_config.min_tokens")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ca,d(((c=(i=p.value)==null?void 0:i.preset_config)==null?void 0:c.min_tokens)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.placeholder.preset_config.max_tokens")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ua,d(((c=(i=p.value)==null?void 0:i.preset_config)==null?void 0:c.max_tokens)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("common.enable_model_agent")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Sa,d(s.$t(`dict.enable.${p.value.is_enable_model_agent||!1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.lb_strategy")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ia,d(s.$t(`dict.lb_strategy.${p.value.lb_strategy||1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.model_agents"),span:2},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ma,d(((c=(i=p.value)==null?void 0:i.model_agent_names)==null?void 0:c.join(`
`))||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.model_forward")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",qa,d(s.$t(`dict.enable.${p.value.is_enable_forward||!1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.forward_rule")},{default:e(()=>{var i,c,$,w;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Da,d((c=(i=p.value)==null?void 0:i.forward_config)!=null&&c.forward_rule?s.$t(`dict.forward_rule.${((w=($=p.value)==null?void 0:$.forward_config)==null?void 0:w.forward_rule)||1}`):"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.forward_mode")},{default:e(()=>{var i,c,$,w;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",za,d((c=(i=p.value)==null?void 0:i.forward_config)!=null&&c.forward_mode?s.$t(`dict.forward_mode.${((w=($=p.value)==null?void 0:$.forward_config)==null?void 0:w.forward_mode)||1}`):"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.content_length")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",La,d(((c=(i=p.value)==null?void 0:i.forward_config)==null?void 0:c.content_length)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.target_model")},{default:e(()=>{var i,c,$,w,H,z,q,oe,ne,de,se,ue,W;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ba,d(((c=(i=p.value)==null?void 0:i.forward_config)==null?void 0:c.forward_rule)&&String((w=($=p.value)==null?void 0:$.forward_config)==null?void 0:w.forward_rule)==="1"?((z=(H=p.value)==null?void 0:H.forward_config)==null?void 0:z.forward_mode)&&((oe=(q=p.value)==null?void 0:q.forward_config)==null?void 0:oe.forward_mode)===1?(de=(ne=p.value)==null?void 0:ne.forward_config)==null?void 0:de.target_model_name:(W=(ue=(se=p.value)==null?void 0:se.forward_config)==null?void 0:ue.target_model_names)==null?void 0:W.join(`
`):"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.match_rule"),span:2},{default:e(()=>{var i,c,$,w;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Fa,d((c=(i=p.value)==null?void 0:i.forward_config)!=null&&c.match_rule?s.$t(`dict.match_rule.${((w=($=p.value)==null?void 0:$.forward_config)==null?void 0:w.match_rule)||1}`):"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.detail.decision_model_name")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ha,d(((c=(i=p.value)==null?void 0:i.forward_config)==null?void 0:c.decision_model_name)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.keywords")},{default:e(()=>{var i,c,$,w,H,z,q;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Oa,d(((c=(i=p.value)==null?void 0:i.forward_config)==null?void 0:c.forward_rule)&&String((w=($=p.value)==null?void 0:$.forward_config)==null?void 0:w.forward_rule)==="2"?(q=(z=(H=p.value)==null?void 0:H.forward_config)==null?void 0:z.keywords)==null?void 0:q.join(`
`):"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.detail.target_model_names")},{default:e(()=>{var i,c,$,w,H,z,q;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Aa,d(((c=(i=p.value)==null?void 0:i.forward_config)==null?void 0:c.forward_rule)&&String((w=($=p.value)==null?void 0:$.forward_config)==null?void 0:w.forward_rule)==="2"?(q=(z=(H=p.value)==null?void 0:H.forward_config)==null?void 0:z.target_model_names)==null?void 0:q.join(`
`):"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.is_enable_fallback")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Na,d(s.$t(`dict.enable.${p.value.is_enable_fallback||!1}`)),1))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.fallback_model_agent")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Pa,d(((c=(i=p.value)==null?void 0:i.fallback_config)==null?void 0:c.model_agent_name)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("model.label.fallback_model")},{default:e(()=>{var i,c;return[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ta,d(((c=(i=p.value)==null?void 0:i.fallback_config)==null?void 0:c.model_name)||"-"),1))]}),_:1},8,["label"]),l(u,{label:s.$t("common.status")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",ja,[p.value.status===1?(n(),r(Q,{key:0,color:"green"},{default:e(()=>[k(d(s.$t(`dict.status.${p.value.status}`)),1)]),_:1})):(n(),r(Q,{key:1,color:"red"},{default:e(()=>[k(d(s.$t(`dict.status.${p.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),l(u,{label:s.$t("model.label.remark"),span:2},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ea,d(p.value.remark||"-"),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.created_at")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ga,d(p.value.created_at),1))]),_:1},8,["label"]),l(u,{label:s.$t("common.updated_at")},{default:e(()=>[v(b)?(n(),r(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),_("span",Ra,d(p.value.updated_at),1))]),_:1},8,["label"])]),_:1}),l(Te,{modelValue:Z.value,"onUpdate:modelValue":B[0]||(B[0]=i=>Z.value=i),"model-type":C.value},null,8,["modelValue","model-type"])])}}}),Za={class:"container"},Qa={class:"action-icon"},Wa={class:"action-icon"},Xa={id:"tableSetting"},Ya={style:{"margin-right":"4px",cursor:"move"}},xa={class:"title"},et={name:"ModelList"},lt=Ne({...et,setup(Ce){const{loading:te,setLoading:b}=Pe(!0),{t:f}=fl(),p=Oe({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),Z=()=>({provider_id:"",model:"",name:"",type:y(),group:"",status:y()}),C=y([]),U=y(Z()),s=y([]),B=y([]),g=y("medium"),m=y([]),u=y(!0),Q=y(),R={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},i=Oe({...R}),c=pe(()=>[{name:f("size.mini"),value:"mini"},{name:f("size.small"),value:"small"},{name:f("size.medium"),value:"medium"},{name:f("size.large"),value:"large"}]),$=pe(()=>[{title:f("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center",width:120},{title:f("common.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:f("model.columns.pricing"),dataIndex:"pricing",slotName:"pricing",align:"center"},{title:f("common.group"),dataIndex:"group_names",slotName:"group_names",align:"center",ellipsis:!0,tooltip:!0},{title:f("common.lb_strategy"),dataIndex:"lb_strategy",slotName:"lb_strategy",align:"center"},{title:f("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:f("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:f("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:120}]),w=pe(()=>[{label:f("dict.model_type.1"),value:1},{label:f("dict.model_type.2"),value:2},{label:f("dict.model_type.3"),value:3},{label:f("dict.model_type.4"),value:4},{label:f("dict.model_type.5"),value:5},{label:f("dict.model_type.6"),value:6},{label:f("dict.model_type.7"),value:7},{label:f("dict.model_type.8"),value:8},{label:f("dict.model_type.100"),value:100},{label:f("dict.model_type.101"),value:101},{label:f("dict.model_type.102"),value:102},{label:f("dict.model_type.103"),value:103},{label:f("dict.model_type.10000"),value:1e4}]),H=pe(()=>[{label:f("dict.status.1"),value:1},{label:f("dict.status.2"),value:2}]),z=async(a={...R})=>{b(!0);try{const{data:o}=await xl(a);C.value=o.items,i.current=a.current,i.pageSize=a.pageSize,i.total=o.paging.total}catch{}finally{b(!1),Q.value.selectAll(!1)}};z();const q=()=>{z({...R,...U.value})},oe=a=>{z({...R,...U.value,current:a})},ne=a=>{R.pageSize=a,z({...R,...U.value})},de=()=>{U.value=Z(),q()},se=(a,o)=>{g.value=a},ue=(a,o,h)=>{a?s.value.splice(h,0,o):s.value=B.value.filter(A=>A.dataIndex!==o.dataIndex)},W=(a,o,h,A=!1)=>{const T=A?Ve(a):a;return o>-1&&h>-1&&T.splice(o,1,T.splice(h,1,T[o]).pop()),T},je=a=>{a&&Il(()=>{const o=document.getElementById("tableSetting");new oa(o,{onEnd(h){const{oldIndex:A,newIndex:T}=h;W(s.value,A,T),W(B.value,A,T)}})})};Ul(()=>$.value,a=>{s.value=Ve(a),s.value.forEach((o,h)=>{o.checked=!0}),B.value=Ve(s.value)},{deep:!0,immediate:!0});const Ue=y([]);(async()=>{const{data:a}=await da();Ue.value=a.items})();const ce=y([]),fe=y([]),Se=y([]);(async()=>{try{const{data:a}=await ea();ce.value=a.items}catch{}})();const _e=y([]);(async()=>{try{const{data:a}=await na();_e.value=a.items}catch{}})();const Ie=y([]);(async()=>{const{data:a}=await sa();Ie.value=a.items})();const Ee=async a=>{await la(a),we.success(f("success.operate")),q()},X=y(!1),Me=y(),D=y({}),qe=y(),Y=y(!1),O=y({});O.value.lb_strategy="1";const Ge=async()=>{b(!0);try{D.value.url="",D.value.key="",D.value.is_config_model_agent=!0,D.value.is_cover_price=!1,X.value=!0}catch{}finally{b(!1)}},Re=async a=>{var h;if(await((h=Me.value)==null?void 0:h.validate())){X.value=!0,a(!1);return}b(!0);try{await aa(D.value),a(),window.location.reload()}catch{a(!1)}finally{b(!1)}},Je=()=>{X.value=!1},Ke=async a=>{var h;if(await((h=qe.value)==null?void 0:h.validate())){Y.value=!0,a(!1);return}a(),I({action:"agent",value:"all",lb_strategy:O.value.lb_strategy,model_agents:O.value.model_agents})},Ze=()=>{Y.value=!1},De=y(),x=y(!1),F=y({forward_mode:1}),Qe=async a=>{var h;if(await((h=De.value)==null?void 0:h.validate())){x.value=!0,a(!1);return}a(),I({action:"forward",value:"all",target_model:F.value.target_model})},We=()=>{x.value=!1},ze=y(),ee=y(!1),L=y({}),Xe=async a=>{var h;if(await((h=ze.value)==null?void 0:h.validate())){ee.value=!0,a(!1);return}a(),I({action:"fallback",value:"all",fallback_config:{model_agent:L.value.model_agent,model:L.value.model}})},Ye=()=>{ee.value=!1},xe=a=>{m.value=a,u.value=!a.length},I=a=>{if(m.value.length===0)we.info(f("placeholder.operation.data"));else{let o=f("placeholder.batch.operation",{count:m.value.length});switch(a.action){case"agent":a.value===!0?o=f("model.placeholder.batch.operation.agent.enable",{count:m.value.length}):a.value===!1?o=f("model.placeholder.batch.operation.agent.disable",{count:m.value.length}):a.value==="all"&&(a.model_agents?o=f("model.placeholder.batch.operation.agent.all",{count:m.value.length}):Y.value=!0);break;case"forward":a.value===!0?o=f("model.placeholder.batch.operation.forward.enable",{count:m.value.length}):a.value===!1?o=f("model.placeholder.batch.operation.forward.disable",{count:m.value.length}):a.value==="all"&&(a.target_model?o=f("model.placeholder.batch.operation.forward.all",{count:m.value.length}):(fe.value=ce.value.filter(h=>!m.value.includes(h.id)),x.value=!0));break;case"fallback":a.value===!0?o=f("model.placeholder.batch.operation.fallback.enable",{count:m.value.length}):a.value===!1?o=f("model.placeholder.batch.operation.fallback.disable",{count:m.value.length}):a.value==="all"&&(a.fallback_config?o=f("model.placeholder.batch.operation.fallback.all",{count:m.value.length}):(Se.value=ce.value.filter(h=>!m.value.includes(h.id)),ee.value=!0));break;case"status":a.value===1?o=f("placeholder.batch.operation.enable",{count:m.value.length}):o=f("placeholder.batch.operation.disable",{count:m.value.length});break;case"delete":o=f("placeholder.batch.operation.delete",{count:m.value.length});break}if(a.action==="agent"&&a.value==="all"&&!a.model_agents||a.action==="forward"&&a.value==="all"&&!a.target_model||a.action==="fallback"&&a.value==="all"&&!a.fallback_config)return;Ae.warning({title:f("modal.warning.title"),titleAlign:"center",content:o,okText:f("button.ok"),cancelText:f("button.cancel"),hideCancel:!1,onOk:()=>{b(!0),a.ids=m.value,ta(a).then(h=>{b(!1),we.success(f("success.operate")),q(),Q.value.selectAll(!1)})}})}},be=y(!1),ve=y({billing_items:[]}),Le=y(0),el=(a,o)=>{be.value=!0,ve.value=a,Le.value=o},ge=y(!1),Be=y(),ll=a=>{ge.value=!0,Be.value=a},al=()=>{ge.value=!1};return(a,o)=>{const h=_l,A=Ml,T=ql,K=Dl,j=zl,S=Ll,N=Bl,re=Fl,ye=Hl,le=Ol,Fe=Al,tl=Nl,V=Pl,He=bl,ie=Tl,ke=jl,ol=vl,nl=El,dl=Gl,sl=gl,ul=yl,rl=Rl,il=Jl,he=Kl,ml=Zl,pl=Ql,ae=Ae,me=Wl,cl=Xl;return n(),_("div",Za,[l(T,{class:"container-breadcrumb"},{default:e(()=>[l(A,null,{default:e(()=>[l(h)]),_:1}),l(A,null,{default:e(()=>[k(d(a.$t("model.menu")),1)]),_:1})]),_:1}),l(cl,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[l(ye,null,{default:e(()=>[l(N,{flex:1},{default:e(()=>[l(le,{model:U.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[l(ye,{gutter:16},{default:e(()=>[l(N,{span:8},{default:e(()=>[l(S,{field:"provider_id",label:a.$t("common.provider")},{default:e(()=>[l(j,{modelValue:U.value.provider_id,"onUpdate:modelValue":o[0]||(o[0]=t=>U.value.provider_id=t),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),_(E,null,G(Ue.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(N,{span:8},{default:e(()=>[l(S,{field:"model",label:a.$t("common.model")},{default:e(()=>[l(re,{modelValue:U.value.model,"onUpdate:modelValue":o[1]||(o[1]=t=>U.value.model=t),placeholder:a.$t("model.form.placeholder.model"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(N,{span:8},{default:e(()=>[l(S,{field:"name",label:a.$t("common.model_name")},{default:e(()=>[l(re,{modelValue:U.value.name,"onUpdate:modelValue":o[2]||(o[2]=t=>U.value.name=t),placeholder:a.$t("model.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(N,{span:8},{default:e(()=>[l(S,{field:"group",label:a.$t("common.group")},{default:e(()=>[l(j,{modelValue:U.value.group,"onUpdate:modelValue":o[3]||(o[3]=t=>U.value.group=t),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),_(E,null,G(Ie.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(N,{span:8},{default:e(()=>[l(S,{field:"status",label:a.$t("common.status")},{default:e(()=>[l(j,{modelValue:U.value.status,"onUpdate:modelValue":o[4]||(o[4]=t=>U.value.status=t),placeholder:a.$t("common.all"),options:v(H),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),l(N,{span:8},{default:e(()=>[l(S,{field:"type",label:a.$t("common.model_type")},{default:e(()=>[l(j,{modelValue:U.value.type,"onUpdate:modelValue":o[5]||(o[5]=t=>U.value.type=t),placeholder:a.$t("common.all"),options:v(w),scrollbar:!1,"allow-search":"","allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(Fe,{style:{height:"84px"},direction:"vertical"}),l(N,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[l(ie,{direction:"vertical",size:18},{default:e(()=>[l(V,{type:"primary",onClick:q},{icon:e(()=>[l(tl)]),default:e(()=>[k(" "+d(a.$t("button.search")),1)]),_:1}),l(V,{onClick:de},{icon:e(()=>[l(He)]),default:e(()=>[k(" "+d(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Fe,{style:{"margin-top":"0","margin-bottom":"16px"}}),l(ye,{style:{"margin-bottom":"16px"}},{default:e(()=>[l(N,{span:12},{default:e(()=>[l(ie,null,{default:e(()=>[l(V,{type:"primary",onClick:o[6]||(o[6]=t=>a.$router.push({name:"ModelCreate"}))},{default:e(()=>[k(d(a.$t("button.create")),1)]),_:1}),!v(te)&&C.value.length===0?(n(),r(V,{key:0,type:"primary",status:"success",onClick:o[7]||(o[7]=t=>Ge())},{default:e(()=>[k(d(a.$t("button.sync")),1)]),_:1})):M("",!0),C.value.length!==0?(n(),r(V,{key:1,type:"primary",status:"warning",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[8]||(o[8]=t=>I({action:"agent",value:"all"}))},{default:e(()=>[k(d(a.$t("model.button.all_model_agent")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:2,type:"primary",status:"success",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[9]||(o[9]=t=>I({action:"agent",value:!0}))},{default:e(()=>[k(d(a.$t("model.button.enable_model_agent")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:3,type:"primary",status:"danger",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[10]||(o[10]=t=>I({action:"agent",value:!1}))},{default:e(()=>[k(d(a.$t("model.button.close_model_agent")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:4,type:"primary",status:"warning",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[11]||(o[11]=t=>I({action:"forward",value:"all"}))},{default:e(()=>[k(d(a.$t("model.button.all_forward")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:5,type:"primary",status:"success",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[12]||(o[12]=t=>I({action:"forward",value:!0}))},{default:e(()=>[k(d(a.$t("model.button.enable_forward")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:6,type:"primary",status:"danger",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[13]||(o[13]=t=>I({action:"forward",value:!1}))},{default:e(()=>[k(d(a.$t("model.button.close_forward")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:7,type:"primary",status:"warning",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[14]||(o[14]=t=>I({action:"fallback",value:"all"}))},{default:e(()=>[k(d(a.$t("model.button.all_fallback")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:8,type:"primary",status:"success",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[15]||(o[15]=t=>I({action:"fallback",value:!0}))},{default:e(()=>[k(d(a.$t("model.button.enable_fallback")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:9,type:"primary",status:"danger",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[16]||(o[16]=t=>I({action:"fallback",value:!1}))},{default:e(()=>[k(d(a.$t("model.button.close_fallback")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:10,type:"primary",status:"success",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[17]||(o[17]=t=>I({action:"status",value:1}))},{default:e(()=>[k(d(a.$t("button.enable")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:11,type:"primary",status:"danger",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[18]||(o[18]=t=>I({action:"status",value:2}))},{default:e(()=>[k(d(a.$t("button.disable")),1)]),_:1},8,["disabled","title"])):M("",!0),C.value.length!==0?(n(),r(V,{key:12,type:"primary",status:"danger",disabled:u.value,title:u.value?a.$t("placeholder.operation.data"):"",onClick:o[19]||(o[19]=t=>I({action:"delete"}))},{default:e(()=>[k(d(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])):M("",!0)]),_:1})]),_:1}),l(N,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:e(()=>[l(ke,{content:a.$t("action.refresh")},{default:e(()=>[J("div",{class:"action-icon",onClick:q},[l(He,{size:"18"})])]),_:1},8,["content"]),l(dl,{onSelect:se},{content:e(()=>[(n(!0),_(E,null,G(v(c),t=>(n(),r(nl,{key:t.value,value:t.value,class:Sl({active:t.value===g.value})},{default:e(()=>[J("span",null,d(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[l(ke,{content:a.$t("action.density")},{default:e(()=>[J("div",Qa,[l(ol,{size:"18"})])]),_:1},8,["content"])]),_:1}),l(ke,{content:a.$t("action.column_setting")},{default:e(()=>[l(il,{trigger:"click",position:"bl",onPopupVisibleChange:je},{content:e(()=>[J("div",Xa,[(n(!0),_(E,null,G(B.value,(t,P)=>(n(),_("div",{key:t.dataIndex,class:"setting"},[J("div",Ya,[l(ul)]),J("div",null,[l(rl,{modelValue:t.checked,"onUpdate:modelValue":$e=>t.checked=$e,onChange:$e=>ue($e,t,P)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),J("div",xa,d(t.title),1)]))),128))])]),default:e(()=>[J("div",Wa,[l(sl,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(ml,{ref_key:"tableRef",ref:Q,"row-key":"id",loading:v(te),pagination:i,columns:s.value,data:C.value,bordered:!1,size:g.value,"row-selection":p,onPageChange:oe,onPageSizeChange:ne,onSelectionChange:xe},{type:e(({record:t})=>[k(d(a.$t(`dict.model_type.${t.type}`)),1)]),pricing:e(({record:t})=>[l(V,{type:"text",size:"small",onClick:P=>el(t.pricing,t.type)},{default:e(()=>[k(d(a.$t("button.view")),1)]),_:2},1032,["onClick"])]),group_names:e(({record:t})=>{var P;return[k(d(((P=t==null?void 0:t.group_names)==null?void 0:P.join(","))||"-"),1)]}),lb_strategy:e(({record:t})=>[k(d(t.is_enable_model_agent?a.$t(`dict.lb_strategy.${t.lb_strategy||1}`):"-"),1)]),status:e(({record:t})=>[l(he,{modelValue:t.status,"onUpdate:modelValue":P=>t.status=P,"checked-value":1,"unchecked-value":2,onChange:P=>Ee({id:t.id,status:t.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:e(({record:t})=>[l(V,{type:"text",size:"small",onClick:P=>ll(t.id)},{default:e(()=>[k(d(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),l(V,{type:"text",size:"small",onClick:P=>a.$router.push({name:"ModelUpdate",query:{id:t.id}})},{default:e(()=>[k(d(a.$t("button.update")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),l(pl,{title:a.$t("model.menu.detail"),"unmount-on-close":"","render-to-body":"",width:888,footer:!1,visible:ge.value,onCancel:al},{default:e(()=>[l(Ka,{id:Be.value},null,8,["id"])]),_:1},8,["title","visible"]),l(ae,{visible:X.value,"onUpdate:visible":o[24]||(o[24]=t=>X.value=t),title:a.$t("model.form.title.init_model"),onCancel:Je,onBeforeOk:Re},{default:e(()=>[l(le,{ref_key:"initForm",ref:Me,model:D.value},{default:e(()=>[l(S,{field:"url",label:a.$t("model.label.url"),rules:[{required:!0,message:a.$t("model.error.required.url")}]},{default:e(()=>[l(re,{modelValue:D.value.url,"onUpdate:modelValue":o[20]||(o[20]=t=>D.value.url=t),placeholder:a.$t("model.placeholder.url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(S,{field:"key",label:a.$t("common.app_key"),rules:[{required:!0,message:a.$t("placeholder.app_key")}]},{default:e(()=>[l(re,{modelValue:D.value.key,"onUpdate:modelValue":o[21]||(o[21]=t=>D.value.key=t),placeholder:a.$t("model.placeholder.key"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(S,{field:"is_config_model_agent",label:a.$t("model.label.is_config_model_agent")},{default:e(()=>[l(he,{modelValue:D.value.is_config_model_agent,"onUpdate:modelValue":o[22]||(o[22]=t=>D.value.is_config_model_agent=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(S,{field:"is_cover_price",label:a.$t("model.label.is_cover_price")},{default:e(()=>[l(he,{modelValue:D.value.is_cover_price,"onUpdate:modelValue":o[23]||(o[23]=t=>D.value.is_cover_price=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(ae,{visible:Y.value,"onUpdate:visible":o[28]||(o[28]=t=>Y.value=t),title:a.$t("model.form.title.model_agent"),onCancel:Ze,onBeforeOk:Ke},{default:e(()=>[l(le,{ref_key:"agentForm",ref:qe,model:O.value},{default:e(()=>[l(S,{field:"lb_strategy",label:a.$t("common.lb_strategy"),rules:[{required:!0}]},{default:e(()=>[l(ie,{size:"large"},{default:e(()=>[l(me,{modelValue:O.value.lb_strategy,"onUpdate:modelValue":o[25]||(o[25]=t=>O.value.lb_strategy=t),value:"1","default-checked":!0},{default:e(()=>[k(d(a.$t("dict.lb_strategy.1")),1)]),_:1},8,["modelValue"]),l(me,{modelValue:O.value.lb_strategy,"onUpdate:modelValue":o[26]||(o[26]=t=>O.value.lb_strategy=t),value:"2"},{default:e(()=>[k(d(a.$t("dict.lb_strategy.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),l(S,{field:"model_agents",label:a.$t("common.model_agents"),rules:[{required:!0,message:a.$t("placeholder.model_agents")}]},{default:e(()=>[l(j,{modelValue:O.value.model_agents,"onUpdate:modelValue":o[27]||(o[27]=t=>O.value.model_agents=t),placeholder:a.$t("model.placeholder.model_agents"),"max-tag-count":15,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),_(E,null,G(_e.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(ae,{visible:x.value,"onUpdate:visible":o[33]||(o[33]=t=>x.value=t),title:a.$t("model.form.title.forward"),onCancel:We,onBeforeOk:Qe},{default:e(()=>[l(le,{ref_key:"forwardForm",ref:De,model:F.value},{default:e(()=>[l(S,{field:"forward_mode",label:a.$t("model.label.forward_mode"),rules:[{required:!0}]},{default:e(()=>[l(ie,{size:"large"},{default:e(()=>[l(me,{modelValue:F.value.forward_mode,"onUpdate:modelValue":o[29]||(o[29]=t=>F.value.forward_mode=t),value:1,"default-checked":"true"},{default:e(()=>[k(d(a.$t("dict.forward_mode.1")),1)]),_:1},8,["modelValue"]),l(me,{modelValue:F.value.forward_mode,"onUpdate:modelValue":o[30]||(o[30]=t=>F.value.forward_mode=t),value:2},{default:e(()=>[k(d(a.$t("dict.forward_mode.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),F.value.forward_mode===1?(n(),r(S,{key:0,field:"target_model",label:a.$t("model.label.target_model"),rules:[{required:!0,message:a.$t("model.placeholder.target_model")}]},{default:e(()=>[l(j,{modelValue:F.value.target_model,"onUpdate:modelValue":o[31]||(o[31]=t=>F.value.target_model=t),placeholder:a.$t("model.placeholder.target_model"),scrollbar:!1,"allow-search":""},{default:e(()=>[(n(!0),_(E,null,G(fe.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):M("",!0),F.value.forward_mode===2?(n(),r(S,{key:1,field:"target_models",label:a.$t("model.label.target_model"),rules:[{required:!0,message:a.$t("model.placeholder.target_model")}]},{default:e(()=>[l(j,{modelValue:F.value.target_models,"onUpdate:modelValue":o[32]||(o[32]=t=>F.value.target_models=t),placeholder:a.$t("model.placeholder.target_model"),"max-tag-count":3,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),_(E,null,G(fe.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):M("",!0)]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(ae,{visible:ee.value,"onUpdate:visible":o[36]||(o[36]=t=>ee.value=t),title:a.$t("model.form.title.fallback"),onCancel:Ye,onBeforeOk:Xe},{default:e(()=>[l(le,{ref_key:"fallbackForm",ref:ze,model:L.value},{default:e(()=>[l(S,{field:"model_agent",label:a.$t("model.label.fallback_model_agent"),rules:[{required:!L.value.model_agent&&!L.value.model||!L.value.model,message:a.$t("model.error.required.fallback")}]},{default:e(()=>[l(j,{modelValue:L.value.model_agent,"onUpdate:modelValue":o[34]||(o[34]=t=>L.value.model_agent=t),placeholder:a.$t("model.placeholder.fallback_model_agent"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),_(E,null,G(_e.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(S,{field:"model",label:a.$t("model.label.fallback_model"),rules:[{required:!L.value.model_agent&&!L.value.model||!L.value.model_agent,message:a.$t("model.error.required.fallback")}]},{default:e(()=>[l(j,{modelValue:L.value.model,"onUpdate:modelValue":o[35]||(o[35]=t=>L.value.model=t),placeholder:a.$t("model.placeholder.fallback_model"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),_(E,null,G(Se.value,t=>(n(),r(K,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(ae,{visible:be.value,"onUpdate:visible":o[38]||(o[38]=t=>be.value=t),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"",simple:"","ok-text":a.$t("button.close")},{default:e(()=>[l(Te,{modelValue:ve.value,"onUpdate:modelValue":o[37]||(o[37]=t=>ve.value=t),"model-type":Le.value},null,8,["modelValue","model-type"])]),_:1},8,["visible","ok-text"])]),_:1})])}}});const Lt=kl(lt,[["__scopeId","data-v-712c36c3"]]);export{Lt as default};

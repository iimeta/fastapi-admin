import{u as we,n as na,s as ia,A as da,k as ra,B as _a,_ as ca}from"./index.15d033c0.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as Ce,e as y,B as s,C as m,aH as e,aG as a,u as o,aD as f,aM as i,aL as n,bA as pa,bB as ma,bC as va,bD as fa,bE as ba,r as ye,c as le,w as ga,D as A,aJ as he,aI as $e,E as ya,aE as ke,n as ha,aW as $a,aK as ka,aF as qa,aS as wa,b2 as Ca,bH as Va,b1 as Da,bG as xa,bT as Fa,bI as Ea,b5 as Ua,bJ as Ba,ab as Aa,aU as Sa,bi as za,bj as Ia,bk as Ha,bl as Na,b4 as Ra,bK as La,bV as Ta,aT as Pa,bM as Ma,aV as Oa,bQ as Ga,bU as Qa,a_ as ja,bN as Ja,g as Ka}from"./arco.cbac690a.js";import{u as Ve}from"./loading.b56ef223.js";import{q as H,d as qe,a as V}from"./common.4090c8c2.js";import{a as Wa,b as Xa,s as Ya,c as Za,d as et,e as at,f as tt}from"./admin_user.85a5d002.js";import{c as ue,S as lt}from"./sortable.esm.59243d4c.js";import{b as ut}from"./model.9884c1b9.js";import{q as ot}from"./group.b193b4af.js";/* empty css                *//* empty css                */import"./chart.e521dee8.js";import"./vue.4014b72a.js";const st={style:{margin:"10px 0 30px 10px"}},nt={key:1},it={key:1},dt={key:1},rt={key:1},_t={key:1},ct={key:1},pt={key:1},mt={key:1},vt={key:1},ft={key:1},bt={key:1},gt={key:1},yt={key:1},ht={key:1},$t={key:1},kt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},qt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},wt={key:1},Ct={key:1},Vt={key:1},Dt={key:1},xt={key:1},Ft={name:"UserDetail"},Et=Ce({...Ft,props:{id:{type:String,default:""}},setup(oe){const S=oe,{t:b}=we(),{loading:r,setLoading:k}=Ve(!0),c=y({});return(async(x={id:S.id})=>{k(!0);try{const{data:w}=await Wa(x);c.value=w}catch{}finally{k(!1)}})(),(x,w)=>{const d=pa,p=ma,v=va,L=fa,D=ba;return s(),m("div",st,[e(D,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:a(()=>[e(v,{label:o(b)("common.user_id")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",nt,i(c.value.user_id),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.rid")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",it,i(c.value.rid||"-"),1))]),_:1},8,["label"]),e(v,{label:o(b)("common.account")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",dt,i(c.value.account),1))]),_:1},8,["label"]),e(v,{label:o(b)("common.name")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",rt,i(c.value.name),1))]),_:1},8,["label"]),e(v,{label:o(b)("common.email")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",_t,i(c.value.email),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.quota")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",ct,i(c.value.quota>0?`$${o(H)(c.value.quota)}`:c.value.quota<0?`-$${o(H)(-c.value.quota)}`:"$0.00"),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.used_quota")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",pt,i(c.value.used_quota>0?`$${o(H)(c.value.used_quota)}`:"$0.00"),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.quota_expires_at")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",mt,i(c.value.quota_expires_at||"-"),1))]),_:1},8,["label"]),e(v,{label:o(b)("common.status")},{default:a(()=>[c.value.status===1?(s(),f(L,{key:0,color:"green"},{default:a(()=>[n(i(x.$t(`dict.status.${c.value.status}`)),1)]),_:1})):(s(),f(L,{key:1,color:"red"},{default:a(()=>[n(i(x.$t(`dict.status.${c.value.status}`)),1)]),_:1}))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.quota_warning")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",vt,i(x.$t(`operations.open.${c.value.quota_warning||c.value.warning_threshold===0&&c.value.expire_warning_threshold===0}`)),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.warning_threshold")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",ft," $"+i(c.value.warning_threshold||50),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.expire_warning_threshold")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",bt,i(c.value.expire_warning_threshold||3)+"\u5929 ",1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.warning_notice")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",gt,i(x.$t(`dict.notice.${c.value.warning_notice||!1}`)),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.expire_warning_notice")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",yt,i(x.$t(`dict.notice.${c.value.expire_warning_notice||!1}`)),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.exhaustion_notice")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",ht,i(x.$t(`dict.notice.${c.value.exhaustion_notice||!1}`)),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.expire_notice")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",$t,i(x.$t(`dict.notice.${c.value.expire_notice||!1}`)),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.groups"),span:2},{default:a(()=>{var F,z;return[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",kt,i(((z=(F=c.value)==null?void 0:F.group_names)==null?void 0:z.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(v,{label:o(b)("common.remark"),span:2},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",qt,i(c.value.remark||"-"),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.login_ip")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",wt,i(c.value.login_ip||"-"),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.login_time")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",Ct,i(c.value.login_time||"-"),1))]),_:1},8,["label"]),e(v,{label:o(b)("user.detail.label.login_domain")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",Vt,i(c.value.login_domain||"-"),1))]),_:1},8,["label"]),e(v,{label:o(b)("common.created_at")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",Dt,i(c.value.created_at),1))]),_:1},8,["label"]),e(v,{label:o(b)("common.updated_at")},{default:a(()=>[o(r)?(s(),f(p,{key:0,animation:!0},{default:a(()=>[e(d,{rows:1})]),_:1})):(s(),m("span",xt,i(c.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Ut={class:"container"},Bt={class:"action-icon"},At={class:"action-icon"},St={id:"tableSetting"},zt={style:{"margin-right":"4px",cursor:"move"}},It={class:"title"},Ht=["title"],Nt={key:1},Rt={name:"UserList"},Lt=Ce({...Rt,setup(oe){const{proxy:S}=Ka(),{loading:b,setLoading:r}=Ve(!0),{t:k}=we(),c=localStorage.getItem("userRole"),se=ye({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),x=()=>({user_id:y(),name:"",account:"",quota:y(),status:y(),quota_expires_at:[]}),w=y([]),d=y(x()),p=y([]),v=y([]),L=y("medium"),D=y([]),F=y(!0),z=y(),T={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},j=ye({...T}),De=le(()=>[{name:k("size.mini"),value:"mini"},{name:k("size.small"),value:"small"},{name:k("size.medium"),value:"medium"},{name:k("size.large"),value:"large"}]),xe=le(()=>[{title:k("user.columns.userId"),dataIndex:"user_id",slotName:"user_id",align:"center",width:80},{title:k("user.columns.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:k("user.columns.account"),dataIndex:"account",slotName:"account",align:"center",ellipsis:!0,tooltip:!0},{title:k("user.columns.quota"),dataIndex:"quota",slotName:"quota",align:"center",ellipsis:!0,tooltip:!0},{title:k("user.columns.used_quota"),dataIndex:"used_quota",slotName:"used_quota",align:"center",ellipsis:!0,tooltip:!0},{title:k("user.columns.quota_expires_at"),dataIndex:"quota_expires_at",slotName:"quota_expires_at",align:"center",width:170},{title:k("user.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:k("user.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:k("user.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),Fe=le(()=>[{label:k("user.dict.status.1"),value:1},{label:k("user.dict.status.2"),value:2}]),J=async(t={...T})=>{r(!0);try{const{data:u}=await Xa(t);w.value=u.items,j.current=t.current,j.pageSize=t.pageSize,j.total=u.paging.total}catch{}finally{r(!1),z.value.selectAll(!1)}};J();const N=()=>{J({...T,...d.value})},Ee=t=>{J({...T,...d.value,current:t})},Ue=t=>{T.pageSize=t,J({...T,...d.value})},Be=()=>{d.value=x(),N()},Ae=(t,u)=>{L.value=t},Se=(t,u,g)=>{t?p.value.splice(g,0,u):p.value=v.value.filter(h=>h.dataIndex!==u.dataIndex)},ne=(t,u,g,h=!1)=>{const I=h?ue(t):t;return u>-1&&g>-1&&I.splice(u,1,I.splice(g,1,I[u]).pop()),I},ze=t=>{t&&ha(()=>{const u=document.getElementById("tableSetting");new lt(u,{onEnd(g){const{oldIndex:h,newIndex:I}=g;ne(p.value,h,I),ne(v.value,h,I)}})})};ga(()=>xe.value,t=>{p.value=ue(t),p.value.forEach((u,g)=>{u.checked=!0}),v.value=ue(p.value)},{deep:!0,immediate:!0});const Ie=y([]);(async()=>{r(!0);try{const{data:t}=await ut();Ie.value=t.items}catch{}finally{r(!1)}})();const He=y([]);(async()=>{try{const{data:t}=await ot();He.value=t.items}catch{}})();const R=new Map;R.set(2,"\u5E94\u7528\u6570\u636E"),R.set(3,"\u4EA4\u6613\u8BB0\u5F55"),R.set(4,"\u8D26\u5355\u660E\u7EC6"),R.set(5,"\u65E5\u5FD7\u6570\u636E");const Ne=async t=>{let u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237: ${t.name}?`;if(t.data&&t.data.length>0){let g="";for(let h=0;h<t.data.length;h+=1)h===0?g=R.get(t.data[h]):g+=`\u3001${R.get(t.data[h])}`;u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237: ${t.name} \u4EE5\u53CA\u540C\u65F6\u5220\u9664: ${g}?`}S.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{r(!0),tt(t).then(g=>{r(!1),S.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),N(),z.value.selectAll(!1)})}})},Re=async t=>{r(!0);try{await Ya(t),S.$message.success("\u64CD\u4F5C\u6210\u529F"),N()}catch{}finally{r(!1)}},Le=async t=>{r(!0);try{await Za(t),S.$message.success("\u64CD\u4F5C\u6210\u529F"),N()}catch{}finally{r(!1)}},P=y(0),M=y(!1),O=y(!1),ie=y(),_=y({}),de=y(),q=y({}),Te=async t=>{r(!0);try{P.value=0,_.value.quota=y(),_.value.quota_type="1",_.value.user_id=t.user_id,_.value.quota_expires_at=t.quota_expires_at,_.value.is_send_notice=!0,z.value.selectAll(!1),M.value=!0}catch{}finally{r(!1)}},re=t=>{_.value.quota=t*5e5},Pe=async t=>{var g;if(await((g=ie.value)==null?void 0:g.validate())){M.value=!0,t(!1);return}if(D.value.length>0){t(),G({action:"recharge",value:_.value.quota,quota_type:_.value.quota_type,quota_expires_at:_.value.quota_expires_at,is_send_notice:_.value.is_send_notice});return}r(!0);try{await et(_.value),$a.success(k("success.recharge")),t(),N()}catch{t(!1)}finally{r(!1)}},Me=()=>{M.value=!1},X=y(!1),_e=y(),Oe=t=>{X.value=!0,_e.value=t},Ge=()=>{X.value=!1},Qe=t=>{D.value=t,F.value=!t.length},G=t=>{if(D.value.length===0)S.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let u=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237?`;switch(t.action){case"recharge":t.value?_.value.quota_type==="2"?u=`\u662F\u5426\u786E\u5B9A\u6263\u9664\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237 $${H(t.value)} \u989D\u5EA6?`:u=`\u662F\u5426\u786E\u5B9A\u7ED9\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237${_.value.quota_type==="1"?"\u5145\u503C":"\u8D60\u9001"} $${H(t.value)} \u989D\u5EA6?`:(P.value=0,_.value.quota=y(),_.value.quota_type="1",_.value.quota_expires_at="",_.value.is_send_notice=!0,M.value=!0);break;case"status":t.value===1?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237?`:u=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237?`;break;case"delete":if(u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237?`,t.data&&t.data.length>0){let g="";for(let h=0;h<t.data.length;h+=1)h===0?g=R.get(t.data[h]):g+=`\u3001${R.get(t.data[h])}`;u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${D.value.length}\u4F4D\u7528\u6237\u4EE5\u53CA\u540C\u65F6\u5220\u9664: ${g}?`}break}if(t.action==="recharge"&&!t.value)return;S.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{r(!0),t.ids=D.value,at(t).then(g=>{r(!1),S.$message.success("\u64CD\u4F5C\u6210\u529F"),N(),z.value.selectAll(!1)})}})}},ce=async t=>{q.value=t,O.value=!0,t.action||z.value.selectAll(!1)},je=async t=>{var g;if(await((g=de.value)==null?void 0:g.validate())){O.value=!0,t(!1);return}q.value.action?G({action:"delete",data:q.value.data}):Ne(q.value)},Je=()=>{O.value=!1};return(t,u)=>{const g=na,h=ka,I=qa,Y=wa,C=Ca,B=Va,K=Da,Ke=xa,We=Fa,Z=Ea,ee=Ua,pe=Ba,Xe=Aa,E=Sa,me=ia,W=za,ae=Ia,Ye=da,Ze=Ha,ea=Na,aa=ra,ta=_a,Q=Ra,la=La,ve=Ta,fe=Pa,ua=Ma,oa=Oa,$=Ga,be=Qa,ge=ja,sa=Ja;return s(),m("div",Ut,[e(I,{class:"container-breadcrumb"},{default:a(()=>[e(h,null,{default:a(()=>[e(g)]),_:1}),e(h,null,{default:a(()=>[n(i(t.$t("menu.user")),1)]),_:1}),e(h,null,{default:a(()=>[n(i(t.$t("menu.user.list")),1)]),_:1})]),_:1}),e(sa,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(Z,null,{default:a(()=>[e(B,{flex:1},{default:a(()=>[e(ee,{model:d.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(Z,{gutter:16},{default:a(()=>[e(B,{span:8},{default:a(()=>[e(C,{field:"user_id",label:t.$t("user.form.userId")},{default:a(()=>[e(Y,{modelValue:d.value.user_id,"onUpdate:modelValue":u[0]||(u[0]=l=>d.value.user_id=l),placeholder:t.$t("user.form.userId.placeholder"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(B,{span:7},{default:a(()=>[e(C,{field:"account",label:t.$t("user.form.account")},{default:a(()=>[e(K,{modelValue:d.value.account,"onUpdate:modelValue":u[1]||(u[1]=l=>d.value.account=l),placeholder:t.$t("user.form.account.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(B,{span:9},{default:a(()=>[e(C,{field:"name",label:t.$t("user.form.name")},{default:a(()=>[e(K,{modelValue:d.value.name,"onUpdate:modelValue":u[2]||(u[2]=l=>d.value.name=l),placeholder:t.$t("user.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(B,{span:8},{default:a(()=>[e(C,{field:"quota",label:t.$t("user.form.quota")},{default:a(()=>[e(Y,{modelValue:d.value.quota,"onUpdate:modelValue":u[3]||(u[3]=l=>d.value.quota=l),placeholder:t.$t("user.form.quota.placeholder"),min:1e-6,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder","min"])]),_:1},8,["label"])]),_:1}),e(B,{span:7},{default:a(()=>[e(C,{field:"status",label:t.$t("user.form.status")},{default:a(()=>[e(Ke,{modelValue:d.value.status,"onUpdate:modelValue":u[4]||(u[4]=l=>d.value.status=l),placeholder:t.$t("user.form.selectDefault"),options:o(Fe),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(B,{span:9},{default:a(()=>[e(C,{field:"quota_expires_at",label:t.$t("user.form.quota_expires_at")},{default:a(()=>[e(We,{modelValue:d.value.quota_expires_at,"onUpdate:modelValue":u[5]||(u[5]=l=>d.value.quota_expires_at=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(pe,{style:{height:"84px"},direction:"vertical"}),e(B,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(W,{direction:"vertical",size:18},{default:a(()=>[e(E,{type:"primary",onClick:N},{icon:a(()=>[e(Xe)]),default:a(()=>[n(" "+i(t.$t("user.form.search")),1)]),_:1}),e(E,{onClick:Be},{icon:a(()=>[e(me)]),default:a(()=>[n(" "+i(t.$t("user.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(pe,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(Z,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(B,{span:12},{default:a(()=>[e(W,null,{default:a(()=>[e(E,{type:"primary",onClick:u[6]||(u[6]=l=>t.$router.push({name:"UserCreate"}))},{default:a(()=>[n(i(t.$t("user.operation.create")),1)]),_:1}),e(E,{type:"primary",status:"warning",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[7]||(u[7]=l=>G({action:"recharge"}))},{default:a(()=>[n(" \u5145\u503C ")]),_:1},8,["disabled","title"]),e(E,{type:"primary",status:"success",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[8]||(u[8]=l=>G({action:"status",value:1}))},{default:a(()=>[n(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(E,{type:"primary",status:"danger",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[9]||(u[9]=l=>G({action:"status",value:2}))},{default:a(()=>[n(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(E,{type:"primary",status:"danger",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[10]||(u[10]=l=>ce({action:"delete",data:[2,3,4,5]}))},{default:a(()=>[n(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(B,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(ae,{content:t.$t("actions.refresh")},{default:a(()=>[A("div",{class:"action-icon",onClick:N},[e(me,{size:"18"})])]),_:1},8,["content"]),e(ea,{onSelect:Ae},{content:a(()=>[(s(!0),m(he,null,$e(o(De),l=>(s(),f(Ze,{key:l.value,value:l.value,class:ya({active:l.value===L.value})},{default:a(()=>[A("span",null,i(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(ae,{content:t.$t("actions.density")},{default:a(()=>[A("div",Bt,[e(Ye,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(ae,{content:t.$t("actions.column_setting")},{default:a(()=>[e(la,{trigger:"click",position:"bl",onPopupVisibleChange:ze},{content:a(()=>[A("div",St,[(s(!0),m(he,null,$e(v.value,(l,U)=>(s(),m("div",{key:l.dataIndex,class:"setting"},[A("div",zt,[e(ta)]),A("div",null,[e(Q,{modelValue:l.checked,"onUpdate:modelValue":te=>l.checked=te,onChange:te=>Se(te,l,U)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),A("div",It,i(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:a(()=>[A("div",At,[e(aa,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ua,{ref_key:"tableRef",ref:z,"row-key":"id",loading:o(b),pagination:j,columns:p.value,data:w.value,bordered:!1,size:L.value,"row-selection":se,onPageChange:Ee,onPageSizeChange:Ue,onSelectionChange:Qe},{user_id:a(({record:l})=>[l.rid&&o(c)==="admin"?(s(),m("span",{key:0,title:l.rid},[A("b",null,i(l.user_id),1)],8,Ht)):(s(),m("span",Nt,i(l.user_id),1))]),quota:a(({record:l})=>[n(i(l.quota>0?`$${o(H)(l.quota)}`:l.quota<0?`-$${o(H)(-l.quota)}`:"$0.00"),1)]),used_quota:a(({record:l})=>[n(" $"+i(l.used_quota>0?o(H)(l.used_quota):"0.00"),1)]),quota_expires_at:a(({rowIndex:l})=>[e(ve,{modelValue:w.value[l].quota_expires_at,"onUpdate:modelValue":U=>w.value[l].quota_expires_at=U,placeholder:t.$t("user.columns.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":o(qe),"show-time":"",shortcuts:[{label:"1",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>o(V)(w.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}],onChange:U=>Re({id:`${w.value[l].id}`,quota_expires_at:`${w.value[l].quota_expires_at}`})},{default:a(()=>[e(E,{style:{width:"150px"}},{default:a(()=>[n(i(w.value[l].quota_expires_at||t.$t("user.columns.placeholder.quota_expires_at")),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled-date","shortcuts","onChange"])]),remark:a(({record:l})=>[n(i(l.remark||"-"),1)]),status:a(({record:l})=>[e(fe,{modelValue:l.status,"onUpdate:modelValue":U=>l.status=U,"checked-value":1,"unchecked-value":2,onChange:U=>Le({id:`${l.id}`,status:Number(`${l.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:l})=>[e(E,{type:"text",size:"small",onClick:U=>Te({user_id:`${l.user_id}`,quota_expires_at:`${l.quota_expires_at}`})},{default:a(()=>[n(i(t.$t("user.columns.operations.recharge")),1)]),_:2},1032,["onClick"]),e(E,{type:"text",size:"small",onClick:U=>Oe(l.id)},{default:a(()=>[n(i(t.$t("user.columns.operations.view")),1)]),_:2},1032,["onClick"]),e(E,{type:"text",size:"small",onClick:U=>t.$router.push({name:"UserUpdate",query:{id:`${l.id}`}})},{default:a(()=>[n(i(t.$t("user.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(E,{type:"text",size:"small",onClick:U=>ce({id:`${l.id}`,user_id:`${l.user_id}`,name:`${l.name}`,data:[2,3,4,5]})},{default:a(()=>[n(i(t.$t("user.columns.operations.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(oa,{title:t.$t("menu.user.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:X.value,onCancel:Ge},{default:a(()=>[e(Et,{id:_e.value},null,8,["id"])]),_:1},8,["title","visible"]),e(ge,{visible:M.value,"onUpdate:visible":u[19]||(u[19]=l=>M.value=l),title:t.$t("user.form.title.recharge"),"ok-text":t.$t("button.ok"),width:660,onCancel:Me,onBeforeOk:Pe},{default:a(()=>[e(ee,{ref_key:"formRef",ref:ie,model:_.value},{default:a(()=>[e(C,{field:"quota",label:t.$t("user.label.quota"),rules:[{required:!0,message:t.$t("user.error.quota.required")}]},{default:a(()=>[e(Y,{modelValue:_.value.quota,"onUpdate:modelValue":u[11]||(u[11]=l=>_.value.quota=l),placeholder:t.$t("user.placeholder.recharge"),precision:0,min:1,max:9999999999999,style:{"margin-right":"10px"}},null,8,["modelValue","placeholder"]),A("div",null," $"+i(_.value.quota?o(H)(_.value.quota):"0.00"),1)]),_:1},8,["label","rules"]),e(C,{style:{width:"280px","margin-bottom":"10px"}},{default:a(()=>[e(be,{modelValue:P.value,"onUpdate:modelValue":u[12]||(u[12]=l=>P.value=l),type:"button",onChange:re},{default:a(()=>[e($,{value:1},{default:a(()=>[n(" $1 ")]),_:1}),e($,{value:2},{default:a(()=>[n(" $2 ")]),_:1}),e($,{value:5},{default:a(()=>[n(" $5 ")]),_:1}),e($,{value:10},{default:a(()=>[n(" $10 ")]),_:1}),e($,{value:20},{default:a(()=>[n(" $20 ")]),_:1}),e($,{value:50},{default:a(()=>[n(" $50 ")]),_:1}),e($,{value:100},{default:a(()=>[n(" $100 ")]),_:1}),e($,{value:200},{default:a(()=>[n(" $200 ")]),_:1}),e($,{value:500},{default:a(()=>[n(" $500 ")]),_:1}),e($,{value:1e3},{default:a(()=>[n(" $1,000 ")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(C,{style:{width:"280px"}},{default:a(()=>[e(be,{modelValue:P.value,"onUpdate:modelValue":u[13]||(u[13]=l=>P.value=l),type:"button",onChange:re},{default:a(()=>[e($,{value:2e3},{default:a(()=>[n(" $2,000 ")]),_:1}),e($,{value:3e3},{default:a(()=>[n(" $3,000 ")]),_:1}),e($,{value:5e3},{default:a(()=>[n(" $5,000 ")]),_:1}),e($,{value:1e4},{default:a(()=>[n(" $10,000 ")]),_:1}),e($,{value:2e4},{default:a(()=>[n(" $20,000 ")]),_:1}),e($,{value:5e4},{default:a(()=>[n(" $50,000 ")]),_:1}),e($,{value:1e5},{default:a(()=>[n(" $100,000 ")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(C,{field:"quota_type",label:t.$t("user.label.quota_type"),rules:[{required:!0,message:t.$t("user.error.quota_type.required")}]},{default:a(()=>[e(W,{size:"large"},{default:a(()=>[e($,{modelValue:_.value.quota_type,"onUpdate:modelValue":u[14]||(u[14]=l=>_.value.quota_type=l),value:"1","default-checked":!0},{default:a(()=>[n(" \u5145\u503C ")]),_:1},8,["modelValue"]),e($,{modelValue:_.value.quota_type,"onUpdate:modelValue":u[15]||(u[15]=l=>_.value.quota_type=l),value:"2"},{default:a(()=>[n(" \u6263\u9664 ")]),_:1},8,["modelValue"]),e($,{modelValue:_.value.quota_type,"onUpdate:modelValue":u[16]||(u[16]=l=>_.value.quota_type=l),value:"3"},{default:a(()=>[n(" \u8D60\u9001 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(C,{field:"quota_expires_at",label:t.$t("user.label.quota_expires_at")},{default:a(()=>[e(ve,{modelValue:_.value.quota_expires_at,"onUpdate:modelValue":u[17]||(u[17]=l=>_.value.quota_expires_at=l),placeholder:t.$t("user.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":o(qe),position:"tl",style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>o(V)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),e(C,{field:"is_send_notice",label:t.$t("user.label.is_send_notice")},{default:a(()=>[e(fe,{modelValue:_.value.is_send_notice,"onUpdate:modelValue":u[18]||(u[18]=l=>_.value.is_send_notice=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),e(ge,{visible:O.value,"onUpdate:visible":u[26]||(u[26]=l=>O.value=l),title:t.$t("user.form.title.del"),width:600,onCancel:Je,onBeforeOk:je},{default:a(()=>[e(ee,{ref_key:"delFormRef",ref:de,model:q.value},{default:a(()=>[q.value.user_id?(s(),f(C,{key:0,field:"user_id",label:t.$t("user.form.userId"),rules:[{required:!0}]},{default:a(()=>[e(K,{modelValue:q.value.user_id,"onUpdate:modelValue":u[20]||(u[20]=l=>q.value.user_id=l),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])):ke("",!0),q.value.name?(s(),f(C,{key:1,field:"name",label:t.$t("user.label.name"),rules:[{required:!0}]},{default:a(()=>[e(K,{modelValue:q.value.name,"onUpdate:modelValue":u[21]||(u[21]=l=>q.value.name=l),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])):ke("",!0),e(C,{field:"data",label:t.$t("user.label.del.data")},{default:a(()=>[e(W,{size:"large"},{default:a(()=>[e(Q,{modelValue:q.value.data,"onUpdate:modelValue":u[22]||(u[22]=l=>q.value.data=l),value:2},{default:a(()=>[n(" \u5E94\u7528\u6570\u636E ")]),_:1},8,["modelValue"]),e(Q,{modelValue:q.value.data,"onUpdate:modelValue":u[23]||(u[23]=l=>q.value.data=l),value:3},{default:a(()=>[n(" \u4EA4\u6613\u8BB0\u5F55 ")]),_:1},8,["modelValue"]),e(Q,{modelValue:q.value.data,"onUpdate:modelValue":u[24]||(u[24]=l=>q.value.data=l),value:4},{default:a(()=>[n(" \u8D26\u5355\u660E\u7EC6 ")]),_:1},8,["modelValue"]),e(Q,{modelValue:q.value.data,"onUpdate:modelValue":u[25]||(u[25]=l=>q.value.data=l),value:5},{default:a(()=>[n(" \u65E5\u5FD7\u6570\u636E ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const fl=ca(Lt,[["__scopeId","data-v-a48969f4"]]);export{fl as default};

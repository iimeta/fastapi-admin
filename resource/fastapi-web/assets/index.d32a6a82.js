import{u as _l,M as fl,s as bl,A as vl,k as gl,B as yl,_ as kl}from"./index.03ae97f6.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as Ue,e as y,B as n,C as c,aH as l,aG as e,u as v,aD as i,aM as u,aL as k,bA as $l,bB as hl,bC as wl,bD as Vl,bE as Cl,r as De,c as te,w as El,aJ as H,aI as N,aE as A,D as P,E as Fl,n as Bl,aZ as oe,a_ as Ae,aK as Dl,aF as Al,bH as Ul,bI as Sl,b2 as Il,bG as Ml,b1 as zl,bK as ql,b5 as Ll,bL as Ol,ab as Hl,aU as Nl,bi as Pl,bj as Tl,bk as jl,bl as Gl,b4 as Rl,bM as Jl,aT as Kl,bN as Ql,bO as Zl,aV as Wl,bQ as Xl,bU as Yl}from"./arco.73de4031.js";import{u as Se}from"./loading.0c20cf1b.js";import{c as xl,d as ea,q as la,s as aa,e as ta,f as oa,g as na}from"./model.6db9633d.js";import{c as fe,S as ua}from"./sortable.esm.7de80f5d.js";import{q as sa}from"./model_agent.08be3c25.js";import{q as da}from"./provider.a264fa05.js";import{q as ia}from"./group.ec375ec6.js";/* empty css                *//* empty css                */import{_ as Ie}from"./pricing_detail.vue_vue_type_script_setup_true_lang.64e16263.js";import"./chart.b5ad42b0.js";import"./vue.e54f3d1e.js";import"./quota.254a8546.js";import"./common.0ef165cd.js";const ra={style:{margin:"10px 0 30px 10px"}},ma={key:1},pa={key:1},ca={key:1},_a={key:1},fa={key:1},ba={key:1},va={key:1},ga={key:1},ya={key:1},ka={key:1},$a={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},ha={key:1},wa={key:1},Va={key:1},Ca={key:1},Ea={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Fa={key:1},Ba={key:1},Da={key:1},Aa={key:1},Ua={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Sa={key:1},Ia={key:1},Ma={key:1},za={key:1},qa={key:1},La={key:1},Oa={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ha={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Na={key:1},Pa={key:1},Ta={key:1},ja={key:1},Ga={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ra={key:1},Ja={key:1},Ka={name:"ModelDetail"},Qa=Ue({...Ka,props:{id:{type:String,default:""}},setup(be){const x=be,{loading:_,setLoading:b}=Se(!0),f=y({}),j=y({billing_items:[]}),w=y(0);return(async(s={id:x.id})=>{b(!0);try{const{data:U}=await xl(s);f.value=U,j.value=U.pricing,w.value=U.type}catch{}finally{b(!1)}})(),(s,U)=>{const g=$l,m=hl,d=wl,G=Vl,L=Cl;return n(),c("div",ra,[l(L,{column:2,bordered:"","label-style":{padding:"5px 8px 5px 15px"},"value-style":{width:"350px",padding:"5px 8px 5px 15px"},style:{"margin-bottom":"15px"}},{default:e(()=>[l(d,{label:s.$t("common.provider")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ma,u(f.value.provider_name),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.model_name")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",pa,u(f.value.name),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.model")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ca,u(f.value.model),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.model_type")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",_a,u(s.$t(`dict.model_type.${f.value.type}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.base_url")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",fa,u(f.value.base_url||"-"),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.path")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ba,u(f.value.path||"-"),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.billing_rule")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",va,u(s.$t(`model.dict.billing_rule.${f.value.pricing.billing_rule||1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.billing_methods")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ga,u(s.$t(`dict.billing_methods.${f.value.pricing.billing_methods||1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.request_data_format")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ya,u(s.$t(`dict.data_format.${f.value.request_data_format||1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.response_data_format")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ka,u(s.$t(`dict.data_format.${f.value.response_data_format||1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.group"),span:2},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",$a,u(((p=(r=f.value)==null?void 0:r.group_names)==null?void 0:p.join(`
`))||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("common.is_public")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ha,u(s.$t(`dict.is_public.${f.value.is_public||!1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.is_enable_preset_config")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",wa,u(s.$t(`dict.enable.${f.value.is_enable_preset_config||!1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.preset_config.is_support_system_role")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Va,u(s.$t(`model.dict.is_support_system_role.${((p=(r=f.value)==null?void 0:r.preset_config)==null?void 0:p.is_support_system_role)||!1}`)),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.preset_config.is_support_stream")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ca,u(s.$t(`model.dict.is_support_system_role.${((p=(r=f.value)==null?void 0:r.preset_config)==null?void 0:p.is_support_stream)||!1}`)),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.preset_config.system_role_prompt"),span:2},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ea,u(((p=(r=f.value)==null?void 0:r.preset_config)==null?void 0:p.system_role_prompt)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.placeholder.preset_config.min_tokens")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Fa,u(((p=(r=f.value)==null?void 0:r.preset_config)==null?void 0:p.min_tokens)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.placeholder.preset_config.max_tokens")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ba,u(((p=(r=f.value)==null?void 0:r.preset_config)==null?void 0:p.max_tokens)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("common.enable_model_agent")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Da,u(s.$t(`dict.enable.${f.value.is_enable_model_agent||!1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.lb_strategy")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Aa,u(s.$t(`dict.lb_strategy.${f.value.lb_strategy||1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.model_agents"),span:2},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ua,u(((p=(r=f.value)==null?void 0:r.model_agent_names)==null?void 0:p.join(`
`))||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.model_forward")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Sa,u(s.$t(`dict.enable.${f.value.is_enable_forward||!1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.forward_rule")},{default:e(()=>{var r,p,B,T;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ia,u((p=(r=f.value)==null?void 0:r.forward_config)!=null&&p.forward_rule?s.$t(`dict.forward_rule.${((T=(B=f.value)==null?void 0:B.forward_config)==null?void 0:T.forward_rule)||1}`):"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.content_length")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ma,u(((p=(r=f.value)==null?void 0:r.forward_config)==null?void 0:p.content_length)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.target_model")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",za,u(((p=(r=f.value)==null?void 0:r.forward_config)==null?void 0:p.target_model_name)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.match_rule")},{default:e(()=>{var r,p,B,T;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",qa,u((p=(r=f.value)==null?void 0:r.forward_config)!=null&&p.match_rule?s.$t(`dict.match_rule.${((T=(B=f.value)==null?void 0:B.forward_config)==null?void 0:T.match_rule)||1}`):"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.detail.decision_model_name")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",La,u(((p=(r=f.value)==null?void 0:r.forward_config)==null?void 0:p.decision_model_name)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.keywords")},{default:e(()=>{var r,p,B;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Oa,u(((B=(p=(r=f.value)==null?void 0:r.forward_config)==null?void 0:p.keywords)==null?void 0:B.join(`
`))||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.detail.target_model_names")},{default:e(()=>{var r,p,B;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ha,u(((B=(p=(r=f.value)==null?void 0:r.forward_config)==null?void 0:p.target_model_names)==null?void 0:B.join(`
`))||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.is_enable_fallback")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Na,u(s.$t(`dict.enable.${f.value.is_enable_fallback||!1}`)),1))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.fallback_model_agent")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Pa,u(((p=(r=f.value)==null?void 0:r.fallback_config)==null?void 0:p.model_agent_name)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("model.label.fallback_model")},{default:e(()=>{var r,p;return[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ta,u(((p=(r=f.value)==null?void 0:r.fallback_config)==null?void 0:p.model_name)||"-"),1))]}),_:1},8,["label"]),l(d,{label:s.$t("common.status")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",ja,[f.value.status===1?(n(),i(G,{key:0,color:"green"},{default:e(()=>[k(u(s.$t(`dict.status.${f.value.status}`)),1)]),_:1})):(n(),i(G,{key:1,color:"red"},{default:e(()=>[k(u(s.$t(`dict.status.${f.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),l(d,{label:s.$t("model.label.remark"),span:2},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ga,u(f.value.remark||"-"),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.created_at")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ra,u(f.value.created_at),1))]),_:1},8,["label"]),l(d,{label:s.$t("common.updated_at")},{default:e(()=>[v(_)?(n(),i(m,{key:0,animation:!0},{default:e(()=>[l(g,{rows:1})]),_:1})):(n(),c("span",Ja,u(f.value.updated_at),1))]),_:1},8,["label"])]),_:1}),l(Ie,{modelValue:j.value,"onUpdate:modelValue":U[0]||(U[0]=r=>j.value=r),"model-type":w.value},null,8,["modelValue","model-type"])])}}}),Za={class:"container"},Wa={class:"action-icon"},Xa={class:"action-icon"},Ya={id:"tableSetting"},xa={style:{"margin-right":"4px",cursor:"move"}},et={class:"title"},lt={name:"ModelList"},at=Ue({...lt,setup(be){const{loading:x,setLoading:_}=Se(!0),{t:b}=_l(),f=De({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),j=()=>({provider_id:"",model:"",name:"",type:y(),group:"",status:y()}),w=y([]),V=y(j()),s=y([]),U=y([]),g=y("medium"),m=y([]),d=y(!0),G=y(),L={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},r=De({...L}),p=te(()=>[{name:b("size.mini"),value:"mini"},{name:b("size.small"),value:"small"},{name:b("size.medium"),value:"medium"},{name:b("size.large"),value:"large"}]),B=te(()=>[{title:b("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center",width:120},{title:b("common.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:b("model.columns.pricing"),dataIndex:"pricing",slotName:"pricing",align:"center"},{title:b("common.group"),dataIndex:"group_names",slotName:"group_names",align:"center",ellipsis:!0,tooltip:!0},{title:b("common.lb_strategy"),dataIndex:"lb_strategy",slotName:"lb_strategy",align:"center"},{title:b("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:b("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:b("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:170}]),T=te(()=>[{label:b("dict.model_type.1"),value:1},{label:b("dict.model_type.2"),value:2},{label:b("dict.model_type.3"),value:3},{label:b("dict.model_type.4"),value:4},{label:b("dict.model_type.5"),value:5},{label:b("dict.model_type.6"),value:6},{label:b("dict.model_type.7"),value:7},{label:b("dict.model_type.8"),value:8},{label:b("dict.model_type.100"),value:100},{label:b("dict.model_type.101"),value:101},{label:b("dict.model_type.102"),value:102},{label:b("dict.model_type.103"),value:103},{label:b("dict.model_type.10000"),value:1e4}]),Me=te(()=>[{label:b("dict.status.1"),value:1},{label:b("dict.status.2"),value:2}]),ee=async(a={...L})=>{_(!0);try{const{data:o}=await ea(a);w.value=o.items,r.current=a.current,r.pageSize=a.pageSize,r.total=o.paging.total}catch{}finally{_(!1),G.value.selectAll(!1)}};ee();const R=()=>{ee({...L,...V.value})},ze=a=>{ee({...L,...V.value,current:a})},qe=a=>{L.pageSize=a,ee({...L,...V.value})},Le=()=>{V.value=j(),R()},Oe=(a,o)=>{g.value=a},He=(a,o,$)=>{a?s.value.splice($,0,o):s.value=U.value.filter(M=>M.dataIndex!==o.dataIndex)},ve=(a,o,$,M=!1)=>{const q=M?fe(a):a;return o>-1&&$>-1&&q.splice(o,1,q.splice($,1,q[o]).pop()),q},Ne=a=>{a&&Bl(()=>{const o=document.getElementById("tableSetting");new ua(o,{onEnd($){const{oldIndex:M,newIndex:q}=$;ve(s.value,M,q),ve(U.value,M,q)}})})};El(()=>B.value,a=>{s.value=fe(a),s.value.forEach((o,$)=>{o.checked=!0}),U.value=fe(s.value)},{deep:!0,immediate:!0});const ge=y([]);(async()=>{const{data:a}=await da();ge.value=a.items})();const ne=y([]);(async()=>{try{const{data:a}=await la();ne.value=a.items}catch{}})();const ue=y([]);(async()=>{try{const{data:a}=await sa();ue.value=a.items}catch{}})();const ye=y([]);(async()=>{const{data:a}=await ia();ye.value=a.items})();const Pe=async a=>{await aa(a),oe.success(b("success.delete")),R()},Te=async a=>{await ta(a),oe.success(b("success.operate")),R()},K=y(!1),ke=y(),F=y({}),$e=y(),Q=y(!1),I=y({});I.value.lb_strategy="1";const je=async()=>{_(!0);try{F.value.url="",F.value.key="",F.value.is_config_model_agent=!0,F.value.is_cover_price=!1,K.value=!0}catch{}finally{_(!1)}},Ge=async a=>{var $;if(await(($=ke.value)==null?void 0:$.validate())){K.value=!0,a(!1);return}_(!0);try{await oa(F.value),a(),window.location.reload()}catch{a(!1)}finally{_(!1)}},Re=()=>{K.value=!1},Je=async a=>{var $;if(await(($=$e.value)==null?void 0:$.validate())){Q.value=!0,a(!1);return}a(),C({action:"agent",value:"all",lb_strategy:I.value.lb_strategy,model_agents:I.value.model_agents})},Ke=()=>{Q.value=!1},he=y(),Z=y(!1),le=y({}),Qe=async a=>{var $;if(await(($=he.value)==null?void 0:$.validate())){Z.value=!0,a(!1);return}a(),C({action:"forward",value:"all",target_model:le.value.target_model})},Ze=()=>{Z.value=!1},we=y(),W=y(!1),D=y({}),We=async a=>{var $;if(await(($=we.value)==null?void 0:$.validate())){W.value=!0,a(!1);return}a(),C({action:"fallback",value:"all",fallback_config:{model_agent:D.value.model_agent,model:D.value.model}})},Xe=()=>{W.value=!1},Ye=a=>{m.value=a,d.value=!a.length},C=a=>{if(m.value.length===0)oe.info(b("placeholder.operation.data"));else{let o=b("placeholder.batch.operation",{count:m.value.length});switch(a.action){case"agent":a.value===!0?o=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u4EE3\u7406?`:a.value===!1?o=`\u662F\u5426\u786E\u5B9A\u5173\u95ED\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u4EE3\u7406?`:a.value==="all"&&(a.model_agents?o=`\u662F\u5426\u786E\u5B9A\u5C06\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u4EE3\u7406\u542F\u7528\u5E76\u4F7F\u7528\u6240\u9009\u7684\u6A21\u578B\u4EE3\u7406?`:Q.value=!0);break;case"forward":a.value===!0?o=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u8F6C\u53D1?`:a.value===!1?o=`\u662F\u5426\u786E\u5B9A\u5173\u95ED\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u8F6C\u53D1?`:a.value==="all"&&(a.target_model?o=`\u662F\u5426\u786E\u5B9A\u5C06\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u8F6C\u53D1\u542F\u7528\u5E76\u5168\u90E8\u8F6C\u53D1\u5230\u6240\u9009\u6A21\u578B?`:Z.value=!0);break;case"fallback":a.value===!0?o=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u540E\u5907\u6A21\u578B?`:a.value===!1?o=`\u662F\u5426\u786E\u5B9A\u5173\u95ED\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u540E\u5907\u6A21\u578B?`:a.value==="all"&&(a.fallback_config?o=`\u662F\u5426\u786E\u5B9A\u5C06\u6240\u9009${m.value.length}\u6761\u6570\u636E\u7684\u540E\u5907\u914D\u7F6E\u542F\u7528\u5E76\u5168\u90E8\u540E\u5907\u5230\u6240\u9009\u914D\u7F6E?`:W.value=!0);break;case"status":a.value===1?o=b("placeholder.batch.operation.enable",{count:m.value.length}):o=b("placeholder.batch.operation.disable",{count:m.value.length});break;case"delete":o=b("placeholder.batch.operation.delete",{count:m.value.length});break}if(a.action==="agent"&&a.value==="all"&&!a.model_agents||a.action==="forward"&&a.value==="all"&&!a.target_model||a.action==="fallback"&&a.value==="all"&&!a.fallback_config)return;Ae.warning({title:b("modal.warning.title"),titleAlign:"center",content:o,okText:b("button.ok"),cancelText:b("button.cancel"),hideCancel:!1,onOk:()=>{_(!0),a.ids=m.value,na(a).then($=>{_(!1),oe.success(b("success.operate")),R(),G.value.selectAll(!1)})}})}},se=y(!1),de=y({billing_items:[]}),Ve=y(0),xe=(a,o)=>{se.value=!0,de.value=a,Ve.value=o},ie=y(!1),Ce=y(),el=a=>{ie.value=!0,Ce.value=a},ll=()=>{ie.value=!1};return(a,o)=>{const $=fl,M=Dl,q=Al,J=Ul,O=Sl,E=Il,z=Ml,ae=zl,re=ql,X=Ll,Ee=Ol,al=Hl,h=Nl,Fe=bl,me=Pl,pe=Tl,tl=vl,ol=jl,nl=Gl,ul=gl,sl=yl,dl=Rl,il=Jl,ce=Kl,rl=Ql,ml=Zl,pl=Wl,Y=Ae,Be=Xl,cl=Yl;return n(),c("div",Za,[l(q,{class:"container-breadcrumb"},{default:e(()=>[l(M,null,{default:e(()=>[l($)]),_:1}),l(M,null,{default:e(()=>[k(u(a.$t("model.menu")),1)]),_:1})]),_:1}),l(cl,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[l(re,null,{default:e(()=>[l(z,{flex:1},{default:e(()=>[l(X,{model:V.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[l(re,{gutter:16},{default:e(()=>[l(z,{span:8},{default:e(()=>[l(E,{field:"provider_id",label:a.$t("common.provider")},{default:e(()=>[l(O,{modelValue:V.value.provider_id,"onUpdate:modelValue":o[0]||(o[0]=t=>V.value.provider_id=t),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),c(H,null,N(ge.value,t=>(n(),i(J,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(z,{span:8},{default:e(()=>[l(E,{field:"model",label:a.$t("common.model")},{default:e(()=>[l(ae,{modelValue:V.value.model,"onUpdate:modelValue":o[1]||(o[1]=t=>V.value.model=t),placeholder:a.$t("model.form.placeholder.model"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(z,{span:8},{default:e(()=>[l(E,{field:"name",label:a.$t("common.model_name")},{default:e(()=>[l(ae,{modelValue:V.value.name,"onUpdate:modelValue":o[2]||(o[2]=t=>V.value.name=t),placeholder:a.$t("model.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(z,{span:8},{default:e(()=>[l(E,{field:"group",label:a.$t("common.group")},{default:e(()=>[l(O,{modelValue:V.value.group,"onUpdate:modelValue":o[3]||(o[3]=t=>V.value.group=t),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),c(H,null,N(ye.value,t=>(n(),i(J,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(z,{span:8},{default:e(()=>[l(E,{field:"status",label:a.$t("common.status")},{default:e(()=>[l(O,{modelValue:V.value.status,"onUpdate:modelValue":o[4]||(o[4]=t=>V.value.status=t),placeholder:a.$t("common.all"),options:v(Me),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),l(z,{span:8},{default:e(()=>[l(E,{field:"type",label:a.$t("common.model_type")},{default:e(()=>[l(O,{modelValue:V.value.type,"onUpdate:modelValue":o[5]||(o[5]=t=>V.value.type=t),placeholder:a.$t("common.all"),options:v(T),scrollbar:!1,"allow-search":"","allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(Ee,{style:{height:"84px"},direction:"vertical"}),l(z,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[l(me,{direction:"vertical",size:18},{default:e(()=>[l(h,{type:"primary",onClick:R},{icon:e(()=>[l(al)]),default:e(()=>[k(" "+u(a.$t("button.search")),1)]),_:1}),l(h,{onClick:Le},{icon:e(()=>[l(Fe)]),default:e(()=>[k(" "+u(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{style:{"margin-top":"0","margin-bottom":"16px"}}),l(re,{style:{"margin-bottom":"16px"}},{default:e(()=>[l(z,{span:12},{default:e(()=>[l(me,null,{default:e(()=>[l(h,{type:"primary",onClick:o[6]||(o[6]=t=>a.$router.push({name:"ModelCreate"}))},{default:e(()=>[k(u(a.$t("button.create")),1)]),_:1}),!v(x)&&w.value.length===0?(n(),i(h,{key:0,type:"primary",status:"success",onClick:o[7]||(o[7]=t=>je())},{default:e(()=>[k(u(a.$t("button.sync")),1)]),_:1})):A("",!0),w.value.length!==0?(n(),i(h,{key:1,type:"primary",status:"warning",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[8]||(o[8]=t=>C({action:"agent",value:"all"}))},{default:e(()=>[k(u(a.$t("model.button.all_model_agent")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:2,type:"primary",status:"success",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[9]||(o[9]=t=>C({action:"agent",value:!0}))},{default:e(()=>[k(u(a.$t("model.button.enable_model_agent")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:3,type:"primary",status:"danger",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[10]||(o[10]=t=>C({action:"agent",value:!1}))},{default:e(()=>[k(u(a.$t("model.button.close_model_agent")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:4,type:"primary",status:"warning",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[11]||(o[11]=t=>C({action:"forward",value:"all"}))},{default:e(()=>[k(u(a.$t("model.button.all_forward")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:5,type:"primary",status:"success",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[12]||(o[12]=t=>C({action:"forward",value:!0}))},{default:e(()=>[k(u(a.$t("model.button.enable_forward")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:6,type:"primary",status:"danger",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[13]||(o[13]=t=>C({action:"forward",value:!1}))},{default:e(()=>[k(u(a.$t("model.button.close_forward")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:7,type:"primary",status:"warning",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[14]||(o[14]=t=>C({action:"fallback",value:"all"}))},{default:e(()=>[k(u(a.$t("model.button.all_fallback")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:8,type:"primary",status:"success",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[15]||(o[15]=t=>C({action:"fallback",value:!0}))},{default:e(()=>[k(u(a.$t("model.button.enable_fallback")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:9,type:"primary",status:"danger",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[16]||(o[16]=t=>C({action:"fallback",value:!1}))},{default:e(()=>[k(u(a.$t("model.button.close_fallback")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:10,type:"primary",status:"success",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[17]||(o[17]=t=>C({action:"status",value:1}))},{default:e(()=>[k(u(a.$t("button.enable")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:11,type:"primary",status:"danger",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[18]||(o[18]=t=>C({action:"status",value:2}))},{default:e(()=>[k(u(a.$t("button.disable")),1)]),_:1},8,["disabled","title"])):A("",!0),w.value.length!==0?(n(),i(h,{key:12,type:"primary",status:"danger",disabled:d.value,title:d.value?a.$t("placeholder.operation.data"):"",onClick:o[19]||(o[19]=t=>C({action:"delete"}))},{default:e(()=>[k(u(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])):A("",!0)]),_:1})]),_:1}),l(z,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:e(()=>[l(pe,{content:a.$t("action.refresh")},{default:e(()=>[P("div",{class:"action-icon",onClick:R},[l(Fe,{size:"18"})])]),_:1},8,["content"]),l(nl,{onSelect:Oe},{content:e(()=>[(n(!0),c(H,null,N(v(p),t=>(n(),i(ol,{key:t.value,value:t.value,class:Fl({active:t.value===g.value})},{default:e(()=>[P("span",null,u(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[l(pe,{content:a.$t("action.density")},{default:e(()=>[P("div",Wa,[l(tl,{size:"18"})])]),_:1},8,["content"])]),_:1}),l(pe,{content:a.$t("action.column_setting")},{default:e(()=>[l(il,{trigger:"click",position:"bl",onPopupVisibleChange:Ne},{content:e(()=>[P("div",Ya,[(n(!0),c(H,null,N(U.value,(t,S)=>(n(),c("div",{key:t.dataIndex,class:"setting"},[P("div",xa,[l(sl)]),P("div",null,[l(dl,{modelValue:t.checked,"onUpdate:modelValue":_e=>t.checked=_e,onChange:_e=>He(_e,t,S)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),P("div",et,u(t.title),1)]))),128))])]),default:e(()=>[P("div",Xa,[l(ul,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(ml,{ref_key:"tableRef",ref:G,"row-key":"id",loading:v(x),pagination:r,columns:s.value,data:w.value,bordered:!1,size:g.value,"row-selection":f,onPageChange:ze,onPageSizeChange:qe,onSelectionChange:Ye},{type:e(({record:t})=>[k(u(a.$t(`dict.model_type.${t.type}`)),1)]),pricing:e(({record:t})=>[l(h,{type:"text",size:"small",onClick:S=>xe(t.pricing,t.type)},{default:e(()=>[k(u(a.$t("button.view")),1)]),_:2},1032,["onClick"])]),group_names:e(({record:t})=>{var S;return[k(u(((S=t==null?void 0:t.group_names)==null?void 0:S.join(","))||"-"),1)]}),lb_strategy:e(({record:t})=>[k(u(t.is_enable_model_agent?a.$t(`dict.lb_strategy.${t.lb_strategy||1}`):"-"),1)]),status:e(({record:t})=>[l(ce,{modelValue:t.status,"onUpdate:modelValue":S=>t.status=S,"checked-value":1,"unchecked-value":2,onChange:S=>Te({id:t.id,status:t.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:e(({record:t})=>[l(h,{type:"text",size:"small",onClick:S=>el(t.id)},{default:e(()=>[k(u(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),l(h,{type:"text",size:"small",onClick:S=>a.$router.push({name:"ModelUpdate",query:{id:t.id}})},{default:e(()=>[k(u(a.$t("button.update")),1)]),_:2},1032,["onClick"]),l(rl,{content:a.$t("placeholder.operation.delete"),onOk:S=>Pe({id:t.id})},{default:e(()=>[l(h,{type:"text",size:"small"},{default:e(()=>[k(u(a.$t("button.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),l(pl,{title:a.$t("model.menu.detail"),"unmount-on-close":"","render-to-body":"",width:888,footer:!1,visible:ie.value,onCancel:ll},{default:e(()=>[l(Qa,{id:Ce.value},null,8,["id"])]),_:1},8,["title","visible"]),l(Y,{visible:K.value,"onUpdate:visible":o[24]||(o[24]=t=>K.value=t),title:a.$t("model.form.title.init_model"),onCancel:Re,onBeforeOk:Ge},{default:e(()=>[l(X,{ref_key:"initForm",ref:ke,model:F.value},{default:e(()=>[l(E,{field:"url",label:a.$t("model.label.url"),rules:[{required:!0,message:a.$t("model.error.required.url")}]},{default:e(()=>[l(ae,{modelValue:F.value.url,"onUpdate:modelValue":o[20]||(o[20]=t=>F.value.url=t),placeholder:a.$t("model.placeholder.url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(E,{field:"key",label:a.$t("common.app_key"),rules:[{required:!0,message:a.$t("placeholder.app_key")}]},{default:e(()=>[l(ae,{modelValue:F.value.key,"onUpdate:modelValue":o[21]||(o[21]=t=>F.value.key=t),placeholder:a.$t("model.placeholder.key"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(E,{field:"is_config_model_agent",label:a.$t("model.label.is_config_model_agent")},{default:e(()=>[l(ce,{modelValue:F.value.is_config_model_agent,"onUpdate:modelValue":o[22]||(o[22]=t=>F.value.is_config_model_agent=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(E,{field:"is_cover_price",label:a.$t("model.label.is_cover_price")},{default:e(()=>[l(ce,{modelValue:F.value.is_cover_price,"onUpdate:modelValue":o[23]||(o[23]=t=>F.value.is_cover_price=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(Y,{visible:Q.value,"onUpdate:visible":o[28]||(o[28]=t=>Q.value=t),title:a.$t("model.form.title.model_agent"),onCancel:Ke,onBeforeOk:Je},{default:e(()=>[l(X,{ref_key:"agentForm",ref:$e,model:I.value},{default:e(()=>[l(E,{field:"lb_strategy",label:a.$t("common.lb_strategy"),rules:[{required:!0}]},{default:e(()=>[l(me,{size:"large"},{default:e(()=>[l(Be,{modelValue:I.value.lb_strategy,"onUpdate:modelValue":o[25]||(o[25]=t=>I.value.lb_strategy=t),value:"1","default-checked":!0},{default:e(()=>[k(u(a.$t("dict.lb_strategy.1")),1)]),_:1},8,["modelValue"]),l(Be,{modelValue:I.value.lb_strategy,"onUpdate:modelValue":o[26]||(o[26]=t=>I.value.lb_strategy=t),value:"2"},{default:e(()=>[k(u(a.$t("dict.lb_strategy.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),l(E,{field:"model_agents",label:a.$t("common.model_agents"),rules:[{required:!0,message:a.$t("placeholder.model_agents")}]},{default:e(()=>[l(O,{modelValue:I.value.model_agents,"onUpdate:modelValue":o[27]||(o[27]=t=>I.value.model_agents=t),placeholder:a.$t("model.placeholder.model_agents"),"max-tag-count":15,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),c(H,null,N(ue.value,t=>(n(),i(J,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(Y,{visible:Z.value,"onUpdate:visible":o[30]||(o[30]=t=>Z.value=t),title:a.$t("model.form.title.forward"),onCancel:Ze,onBeforeOk:Qe},{default:e(()=>[l(X,{ref_key:"forwardForm",ref:he,model:le.value},{default:e(()=>[l(E,{field:"target_model",label:a.$t("model.label.target_model"),rules:[{required:!0,message:a.$t("model.placeholder.target_model")}]},{default:e(()=>[l(O,{modelValue:le.value.target_model,"onUpdate:modelValue":o[29]||(o[29]=t=>le.value.target_model=t),placeholder:a.$t("model.placeholder.target_model"),scrollbar:!1,"allow-search":""},{default:e(()=>[(n(!0),c(H,null,N(ne.value,t=>(n(),i(J,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(Y,{visible:W.value,"onUpdate:visible":o[33]||(o[33]=t=>W.value=t),title:a.$t("model.form.title.fallback"),onCancel:Xe,onBeforeOk:We},{default:e(()=>[l(X,{ref_key:"fallbackForm",ref:we,model:D.value},{default:e(()=>[l(E,{field:"model_agent",label:a.$t("model.label.fallback_model_agent"),rules:[{required:!D.value.model_agent&&!D.value.model||!D.value.model,message:a.$t("model.error.required.fallback")}]},{default:e(()=>[l(O,{modelValue:D.value.model_agent,"onUpdate:modelValue":o[31]||(o[31]=t=>D.value.model_agent=t),placeholder:a.$t("model.placeholder.fallback_model_agent"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),c(H,null,N(ue.value,t=>(n(),i(J,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(E,{field:"model",label:a.$t("model.label.fallback_model"),rules:[{required:!D.value.model_agent&&!D.value.model||!D.value.model_agent,message:a.$t("model.error.required.fallback")}]},{default:e(()=>[l(O,{modelValue:D.value.model,"onUpdate:modelValue":o[32]||(o[32]=t=>D.value.model=t),placeholder:a.$t("model.placeholder.fallback_model"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(n(!0),c(H,null,N(ne.value,t=>(n(),i(J,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(Y,{visible:se.value,"onUpdate:visible":o[35]||(o[35]=t=>se.value=t),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"",simple:"","ok-text":a.$t("button.close")},{default:e(()=>[l(Ie,{modelValue:de.value,"onUpdate:modelValue":o[34]||(o[34]=t=>de.value=t),"model-type":Ve.value},null,8,["modelValue","model-type"])]),_:1},8,["visible","ok-text"])]),_:1})])}}});const qt=kl(at,[["__scopeId","data-v-26ee6739"]]);export{qt as default};

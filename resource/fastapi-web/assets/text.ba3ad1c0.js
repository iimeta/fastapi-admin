import{u as ll,_ as tl,J as Ul,s as Dl,A as Sl,k as Ll,B as Tl}from"./index.b80693be.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              */import{d as al,e as $,w as ol,aZ as be,bF as nl,B as t,C as p,bu as b,aD as o,aG as e,aH as l,u as _,aL as r,aM as s,D as z,aE as zl,bA as Nl,bB as Al,ad as Bl,bC as Ml,a6 as Te,bj as ge,bD as sl,bE as xl,bi as ul,bb as El,b6 as Fl,a_ as ze,r as Ze,c as Se,h as P,bq as Pl,b as Hl,aJ as G,aI as K,E as Rl,n as Ol,aK as Yl,aF as jl,bH as Jl,bI as Ql,b2 as Wl,bG as Gl,b1 as Kl,aS as Zl,bJ as Xl,bK as et,b5 as lt,bL as tt,ab as at,aU as ot,bk as nt,bl as st,b4 as ut,bM as it,bN as dt,aV as rt,bT as mt}from"./arco.3f46b4ae.js";import{u as _t,h as pt}from"./vue.dbcf9bc3.js";import{u as il}from"./loading.37fd256d.js";import{b as A,a as Xe}from"./common.cfd92899.js";import{V as el,_ as dl,q as ct,t as ft,a as vt,s as yt,b as bt}from"./styles.f140eb51.js";import{e as gt}from"./app.a9f7b8ee.js";import{b as kt}from"./dashboard.0f01bd1e.js";import{c as Le,S as ht}from"./sortable.esm.078712c4.js";import{q as $t}from"./model.4f5741d3.js";import{q as wt}from"./model_agent.00299daa.js";import{Q as Ne}from"./quota.ab5a7aef.js";/* empty css               *//* empty css                *//* empty css                */import"./chart.2cea905d.js";const Vt={style:{margin:"10px 0 30px 10px"}},Ct={key:1},qt={key:1},It={key:1},Ut={key:1},Dt={key:1},St={key:1},Lt={key:1},Tt={key:1},zt={key:1},Nt={key:1},At={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Bt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Mt={key:1},xt={key:1},Et={key:1},Ft={key:1},Pt={key:1},Ht={key:1},Rt={key:1},Ot={key:1},Yt={key:1},jt={key:1},Jt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Qt={key:1},Wt={key:1},Gt={key:1},Kt={key:1},Zt={key:1},Xt={key:1},ea={key:1},la={key:1},ta={key:1},aa={key:1},oa={key:1},na={key:1},sa={key:1},ua={key:1},ia={key:1},da={key:1},ra={key:1},ma={key:1},_a={key:1},pa={key:1},ca={key:1},fa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},va={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},ya={key:1},ba={key:1},ga={key:1},ka={key:1},ha={key:1},$a={key:1},wa={key:1},Va={key:1},Ca={key:1},qa={key:1},Ia={key:1},Ua={key:1},Da={key:1},Sa={key:1},La={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ta={key:1},za={key:1},Na={name:"LogTextDetail"},Aa=al({...Na,props:{id:{type:String,default:""}},setup(Ae){const ke=Ae,{t:E}=ll(),{loading:i,setLoading:S}=il(!0),n=$({}),{copy:de,copied:Z}=_t();(async(d={id:ke.id})=>{S(!0);try{const{data:w}=await ct(d);n.value=w}catch{}finally{S(!1)}})();const y=d=>{de(d)};ol(Z,()=>{Z.value&&be.success(E("success.copy"))});const T=async(d,w)=>{const{data:c}=await ft({id:d,field:w});de(c.value)},F=$(!1),H=$(),N=$(),re=async(d,w)=>{F.value=!0,H.value=d,N.value=w};return(d,w)=>{const c=Nl,v=Al,R=Bl,f=Ml,O=Te,Y=ge,k=sl,J=xl,me=ul,_e=El,pe=Fl,ce=ze,X=nl("permission");return t(),p("div",Vt,[b((t(),o(J,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[l(f,{label:d.$t("common.trace_id"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Ct,[r(s(n.value.trace_id)+" ",1),l(R,{class:"copy-btn",onClick:w[0]||(w[0]=C=>y(n.value.trace_id))})]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.host"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",qt,s(n.value.host||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.path"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",It,s(n.value.method||"-")+" "+s(n.value.path||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.creator"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Ut,[r(s(n.value.creator)+" ",1),l(R,{class:"copy-btn",onClick:w[1]||(w[1]=C=>T(n.value.id,"creator"))})]))]),_:1},8,["label"]),l(f,{label:d.$t("common.user_id")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Dt,s(n.value.user_id||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.app_id")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",St,s(n.value.app_id||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.provider")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Lt,s(n.value.provider_name),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.model")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Tt,s(n.value.model||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.model_type")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",zt,s(d.$t(`dict.model_type.${n.value.model_type}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.stream")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Nt,s(d.$t(`dict.${n.value.stream||!1}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.prompt"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",At,s(n.value.prompt||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.completion"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Bt,s(n.value.completion||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.group_name")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Mt,s(n.value.spend.group_name||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.discount")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",xt,s(n.value.spend.group_discount>0?Number((n.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.billing_methods")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Et,s(n.value.spend.billing_methods?d.$t(`dict.billing_methods.${n.value.spend.billing_methods}`):"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.total.spend")},{label:e(()=>[z("span",null,[r(s(d.$t("common.total.spend"))+" ",1),l(Y,{content:d.$t("log.columns.tooltip.total_spend_tokens"),"content-style":{whiteSpace:"nowrap",maxWidth:"none"}},{default:e(()=>[l(O,{style:{color:"var(--color-text-3)"}})]),_:1},8,["content"])])]),default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",{key:1,class:"spend",onClick:w[2]||(w[2]=C=>n.value.status===1||n.value.status===2?re(n.value.spend,n.value.model_type):void 0)},[n.value.status===1||n.value.status===2?(t(),o(Ne,{key:0,"model-value":n.value.spend.total_spend_tokens},null,8,["model-value"])):(t(),p("span",Ft," - "))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.conn_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Pt,[n.value.conn_time>3e4?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.conn_time)+" ms ",1)]),_:1})):n.value.conn_time>15e3?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.conn_time)+" ms ",1)]),_:1})):n.value.conn_time>5e3?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.conn_time)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.duration")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Ht,[n.value.duration>18e4?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.duration)+" ms ",1)]),_:1})):n.value.duration>12e4?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.duration)+" ms ",1)]),_:1})):n.value.duration>9e4?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.duration)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.total_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Rt,[n.value.total_time>18e4?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.total_time)+" ms ",1)]),_:1})):n.value.total_time>12e4?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.total_time)+" ms ",1)]),_:1})):n.value.total_time>9e4?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.total_time)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.status")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Ot,[n.value.status===1?(t(),o(k,{key:0,color:"green"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1})):n.value.status===2?(t(),o(k,{key:1,color:"gold"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1})):n.value.status===3?(t(),o(k,{key:2,color:"orange"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1})):(t(),o(k,{key:3,color:"red"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.client_ip")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Yt,s(n.value.client_ip||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.req_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",jt,s(n.value.req_time||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.err_msg")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Jt,s(n.value.err_msg||"-"),1))]),_:1},8,["label"])]),_:1})),[[X,["user","reseller"]]]),b((t(),o(J,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[l(f,{label:d.$t("common.trace_id"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Qt,[r(s(n.value.trace_id)+" ",1),l(R,{class:"copy-btn",onClick:w[3]||(w[3]=C=>y(n.value.trace_id))})]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.host"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Wt,s(n.value.host||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.path"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Gt,s(n.value.method||"-")+" "+s(n.value.path||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.creator"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Kt,[r(s(n.value.is_smart_match?"-":n.value.creator)+" ",1),n.value.is_smart_match?zl("",!0):(t(),o(R,{key:0,class:"copy-btn",onClick:w[4]||(w[4]=C=>T(n.value.id,"creator"))}))]))]),_:1},8,["label"]),l(f,{label:d.$t("common.user_id")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Zt,s(n.value.is_smart_match?"-":n.value.user_id||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.app_id")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Xt,s(n.value.is_smart_match?"-":n.value.app_id||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.provider")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ea,s(n.value.provider_name),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.model_type")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",la,s(d.$t(`dict.model_type.${n.value.model_type}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.req_model_name")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",ta,s(n.value.model_name||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.req_model")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",aa,s(n.value.model||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.real_model_name")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",oa,s(n.value.real_model_name),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.real_model")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",na,s(n.value.real_model),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.stream")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",sa,s(d.$t(`dict.${n.value.stream||!1}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.enable_fallback")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ua,s(d.$t(`dict.${n.value.is_enable_fallback||!1}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.fallback_model_agent")},{default:e(()=>{var C,B;return[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",ia,s(((B=(C=n.value)==null?void 0:C.fallback_config)==null?void 0:B.model_agent_name)||"-"),1))]}),_:1},8,["label"]),l(f,{label:d.$t("log.detail.fallback_model")},{default:e(()=>{var C,B;return[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",da,s(((B=(C=n.value)==null?void 0:C.fallback_config)==null?void 0:B.model)||"-"),1))]}),_:1},8,["label"]),l(f,{label:d.$t("log.detail.enable_forward")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ra,s(d.$t(`dict.${n.value.is_enable_forward||!1}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.forward_rule")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ma,s(n.value.is_enable_forward?d.$t(`dict.forward_rule.${n.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.enable_model_agent")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",_a,s(d.$t(`dict.${n.value.is_enable_model_agent||!1}`)),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.model_agent_name")},{default:e(()=>{var C,B;return[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",pa,s(((B=(C=n.value)==null?void 0:C.model_agent)==null?void 0:B.name)||"-"),1))]}),_:1},8,["label"]),l(f,{label:d.$t("common.key"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ca,[r(s(n.value.key?n.value.key.length>0?n.value.key.substr(0,n.value.key.length/2>10?10:n.value.key.length/2)+"************************************"+n.value.key.substr(-(n.value.key.length/2>5?5:n.value.key.length/2)):n.value.key:"-")+" ",1),l(R,{class:"copy-btn",onClick:w[5]||(w[5]=C=>T(n.value.id,"key"))})]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.prompt"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",fa,s(n.value.prompt||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.completion"),span:2},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",va,s(n.value.completion||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.group_name")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ya,s(n.value.spend.group_name||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.discount")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ba,s(n.value.spend.group_discount>0?Number((n.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.billing_methods")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ga,s(n.value.spend.billing_methods?d.$t(`dict.billing_methods.${n.value.spend.billing_methods}`):"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.total.spend")},{label:e(()=>[z("span",null,[r(s(d.$t("common.total.spend"))+" ",1),l(Y,{content:d.$t("log.columns.tooltip.total_spend_tokens"),"content-style":{whiteSpace:"nowrap",maxWidth:"none"}},{default:e(()=>[l(O,{style:{color:"var(--color-text-3)"}})]),_:1},8,["content"])])]),default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",{key:1,class:"spend",onClick:w[6]||(w[6]=C=>n.value.status===1||n.value.status===2?re(n.value.spend,n.value.model_type):void 0)},[n.value.status===1||n.value.status===2?(t(),o(Ne,{key:0,"model-value":n.value.spend.total_spend_tokens},null,8,["model-value"])):(t(),p("span",ka," - "))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.conn_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",ha,[n.value.conn_time>1e4?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.conn_time)+" ms ",1)]),_:1})):n.value.conn_time>5e3?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.conn_time)+" ms ",1)]),_:1})):n.value.conn_time>3e3?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.conn_time)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.duration")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",$a,[n.value.duration>12e4?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.duration)+" ms ",1)]),_:1})):n.value.duration>9e4?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.duration)+" ms ",1)]),_:1})):n.value.duration>6e4?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.duration)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.total_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",wa,[n.value.total_time>12e4?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.total_time)+" ms ",1)]),_:1})):n.value.total_time>9e4?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.total_time)+" ms ",1)]),_:1})):n.value.total_time>6e4?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.total_time)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.internal_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Va,[n.value.internal_time>500?(t(),o(k,{key:0,color:"red"},{default:e(()=>[r(s(n.value.internal_time)+" ms ",1)]),_:1})):n.value.internal_time>300?(t(),o(k,{key:1,color:"orange"},{default:e(()=>[r(s(n.value.internal_time)+" ms ",1)]),_:1})):n.value.internal_time>100?(t(),o(k,{key:2,color:"gold"},{default:e(()=>[r(s(n.value.internal_time)+" ms ",1)]),_:1})):(t(),o(k,{key:3,color:"green"},{default:e(()=>[r(s(n.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.status")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",Ca,[n.value.status===1?(t(),o(k,{key:0,color:"green"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1})):n.value.status===2?(t(),o(k,{key:1,color:"gold"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1})):n.value.status===3?(t(),o(k,{key:2,color:"orange"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1})):(t(),o(k,{key:3,color:"red"},{default:e(()=>[r(s(d.$t(`log.dict.status.${n.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.local_ip")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",qa,s(n.value.local_ip||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.client_ip")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Ia,s(n.value.client_ip||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.remote_ip")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Ua,s(n.value.remote_ip||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.req_time")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Da,s(n.value.req_time||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("common.created_at")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Sa,s(n.value.created_at||"-"),1))]),_:1},8,["label"]),l(f,{label:d.$t("log.detail.err_msg")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:1})]),_:1})):(t(),p("span",La,s(n.value.err_msg||"-"),1))]),_:1},8,["label"])]),_:1})),[[X,["admin"]]]),l(J,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[l(f,null,{default:e(()=>[l(pe,{type:"card"},{default:e(()=>[l(_e,{key:"1",title:d.$t("log.detail.messages")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:3})]),_:1})):(t(),o(me,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[n.value.messages?(t(),o(_(el),{key:0,path:"res",data:n.value.messages,"show-length":!0},null,8,["data"])):(t(),p("span",Ta,"-"))]),_:1}))]),_:1},8,["title"])]),_:1})]),_:1})]),_:1}),b((t(),o(J,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[l(f,null,{default:e(()=>[l(pe,{type:"card"},{default:e(()=>[l(_e,{key:"1",title:d.$t("common.model_agents")},{default:e(()=>[_(i)?(t(),o(v,{key:0,animation:!0},{default:e(()=>[l(c,{rows:3})]),_:1})):(t(),o(me,{key:1},{default:e(()=>[n.value.model_agent?(t(),o(_(el),{key:0,data:n.value.model_agent,"show-length":!0},null,8,["data"])):(t(),p("span",za,"-"))]),_:1}))]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})),[[X,["admin"]]]),l(ce,{visible:F.value,"onUpdate:visible":w[8]||(w[8]=C=>F.value=C),width:1068,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":d.$t("button.close")},{default:e(()=>[l(dl,{modelValue:H.value,"onUpdate:modelValue":w[7]||(w[7]=C=>H.value=C),"model-type":N.value},null,8,["modelValue","model-type"])]),_:1},8,["visible","ok-text"])])}}});const Ba=tl(Aa,[["__scopeId","data-v-ed6c5dce"]]),Ma={class:"container"},xa={class:"action-icon"},Ea={class:"action-icon"},Fa={id:"tableSetting"},Pa={style:{"margin-right":"4px",cursor:"move"}},Ha={class:"title"},Ra=["onClick"],Oa={key:1},Ya={name:"LogTextList"},ja=al({...Ya,setup(Ae){const{loading:ke,setLoading:E}=il(!0),{t:i}=ll(),S=localStorage.getItem("userRole"),n=pt(),de=Ze({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),Z=()=>({app_id:$(),trace_id:$(),user_id:$(),key:"",models:[],model_agents:[],total_time:$(),status:$(),req_time:[Xe().format("YYYY-MM-DD 00:00:00"),Xe().format("YYYY-MM-DD 23:59:59")]}),he=$([]),y=$(Z()),T=$([]),F=$([]),H=$("medium"),N=$([]),re=$(!0),d=$(),w={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},c=Ze({...w}),v=Se(()=>[{name:i("size.mini"),value:"mini"},{name:i("size.small"),value:"small"},{name:i("size.medium"),value:"medium"},{name:i("size.large"),value:"large"}]),R=Se(()=>[{title:i(S==="reseller"||S==="admin"?"common.user_id":"common.app_id"),dataIndex:S==="reseller"||S==="admin"?"user_id":"app_id",slotName:S==="reseller"||S==="admin"?"user_id":"app_id",align:"center",width:75},{title:i("common.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:i("log.columns.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:85},{title:i("log.columns.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:85},{title:i("common.total.spend"),dataIndex:"total_spend_tokens",slotName:"total_spend_tokens",align:"center",width:110,slots:{title:()=>[P("div",{style:{display:"flex",alignItems:"center",gap:"3px",justifyContent:"center"}},[P("span",i("common.total.spend")),P(ge,{content:i("log.columns.tooltip.total_spend_tokens"),contentStyle:{whiteSpace:"nowrap",maxWidth:"none"}},{default:()=>P(Te,{style:{color:"var(--color-text-3)"}})})])]}},{title:i("log.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:i("log.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:i("log.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:i("log.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center",slots:{title:()=>[P("div",{style:{display:"flex",alignItems:"center",gap:"3px",justifyContent:"center"}},[P("span",i("log.columns.total_time")),P(ge,{content:i("log.columns.tooltip.total_time"),contentStyle:{whiteSpace:"nowrap",maxWidth:"none"}},{default:()=>P(Te,{style:{color:"var(--color-text-3)"}})})])]}},{title:i("log.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:i("log.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:i("common.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:i("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]),f=Se(()=>[{label:i("log.dict.status.1"),value:1},{label:i("log.dict.status.2"),value:2},{label:i("log.dict.status.-1"),value:-1}]);S==="admin"&&f.value.push({label:i("log.dict.status.3"),value:3},{label:i("log.dict.status.-100"),value:-100}),y.value.trace_id=n.query.trace_id;const O=async(u={...w,...y.value})=>{E(!0);try{const{data:m}=await vt(u);he.value=m.items,c.current=u.current,c.pageSize=u.pageSize,c.total=m.paging.total}catch{}finally{E(!1),d.value.selectAll(!1)}};O();const Y=()=>{O({...w,...y.value})},k=u=>{O({...w,...y.value,current:u})},J=u=>{w.pageSize=u,O({...w,...y.value})},me=()=>{y.value=Z(),Y()},_e=(u,m)=>{H.value=u},pe=(u,m,I)=>{u?T.value.splice(I,0,m):T.value=F.value.filter(L=>L.dataIndex!==m.dataIndex)},ce=(u,m,I,L=!1)=>{const D=L?Le(u):u;return m>-1&&I>-1&&D.splice(m,1,D.splice(I,1,D[m]).pop()),D},X=u=>{u&&Ol(()=>{const m=document.getElementById("tableSetting");new ht(m,{onEnd(I){const{oldIndex:L,newIndex:D}=I;ce(T.value,L,D),ce(F.value,L,D)}})})};ol(()=>R.value,u=>{T.value=Le(u),S!=="admin"&&T.value.splice(9,1),T.value.forEach((m,I)=>{m.checked=!0}),F.value=Le(T.value)},{deep:!0,immediate:!0});const C=$([]);S==="user"&&(async()=>{try{const{data:u}=await gt();C.value=u.items}catch{}})();const $e=$([]);(async()=>{try{const{data:u}=await $t();$e.value=u.items}catch{}})();const Be=$([]);S==="admin"&&(async()=>{try{const{data:u}=await wt();Be.value=u.items}catch{}})();const we=$(!1),Me=$(),rl=u=>{we.value=!0,Me.value=u},ml=()=>{we.value=!1},xe=$(0),Ee=$(0),Fe=async(u={...y.value})=>{const{data:m}=await kt(u);xe.value=m.rpm||0,Ee.value=m.tpm||0};Fe();let Pe;const He=()=>{clearInterval(Pe)},Re=()=>{Pe=setInterval(Fe,3e3)},Oe=()=>{document.visibilityState==="hidden"?He():Re()};Pl(()=>{Re(),document.addEventListener("visibilitychange",Oe)}),Hl(()=>{He(),document.removeEventListener("visibilitychange",Oe)});const Ye=$(),ee=$(!1),j=$({}),_l=async u=>{var I;if(await((I=Ye.value)==null?void 0:I.validate())){ee.value=!0,u(!1);return}u(),je({req_time:j.value.req_time,user_id:j.value.user_id})},pl=()=>{ee.value=!1},je=u=>{if(N.value.length===0&&!u.req_time){ee.value=!0;return}E(!0),u.ids=N.value,yt(u).then(m=>{E(!1),be.success(i("success.export")),d.value.selectAll(!1);const I=new Blob([m.data],{type:"application/vnd.ms-excel"}),L=window.URL.createObjectURL(I),D=document.createElement("a");D.href=L,D.setAttribute("download",`${i("log.menu.text")}.xlsx`),document.body.appendChild(D),D.click(),document.body.removeChild(D),window.URL.revokeObjectURL(L)}).catch(m=>{be.error(i("error.export"),m)})},Je=$(),le=$(!1),U=$({status:[1,2,3,-1]}),cl=async u=>{var I;if(await((I=Je.value)==null?void 0:I.validate())){le.value=!0,u(!1);return}u(),Qe({action:"time",value:U.value.value,user_id:U.value.user_id,status:U.value.status})},fl=()=>{le.value=!1},vl=u=>{N.value=u,re.value=!u.length},Qe=u=>{if(N.value.length===0&&!u.value)le.value=!0;else{let m=i("placeholder.batch.operation",{count:N.value.length});switch(u.action){case"delete":m=i("placeholder.batch.operation.delete",{count:N.value.length});break;case"time":u.user_id?m=i("log.placeholder.batch.operation.delete.time.user_id",{user_id:u.user_id,start_time:u.value[0],end_time:u.value[1]}):m=i("log.placeholder.batch.operation.delete.time",{start_time:u.value[0],end_time:u.value[1]});break}ze.warning({title:i("modal.warning.title"),titleAlign:"center",content:m,okText:i("button.ok"),cancelText:i("button.cancel"),hideCancel:!1,onOk:()=>{E(!0),u.ids=N.value,bt(u).then(I=>{E(!1),be.success(i("success.task")),Y(),d.value.selectAll(!1)})}})}},Ve=$(!1),Ce=$(),We=$(),yl=async(u,m)=>{Ve.value=!0,Ce.value=u,We.value=m};return(u,m)=>{const I=Ul,L=Yl,D=jl,fe=Jl,Q=Ql,q=Wl,V=Gl,te=Kl,W=Zl,ve=Xl,ye=et,qe=lt,Ge=tt,bl=at,ae=ot,Ke=Dl,Ie=ul,Ue=ge,gl=Sl,kl=nt,hl=st,$l=Ll,wl=Tl,oe=ut,Vl=it,h=sl,Cl=dt,ql=rt,De=ze,Il=mt,g=nl("permission");return t(),p("div",Ma,[l(D,{class:"container-breadcrumb"},{default:e(()=>[l(L,null,{default:e(()=>[l(I)]),_:1}),l(L,null,{default:e(()=>[r(s(u.$t("log.menu")),1)]),_:1}),l(L,null,{default:e(()=>[r(s(u.$t("log.menu.text")),1)]),_:1})]),_:1}),l(Il,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[l(ye,null,{default:e(()=>[l(V,{flex:1},{default:e(()=>[l(qe,{model:y.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[b((t(),o(ye,{gutter:16},{default:e(()=>[b((t(),o(V,{span:8},{default:e(()=>[l(q,{field:"app_id",label:u.$t("log.form.app_id")},{default:e(()=>[l(Q,{modelValue:y.value.app_id,"onUpdate:modelValue":m[0]||(m[0]=a=>y.value.app_id=a),placeholder:u.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(G,null,K(C.value,a=>(t(),o(fe,{key:a.app_id,value:a.app_id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[g,["user"]]]),b((t(),o(V,{span:8},{default:e(()=>[l(q,{field:"trace_id",label:u.$t("common.trace_id")},{default:e(()=>[l(te,{modelValue:y.value.trace_id,"onUpdate:modelValue":m[1]||(m[1]=a=>y.value.trace_id=a),placeholder:u.$t("placeholder.trace_id"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[g,["reseller"]]]),b((t(),o(V,{span:8},{default:e(()=>[l(q,{field:"user_id",label:u.$t("common.user_id")},{default:e(()=>[l(W,{modelValue:y.value.user_id,"onUpdate:modelValue":m[2]||(m[2]=a=>y.value.user_id=a),placeholder:u.$t("placeholder.user_id"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[g,["reseller"]]]),b((t(),o(V,{span:8},{default:e(()=>[l(q,{field:"key",label:u.$t("common.key")},{default:e(()=>[l(te,{modelValue:y.value.key,"onUpdate:modelValue":m[3]||(m[3]=a=>y.value.key=a),placeholder:u.$t("placeholder.key"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[g,["user"]]]),b((t(),o(V,{span:8},{default:e(()=>[l(q,{field:"trace_id",label:u.$t("common.trace_id")},{default:e(()=>[l(te,{modelValue:y.value.trace_id,"onUpdate:modelValue":m[4]||(m[4]=a=>y.value.trace_id=a),placeholder:u.$t("placeholder.trace_id"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[g,["user"]]]),b((t(),o(V,{span:8},{default:e(()=>[l(q,{field:"total_time",label:u.$t("log.form.total_time")},{default:e(()=>[l(W,{modelValue:y.value.total_time,"onUpdate:modelValue":m[5]||(m[5]=a=>y.value.total_time=a),placeholder:u.$t("log.form.placeholder.total_time"),precision:0,min:1,"allow-clear":""},{append:e(()=>[r(" ms ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[g,["reseller"]]]),l(V,{span:8},{default:e(()=>[l(q,{field:"models",label:u.$t("common.model")},{default:e(()=>[l(Q,{modelValue:y.value.models,"onUpdate:modelValue":m[6]||(m[6]=a=>y.value.models=a),placeholder:u.$t("common.all"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(G,null,K($e.value,a=>(t(),o(fe,{key:a.id,value:a.id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:8},{default:e(()=>[l(q,{field:"status",label:u.$t("log.form.status")},{default:e(()=>[l(Q,{modelValue:y.value.status,"onUpdate:modelValue":m[7]||(m[7]=a=>y.value.status=a),placeholder:u.$t("common.all"),options:_(f),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),l(V,{span:8},{default:e(()=>[l(q,{field:"req_time",label:u.$t("common.req_time")},{default:e(()=>[l(ve,{modelValue:y.value.req_time,"onUpdate:modelValue":m[8]||(m[8]=a=>y.value.req_time=a),placeholder:[u.$t("common.start_time"),u.$t("common.end_time")],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})),[[g,["user","reseller"]]]),b((t(),o(ye,{gutter:16},{default:e(()=>[l(V,{span:5},{default:e(()=>[l(q,{field:"trace_id",label:u.$t("log.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[l(te,{modelValue:y.value.trace_id,"onUpdate:modelValue":m[9]||(m[9]=a=>y.value.trace_id=a),placeholder:u.$t("placeholder.trace_id"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:6},{default:e(()=>[l(q,{field:"models",label:u.$t("common.model"),"label-col-props":{span:5}},{default:e(()=>[l(Q,{modelValue:y.value.models,"onUpdate:modelValue":m[10]||(m[10]=a=>y.value.models=a),placeholder:u.$t("common.all"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(G,null,K($e.value,a=>(t(),o(fe,{key:a.id,value:a.id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:5},{default:e(()=>[l(q,{field:"key",label:u.$t("common.key"),"label-col-props":{span:6}},{default:e(()=>[l(te,{modelValue:y.value.key,"onUpdate:modelValue":m[11]||(m[11]=a=>y.value.key=a),placeholder:u.$t("placeholder.key"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:8},{default:e(()=>[l(q,{field:"total_time",label:u.$t("log.form.total_time")},{default:e(()=>[l(W,{modelValue:y.value.total_time,"onUpdate:modelValue":m[12]||(m[12]=a=>y.value.total_time=a),placeholder:u.$t("log.form.placeholder.total_time"),precision:0,min:1,"allow-clear":""},{append:e(()=>[r(" ms ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:5},{default:e(()=>[l(q,{field:"user_id",label:u.$t("log.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[l(W,{modelValue:y.value.user_id,"onUpdate:modelValue":m[13]||(m[13]=a=>y.value.user_id=a),placeholder:u.$t("placeholder.user_id"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:6},{default:e(()=>[l(q,{field:"model_agents",label:u.$t("log.form.model_agents"),"label-col-props":{span:5}},{default:e(()=>[l(Q,{modelValue:y.value.model_agents,"onUpdate:modelValue":m[14]||(m[14]=a=>y.value.model_agents=a),placeholder:u.$t("common.all"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(G,null,K(Be.value,a=>(t(),o(fe,{key:a.id,value:a.id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:5},{default:e(()=>[l(q,{field:"status",label:u.$t("log.form.status"),"label-col-props":{span:6}},{default:e(()=>[l(Q,{modelValue:y.value.status,"onUpdate:modelValue":m[15]||(m[15]=a=>y.value.status=a),placeholder:u.$t("common.all"),options:_(f),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),l(V,{span:8},{default:e(()=>[l(q,{field:"req_time",label:u.$t("common.req_time")},{default:e(()=>[l(ve,{modelValue:y.value.req_time,"onUpdate:modelValue":m[16]||(m[16]=a=>y.value.req_time=a),placeholder:[u.$t("common.start_time"),u.$t("common.end_time")],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})),[[g,["admin"]]])]),_:1},8,["model"])]),_:1}),l(Ge,{style:{height:"84px"},direction:"vertical"}),l(V,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[l(Ie,{direction:"vertical",size:18},{default:e(()=>[l(ae,{type:"primary",onClick:Y},{icon:e(()=>[l(bl)]),default:e(()=>[r(" "+s(u.$t("button.search")),1)]),_:1}),l(ae,{onClick:me},{icon:e(()=>[l(Ke)]),default:e(()=>[r(" "+s(u.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Ge,{style:{"margin-top":"0","margin-bottom":"16px"}}),l(ye,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[l(V,{span:16},{default:e(()=>[l(Ie,null,{default:e(()=>[l(ae,{type:"primary",onClick:m[17]||(m[17]=a=>je({}))},{default:e(()=>[r(s(u.$t("button.export")),1)]),_:1}),b((t(),o(ae,{type:"primary",status:"danger",onClick:m[18]||(m[18]=a=>Qe({action:"delete"}))},{default:e(()=>[r(s(u.$t("button.delete")),1)]),_:1})),[[g,["admin"]]])]),_:1})]),_:1}),l(V,{span:3},{default:e(()=>[r(" RPM: \xA0"+s(xe.value.toLocaleString()),1)]),_:1}),l(V,{span:3},{default:e(()=>[r(" TPM: \xA0"+s(Ee.value.toLocaleString()),1)]),_:1}),l(V,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[l(Ue,{content:u.$t("action.refresh")},{default:e(()=>[z("div",{class:"action-icon",onClick:Y},[l(Ke,{size:"18"})])]),_:1},8,["content"]),l(hl,{onSelect:_e},{content:e(()=>[(t(!0),p(G,null,K(_(v),a=>(t(),o(kl,{key:a.value,value:a.value,class:Rl({active:a.value===H.value})},{default:e(()=>[z("span",null,s(a.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[l(Ue,{content:u.$t("action.density")},{default:e(()=>[z("div",xa,[l(gl,{size:"18"})])]),_:1},8,["content"])]),_:1}),l(Ue,{content:u.$t("action.column_setting")},{default:e(()=>[l(Vl,{trigger:"click",position:"bl",onPopupVisibleChange:X},{content:e(()=>[z("div",Fa,[(t(!0),p(G,null,K(F.value,(a,M)=>(t(),p("div",{key:a.dataIndex,class:"setting"},[z("div",Pa,[l(wl)]),z("div",null,[l(oe,{modelValue:a.checked,"onUpdate:modelValue":x=>a.checked=x,onChange:x=>pe(x,a,M)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),z("div",Ha,s(a.title),1)]))),128))])]),default:e(()=>[z("div",Ea,[l($l,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(Cl,{ref_key:"tableRef",ref:d,"row-key":"id",loading:_(ke),pagination:c,columns:T.value,data:he.value,bordered:!1,size:H.value,"row-selection":de,onPageChange:k,onPageSizeChange:J,onSelectionChange:vl},{user_id:e(({record:a})=>[r(s(a.is_smart_match?"-":a.user_id),1)]),input_tokens:e(({record:a})=>{var M,x,ne,se,ue,ie;return[r(s((M=a.spend.text)!=null&&M.input_tokens?_(A)((x=a.spend.text)==null?void 0:x.input_tokens):_(A)((ne=a.spend.tiered_text)==null?void 0:ne.input_tokens)?_(A)((se=a.spend.tiered_text)==null?void 0:se.input_tokens):_(A)((ue=a.spend.once)==null?void 0:ue.input_tokens)?_(A)((ie=a.spend.once)==null?void 0:ie.input_tokens):a.status===1?0:"-"),1)]}),output_tokens:e(({record:a})=>{var M,x,ne,se,ue,ie;return[r(s((M=a.spend.text)!=null&&M.output_tokens?_(A)((x=a.spend.text)==null?void 0:x.output_tokens):_(A)((ne=a.spend.tiered_text)==null?void 0:ne.output_tokens)?_(A)((se=a.spend.tiered_text)==null?void 0:se.output_tokens):_(A)((ue=a.spend.once)==null?void 0:ue.output_tokens)?_(A)((ie=a.spend.once)==null?void 0:ie.output_tokens):a.status===1?0:"-"),1)]}),total_spend_tokens:e(({record:a})=>[z("span",{class:"spend",onClick:M=>a.status===1||a.status===2?yl(a.spend,a.model_type):void 0},[a.status===1||a.status===2?(t(),o(Ne,{key:0,"model-value":a.spend.total_spend_tokens},null,8,["model-value"])):(t(),p("span",Oa," - "))],8,Ra)]),stream:e(({record:a})=>[r(s(u.$t(`dict.${a.stream||!1}`)),1)]),conn_time:e(({record:a})=>[a.conn_time>3e4?b((t(),o(h,{key:0,color:"red"},{default:e(()=>[r(s(a.conn_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.conn_time>15e3?b((t(),o(h,{key:1,color:"orange"},{default:e(()=>[r(s(a.conn_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.conn_time>5e3?b((t(),o(h,{key:2,color:"gold"},{default:e(()=>[r(s(a.conn_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):b((t(),o(h,{key:3,color:"green"},{default:e(()=>[r(s(a.conn_time||"-"),1)]),_:2},1024)),[[g,["user","reseller"]]]),a.conn_time>1e4?b((t(),o(h,{key:4,color:"red"},{default:e(()=>[r(s(a.conn_time),1)]),_:2},1024)),[[g,["admin"]]]):a.conn_time>5e3?b((t(),o(h,{key:5,color:"orange"},{default:e(()=>[r(s(a.conn_time),1)]),_:2},1024)),[[g,["admin"]]]):a.conn_time>3e3?b((t(),o(h,{key:6,color:"gold"},{default:e(()=>[r(s(a.conn_time),1)]),_:2},1024)),[[g,["admin"]]]):b((t(),o(h,{key:7,color:"green"},{default:e(()=>[r(s(a.conn_time||"-"),1)]),_:2},1024)),[[g,["admin"]]])]),duration:e(({record:a})=>[a.duration>18e4?b((t(),o(h,{key:0,color:"red"},{default:e(()=>[r(s(a.duration),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.duration>12e4?b((t(),o(h,{key:1,color:"orange"},{default:e(()=>[r(s(a.duration),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.duration>9e4?b((t(),o(h,{key:2,color:"gold"},{default:e(()=>[r(s(a.duration),1)]),_:2},1024)),[[g,["user","reseller"]]]):b((t(),o(h,{key:3,color:"green"},{default:e(()=>[r(s(a.duration||"-"),1)]),_:2},1024)),[[g,["user","reseller"]]]),a.duration>12e4?b((t(),o(h,{key:4,color:"red"},{default:e(()=>[r(s(a.duration),1)]),_:2},1024)),[[g,["admin"]]]):a.duration>9e4?b((t(),o(h,{key:5,color:"orange"},{default:e(()=>[r(s(a.duration),1)]),_:2},1024)),[[g,["admin"]]]):a.duration>6e4?b((t(),o(h,{key:6,color:"gold"},{default:e(()=>[r(s(a.duration),1)]),_:2},1024)),[[g,["admin"]]]):b((t(),o(h,{key:7,color:"green"},{default:e(()=>[r(s(a.duration||"-"),1)]),_:2},1024)),[[g,["admin"]]])]),total_time:e(({record:a})=>[a.total_time>18e4?b((t(),o(h,{key:0,color:"red"},{default:e(()=>[r(s(a.total_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.total_time>12e4?b((t(),o(h,{key:1,color:"orange"},{default:e(()=>[r(s(a.total_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.total_time>9e4?b((t(),o(h,{key:2,color:"gold"},{default:e(()=>[r(s(a.total_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):b((t(),o(h,{key:3,color:"green"},{default:e(()=>[r(s(a.total_time||"-"),1)]),_:2},1024)),[[g,["user","reseller"]]]),a.total_time>12e4?b((t(),o(h,{key:4,color:"red"},{default:e(()=>[r(s(a.total_time),1)]),_:2},1024)),[[g,["admin"]]]):a.total_time>9e4?b((t(),o(h,{key:5,color:"orange"},{default:e(()=>[r(s(a.total_time),1)]),_:2},1024)),[[g,["admin"]]]):a.total_time>6e4?b((t(),o(h,{key:6,color:"gold"},{default:e(()=>[r(s(a.total_time),1)]),_:2},1024)),[[g,["admin"]]]):b((t(),o(h,{key:7,color:"green"},{default:e(()=>[r(s(a.total_time||"-"),1)]),_:2},1024)),[[g,["admin"]]])]),internal_time:e(({record:a})=>[a.internal_time>1e3?b((t(),o(h,{key:0,color:"red"},{default:e(()=>[r(s(a.internal_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.internal_time>500?b((t(),o(h,{key:1,color:"orange"},{default:e(()=>[r(s(a.internal_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):a.internal_time>300?b((t(),o(h,{key:2,color:"gold"},{default:e(()=>[r(s(a.internal_time),1)]),_:2},1024)),[[g,["user","reseller"]]]):b((t(),o(h,{key:3,color:"green"},{default:e(()=>[r(s(a.internal_time||"-"),1)]),_:2},1024)),[[g,["user","reseller"]]]),a.internal_time>500?b((t(),o(h,{key:4,color:"red"},{default:e(()=>[r(s(a.internal_time),1)]),_:2},1024)),[[g,["admin"]]]):a.internal_time>300?b((t(),o(h,{key:5,color:"orange"},{default:e(()=>[r(s(a.internal_time),1)]),_:2},1024)),[[g,["admin"]]]):a.internal_time>100?b((t(),o(h,{key:6,color:"gold"},{default:e(()=>[r(s(a.internal_time),1)]),_:2},1024)),[[g,["admin"]]]):b((t(),o(h,{key:7,color:"green"},{default:e(()=>[r(s(a.internal_time||"-"),1)]),_:2},1024)),[[g,["admin"]]])]),status:e(({record:a})=>[a.status===-1?(t(),o(h,{key:0,color:"red"},{default:e(()=>[r(s(u.$t(`log.dict.status.${a.status}`)),1)]),_:2},1024)):a.status===2?(t(),o(h,{key:1,color:"gold"},{default:e(()=>[r(s(u.$t(`log.dict.status.${a.status}`)),1)]),_:2},1024)):a.status===3?(t(),o(h,{key:2,color:"orange"},{default:e(()=>[r(s(u.$t(`log.dict.status.${a.status}`)),1)]),_:2},1024)):(t(),o(h,{key:3,color:"green"},{default:e(()=>[r(s(u.$t(`log.dict.status.${a.status}`)),1)]),_:2},1024))]),operations:e(({record:a})=>[l(ae,{type:"text",size:"small",onClick:M=>rl(a.id)},{default:e(()=>[r(s(u.$t("button.detail")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),l(ql,{title:u.$t("log.menu.text.detail"),width:700,footer:!1,visible:we.value,"unmount-on-close":"","render-to-body":"",onCancel:ml},{default:e(()=>[l(Ba,{id:Me.value},null,8,["id"])]),_:1},8,["title","visible"]),l(De,{visible:ee.value,"onUpdate:visible":m[21]||(m[21]=a=>ee.value=a),title:u.$t("log.form.title.text_export"),onCancel:pl,onBeforeOk:_l},{default:e(()=>[l(qe,{ref_key:"textExportForm",ref:Ye,model:j.value},{default:e(()=>[l(q,{field:"req_time",label:u.$t("common.req_time"),rules:[{required:!0,message:u.$t("log.error.required.req_time")}]},{default:e(()=>[l(ve,{modelValue:j.value.req_time,"onUpdate:modelValue":m[19]||(m[19]=a=>j.value.req_time=a),placeholder:[u.$t("common.start_time"),u.$t("common.end_time")],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),b((t(),o(q,{field:"user_id",label:u.$t("common.user_id")},{default:e(()=>[l(W,{modelValue:j.value.user_id,"onUpdate:modelValue":m[20]||(m[20]=a=>j.value.user_id=a),placeholder:u.$t("placeholder.user_id"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[g,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(De,{visible:le.value,"onUpdate:visible":m[28]||(m[28]=a=>le.value=a),title:u.$t("log.form.title.text_del"),onCancel:fl,onBeforeOk:cl},{default:e(()=>[l(qe,{ref_key:"textDelForm",ref:Je,model:U.value},{default:e(()=>[l(q,{field:"value",label:u.$t("common.req_time"),rules:[{required:!0,message:u.$t("log.error.required.req_time")}]},{default:e(()=>[l(ve,{modelValue:U.value.value,"onUpdate:modelValue":m[22]||(m[22]=a=>U.value.value=a),placeholder:[u.$t("common.start_time"),u.$t("common.end_time")],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(q,{field:"status",label:u.$t("log.form.req.status"),rules:[{required:!0,message:u.$t("log.error.required.req.status")}]},{default:e(()=>[l(Ie,{size:"large"},{default:e(()=>[l(oe,{modelValue:U.value.status,"onUpdate:modelValue":m[23]||(m[23]=a=>U.value.status=a),value:1},{default:e(()=>[r(s(u.$t("log.dict.status.1")),1)]),_:1},8,["modelValue"]),l(oe,{modelValue:U.value.status,"onUpdate:modelValue":m[24]||(m[24]=a=>U.value.status=a),value:2},{default:e(()=>[r(s(u.$t("log.dict.status.2")),1)]),_:1},8,["modelValue"]),l(oe,{modelValue:U.value.status,"onUpdate:modelValue":m[25]||(m[25]=a=>U.value.status=a),value:3},{default:e(()=>[r(s(u.$t("log.dict.status.3")),1)]),_:1},8,["modelValue"]),l(oe,{modelValue:U.value.status,"onUpdate:modelValue":m[26]||(m[26]=a=>U.value.status=a),value:-1},{default:e(()=>[r(s(u.$t("log.dict.status.-1")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),l(q,{field:"user_id",label:u.$t("common.user_id")},{default:e(()=>[l(W,{modelValue:U.value.user_id,"onUpdate:modelValue":m[27]||(m[27]=a=>U.value.user_id=a),placeholder:u.$t("placeholder.user_id"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),l(De,{visible:Ve.value,"onUpdate:visible":m[30]||(m[30]=a=>Ve.value=a),width:1068,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":u.$t("button.close")},{default:e(()=>[l(dl,{modelValue:Ce.value,"onUpdate:modelValue":m[29]||(m[29]=a=>Ce.value=a),"model-type":We.value},null,8,["modelValue","model-type"])]),_:1},8,["visible","ok-text"])]),_:1})])}}});const qo=tl(ja,[["__scopeId","data-v-f64e6021"]]);export{qo as default};

import{Q,K as L,i as E,_ as G}from"./index.e0d6ab41.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                */import{d as K,e as s,B as f,C as T,aH as a,aG as u,aL as d,aM as p,F as c,aD as b,u as w,aE as v,aK as H,aF as M,b1 as O,b2 as z,aS as A,bQ as J,bV as P,bO as W,aU as X,bi as Y,b5 as Z,bI as x,bR as ee,g as le}from"./arco.91d8d802.js";import{u as ae}from"./loading.d8a03711.js";import{q as oe}from"./common.df364eef.js";import{f as te,h as ue}from"./vue.90059513.js";import"./chart.1c4d013e.js";const re={class:"container"},ie={class:"wrapper"},de={class:"submit-btn"},ne={name:"SiteConfigUpdate"},se=K({...ne,setup(pe){const{proxy:y}=le(),q=te(),k=ue(),V=s(),e=s({id:"",domain:"",title:"",logo:"",favicon:"",avatar:"",bg_img:"",copyright:"",jump_url:"",keywords:"",description:"",icp_beian:"",ga_beian:"",register_tips:"",grant_quota:s(),quota_expires_at:s(),support_email_suffix:s(),host:"",port:s(),user_name:"",password:"",from_name:"",remark:"",status:1}),{loading:U,setLoading:m}=ae(!1),C=async()=>{var l;if(!await((l=V.value)==null?void 0:l.validate())){m(!0);try{e.value.support_email_suffix&&(e.value.support_email_suffix=e.value.support_email_suffix.split(",")),await Q(e.value).then(()=>{y.$message.success("\u66F4\u65B0\u6210\u529F"),q.push({name:"SiteConfig"})})}catch{e.value.support_email_suffix&&(e.value.support_email_suffix=e.value.support_email_suffix.join(","))}finally{m(!1)}}};(async(o={id:k.query.id})=>{m(!0);try{const{data:l}=await L(o);e.value.id=l.id,e.value.domain=l.domain,e.value.title=l.title,e.value.logo=l.logo,e.value.favicon=l.favicon,e.value.avatar=l.avatar,e.value.bg_img=l.bg_img,e.value.copyright=l.copyright,e.value.jump_url=l.jump_url,e.value.keywords=l.keywords,e.value.description=l.description,e.value.icp_beian=l.icp_beian,e.value.ga_beian=l.ga_beian,e.value.register_tips=l.register_tips,e.value.grant_quota=l.grant_quota,e.value.quota_expires_at=l.quota_expires_at,e.value.support_email_suffix=l.support_email_suffix.join(","),e.value.host=l.host,e.value.port=l.port,e.value.user_name=l.user_name,e.value.password=l.password,e.value.from_name=l.from_name,e.value.remark=l.remark,e.value.status=l.status}catch{}finally{m(!1)}})();const S=o=>{e.value.grant_quota=o*5e5};return(o,l)=>{const $=E,g=H,j=M,i=O,r=z,_=A,n=J,B=P,I=W,h=X,F=Y,R=Z,D=x,N=ee;return f(),T("div",re,[a(j,{class:"container-breadcrumb"},{default:u(()=>[a(g,null,{default:u(()=>[a($)]),_:1}),a(g,null,{default:u(()=>[d(p(o.$t("menu.sys")),1)]),_:1}),a(g,null,{default:u(()=>[d(p(o.$t("menu.site.config.update")),1)]),_:1})]),_:1}),a(N,{loading:w(U),style:{width:"100%"}},{default:u(()=>[a(D,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:u(()=>[c("div",ie,[a(R,{ref_key:"formRef",ref:V,model:e.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:u(()=>[a(r,{field:"domain",label:o.$t("site.config.label.domain"),rules:[{required:!0,message:o.$t("site.config.error.domain.required")}]},{default:u(()=>[a(i,{modelValue:e.value.domain,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.domain=t),placeholder:o.$t("site.config.placeholder.domain"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(r,{field:"title",label:o.$t("site.config.label.title"),rules:[{required:!0,message:o.$t("site.config.error.title.required")}]},{default:u(()=>[a(i,{modelValue:e.value.title,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.title=t),placeholder:o.$t("site.config.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(r,{field:"logo",label:o.$t("site.config.label.logo"),rules:[{required:!0,message:o.$t("site.config.error.logo.required")}]},{default:u(()=>[a(i,{modelValue:e.value.logo,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.logo=t),placeholder:o.$t("site.config.placeholder.logo"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(r,{field:"favicon",label:o.$t("site.config.label.favicon"),rules:[{required:!0,message:o.$t("site.config.error.favicon.required")}]},{default:u(()=>[a(i,{modelValue:e.value.favicon,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.favicon=t),placeholder:o.$t("site.config.placeholder.favicon"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(r,{field:"avatar",label:o.$t("site.config.label.avatar")},{default:u(()=>[a(i,{modelValue:e.value.avatar,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.avatar=t),placeholder:o.$t("site.config.placeholder.avatar"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"bg_img",label:o.$t("site.config.label.bg_img")},{default:u(()=>[a(i,{modelValue:e.value.bg_img,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.bg_img=t),placeholder:o.$t("site.config.placeholder.bg_img"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"copyright",label:o.$t("site.config.label.copyright")},{default:u(()=>[a(i,{modelValue:e.value.copyright,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.copyright=t),placeholder:o.$t("site.config.placeholder.copyright"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"jump_url",label:o.$t("site.config.label.jump_url")},{default:u(()=>[a(i,{modelValue:e.value.jump_url,"onUpdate:modelValue":l[7]||(l[7]=t=>e.value.jump_url=t),placeholder:o.$t("site.config.placeholder.jump_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"keywords",label:o.$t("site.config.label.keywords")},{default:u(()=>[a(i,{modelValue:e.value.keywords,"onUpdate:modelValue":l[8]||(l[8]=t=>e.value.keywords=t),placeholder:o.$t("site.config.placeholder.keywords"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"description",label:o.$t("site.config.label.description")},{default:u(()=>[a(i,{modelValue:e.value.description,"onUpdate:modelValue":l[9]||(l[9]=t=>e.value.description=t),placeholder:o.$t("site.config.placeholder.description"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"icp_beian",label:o.$t("site.config.label.icp_beian")},{default:u(()=>[a(i,{modelValue:e.value.icp_beian,"onUpdate:modelValue":l[10]||(l[10]=t=>e.value.icp_beian=t),placeholder:o.$t("site.config.placeholder.icp_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"ga_beian",label:o.$t("site.config.label.ga_beian")},{default:u(()=>[a(i,{modelValue:e.value.ga_beian,"onUpdate:modelValue":l[11]||(l[11]=t=>e.value.ga_beian=t),placeholder:o.$t("site.config.placeholder.ga_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"register_tips",label:o.$t("site.config.label.register_tips")},{default:u(()=>[a(i,{modelValue:e.value.register_tips,"onUpdate:modelValue":l[12]||(l[12]=t=>e.value.register_tips=t),placeholder:o.$t("site.config.placeholder.register_tips"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e.value.register_tips?v("",!0):(f(),b(r,{key:0,field:"grant_quota",label:o.$t("site.config.label.grant_quota")},{default:u(()=>[a(_,{modelValue:e.value.grant_quota,"onUpdate:modelValue":l[13]||(l[13]=t=>e.value.grant_quota=t),placeholder:o.$t("site.config.placeholder.grant_quota"),precision:0,min:0,max:9999999999999,style:{width:"492px","margin-right":"10px"},"allow-clear":""},null,8,["modelValue","placeholder"]),c("div",null," $"+p(e.value.grant_quota?w(oe)(e.value.grant_quota):"0"),1)]),_:1},8,["label"])),e.value.register_tips?v("",!0):(f(),b(r,{key:1},{default:u(()=>[a(B,{type:"button",onChange:S},{default:u(()=>[a(n,{value:1},{default:u(()=>[d(" $1 ")]),_:1}),a(n,{value:5},{default:u(()=>[d(" $5 ")]),_:1}),a(n,{value:10},{default:u(()=>[d(" $10 ")]),_:1}),a(n,{value:20},{default:u(()=>[d(" $20 ")]),_:1}),a(n,{value:50},{default:u(()=>[d(" $50 ")]),_:1}),a(n,{value:100},{default:u(()=>[d(" $100 ")]),_:1}),a(n,{value:200},{default:u(()=>[d(" $200 ")]),_:1}),a(n,{value:500},{default:u(()=>[d(" $500 ")]),_:1}),a(n,{value:1e3},{default:u(()=>[d(" $1000 ")]),_:1})]),_:1},8,["onChange"])]),_:1})),e.value.register_tips?v("",!0):(f(),b(r,{key:2,field:"quota_expires_at",label:o.$t("site.config.label.quota_expires_at")},{default:u(()=>[a(_,{modelValue:e.value.quota_expires_at,"onUpdate:modelValue":l[14]||(l[14]=t=>e.value.quota_expires_at=t),placeholder:o.$t("site.config.placeholder.quota_expires_at"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),a(r,{field:"support_email_suffix",label:o.$t("site.config.label.support_email_suffix")},{default:u(()=>[a(i,{modelValue:e.value.support_email_suffix,"onUpdate:modelValue":l[15]||(l[15]=t=>e.value.support_email_suffix=t),placeholder:o.$t("site.config.placeholder.support_email_suffix"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"host",label:o.$t("site.config.label.host")},{default:u(()=>[a(i,{modelValue:e.value.host,"onUpdate:modelValue":l[16]||(l[16]=t=>e.value.host=t),placeholder:o.$t("site.config.placeholder.host"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"port",label:o.$t("site.config.label.port")},{default:u(()=>[a(_,{modelValue:e.value.port,"onUpdate:modelValue":l[17]||(l[17]=t=>e.value.port=t),placeholder:o.$t("site.config.placeholder.port"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"user_name",label:o.$t("site.config.label.user_name")},{default:u(()=>[a(i,{modelValue:e.value.user_name,"onUpdate:modelValue":l[18]||(l[18]=t=>e.value.user_name=t),placeholder:o.$t("site.config.placeholder.user_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"password",label:o.$t("site.config.label.password")},{default:u(()=>[a(i,{modelValue:e.value.password,"onUpdate:modelValue":l[19]||(l[19]=t=>e.value.password=t),placeholder:o.$t("site.config.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"from_name",label:o.$t("site.config.label.from_name")},{default:u(()=>[a(i,{modelValue:e.value.from_name,"onUpdate:modelValue":l[20]||(l[20]=t=>e.value.from_name=t),placeholder:o.$t("site.config.placeholder.from_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(r,{field:"remark",label:o.$t("site.config.label.remark")},{default:u(()=>[a(I,{modelValue:e.value.remark,"onUpdate:modelValue":l[21]||(l[21]=t=>e.value.remark=t),placeholder:o.$t("site.config.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(F,null,{default:u(()=>[c("div",de,[a(h,{type:"secondary",onClick:l[22]||(l[22]=t=>o.$router.push({name:"SiteConfig"}))},{default:u(()=>[d(p(o.$t("button.cancel")),1)]),_:1}),a(h,{type:"primary",onClick:C},{default:u(()=>[d(p(o.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ue=G(se,[["__scopeId","data-v-f4271d3e"]]);export{Ue as default};

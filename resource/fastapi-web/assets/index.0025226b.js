import{u as ve,_ as ze,N as dt,s as it,A as ut,k as rt,B as mt}from"./index.0b1e0d45.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as ge,e as h,B as l,C as p,aH as e,aG as t,u as w,aD as c,aM as n,aL as b,bA as ct,bB as pt,bC as _t,bD as Me,bE as bt,c as ne,w as De,aJ as X,aI as Y,aE as be,bH as Ue,bI as Ae,b2 as Ne,bG as xe,b1 as Pe,bK as qe,b5 as Be,bL as Te,ab as Ee,aU as Fe,bi as He,bP as ft,bU as vt,b7 as gt,bN as Re,bT as je,r as Le,D as B,E as ht,n as yt,aZ as fe,a_ as Se,aK as kt,aF as $t,bj as wt,bk as Vt,bl as Ct,b4 as It,bM as Lt,aT as St,aV as zt}from"./arco.3f46b4ae.js";import{u as he}from"./loading.37fd256d.js";import{a as Mt,t as Dt,b as Ut,s as At,c as Nt}from"./model_agent.ec7e7893.js";import{c as ee,S as xt}from"./sortable.esm.078712c4.js";import{q as Oe}from"./provider.c9d040de.js";import{b as Pt,q as qt}from"./model.a7339650.js";import{M as Bt}from"./models.c18f8154.js";/* empty css                *//* empty css                *//* empty css              */import{f as Tt}from"./vue.dbcf9bc3.js";import"./chart.2cea905d.js";const Et={style:{margin:"10px 0 30px 10px"}},Ft={key:1},Ht={key:1},Rt={key:1},jt={key:1},Ot={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Gt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Kt={key:1},Jt={key:1},Zt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Qt={key:1},Wt={key:1},Xt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Yt={key:1},ea={key:1},ta={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},aa={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},la={key:1},oa={key:1},na={name:"ModelAgentDetail"},sa=ge({...na,props:{id:{type:String,default:""}},setup(te){const N=te;ve();const{loading:g,setLoading:m}=he(!0),f=h({});return(async(_={id:N.id})=>{m(!0);try{const{data:k}=await Mt(_);f.value=k}catch{}finally{m(!1)}})(),(_,k)=>{const u=ct,v=pt,$=_t,L=Me,S=bt;return l(),p("div",Et,[e(S,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e($,{label:_.$t("common.provider")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Ft,n(f.value.provider_name),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.name")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Ht,n(f.value.name),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.base_url"),span:2},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Rt,n(f.value.base_url),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.path"),span:2},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",jt,n(f.value.path||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("common.bind_group"),span:2},{default:t(()=>{var r,V;return[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Ot,n(((V=(r=f.value)==null?void 0:r.group_names)==null?void 0:V.join(`
`))||"-"),1))]}),_:1},8,["label"]),e($,{label:_.$t("common.bind_models"),span:2},{default:t(()=>{var r,V;return[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Gt,n(((V=(r=f.value)==null?void 0:r.model_names)==null?void 0:V.join(`
`))||"-"),1))]}),_:1},8,["label"]),e($,{label:_.$t("common.billing_methods"),span:2},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Kt,n(_.$t(`dict.billing_methods.${f.value.billing_methods||1}`)),1))]),_:1},8,["label"]),e($,{label:_.$t("common.weight")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Jt,n(f.value.weight||0),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.detail.fallback_models")},{default:t(()=>{var r,V;return[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Zt,n(((V=(r=f.value)==null?void 0:r.fallback_model_names)==null?void 0:V.join(`
`))||"-"),1))]}),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.is_never_disable")},{default:t(()=>{var r;return[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Qt,n(_.$t(`dict.${((r=f.value)==null?void 0:r.is_never_disable)||!1}`)),1))]}),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.lb_strategy")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Wt,n(_.$t(`dict.lb_strategy.${f.value.lb_strategy||1}`)),1))]),_:1},8,["label"]),e($,{label:_.$t("common.key"),span:2},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Xt,n(f.value.key||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("key.detail.is_auto_disabled")},{default:t(()=>{var r;return[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Yt,n(_.$t(`dict.${((r=f.value)==null?void 0:r.is_auto_disabled)||!1}`)),1))]}),_:1},8,["label"]),e($,{label:_.$t("common.status")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",ea,[f.value.status===1?(l(),c(L,{key:0,color:"green"},{default:t(()=>[b(n(_.$t(`dict.status.${f.value.status}`)),1)]),_:1})):(l(),c(L,{key:1,color:"red"},{default:t(()=>[b(n(_.$t(`dict.status.${f.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),e($,{label:_.$t("key.detail.auto_disabled_reason"),span:2},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",ta,n(f.value.auto_disabled_reason||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("common.remark"),span:2},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",aa,n(f.value.remark||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("common.created_at")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",la,n(f.value.created_at),1))]),_:1},8,["label"]),e($,{label:_.$t("common.updated_at")},{default:t(()=>[w(g)?(l(),c(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",oa,n(f.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),da={class:"container"},ia={key:1},ua={key:0},ra={key:1},ma={key:2},ca={key:3},pa={name:"Models"},_a=ge({...pa,props:{id:{type:String,default:""},action:{type:String,default:""}},setup(te){const N=te,{loading:g,setLoading:m}=he(!0),{t:f}=ve(),G=Tt(),_=()=>({provider_id:"",name:"",model:"",type:h(),status:h()}),k=h([]),u=h(_()),v=h([]),$=h([]),L=h("medium"),S=h(),r=h({model_agent_id:N.id,test_method:1}),V=ne(()=>[{title:f("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center"},{title:f("common.model_name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:f("common.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:f("model.agent.columns.result_total_time"),dataIndex:"result_total_time",slotName:"result_total_time",align:"center"},{title:f("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:120}]),T=async(d={id:N.id,action:N.action})=>{m(!0);try{const{data:y}=await Pt(d);k.value=y.items}catch{}finally{m(!1)}};T();const se=()=>{T({id:N.id,action:N.action,...u.value})};De(()=>V.value,d=>{v.value=ee(d),v.value.forEach((y,q)=>{y.checked=!0}),$.value=ee(v.value)},{deep:!0,immediate:!0});const ae=h([]);(async()=>{m(!0);try{const{data:d}=await Oe();ae.value=d.items}catch{}finally{m(!1)}})();const H=async d=>{var q;if(!await((q=S.value)==null?void 0:q.validate())){d.testing=!0,d.trace_id="",r.value.model_id=d.id;const K=Date.now();try{const{data:C}=await Dt(r.value);d.trace_id=C.trace_id,d.result=C.result,d.total_time=C.total_time}catch{d.result=!1,d.total_time=Date.now()-K}finally{d.testing=!1}}},E=d=>{const y=new Map([[2,"LogImageList"],[5,"LogAudioList"],[6,"LogAudioList"],[8,"LogVideoList"],[1e4,"LogGeneralList"]]);return G.resolve({name:y.get(d.type)||"LogTextList",query:{trace_id:d.trace_id}}).href};return(d,y)=>{const q=Ue,K=Ae,C=Ne,M=xe,R=Pe,j=qe,de=Be,J=Te,ke=Ee,le=Fe,oe=He,F=ft,Z=vt,I=Me,ie=gt,ue=Re,Q=je;return l(),p("div",da,[e(Q,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"0px"}},{default:t(()=>[e(j,null,{default:t(()=>[e(M,{flex:1},{default:t(()=>[e(de,{model:u.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(j,{gutter:16},{default:t(()=>[e(M,{span:8},{default:t(()=>[e(C,{field:"provider_id",label:d.$t("common.provider"),"label-col-props":{span:6}},{default:t(()=>[e(K,{modelValue:u.value.provider_id,"onUpdate:modelValue":y[0]||(y[0]=i=>u.value.provider_id=i),placeholder:d.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),p(X,null,Y(ae.value,i=>(l(),c(q,{key:i.id,value:i.id,label:i.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(M,{span:8},{default:t(()=>[e(C,{field:"name",label:d.$t("common.model_name"),"label-col-props":{span:6}},{default:t(()=>[e(R,{modelValue:u.value.name,"onUpdate:modelValue":y[1]||(y[1]=i=>u.value.name=i),placeholder:d.$t("model.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(M,{span:8},{default:t(()=>[e(C,{field:"model",label:d.$t("common.model"),"label-col-props":{span:6}},{default:t(()=>[e(R,{modelValue:u.value.model,"onUpdate:modelValue":y[2]||(y[2]=i=>u.value.model=i),placeholder:d.$t("model.form.placeholder.model"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(J,{style:{height:"32px"},direction:"vertical"}),e(M,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(oe,{direction:"vertical",size:18},{default:t(()=>[e(le,{type:"primary",onClick:se},{icon:t(()=>[e(ke)]),default:t(()=>[b(" "+n(d.$t("button.search")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(J,{style:{"margin-top":"0"}}),e(de,{ref_key:"testModelFormRef",ref:S,model:r.value,"label-col-props":{span:4},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(j,{gutter:16},{default:t(()=>[e(M,{span:11},{default:t(()=>[e(C,{field:"test_method",label:d.$t("model.agent.label.test_models.test_method"),"wrapper-col-props":{span:15}},{default:t(()=>[e(oe,{size:"large"},{default:t(()=>[e(F,{modelValue:r.value.test_method,"onUpdate:modelValue":y[3]||(y[3]=i=>r.value.test_method=i),value:1},{default:t(()=>[b(n(d.$t("model.agent.dict.test_method.1")),1)]),_:1},8,["modelValue"]),e(F,{modelValue:r.value.test_method,"onUpdate:modelValue":y[4]||(y[4]=i=>r.value.test_method=i),value:2},{default:t(()=>[b(n(d.$t("model.agent.dict.test_method.2")),1)]),_:1},8,["modelValue"]),e(F,{modelValue:r.value.test_method,"onUpdate:modelValue":y[5]||(y[5]=i=>r.value.test_method=i),value:3},{default:t(()=>[b(n(d.$t("model.agent.dict.test_method.3")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),_:1}),r.value.test_method===3?(l(),c(M,{key:0,span:13},{default:t(()=>[e(C,{field:"base_url",label:d.$t("model.agent.label.test_models.base_url"),rules:[{required:!0,message:d.$t("model.agent.error.required.test_models.base_url")}],"label-col-props":{span:5},"wrapper-col-props":{span:19}},{default:t(()=>[e(R,{modelValue:r.value.base_url,"onUpdate:modelValue":y[6]||(y[6]=i=>r.value.base_url=i),placeholder:d.$t("model.agent.placeholder.test_models.base_url")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1})):be("",!0),r.value.test_method!==2?(l(),c(M,{key:1,span:13},{default:t(()=>[e(C,{field:"key",label:d.$t("model.agent.label.test_models.key"),rules:[{required:!0,message:d.$t("model.agent.placeholder.test_models.key")}],"label-col-props":{span:4},"wrapper-col-props":{span:20}},{default:t(()=>[e(R,{modelValue:r.value.key,"onUpdate:modelValue":y[7]||(y[7]=i=>r.value.key=i),placeholder:d.$t("model.agent.placeholder.test_models.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1})):be("",!0)]),_:1})]),_:1},8,["model"]),e(ue,{"row-key":"id",loading:w(g),pagination:!1,columns:v.value,data:k.value,bordered:!1,size:L.value,scroll:{y:"380px"},scrollbar:!1},{result_total_time:t(({record:i})=>[i.testing?(l(),c(Z,{key:0})):(l(),p("span",ia,[i.result!=null?(l(),p("span",ua,[i.result?(l(),c(I,{key:0,color:"green"},{default:t(()=>[b(n(d.$t(`dict.success.${i.result}`)),1)]),_:2},1024)):(l(),c(I,{key:1,color:"red"},{default:t(()=>[b(n(d.$t(`dict.success.${i.result}`)),1)]),_:2},1024))])):(l(),p("span",ra," - ")),b(" / "),i.total_time?(l(),p("span",ma,[i.total_time>12e4?(l(),c(I,{key:0,color:"red"},{default:t(()=>[b(n(i.total_time)+" ms ",1)]),_:2},1024)):i.total_time>9e4?(l(),c(I,{key:1,color:"orange"},{default:t(()=>[b(n(i.total_time)+" ms ",1)]),_:2},1024)):i.total_time>6e4?(l(),c(I,{key:2,color:"gold"},{default:t(()=>[b(n(i.total_time)+" ms ",1)]),_:2},1024)):(l(),c(I,{key:3,color:"green"},{default:t(()=>[b(n(i.total_time||"-")+" ms",1)]),_:2},1024))])):(l(),p("span",ca," - "))]))]),operations:t(({record:i})=>[e(le,{type:"text",size:"small",disabled:i.testing,onClick:W=>H(i)},{default:t(()=>[b(n(d.$t("button.test")),1)]),_:2},1032,["disabled","onClick"]),r.value.test_method!==2?(l(),c(ie,{key:0,href:E(i),disabled:!i.trace_id||i.trace_id==="",target:"_blank"},{default:t(()=>[b(n(d.$t("button.detail")),1)]),_:2},1032,["href","disabled"])):be("",!0)]),_:1},8,["loading","columns","data","size"])]),_:1})])}}});const ba=ze(_a,[["__scopeId","data-v-2d5a7c1e"]]),fa={class:"container"},va={class:"action-icon"},ga={class:"action-icon"},ha={id:"tableSetting"},ya={style:{"margin-right":"4px",cursor:"move"}},ka={class:"title"},$a={key:0},wa={key:1},Va={name:"ModelAgentList"},Ca=ge({...Va,setup(te){const{loading:N,setLoading:g}=he(!0),{t:m}=ve(),f=Le({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),G=()=>({provider_id:"",name:"",base_url:"",models:[],status:h(),remark:""}),_=h([]),k=h(G()),u=h([]),v=h([]),$=h("medium"),L=h([]),S=h(!0),r=h(),V={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},T=Le({...V}),se=ne(()=>[{name:m("size.mini"),value:"mini"},{name:m("size.small"),value:"small"},{name:m("size.medium"),value:"medium"},{name:m("size.large"),value:"large"}]),ae=ne(()=>[{title:m("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center",width:120},{title:m("model.agent.label.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.bind_group"),dataIndex:"group_names",slotName:"group_names",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.bind_models"),dataIndex:"model_names",slotName:"model_names",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.weight"),dataIndex:"weight",slotName:"weight",align:"center"},{title:m("common.lb_strategy"),dataIndex:"lb_strategy",slotName:"lb_strategy",align:"center"},{title:m("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:m("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:m("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:200}]),ye=ne(()=>[{label:m("dict.status.1"),value:1},{label:m("dict.status.2"),value:2}]),H=async(a={...V})=>{g(!0);try{const{data:s}=await Ut(a);_.value=s.items,T.current=a.current,T.pageSize=a.pageSize,T.total=s.paging.total}catch{}finally{g(!1),r.value.selectAll(!1)}};H();const E=()=>{H({...V,...k.value})},d=a=>{H({...V,...k.value,current:a})},y=a=>{V.pageSize=a,H({...V,...k.value})},q=()=>{k.value=G(),E()},K=(a,s)=>{$.value=a},C=(a,s,U)=>{a?u.value.splice(U,0,s):u.value=v.value.filter(x=>x.dataIndex!==s.dataIndex)},M=(a,s,U,x=!1)=>{const P=x?ee(a):a;return s>-1&&U>-1&&P.splice(s,1,P.splice(U,1,P[s]).pop()),P},R=a=>{a&&yt(()=>{const s=document.getElementById("tableSetting");new xt(s,{onEnd(U){const{oldIndex:x,newIndex:P}=U;M(u.value,x,P),M(v.value,x,P)}})})};De(()=>ae.value,a=>{u.value=ee(a),u.value.forEach((s,U)=>{s.checked=!0}),v.value=ee(u.value)},{deep:!0,immediate:!0});const j=h([]);(async()=>{try{const{data:a}=await Oe();j.value=a.items}catch{}})();const J=h([]);(async()=>{try{const{data:a}=await qt();J.value=a.items}catch{}})();const le=async a=>{g(!0);try{await At(a),fe.success(m("success.operate")),E()}catch{}finally{g(!1)}},oe=a=>{L.value=a,S.value=!a.length},F=a=>{if(L.value.length===0)fe.info(m("placeholder.operation.data"));else{let s=m("placeholder.batch.operation",{count:L.value.length});switch(a.action){case"status":a.value===1?s=m("placeholder.batch.operation.enable",{count:L.value.length}):s=m("placeholder.batch.operation.disable",{count:L.value.length});break;case"delete":s=m("placeholder.batch.operation.delete",{count:L.value.length});break}Se.warning({title:m("modal.warning.title"),titleAlign:"center",content:s,okText:m("button.ok"),cancelText:m("button.cancel"),hideCancel:!1,onOk:()=>{g(!0),a.ids=L.value,Nt(a).then(U=>{g(!1),fe.success(m("success.operate")),E(),r.value.selectAll(!1)})}})}},Z=h(!1),I=h(),ie=a=>{Z.value=!0,I.value=a},ue=()=>{Z.value=!1},Q=h(!1),i=h(!1),W=h(),Ge=a=>{Q.value=!0,I.value=a,W.value="agent"},Ke=a=>{i.value=!0,I.value=a,W.value="agent"};return(a,s)=>{const U=dt,x=kt,P=$t,$e=Ue,re=Ae,O=Ne,A=xe,me=Pe,ce=qe,Je=Be,we=Te,Ze=Ee,D=Fe,Ve=it,Ce=He,pe=wt,Qe=ut,We=Vt,Xe=Ct,Ye=rt,et=mt,tt=It,at=Lt,lt=St,ot=Re,nt=zt,Ie=Se,st=je;return l(),p("div",fa,[e(P,{class:"container-breadcrumb"},{default:t(()=>[e(x,null,{default:t(()=>[e(U)]),_:1}),e(x,null,{default:t(()=>[b(n(a.$t("model.agent.menu")),1)]),_:1})]),_:1}),e(st,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(ce,null,{default:t(()=>[e(A,{flex:1},{default:t(()=>[e(Je,{model:k.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(ce,{gutter:16},{default:t(()=>[e(A,{span:8},{default:t(()=>[e(O,{field:"provider_id",label:a.$t("common.provider")},{default:t(()=>[e(re,{modelValue:k.value.provider_id,"onUpdate:modelValue":s[0]||(s[0]=o=>k.value.provider_id=o),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),p(X,null,Y(j.value,o=>(l(),c($e,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(A,{span:8},{default:t(()=>[e(O,{field:"name",label:a.$t("model.agent.label.name")},{default:t(()=>[e(me,{modelValue:k.value.name,"onUpdate:modelValue":s[1]||(s[1]=o=>k.value.name=o),placeholder:a.$t("model.agent.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(A,{span:8},{default:t(()=>[e(O,{field:"base_url",label:a.$t("model.agent.label.base_url")},{default:t(()=>[e(me,{modelValue:k.value.base_url,"onUpdate:modelValue":s[2]||(s[2]=o=>k.value.base_url=o),placeholder:a.$t("model.agent.error.required.base_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(A,{span:8},{default:t(()=>[e(O,{field:"models",label:a.$t("common.bind_models")},{default:t(()=>[e(re,{modelValue:k.value.models,"onUpdate:modelValue":s[3]||(s[3]=o=>k.value.models=o),placeholder:a.$t("common.all"),"max-tag-count":2,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),p(X,null,Y(J.value,o=>(l(),c($e,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(A,{span:8},{default:t(()=>[e(O,{field:"status",label:a.$t("common.status")},{default:t(()=>[e(re,{modelValue:k.value.status,"onUpdate:modelValue":s[4]||(s[4]=o=>k.value.status=o),placeholder:a.$t("common.all"),options:w(ye),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(A,{span:8},{default:t(()=>[e(O,{field:"remark",label:a.$t("common.remark")},{default:t(()=>[e(me,{modelValue:k.value.remark,"onUpdate:modelValue":s[5]||(s[5]=o=>k.value.remark=o),placeholder:a.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(we,{style:{height:"84px"},direction:"vertical"}),e(A,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Ce,{direction:"vertical",size:18},{default:t(()=>[e(D,{type:"primary",onClick:E},{icon:t(()=>[e(Ze)]),default:t(()=>[b(" "+n(a.$t("button.search")),1)]),_:1}),e(D,{onClick:q},{icon:t(()=>[e(Ve)]),default:t(()=>[b(" "+n(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(we,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(ce,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(A,{span:12},{default:t(()=>[e(Ce,null,{default:t(()=>[e(D,{type:"primary",onClick:s[6]||(s[6]=o=>a.$router.push({name:"ModelAgentCreate"}))},{default:t(()=>[b(n(a.$t("button.create")),1)]),_:1}),e(D,{type:"primary",status:"success",disabled:S.value,title:S.value?a.$t("placeholder.operation.data"):"",onClick:s[7]||(s[7]=o=>F({action:"status",value:1}))},{default:t(()=>[b(n(a.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:S.value,title:S.value?a.$t("placeholder.operation.data"):"",onClick:s[8]||(s[8]=o=>F({action:"status",value:2}))},{default:t(()=>[b(n(a.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(D,{type:"primary",status:"danger",disabled:S.value,title:S.value?a.$t("placeholder.operation.data"):"",onClick:s[9]||(s[9]=o=>F({action:"delete"}))},{default:t(()=>[b(n(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(A,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(pe,{content:a.$t("action.refresh")},{default:t(()=>[B("div",{class:"action-icon",onClick:E},[e(Ve,{size:"18"})])]),_:1},8,["content"]),e(Xe,{onSelect:K},{content:t(()=>[(l(!0),p(X,null,Y(w(se),o=>(l(),c(We,{key:o.value,value:o.value,class:ht({active:o.value===$.value})},{default:t(()=>[B("span",null,n(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(pe,{content:a.$t("action.density")},{default:t(()=>[B("div",va,[e(Qe,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(pe,{content:a.$t("action.column_setting")},{default:t(()=>[e(at,{trigger:"click",position:"bl",onPopupVisibleChange:R},{content:t(()=>[B("div",ha,[(l(!0),p(X,null,Y(v.value,(o,z)=>(l(),p("div",{key:o.dataIndex,class:"setting"},[B("div",ya,[e(et)]),B("div",null,[e(tt,{modelValue:o.checked,"onUpdate:modelValue":_e=>o.checked=_e,onChange:_e=>C(_e,o,z)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),B("div",ka,n(o.title),1)]))),128))])]),default:t(()=>[B("div",ga,[e(Ye,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ot,{ref_key:"tableRef",ref:r,"row-key":"id",loading:w(N),pagination:T,columns:u.value,data:_.value,bordered:!1,size:$.value,"row-selection":f,onPageChange:d,onPageSizeChange:y,onSelectionChange:oe},{group_names:t(({record:o})=>{var z;return[b(n(((z=o==null?void 0:o.group_names)==null?void 0:z.join(","))||"-"),1)]}),model_names:t(({record:o})=>[o.model_names?(l(),p("span",$a,[e(D,{type:"text",size:"small",onClick:z=>Ge(o.id)},{default:t(()=>[b(n(a.$t("button.view")),1)]),_:2},1032,["onClick"])])):(l(),p("span",wa,n("-")))]),weight:t(({record:o})=>[b(n(o.weight||0),1)]),lb_strategy:t(({record:o})=>[b(n(a.$t(`dict.lb_strategy.${o.lb_strategy||1}`)),1)]),remark:t(({record:o})=>[b(n(o.remark||"-"),1)]),status:t(({record:o})=>[e(lt,{modelValue:o.status,"onUpdate:modelValue":z=>o.status=z,"checked-value":1,"unchecked-value":2,onChange:z=>le({id:o.id,status:o.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:t(({record:o})=>[e(D,{type:"text",size:"small",onClick:z=>ie(o.id)},{default:t(()=>[b(n(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(D,{type:"text",size:"small",onClick:z=>a.$router.push({name:"ModelAgentUpdate",query:{id:o.id}})},{default:t(()=>[b(n(a.$t("button.update")),1)]),_:2},1032,["onClick"]),e(D,{type:"text",size:"small",onClick:z=>a.$router.push({name:"ModelKeyList",query:{agent_id:o.id}})},{default:t(()=>[b(n(a.$t("button.key")),1)]),_:2},1032,["onClick"]),e(D,{type:"text",size:"small",onClick:z=>Ke(o.id)},{default:t(()=>[b(n(a.$t("button.test")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(nt,{title:a.$t("model.agent.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:Z.value,onCancel:ue},{default:t(()=>[e(sa,{id:I.value},null,8,["id"])]),_:1},8,["title","visible"]),e(Ie,{visible:Q.value,"onUpdate:visible":s[10]||(s[10]=o=>Q.value=o),title:a.$t("common.bind_models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":a.$t("button.close")},{default:t(()=>[e(Bt,{id:I.value,action:W.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"]),e(Ie,{visible:i.value,"onUpdate:visible":s[11]||(s[11]=o=>i.value=o),title:a.$t("model.agent.title.test_models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":a.$t("button.close")},{default:t(()=>[e(ba,{id:I.value,action:W.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"])]),_:1})])}}});const Wa=ze(Ca,[["__scopeId","data-v-171937a4"]]);export{Wa as default};

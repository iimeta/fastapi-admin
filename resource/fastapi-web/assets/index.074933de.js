import{u as ae,O as Pe,s as Te,A as Ae,k as Oe,B as Ee,_ as He}from"./index.77c70861.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as le,e as g,B as s,C as b,aH as e,aG as t,u as v,aD as h,aM as i,aL as m,bA as Me,bB as qe,bC as Fe,bD as oe,bE as Re,r as Y,c as P,w as je,D as S,aJ as ee,aI as te,E as Ge,n as Je,aZ as F,a_ as Ke,aK as Ze,aF as Qe,b1 as We,b2 as Xe,bG as Ye,bI as et,bJ as tt,bK as at,b5 as lt,bL as ot,ab as nt,aU as st,bi as it,bj as ct,bk as rt,bl as ut,b4 as dt,bM as pt,bN as mt,bO as _t,aV as bt,bU as ft}from"./arco.73de4031.js";import{u as ne}from"./loading.0c20cf1b.js";import{q as vt,a as gt,s as ht,b as yt}from"./notice.d725b862.js";import{c as R,S as kt}from"./sortable.esm.7de80f5d.js";/* empty css                *//* empty css                */import"./chart.b5ad42b0.js";import"./vue.e54f3d1e.js";const $t={style:{margin:"10px 0 30px 10px"}},wt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ct=["innerHTML"],Vt={key:1},It={key:1},St={key:1,style:{"max-height":"200px",display:"block",overflow:"auto"}},zt={key:1,style:{"max-height":"200px",display:"block",overflow:"auto"}},Dt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Nt={key:1},Bt={key:1},Lt={key:1},Ut={key:1},xt={name:"NoticeDetail"},Pt=le({...xt,props:{id:{type:String,default:""}},setup(j){const T=j;ae();const{loading:p,setLoading:n}=ne(!0),c=g({});return(async(r={id:T.id})=>{n(!0);try{const{data:u}=await vt(r);c.value=u}catch{}finally{n(!1)}})(),(r,u)=>{const d=Me,_=qe,f=Fe,I=oe,z=Re;return s(),b("div",$t,[e(z,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(f,{label:r.$t("notice.label.title"),span:2},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",wt,i(c.value.title),1))]),_:1},8,["label"]),e(f,{label:r.$t("notice.label.content"),span:2},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",{key:1,style:{"max-height":"500px",display:"block",overflow:"auto"},innerHTML:c.value.content},null,8,Ct))]),_:1},8,["label"]),e(f,{label:r.$t("notice.label.category")},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",Vt,i(r.$t(`notice.dict.category.${c.value.category}`)),1))]),_:1},8,["label"]),e(f,{label:r.$t("notice.label.scope")},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",It,i(r.$t(`notice.dict.scope.${c.value.scope}`)),1))]),_:1},8,["label"]),e(f,{label:r.$t("common.user")},{default:t(()=>{var w;return[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",St,i(c.value.scope===1||c.value.scope===2?r.$t("common.all"):(c.value.scope===4||c.value.scope===6)&&((w=c.value.users)==null?void 0:w.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(f,{label:r.$t("common.reseller"),span:2},{default:t(()=>{var w;return[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",zt,i(c.value.scope===1||c.value.scope===3?r.$t("common.all"):(c.value.scope===5||c.value.scope===6)&&((w=c.value.resellers)==null?void 0:w.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(f,{label:r.$t("common.remark"),span:2},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",Dt,i(c.value.remark||"-"),1))]),_:1},8,["label"]),e(f,{label:r.$t("common.status")},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",Nt,[e(I,{color:c.value.status===1?"green":""},{default:t(()=>[m(i(r.$t(`notice.dict.status.${c.value.status}`)),1)]),_:1},8,["color"])]))]),_:1},8,["label"]),e(f,{label:r.$t("common.publish_time")},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",Bt,i(c.value.publish_time||"-"),1))]),_:1},8,["label"]),e(f,{label:r.$t("common.created_at")},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",Lt,i(c.value.created_at),1))]),_:1},8,["label"]),e(f,{label:r.$t("common.updated_at")},{default:t(()=>[v(p)?(s(),h(_,{key:0,animation:!0},{default:t(()=>[e(d,{rows:1})]),_:1})):(s(),b("span",Ut,i(c.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Tt={class:"container"},At={class:"action-icon"},Ot={class:"action-icon"},Et={id:"tableSetting"},Ht={style:{"margin-right":"4px",cursor:"move"}},Mt={class:"title"},qt={name:"NoticeList"},Ft=le({...qt,setup(j){const{loading:T,setLoading:p}=ne(!0),{t:n}=ae(),c=Y({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),A=()=>({title:"",content:"",category:g(),remark:"",status:g(),publish_time:[]}),r=g([]),u=g(A()),d=g([]),_=g([]),f=g("medium"),I=g([]),z=g(!0),w=g(),D={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},U=Y({...D}),se=P(()=>[{name:n("size.mini"),value:"mini"},{name:n("size.small"),value:"small"},{name:n("size.medium"),value:"medium"},{name:n("size.large"),value:"large"}]),ie=P(()=>[{title:n("notice.label.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:n("notice.label.category"),dataIndex:"category",slotName:"category",align:"center"},{title:n("notice.label.scope"),dataIndex:"scope",slotName:"scope",align:"center",ellipsis:!0,tooltip:!0},{title:n("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:n("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:n("common.publish_time"),dataIndex:"publish_time",slotName:"publish_time",align:"center",width:170},{title:n("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),ce=P(()=>[{label:n("notice.dict.status.1"),value:1},{label:n("notice.dict.status.2"),value:2}]),re=P(()=>[{label:n("notice.dict.category.service"),value:"service"},{label:n("notice.dict.category.activity"),value:"activity"},{label:n("notice.dict.category.safety"),value:"safety"},{label:n("notice.dict.category.maint"),value:"maint"},{label:n("notice.dict.category.product"),value:"product"},{label:n("notice.dict.category.fault"),value:"fault"}]),x=async(a={...D})=>{p(!0);try{const{data:o}=await gt(a);r.value=o.items,U.current=a.current,U.pageSize=a.pageSize,U.total=o.paging.total}catch{}finally{p(!1),w.value.selectAll(!1)}};x();const B=()=>{x({...D,...u.value})},ue=a=>{x({...D,...u.value,current:a})},de=a=>{D.pageSize=a,x({...D,...u.value})},pe=()=>{u.value=A(),B()},me=(a,o)=>{f.value=a},_e=(a,o,y)=>{a?d.value.splice(y,0,o):d.value=_.value.filter(k=>k.dataIndex!==o.dataIndex)},G=(a,o,y,k=!1)=>{const C=k?R(a):a;return o>-1&&y>-1&&C.splice(o,1,C.splice(y,1,C[o]).pop()),C},be=a=>{a&&Je(()=>{const o=document.getElementById("tableSetting");new kt(o,{onEnd(y){const{oldIndex:k,newIndex:C}=y;G(d.value,k,C),G(_.value,k,C)}})})};je(()=>ie.value,a=>{d.value=R(a),d.value.forEach((o,y)=>{o.checked=!0}),_.value=R(d.value)},{deep:!0,immediate:!0});const fe=async a=>{p(!0);try{await ht(a),F.success(n("success.delete")),B()}catch{}finally{p(!1)}},ve=a=>{I.value=a,z.value=!a.length},J=a=>{if(I.value.length===0)F.info(n("placeholder.operation.data"));else{let o=n("placeholder.batch.operation",{count:I.value.length});switch(a.action){case"notice":o=n("notice.placeholder.batch.notice",{count:I.value.length});break;case"delete":o=n("placeholder.batch.operation.delete",{count:I.value.length});break}Ke.warning({title:n("modal.warning.title"),titleAlign:"center",content:o,okText:n("button.ok"),cancelText:n("button.cancel"),hideCancel:!1,onOk:()=>{p(!0),a.ids=I.value,yt(a).then(y=>{p(!1),F.success(n("success.operate")),B(),w.value.selectAll(!1)})}})}},O=g(!1),K=g(),ge=a=>{O.value=!0,K.value=a},he=()=>{O.value=!1};return(a,o)=>{const y=Pe,k=Ze,C=Qe,E=We,N=Xe,$=Ye,Z=et,ye=tt,H=at,ke=lt,Q=ot,$e=nt,V=st,W=Te,X=it,M=ct,we=Ae,Ce=rt,Ve=ut,Ie=Oe,Se=Ee,ze=dt,De=pt,Ne=oe,Be=mt,Le=_t,Ue=bt,xe=ft;return s(),b("div",Tt,[e(C,{class:"container-breadcrumb"},{default:t(()=>[e(k,null,{default:t(()=>[e(y)]),_:1}),e(k,null,{default:t(()=>[m(i(a.$t("notice.menu")),1)]),_:1}),e(k,null,{default:t(()=>[m(i(a.$t("notice.menu.message")),1)]),_:1})]),_:1}),e(xe,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(H,null,{default:t(()=>[e($,{flex:1},{default:t(()=>[e(ke,{model:u.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(H,{gutter:16},{default:t(()=>[e($,{span:8},{default:t(()=>[e(N,{field:"title",label:a.$t("notice.label.title")},{default:t(()=>[e(E,{modelValue:u.value.title,"onUpdate:modelValue":o[0]||(o[0]=l=>u.value.title=l),placeholder:a.$t("notice.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(N,{field:"content",label:a.$t("notice.label.content")},{default:t(()=>[e(E,{modelValue:u.value.content,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value.content=l),placeholder:a.$t("notice.placeholder.content"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(N,{field:"category",label:a.$t("notice.label.category")},{default:t(()=>[e(Z,{modelValue:u.value.category,"onUpdate:modelValue":o[2]||(o[2]=l=>u.value.category=l),placeholder:a.$t("common.all"),options:v(re),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(N,{field:"remark",label:a.$t("common.remark")},{default:t(()=>[e(E,{modelValue:u.value.remark,"onUpdate:modelValue":o[3]||(o[3]=l=>u.value.remark=l),placeholder:a.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(N,{field:"status",label:a.$t("common.status")},{default:t(()=>[e(Z,{modelValue:u.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>u.value.status=l),placeholder:a.$t("common.all"),options:v(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(N,{field:"publish_time",label:a.$t("common.publish_time")},{default:t(()=>[e(ye,{modelValue:u.value.publish_time,"onUpdate:modelValue":o[5]||(o[5]=l=>u.value.publish_time=l),placeholder:[a.$t("common.start_time"),a.$t("common.end_time")],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{style:{height:"84px"},direction:"vertical"}),e($,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(X,{direction:"vertical",size:18},{default:t(()=>[e(V,{type:"primary",onClick:B},{icon:t(()=>[e($e)]),default:t(()=>[m(" "+i(a.$t("button.search")),1)]),_:1}),e(V,{onClick:pe},{icon:t(()=>[e(W)]),default:t(()=>[m(" "+i(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(H,{style:{"margin-bottom":"16px"}},{default:t(()=>[e($,{span:12},{default:t(()=>[e(X,null,{default:t(()=>[e(V,{type:"primary",onClick:o[6]||(o[6]=l=>a.$router.push({name:"NoticeCreate"}))},{default:t(()=>[m(i(a.$t("button.create")),1)]),_:1}),e(V,{type:"primary",status:"success",disabled:z.value,title:z.value?a.$t("placeholder.operation.data"):"",onClick:o[7]||(o[7]=l=>J({action:"notice"}))},{default:t(()=>[m(i(a.$t("notice.button.send")),1)]),_:1},8,["disabled","title"]),e(V,{type:"primary",status:"danger",disabled:z.value,title:z.value?a.$t("placeholder.operation.data"):"",onClick:o[8]||(o[8]=l=>J({action:"delete"}))},{default:t(()=>[m(i(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e($,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(M,{content:a.$t("action.refresh")},{default:t(()=>[S("div",{class:"action-icon",onClick:B},[e(W,{size:"18"})])]),_:1},8,["content"]),e(Ve,{onSelect:me},{content:t(()=>[(s(!0),b(ee,null,te(v(se),l=>(s(),h(Ce,{key:l.value,value:l.value,class:Ge({active:l.value===f.value})},{default:t(()=>[S("span",null,i(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(M,{content:a.$t("action.density")},{default:t(()=>[S("div",At,[e(we,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(M,{content:a.$t("action.column_setting")},{default:t(()=>[e(De,{trigger:"click",position:"bl",onPopupVisibleChange:be},{content:t(()=>[S("div",Et,[(s(!0),b(ee,null,te(_.value,(l,L)=>(s(),b("div",{key:l.dataIndex,class:"setting"},[S("div",Ht,[e(Se)]),S("div",null,[e(ze,{modelValue:l.checked,"onUpdate:modelValue":q=>l.checked=q,onChange:q=>_e(q,l,L)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),S("div",Mt,i(l.title),1)]))),128))])]),default:t(()=>[S("div",Ot,[e(Ie,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(Le,{ref_key:"tableRef",ref:w,"row-key":"id",loading:v(T),pagination:U,columns:d.value,data:r.value,bordered:!1,size:f.value,"row-selection":c,onPageChange:ue,onPageSizeChange:de,onSelectionChange:ve},{category:t(({record:l})=>[m(i(a.$t(`notice.dict.category.${l.category}`)),1)]),scope:t(({record:l})=>[m(i(a.$t(`notice.dict.scope.${l.scope}`)),1)]),remark:t(({record:l})=>[m(i(l.remark||"-"),1)]),status:t(({record:l})=>[e(Ne,{color:l.status===1?"green":""},{default:t(()=>[m(i(a.$t(`notice.dict.status.${l.status}`)),1)]),_:2},1032,["color"])]),publish_time:t(({record:l})=>[m(i(l.publish_time||"-"),1)]),operations:t(({record:l})=>[e(V,{type:"text",size:"small",onClick:L=>ge(l.id)},{default:t(()=>[m(i(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(V,{type:"text",size:"small",onClick:L=>a.$router.push({name:"NoticeUpdate",query:{id:l.id,action:"copy"}})},{default:t(()=>[m(i(a.$t("button.copy")),1)]),_:2},1032,["onClick"]),e(V,{type:"text",size:"small",disabled:l.status===1,onClick:L=>a.$router.push({name:"NoticeUpdate",query:{id:l.id}})},{default:t(()=>[m(i(a.$t("button.update")),1)]),_:2},1032,["disabled","onClick"]),e(Be,{content:a.$t("placeholder.operation.delete"),onOk:L=>fe({id:l.id})},{default:t(()=>[e(V,{type:"text",size:"small"},{default:t(()=>[m(i(a.$t("button.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(Ue,{title:a.$t("notice.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:O.value,onCancel:he},{default:t(()=>[e(Pt,{id:K.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const ba=He(Ft,[["__scopeId","data-v-73ffec3d"]]);export{ba as default};

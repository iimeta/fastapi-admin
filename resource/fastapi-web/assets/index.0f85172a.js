import{u as G,n as R,_ as N}from"./index.dcc2ae0d.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as T,e as _,B as f,C as w,aH as t,aG as s,aL as m,aM as i,D as h,u as r,aJ as M,aI as j,aD as E,aZ as J,aK as K,aF as O,b1 as P,b2 as Z,bS as z,bH as A,bI as Q,bT as W,aU as X,bi as Y,b5 as ee,bU as ae,bV as le}from"./arco.73de4031.js";import{u as te}from"./loading.0c20cf1b.js";import{d as oe,a as d}from"./common.0ef165cd.js";import{h as se,f as re}from"./vue.e54f3d1e.js";import{a as ue,h as de}from"./admin_user.b5fbaf83.js";import{q as ne}from"./group.ef0ab580.js";import"./chart.b5ad42b0.js";const pe={class:"container"},me={class:"wrapper"},ie={class:"submit-btn"},ce={name:"UserUpdate"},_e=T({...ce,setup(fe){const{t:$}=G(),{loading:V,setLoading:n}=te(!1),q=se(),U=re(),b=_([]);(async()=>{try{const{data:a}=await ne();b.value=a.items}catch{}})();const v=_(),e=_({id:"",name:"",email:"",account:"",password:"",quota_expires_at:"",groups:[],remark:"",status:1});(async(a={id:q.query.id})=>{n(!0);try{const{data:l}=await ue(a);e.value.id=l.id,e.value.name=l.name,e.value.email=l.email,e.value.account=l.account,e.value.quota_expires_at=l.quota_expires_at,e.value.groups=l.groups,e.value.remark=l.remark,e.value.status=l.status}catch{}finally{n(!1)}})();const k=async()=>{var l;if(!await((l=v.value)==null?void 0:l.validate())){n(!0);try{await de(e.value).then(()=>{J.success($("success.update")),U.push({name:"UserList"})})}catch{}finally{n(!1)}}};return(a,l)=>{const y=R,c=K,D=O,p=P,u=Z,H=z,L=A,B=Q,I=W,g=X,C=Y,F=ee,S=ae,x=le;return f(),w("div",pe,[t(D,{class:"container-breadcrumb"},{default:s(()=>[t(c,null,{default:s(()=>[t(y)]),_:1}),t(c,null,{default:s(()=>[m(i(a.$t("user.menu")),1)]),_:1}),t(c,null,{default:s(()=>[m(i(a.$t("user.menu.update")),1)]),_:1})]),_:1}),t(x,{loading:r(V),style:{width:"100%"}},{default:s(()=>[t(S,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:s(()=>[h("div",me,[t(F,{ref_key:"formRef",ref:v,model:e.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:s(()=>[t(u,{field:"name",label:a.$t("common.name"),rules:[{required:!0,message:a.$t("user.placeholder.name")},{match:/^.{1,30}$/,message:a.$t("user.error.pattern.name")}]},{default:s(()=>[t(p,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.name=o),placeholder:a.$t("user.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(u,{field:"email",label:a.$t("common.email"),rules:[{required:!0,message:a.$t("user.placeholder.email")}]},{default:s(()=>[t(p,{modelValue:e.value.email,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.email=o),placeholder:a.$t("user.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(u,{field:"account",label:a.$t("common.account"),rules:[{required:!0,message:a.$t("user.error.required.account")}]},{default:s(()=>[t(p,{modelValue:e.value.account,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.account=o),placeholder:a.$t("user.placeholder.account"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(u,{field:"password",label:a.$t("user.label.password"),rules:[{match:/^.{6,}$/,message:a.$t("user.error.pattern.password")}]},{default:s(()=>[t(p,{modelValue:e.value.password,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.password=o),placeholder:a.$t("user.update.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(u,{field:"quota_expires_at",label:a.$t("user.label.quota_expires_at")},{default:s(()=>[t(H,{modelValue:e.value.quota_expires_at,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.quota_expires_at=o),placeholder:a.$t("user.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":r(oe),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>r(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),t(u,{field:"groups",label:a.$t("common.groups"),style:{"align-items":"center"}},{default:s(()=>[t(B,{modelValue:e.value.groups,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.groups=o),placeholder:a.$t("user.placeholder.groups"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:s(()=>[(f(!0),w(M,null,j(b.value,o=>(f(),E(L,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{field:"remark",label:a.$t("common.remark")},{default:s(()=>[t(I,{modelValue:e.value.remark,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.remark=o),placeholder:a.$t("placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(C,null,{default:s(()=>[h("div",ie,[t(g,{type:"secondary",onClick:l[7]||(l[7]=o=>a.$router.push({name:"UserList"}))},{default:s(()=>[m(i(a.$t("button.cancel")),1)]),_:1}),t(g,{type:"primary",onClick:k},{default:s(()=>[m(i(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const xe=N(_e,[["__scopeId","data-v-acc81106"]]);export{xe as default};

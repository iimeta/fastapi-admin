import{_ as S,w as G}from"./index.3e0040d4.js";/* empty css               *//* empty css                */import{d as I,e as h,B as b,aD as w,aG as a,aH as e,aL as u,aM as g,bC as D,bA as B,b2 as L,b1 as K,aS as j,bK as F,aU as M,b5 as N,C as U,aJ as J,aI as H,aT as P,bi as R,bz as X,F as Z,bs as Q,aE as W,u as Y,aK as x,aF as ee,bL as ae,bM as le,bJ as te,bN as oe}from"./arco.47b3c23b.js";import{u as q}from"./loading.b238ab8e.js";import{d as T,e as ne}from"./agent.22c91532.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as E}from"./vue.94924b34.js";/* empty css               */import{q as se}from"./model.0498f73b.js";/* empty css               */import"./chart.49ffccb2.js";import"./base.87fcf6e2.js";const ue=I({__name:"base-info",emits:["changeStep"],setup(f,{emit:_}){const{setLoading:i}=q(!1),d=E(),c=h(),o=h({id:"",corp:"",name:"",base_url:"",path:"",weight:h(),remark:"",status:1});(async(n={id:d.query.id})=>{i(!0);try{const{data:t}=await T(n);o.value.id=t.id,o.value.corp=t.corp,o.value.name=t.name,o.value.base_url=t.base_url,o.value.path=t.path,o.value.weight=t.weight,o.value.remark=t.remark,o.value.status=t.status}catch{}finally{i(!1)}})();const l=async()=>{var t;await((t=c.value)==null?void 0:t.validate())||_("changeStep","forward",{...o.value})};return(n,t)=>{const m=D,r=B,s=L,k=K,V=j,y=F,A=M,C=N;return b(),w(C,{ref_key:"formRef",ref:c,model:o.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(s,{field:"corp",label:n.$t("model.agent.label.corp"),rules:[{required:!0,message:n.$t("model.agent.error.corp.required")}]},{default:a(()=>[e(r,{modelValue:o.value.corp,"onUpdate:modelValue":t[0]||(t[0]=p=>o.value.corp=p),placeholder:n.$t("model.agent.placeholder.corp"),"allow-search":""},{default:a(()=>[e(m,{value:"OpenAI"},{default:a(()=>[u("OpenAI")]),_:1}),e(m,{value:"Baidu"},{default:a(()=>[u("\u767E\u5EA6")]),_:1}),e(m,{value:"Xfyun"},{default:a(()=>[u("\u79D1\u5927\u8BAF\u98DE")]),_:1}),e(m,{value:"Aliyun"},{default:a(()=>[u("\u963F\u91CC\u4E91")]),_:1}),e(m,{value:"ZhipuAI"},{default:a(()=>[u("\u667A\u8C31AI")]),_:1}),e(m,{value:"Google"},{default:a(()=>[u("Google")]),_:1}),e(m,{value:"DeepSeek"},{default:a(()=>[u("DeepSeek")]),_:1}),e(m,{value:"Midjourney"},{default:a(()=>[u("Midjourney")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(s,{field:"name",label:n.$t("model.agent.label.name"),rules:[{required:!0,message:n.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:n.$t("model.agent.error.name.pattern")}]},{default:a(()=>[e(k,{modelValue:o.value.name,"onUpdate:modelValue":t[1]||(t[1]=p=>o.value.name=p),placeholder:n.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(s,{field:"base_url",label:n.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:n.$t("model.agent.error.baseUrl.required")}]},{default:a(()=>[e(k,{modelValue:o.value.base_url,"onUpdate:modelValue":t[2]||(t[2]=p=>o.value.base_url=p),placeholder:n.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(s,{field:"path",label:n.$t("model.agent.label.path")},{default:a(()=>[e(k,{modelValue:o.value.path,"onUpdate:modelValue":t[3]||(t[3]=p=>o.value.path=p),placeholder:n.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(s,{field:"weight",label:n.$t("model.agent.label.weight")},{default:a(()=>[e(V,{modelValue:o.value.weight,"onUpdate:modelValue":t[4]||(t[4]=p=>o.value.weight=p),precision:0,min:0,max:99999,placeholder:n.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(s,{field:"remark",label:n.$t("model.agent.label.remark")},{default:a(()=>[e(y,{modelValue:o.value.remark,"onUpdate:modelValue":t[5]||(t[5]=p=>o.value.remark=p),placeholder:n.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(s,null,{default:a(()=>[e(A,{type:"primary",onClick:l},{default:a(()=>[u(g(n.$t("model.agent.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const re=S(ue,[["__scopeId","data-v-abc096f7"]]),de=I({__name:"advanced",emits:["changeStep"],setup(f,{emit:_}){const{setLoading:i}=q(!0),d=E(),c=h([]);(async()=>{i(!0);try{const{data:r}=await se();c.value=r.items}catch{}finally{i(!1)}})();const $=h(),l=h({models:[],key:"",is_agents_only:!0});(async(r={id:d.query.id})=>{i(!0);try{const{data:s}=await T(r);l.value.models=s.models,l.value.key=s.key}catch{}finally{i(!1)}})();const t=async()=>{var s;await((s=$.value)==null?void 0:s.validate())||_("changeStep","submit",{...l.value})},m=()=>{_("changeStep","backward")};return(r,s)=>{const k=D,V=B,y=L,A=F,C=P,p=M,O=R,z=N;return b(),w(z,{ref_key:"formRef",ref:$,model:l.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:a(()=>[e(y,{field:"models",label:r.$t("model.agent.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:l.value.models,"onUpdate:modelValue":s[0]||(s[0]=v=>l.value.models=v),placeholder:r.$t("model.agent.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(b(!0),U(J,null,H(c.value,v=>(b(),w(k,{key:v.id,value:v.id,label:v.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(y,{field:"key",label:r.$t("model.agent.label.key")},{default:a(()=>[e(A,{modelValue:l.value.key,"onUpdate:modelValue":s[1]||(s[1]=v=>l.value.key=v),placeholder:r.$t("model.agent.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(y,{field:"is_agents_only",label:r.$t("model.agent.label.isAgentsOnly")},{default:a(()=>[e(C,{modelValue:l.value.is_agents_only,"onUpdate:modelValue":s[2]||(s[2]=v=>l.value.is_agents_only=v)},null,8,["modelValue"])]),_:1},8,["label"]),e(y,null,{default:a(()=>[e(O,null,{default:a(()=>[e(p,{type:"secondary",onClick:m},{default:a(()=>[u(g(r.$t("model.button.prev")),1)]),_:1}),e(p,{type:"primary",onClick:t},{default:a(()=>[u(g(r.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const me=S(de,[["__scopeId","data-v-7c114a8c"]]);const pe={},ie={class:"success-wrap"};function ce(f,_){const i=X,d=M,c=R;return b(),U("div",ie,[e(i,{status:"success",title:f.$t("model.agent.success.title"),subtitle:f.$t("model.agent.success.update.subTitle")},null,8,["title","subtitle"]),e(c,{size:16},{default:a(()=>[e(d,{key:"finish",type:"secondary",onClick:_[0]||(_[0]=o=>f.$router.push({name:"ModelAgentList"}))},{default:a(()=>[u(g(f.$t("model.agent.button.return")),1)]),_:1}),e(d,{key:"again",type:"primary",onClick:_[1]||(_[1]=o=>f.$router.push({name:"ModelAgentDetail",query:{id:`${f.$route.query.id}`}}))},{default:a(()=>[u(g(f.$t("model.agent.button.view")),1)]),_:1})]),_:1})])}const _e=S(pe,[["render",ce],["__scopeId","data-v-6fea42ce"]]),fe={class:"container"},be={class:"wrapper"},ge={name:"ModelAgentUpdate"},ve=I({...ge,setup(f){const{loading:_,setLoading:i}=q(!1),d=h(1),c=h({}),o=async()=>{i(!0);try{await ne(c.value),d.value=3,c.value={}}catch{}finally{i(!1)}},$=(l,n)=>{if(typeof l=="number"){d.value=l;return}if(l==="forward"||l==="submit"){if(c.value={...c.value,...n},l==="submit"){o();return}d.value+=1}else l==="backward"&&(d.value-=1)};return(l,n)=>{const t=G,m=x,r=ee,s=ae,k=le,V=te,y=oe;return b(),U("div",fe,[e(r,{class:"container-breadcrumb"},{default:a(()=>[e(m,null,{default:a(()=>[e(t)]),_:1}),e(m,null,{default:a(()=>[u(g(l.$t("menu.agent")),1)]),_:1}),e(m,null,{default:a(()=>[u(g(l.$t("menu.model.agent.update")),1)]),_:1})]),_:1}),e(y,{loading:Y(_),style:{width:"100%"}},{default:a(()=>[e(V,{class:"general-card",bordered:!1},{default:a(()=>[Z("div",be,[e(k,{current:d.value,"onUpdate:current":n[0]||(n[0]=A=>d.value=A),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(s,{description:l.$t("model.agent.subTitle.baseInfo")},{default:a(()=>[u(g(l.$t("model.agent.title.baseInfo")),1)]),_:1},8,["description"]),e(s,{description:l.$t("model.agent.subTitle.advanced")},{default:a(()=>[u(g(l.$t("model.agent.title.advanced")),1)]),_:1},8,["description"]),e(s,{description:l.$t("model.agent.subTitle.update.finish")},{default:a(()=>[u(g(l.$t("model.agent.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(b(),w(Q,null,[d.value===1?(b(),w(re,{key:0,onChangeStep:$})):d.value===2?(b(),w(me,{key:1,onChangeStep:$})):d.value===3?(b(),w(_e,{key:2,onChangeStep:$})):W("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Re=S(ve,[["__scopeId","data-v-4bdc868b"]]);export{Re as default};

import{u as ne,L as Ee,p as Ue,y as qe,i as Le,z as Ae,_ as Pe}from"./index.0c5004d5.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as oe,e as v,B as i,C as f,aH as e,aG as t,u,aD as V,aM as c,bA as He,bB as Oe,bC as Me,bE as Re,r as te,c as A,w as je,aL as _,F,aJ as ae,aI as le,D as Ge,n as Je,aK as Ke,aF as Qe,b1 as We,b2 as Xe,bH as Ye,bG as Ze,bI as et,b5 as tt,bJ as at,ab as lt,aU as nt,bi as ot,bj as st,bl as it,bm as ut,b4 as ct,bK as rt,aT as dt,bL as pt,bM as mt,aV as _t,bN as ft,g as vt}from"./arco.ba78a5b2.js";import{u as se}from"./loading.0618e973.js";import{a as gt,s as bt,b as ht,c as yt,d as kt,e as $t}from"./notice_template.246249c3.js";import{c as G,S as wt}from"./sortable.esm.efdc80f6.js";/* empty css                *//* empty css                */import"./chart.df189e8a.js";import"./vue.2736b3ca.js";const Ct={style:{margin:"10px 0 30px 10px"}},xt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Vt={key:1},Dt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Ft=["innerHTML"],St={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},It={key:1},Nt={key:1},zt={key:1},Tt={name:"NoticeTemplateDetail"},Bt=oe({...Tt,props:{id:{type:String,default:""}},setup(J){const D=J,{t:g}=ne(),{loading:k,setLoading:T}=se(!0),b=v({});return(async(s={id:D.id})=>{T(!0);try{const{data:C}=await gt(s);for(let o=0;o<C.scenes.length;o+=1)C.scenes[o]=g(`notice.template.dict.scenes.${C.scenes[o]}`);b.value=C}catch{}finally{T(!1)}})(),(s,C)=>{const o=He,r=Oe,m=Me,B=Re;return i(),f("div",Ct,[e(B,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(m,{label:u(g)("notice.template.detail.name"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",xt,c(b.value.name),1))]),_:1},8,["label"]),e(m,{label:u(g)("notice.template.detail.scenes"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",Vt,c(b.value.scenes.toString()),1))]),_:1},8,["label"]),e(m,{label:u(g)("notice.template.detail.title"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",Dt,c(b.value.title),1))]),_:1},8,["label"]),e(m,{label:u(g)("notice.template.detail.content"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",{key:1,style:{"max-height":"500px",display:"block",overflow:"auto"},innerHTML:b.value.content},null,8,Ft))]),_:1},8,["label"]),e(m,{label:u(g)("common.remark"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",St,c(b.value.remark||"-"),1))]),_:1},8,["label"]),e(m,{label:u(g)("common.status"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",It,c(s.$t(`dict.status.${b.value.status}`)),1))]),_:1},8,["label"]),e(m,{label:u(g)("common.created_at"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",Nt,c(b.value.created_at),1))]),_:1},8,["label"]),e(m,{label:u(g)("common.updated_at"),span:2},{default:t(()=>[u(k)?(i(),V(r,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(i(),f("span",zt,c(b.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Et={class:"container"},Ut={class:"action-icon"},qt={class:"action-icon"},Lt={id:"tableSetting"},At={style:{"margin-right":"4px",cursor:"move"}},Pt={class:"title"},Ht={name:"NoticeTemplateList"},Ot=oe({...Ht,setup(J){const{proxy:D}=vt(),g=te({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),k=async a=>{h(!0);try{await bt(a),D.$message.success("\u5220\u9664\u6210\u529F"),I()}catch{}finally{h(!1)}},T=()=>({name:"",scenes:[],status:v(),title:"",content:"",remark:""}),{loading:b,setLoading:h}=se(!0),{t:s}=ne(),C=v([]),o=v(T()),r=v([]),m=v([]),B=v("medium"),E=v([]),S=v(!0),P=v(),N={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},U=te({...N}),ie=A(()=>[{name:s("size.mini"),value:"mini"},{name:s("size.small"),value:"small"},{name:s("size.medium"),value:"medium"},{name:s("size.large"),value:"large"}]),ue=A(()=>[{title:s("notice.template.columns.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.scenes"),dataIndex:"scenes",slotName:"scenes",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:s("notice.template.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:s("notice.template.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),ce=A(()=>[{label:s("notice.template.dict.scenes.code"),value:"code"},{label:s("notice.template.dict.scenes.login"),value:"login"},{label:s("notice.template.dict.scenes.register"),value:"register"},{label:s("notice.template.dict.scenes.forget_password"),value:"forget_password"},{label:s("notice.template.dict.scenes.change_password"),value:"change_password"},{label:s("notice.template.dict.scenes.change_email"),value:"change_email"},{label:s("notice.template.dict.scenes.quota_recharge"),value:"quota_recharge"},{label:s("notice.template.dict.scenes.quota_warning"),value:"quota_warning"},{label:s("notice.template.dict.scenes.quota_exhaustion"),value:"quota_exhaustion"},{label:s("notice.template.dict.scenes.quota_expire_warning"),value:"quota_expire_warning"},{label:s("notice.template.dict.scenes.quota_expire"),value:"quota_expire"},{label:s("notice.template.dict.scenes.notice"),value:"notice"}]),re=A(()=>[{label:s("model.dict.status.1"),value:1},{label:s("model.dict.status.2"),value:2}]),q=async(a={...N})=>{h(!0);try{const{data:l}=await ht(a);for(let d=0;d<l.items.length;d+=1)for(let p=0;p<l.items[d].scenes.length;p+=1)l.items[d].scenes[p]=s(`notice.template.dict.scenes.${l.items[d].scenes[p]}`);C.value=l.items,U.current=a.current,U.pageSize=a.pageSize,U.total=l.paging.total}catch{}finally{h(!1),P.value.selectAll(!1)}},I=()=>{q({...N,...o.value})},de=a=>{q({...N,...o.value,current:a})},pe=a=>{N.pageSize=a,q({...N,...o.value})};q();const me=()=>{o.value=T(),I()},_e=async a=>{h(!0);try{await yt(a),D.$message.success("\u64CD\u4F5C\u6210\u529F"),I()}catch{}finally{h(!1)}},fe=async a=>{h(!0);try{await kt(a),D.$message.success("\u64CD\u4F5C\u6210\u529F"),I()}catch{}finally{h(!1)}},ve=(a,l)=>{B.value=a},ge=(a,l,d)=>{a?r.value.splice(d,0,l):r.value=m.value.filter(p=>p.dataIndex!==l.dataIndex)},K=(a,l,d,p=!1)=>{const x=p?G(a):a;return l>-1&&d>-1&&x.splice(l,1,x.splice(d,1,x[l]).pop()),x},be=a=>{a&&Je(()=>{const l=document.getElementById("tableSetting");new wt(l,{onEnd(d){const{oldIndex:p,newIndex:x}=d;K(r.value,p,x),K(m.value,p,x)}})})};je(()=>ue.value,a=>{r.value=G(a),r.value.forEach((l,d)=>{l.checked=!0}),m.value=G(r.value)},{deep:!0,immediate:!0});const he=a=>{E.value=a,S.value=!a.length},H=a=>{if(E.value.length===0)D.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let l=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${E.value.length}\u6761\u6570\u636E?`;switch(a.action){case"delete":l=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${E.value.length}\u6761\u6570\u636E?`;break}D.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:l,hideCancel:!1,onOk:()=>{h(!0),a.ids=E.value,$t(a).then(d=>{h(!1),D.$message.success("\u64CD\u4F5C\u6210\u529F"),I(),P.value.selectAll(!1)})}})}},O=v(!1),Q=v(),ye=a=>{O.value=!0,Q.value=a},ke=()=>{O.value=!1};return(a,l)=>{const d=Ee,p=Ke,x=Qe,L=We,z=Xe,$=Ye,W=Ze,M=et,$e=tt,X=at,we=lt,w=nt,Y=Ue,Z=ot,R=st,Ce=qe,xe=it,Ve=ut,De=Le,Fe=Ae,Se=ct,Ie=rt,ee=dt,Ne=pt,ze=mt,Te=_t,Be=ft;return i(),f("div",Et,[e(x,{class:"container-breadcrumb"},{default:t(()=>[e(p,null,{default:t(()=>[e(d)]),_:1}),e(p,null,{default:t(()=>[_(c(a.$t("menu.notice")),1)]),_:1}),e(p,null,{default:t(()=>[_(c(a.$t("menu.notice.template.list")),1)]),_:1})]),_:1}),e(Be,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(M,null,{default:t(()=>[e($,{flex:1},{default:t(()=>[e($e,{model:o.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(M,{gutter:16},{default:t(()=>[e($,{span:8},{default:t(()=>[e(z,{field:"name",label:a.$t("notice.template.form.name")},{default:t(()=>[e(L,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=n=>o.value.name=n),placeholder:a.$t("notice.template.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"title",label:a.$t("notice.template.form.title")},{default:t(()=>[e(L,{modelValue:o.value.title,"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.title=n),placeholder:a.$t("notice.template.form.title.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"content",label:a.$t("notice.template.form.content")},{default:t(()=>[e(L,{modelValue:o.value.content,"onUpdate:modelValue":l[2]||(l[2]=n=>o.value.content=n),placeholder:a.$t("notice.template.form.content.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"scenes",label:a.$t("notice.template.form.scenes")},{default:t(()=>[e(W,{modelValue:o.value.scenes,"onUpdate:modelValue":l[3]||(l[3]=n=>o.value.scenes=n),placeholder:a.$t("notice.template.form.selectDefault"),options:u(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"status",label:a.$t("notice.template.form.status")},{default:t(()=>[e(W,{modelValue:o.value.status,"onUpdate:modelValue":l[4]||(l[4]=n=>o.value.status=n),placeholder:a.$t("notice.template.form.selectDefault"),options:u(re),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"remark",label:a.$t("notice.template.form.remark")},{default:t(()=>[e(L,{modelValue:o.value.remark,"onUpdate:modelValue":l[5]||(l[5]=n=>o.value.remark=n),placeholder:a.$t("notice.template.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(X,{style:{height:"84px"},direction:"vertical"}),e($,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Z,{direction:"vertical",size:18},{default:t(()=>[e(w,{type:"primary",onClick:I},{icon:t(()=>[e(we)]),default:t(()=>[_(" "+c(a.$t("notice.template.form.search")),1)]),_:1}),e(w,{onClick:me},{icon:t(()=>[e(Y)]),default:t(()=>[_(" "+c(a.$t("notice.template.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(M,{style:{"margin-bottom":"16px"}},{default:t(()=>[e($,{span:12},{default:t(()=>[e(Z,null,{default:t(()=>[e(w,{type:"primary",onClick:l[6]||(l[6]=n=>a.$router.push({name:"NoticeTemplateCreate"}))},{default:t(()=>[_(c(a.$t("notice.template.operation.create")),1)]),_:1}),e(w,{type:"primary",status:"success",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[7]||(l[7]=n=>H({action:"status",value:1}))},{default:t(()=>[_(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(w,{type:"primary",status:"danger",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[8]||(l[8]=n=>H({action:"status",value:2}))},{default:t(()=>[_(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(w,{type:"primary",status:"danger",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:l[9]||(l[9]=n=>H({action:"delete"}))},{default:t(()=>[_(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e($,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(R,{content:a.$t("actions.refresh")},{default:t(()=>[F("div",{class:"action-icon",onClick:I},[e(Y,{size:"18"})])]),_:1},8,["content"]),e(Ve,{onSelect:ve},{content:t(()=>[(i(!0),f(ae,null,le(u(ie),n=>(i(),V(xe,{key:n.value,value:n.value,class:Ge({active:n.value===B.value})},{default:t(()=>[F("span",null,c(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(R,{content:a.$t("actions.density")},{default:t(()=>[F("div",Ut,[e(Ce,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(R,{content:a.$t("actions.column_setting")},{default:t(()=>[e(Ie,{trigger:"click",position:"bl",onPopupVisibleChange:be},{content:t(()=>[F("div",Lt,[(i(!0),f(ae,null,le(m.value,(n,y)=>(i(),f("div",{key:n.dataIndex,class:"setting"},[F("div",At,[e(Fe)]),F("div",null,[e(Se,{modelValue:n.checked,"onUpdate:modelValue":j=>n.checked=j,onChange:j=>ge(j,n,y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),F("div",Pt,c(n.title==="#"?"\u5E8F\u5217\u53F7":n.title),1)]))),128))])]),default:t(()=>[F("div",qt,[e(De,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ze,{ref_key:"tableRef",ref:P,"row-key":"id",loading:u(b),pagination:U,columns:r.value,data:C.value,bordered:!1,size:B.value,"row-selection":g,onPageChange:de,onPageSizeChange:pe,onSelectionChange:he},{is_public:t(({record:n})=>[e(ee,{modelValue:n.is_public,"onUpdate:modelValue":y=>n.is_public=y,"checked-value":!0,"unchecked-value":!1,onChange:y=>_e({id:`${n.id}`,is_public:`${n.is_public}`})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),status:t(({record:n})=>[e(ee,{modelValue:n.status,"onUpdate:modelValue":y=>n.status=y,"checked-value":1,"unchecked-value":2,onChange:y=>fe({id:`${n.id}`,status:Number(`${n.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),remark:t(({record:n})=>[_(c(n.remark||"-"),1)]),operations:t(({record:n})=>[e(w,{type:"text",size:"small",onClick:y=>ye(n.id)},{default:t(()=>[_(c(a.$t("operations.view")),1)]),_:2},1032,["onClick"]),e(w,{type:"text",size:"small",onClick:y=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:`${n.id}`,action:"copy"}})},{default:t(()=>[_(c(a.$t("notice.template.columns.operations.copy")),1)]),_:2},1032,["onClick"]),e(w,{type:"text",size:"small",onClick:y=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:`${n.id}`}})},{default:t(()=>[_(c(a.$t("notice.template.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(Ne,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:y=>k({id:`${n.id}`})},{default:t(()=>[e(w,{type:"text",size:"small"},{default:t(()=>[_(c(a.$t("notice.template.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(Te,{title:a.$t("menu.notice.template.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:O.value,onCancel:ke},{default:t(()=>[e(Bt,{id:Q.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const ma=Pe(Ot,[["__scopeId","data-v-237f7970"]]);export{ma as default};

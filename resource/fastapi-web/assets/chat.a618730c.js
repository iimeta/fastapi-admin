import{u as We,_ as Xe,J as xt,s as Ct,A as Ft,k as It,B as Vt}from"./index.801a426f.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Be,e as k,w as Ee,B as t,C as p,aH as a,aG as e,aL as s,aM as l,u as c,aD as u,aE as q,aJ as W,bM as Ze,bS as et,bn as y,g as tt,bA as Dt,bB as Nt,ad as Bt,bC as Et,bD as at,bE as St,bi as lt,bb as At,b6 as qt,a_ as nt,r as Je,c as De,bs as Ut,b as Mt,aI as ue,D as Y,E as zt,n as Lt,aK as Tt,aF as jt,bF as Pt,bG as Ht,b2 as Rt,bH as Ot,b1 as Yt,aS as Gt,bT as Jt,bI as Kt,b5 as Qt,bJ as Wt,ab as Xt,aU as Zt,bj as ea,bk as ta,bl as aa,b4 as la,bK as na,aV as oa,bN as sa}from"./arco.cbac690a.js";import{u as ot}from"./loading.b56ef223.js";import{q as F,a as Ke}from"./common.4090c8c2.js";import{V as Qe,q as ua,c as ia,a as da,s as ra,b as ca}from"./styles.19b48c11.js";import{f as _a}from"./app.c489a9ea.js";import{b as ma}from"./dashboard.1b01eb12.js";import{c as Ne,S as pa}from"./sortable.esm.59243d4c.js";import{q as fa}from"./model.c95dca29.js";import{f as ha}from"./agent.e5adab00.js";/* empty css               *//* empty css                *//* empty css                */import{u as va}from"./vue.4014b72a.js";import"./chart.e521dee8.js";const ka={name:"SpendDetail"},st=Be({...ka,props:{modelValue:null,modelType:null},setup(X){const Z=X,{t:i}=We(),m=k(Z.modelValue),d=k([]),D=k([{title:i("chat.columns.spend.total_spend_tokens"),headerCellStyle:{background:"#ffffff"}}]),G=k([]),ee=k([{title:i("chat.columns.spend.text"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:100},{title:i("chat.columns.spend.input_ratio"),dataIndex:"input_ratio",slotName:"input_ratio",align:"center",width:100},{title:i("chat.columns.spend.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:100},{title:i("chat.columns.spend.output_ratio"),dataIndex:"output_ratio",slotName:"output_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),g=k([]),L=k([{title:i("chat.columns.spend.text_cache"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.read_tokens"),dataIndex:"read_tokens",slotName:"read_tokens",align:"center",width:100},{title:i("chat.columns.spend.read_ratio"),dataIndex:"read_ratio",slotName:"read_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),T=k([]),H=k([{title:i("chat.columns.spend.audio"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:100},{title:i("chat.columns.spend.input_ratio"),dataIndex:"input_ratio",slotName:"input_ratio",align:"center",width:100},{title:i("chat.columns.spend.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:100},{title:i("chat.columns.spend.output_ratio"),dataIndex:"output_ratio",slotName:"output_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),U=k([]),te=k([{title:i("chat.columns.spend.audio_cache"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.read_tokens"),dataIndex:"read_tokens",slotName:"read_tokens",align:"center",width:100},{title:i("chat.columns.spend.read_ratio"),dataIndex:"read_ratio",slotName:"read_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),P=k([]),x=k([{title:i("chat.columns.spend.tiered_text"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.mode"),dataIndex:"mode",slotName:"mode",align:"center",width:100},{title:i("chat.columns.spend.tiered.input_tokens"),dataIndex:"gt",slotName:"gt",align:"center",width:100},{title:i("chat.columns.spend.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:100},{title:i("chat.columns.spend.tiered.input_ratio"),dataIndex:"input_ratio",slotName:"input_ratio",align:"center",width:100},{title:i("chat.columns.spend.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:100},{title:i("chat.columns.spend.tiered.output_ratio"),dataIndex:"output_ratio",slotName:"output_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),C=k([]),h=k([{title:i("chat.columns.spend.tiered_text_cache"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.mode"),dataIndex:"mode",slotName:"mode",align:"center",width:100},{title:i("chat.columns.spend.tiered.input_tokens"),dataIndex:"gt",slotName:"gt",align:"center",width:100},{title:i("chat.columns.spend.read_tokens"),dataIndex:"read_tokens",slotName:"read_tokens",align:"center",width:100},{title:i("chat.columns.spend.tiered.read_ratio"),dataIndex:"read_ratio",slotName:"read_ratio",align:"center",width:100},{title:i("chat.columns.spend.write_tokens"),dataIndex:"write_tokens",slotName:"write_tokens",align:"center",width:100},{title:i("chat.columns.spend.tiered.write_ratio"),dataIndex:"write_ratio",slotName:"write_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),v=k([]),j=k([{title:i("chat.columns.spend.image"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:100},{title:i("chat.columns.spend.input_ratio"),dataIndex:"input_ratio",slotName:"input_ratio",align:"center",width:100},{title:i("chat.columns.spend.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:100},{title:i("chat.columns.spend.output_ratio"),dataIndex:"output_ratio",slotName:"output_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),f=k([]),b=k([{title:i("chat.columns.spend.image_generation"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.image.generation.quality"),dataIndex:"quality",slotName:"quality",align:"center",width:100},{title:i("chat.columns.spend.image.generation.width_height"),dataIndex:"width",slotName:"width",align:"center",width:100},{title:i("chat.columns.spend.image.generation.n"),dataIndex:"n",slotName:"n",align:"center",width:100},{title:i("chat.columns.spend.image.generation.once_ratio"),dataIndex:"once_ratio",slotName:"once_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),R=k([]),ae=k([{title:i("chat.columns.spend.image_cache"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.read_tokens"),dataIndex:"read_tokens",slotName:"read_tokens",align:"center",width:100},{title:i("chat.columns.spend.read_ratio"),dataIndex:"read_ratio",slotName:"read_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),K=k([]),le=k([{title:i("chat.columns.spend.vision"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.mode"),dataIndex:"mode",slotName:"mode",align:"center",width:100},{title:i("chat.columns.spend.vision.once_ratio"),dataIndex:"once_ratio",slotName:"once_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),ne=k([]),J=k([{title:i("chat.columns.spend.video"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.video.width_height"),dataIndex:"width",slotName:"width",align:"center",width:100},{title:i("chat.columns.spend.video.once_ratio"),dataIndex:"once_ratio",slotName:"once_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),I=k([]),M=k([{title:i("chat.columns.spend.search"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.search.context_size"),dataIndex:"context_size",slotName:"context_size",align:"center",width:100},{title:i("chat.columns.spend.search.once_ratio"),dataIndex:"once_ratio",slotName:"once_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),ge=k([]),ie=k([{title:i("chat.columns.spend.midjourney"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.midjourney.name"),dataIndex:"name",slotName:"name",align:"center",width:100},{title:i("chat.columns.spend.midjourney.action"),dataIndex:"action",slotName:"action",align:"center",width:100},{title:i("chat.columns.spend.midjourney.path"),dataIndex:"path",slotName:"path",align:"center",width:100},{title:i("chat.columns.spend.once_ratio"),dataIndex:"once_ratio",slotName:"once_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),ye=k([]),pe=k([{title:i("chat.columns.spend.once"),headerCellStyle:{background:"#ffffff"},children:[{title:i("chat.columns.spend.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:100},{title:i("chat.columns.spend.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:100},{title:i("chat.columns.spend.once_ratio"),dataIndex:"once_ratio",slotName:"once_ratio",align:"center",width:100},{title:i("chat.columns.spend.spend_tokens"),dataIndex:"spend_tokens",slotName:"spend_tokens",align:"center",width:100}]}]),Se=()=>{d.value[0]=m.value,D.value[0].children=[],m.value.billing_items.includes("text")&&m.value.text&&(G.value[0]=m.value.text,D.value[0].children.push({title:i("chat.columns.spend.text"),dataIndex:"text",slotName:"text",align:"center",width:100})),m.value.billing_items.includes("text_cache")&&m.value.text_cache&&(g.value[0]=m.value.text_cache,D.value[0].children.push({title:i("chat.columns.spend.text_cache"),dataIndex:"text_cache",slotName:"text_cache",align:"center",width:100})),m.value.billing_items.includes("audio")&&m.value.audio&&(T.value[0]=m.value.audio,D.value[0].children.push({title:i("chat.columns.spend.audio"),dataIndex:"audio",slotName:"audio",align:"center",width:100})),m.value.billing_items.includes("audio_cache")&&m.value.audio_cache&&(U.value[0]=m.value.audio_cache,D.value[0].children.push({title:i("chat.columns.spend.audio_cache"),dataIndex:"audio_cache",slotName:"audio_cache",align:"center",width:100})),m.value.billing_items.includes("tiered_text")&&m.value.tiered_text&&(P.value[0]=m.value.tiered_text,D.value[0].children.push({title:i("chat.columns.spend.tiered_text"),dataIndex:"tiered_text",slotName:"tiered_text",align:"center",width:100})),m.value.billing_items.includes("tiered_text_cache")&&m.value.tiered_text_cache&&(C.value[0]=m.value.tiered_text_cache,D.value[0].children.push({title:i("chat.columns.spend.tiered_text_cache"),dataIndex:"tiered_text_cache",slotName:"tiered_text_cache",align:"center",width:100})),m.value.billing_items.includes("image")&&m.value.image&&(v.value[0]=m.value.image,D.value[0].children.push({title:i("chat.columns.spend.image"),dataIndex:"image",slotName:"image",align:"center",width:100})),m.value.billing_items.includes("image_generation")&&m.value.image_generation&&(f.value[0]=m.value.image_generation,D.value[0].children.push({title:i("chat.columns.spend.image_generation"),dataIndex:"image_generation",slotName:"image_generation",align:"center",width:100})),m.value.billing_items.includes("image_cache")&&m.value.image_cache&&(R.value[0]=m.value.image_cache,D.value[0].children.push({title:i("chat.columns.spend.image_cache"),dataIndex:"image_cache",slotName:"image_cache",align:"center",width:100})),m.value.billing_items.includes("vision")&&m.value.vision&&(K.value[0]=m.value.vision,D.value[0].children.push({title:i("chat.columns.spend.vision"),dataIndex:"vision",slotName:"vision",align:"center",width:100})),m.value.billing_items.includes("video")&&m.value.video&&(ne.value[0]=m.value.video,D.value[0].children.push({title:i("chat.columns.spend.video"),dataIndex:"video",slotName:"video",align:"center",width:100})),m.value.billing_items.includes("search")&&m.value.search&&(I.value[0]=m.value.search,D.value[0].children.push({title:i("chat.columns.spend.search"),dataIndex:"search",slotName:"search",align:"center",width:100})),m.value.billing_items.includes("midjourney")&&m.value.midjourney&&(ge.value[0]=m.value.midjourney,D.value[0].children.push({title:i("chat.columns.spend.midjourney"),dataIndex:"midjourney",slotName:"midjourney",align:"center",width:100})),m.value.billing_items.includes("once")&&m.value.once&&(ye.value[0]=m.value.once,D.value[0].children.push({title:i("chat.columns.spend.once"),dataIndex:"once",slotName:"once",align:"center",width:100})),D.value[0].children.push({title:i("chat.columns.spend.group_discount"),dataIndex:"group_discount",slotName:"group_discount",align:"center",width:100}),D.value[0].children.push({title:i("chat.columns.spend.total_spend_tokens"),dataIndex:"total_spend_tokens",slotName:"total_spend_tokens",align:"center",width:100})};return Ee(()=>Z.modelValue,O=>{m.value=O,Se()},{deep:!0,immediate:!0}),(O,fe)=>{const B=Ze;return t(),p(W,null,[a(B,{columns:D.value,data:d.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{text:e(({record:n})=>[s(" $"+l(n.text.spend_tokens?`${c(F)(n.text.spend_tokens)}`:"0.00"),1)]),text_cache:e(({record:n})=>[s(" $"+l(n.text_cache.spend_tokens?`${c(F)(n.text_cache.spend_tokens)}`:"0.00"),1)]),audio:e(({record:n})=>[s(" $"+l(n.audio.spend_tokens?`${c(F)(n.audio.spend_tokens)}`:"0.00"),1)]),audio_cache:e(({record:n})=>[s(" $"+l(n.audio_cache.spend_tokens?`${c(F)(n.audio_cache.spend_tokens)}`:"0.00"),1)]),tiered_text:e(({record:n})=>[s(" $"+l(n.tiered_text.spend_tokens?`${c(F)(n.tiered_text.spend_tokens)}`:"0.00"),1)]),tiered_text_cache:e(({record:n})=>[s(" $"+l(n.tiered_text_cache.spend_tokens?`${c(F)(n.tiered_text_cache.spend_tokens)}`:"0.00"),1)]),image:e(({record:n})=>[s(" $"+l(n.image.spend_tokens?`${c(F)(n.image.spend_tokens)}`:"0.00"),1)]),image_generation:e(({record:n})=>[s(" $"+l(n.image_generation.spend_tokens?`${c(F)(n.image_generation.spend_tokens)}`:"0.00"),1)]),image_cache:e(({record:n})=>[s(" $"+l(n.image_cache.spend_tokens?`${c(F)(n.image_cache.spend_tokens)}`:"0.00"),1)]),vision:e(({record:n})=>[s(" $"+l(n.vision.spend_tokens?`${c(F)(n.vision.spend_tokens)}`:"0.00"),1)]),video:e(({record:n})=>[s(" $"+l(n.video.spend_tokens?`${c(F)(n.video.spend_tokens)}`:"0.00"),1)]),search:e(({record:n})=>[s(" $"+l(n.search.spend_tokens?`${c(F)(n.search.spend_tokens)}`:"0.00"),1)]),midjourney:e(({record:n})=>[s(" $"+l(n.midjourney.spend_tokens?`${c(F)(n.midjourney.spend_tokens)}`:"0.00"),1)]),once:e(({record:n})=>[s(" $"+l(n.once.spend_tokens?`${c(F)(n.once.spend_tokens)}`:"0.00"),1)]),group_discount:e(({record:n})=>[s(l(n.group_discount>0?Number((n.group_discount*100).toFixed(2))+"%":"-"),1)]),total_spend_tokens:e(({record:n})=>[s(" $"+l(n.total_spend_tokens?`${c(F)(n.total_spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"]),m.value.billing_items.includes("text")?(t(),u(B,{key:0,columns:ee.value,data:G.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{input_tokens:e(({record:n})=>[s(l(n.input_tokens||"0"),1)]),input_ratio:e(({record:n})=>[s(" $"+l(n.pricing.input_ratio||"0.00")+" / M ",1)]),output_tokens:e(({record:n})=>[s(l(n.output_tokens||"0"),1)]),output_ratio:e(({record:n})=>[s(" $"+l(n.pricing.output_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("text_cache")?(t(),u(B,{key:1,columns:L.value,data:g.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{read_tokens:e(({record:n})=>[s(l(n.read_tokens||"0"),1)]),read_ratio:e(({record:n})=>[s(" $"+l(n.pricing.read_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("audio")?(t(),u(B,{key:2,columns:H.value,data:T.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{input_tokens:e(({record:n})=>[s(l(n.input_tokens||"0"),1)]),input_ratio:e(({record:n})=>[s(" $"+l(n.pricing.input_ratio||"0.00")+" / M ",1)]),output_tokens:e(({record:n})=>[s(l(n.output_tokens||"0"),1)]),output_ratio:e(({record:n})=>[s(" $"+l(n.pricing.output_ratio||"0.00")+" "+l(X.modelType===5||X.modelType===6?"/ min":"/ M"),1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("audio_cache")?(t(),u(B,{key:3,columns:te.value,data:U.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{read_tokens:e(({record:n})=>[s(l(n.read_tokens||"0"),1)]),read_ratio:e(({record:n})=>[s(" $"+l(n.pricing.read_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("tiered_text")?(t(),u(B,{key:4,columns:x.value,data:P.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{mode:e(({record:n})=>[s(l(O.$t(`model.dict.mode.${n.pricing.mode}`)),1)]),gt:e(({record:n})=>[s(l(n.pricing.gt)+"k - "+l(n.pricing.lte)+"k ",1)]),input_tokens:e(({record:n})=>[s(l(n.input_tokens||"0"),1)]),input_ratio:e(({record:n})=>[s(" $"+l(n.pricing.input_ratio||"0.00")+" / M ",1)]),output_tokens:e(({record:n})=>[s(l(n.output_tokens||"0"),1)]),output_ratio:e(({record:n})=>[s(" $"+l(n.pricing.output_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("tiered_text_cache")?(t(),u(B,{key:5,columns:h.value,data:C.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{mode:e(({record:n})=>[s(l(O.$t(`model.dict.mode.${n.pricing.mode}`)),1)]),gt:e(({record:n})=>[s(l(n.pricing.gt)+"k - "+l(n.pricing.lte)+"k ",1)]),read_tokens:e(({record:n})=>[s(l(n.read_tokens||"0"),1)]),read_ratio:e(({record:n})=>[s(" $"+l(n.pricing.read_ratio||"0.00")+" / M ",1)]),write_tokens:e(({record:n})=>[s(l(n.write_tokens||"0"),1)]),write_ratio:e(({record:n})=>[s(" $"+l(n.pricing.write_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("image")?(t(),u(B,{key:6,columns:j.value,data:v.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{input_tokens:e(({record:n})=>[s(l(n.input_tokens||"0"),1)]),input_ratio:e(({record:n})=>[s(" $"+l(n.pricing.input_ratio||"0.00")+" / M ",1)]),output_tokens:e(({record:n})=>[s(l(n.output_tokens||"0"),1)]),output_ratio:e(({record:n})=>[s(" $"+l(n.pricing.output_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("image_generation")?(t(),u(B,{key:7,columns:b.value,data:f.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{quality:e(({record:n})=>[s(l(n.pricing.quality||"-"),1)]),width:e(({record:n})=>[s(l(n.pricing.width)+" \xD7 "+l(n.pricing.height),1)]),n:e(({record:n})=>[s(l(n.n||"0"),1)]),once_ratio:e(({record:n})=>[s(" $"+l(n.pricing.once_ratio||"0.00")+" / \u5F20 ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("image_cache")?(t(),u(B,{key:8,columns:ae.value,data:R.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{read_tokens:e(({record:n})=>[s(l(n.read_tokens||"0"),1)]),read_ratio:e(({record:n})=>[s(" $"+l(n.pricing.read_ratio||"0.00")+" / M ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("vision")?(t(),u(B,{key:9,columns:le.value,data:K.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{mode:e(({record:n})=>[s(l(n.pricing.mode),1)]),once_ratio:e(({record:n})=>[s(" $"+l(n.pricing.once_ratio||"0.00")+" / \u5F20 ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("video")?(t(),u(B,{key:10,columns:J.value,data:ne.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{width:e(({record:n})=>[s(l(n.pricing.width)+" \xD7 "+l(n.pricing.height),1)]),once_ratio:e(({record:n})=>[s(" $"+l(n.pricing.once_ratio||"0.00")+" / \u79D2 ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("search")?(t(),u(B,{key:11,columns:M.value,data:I.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{context_size:e(({record:n})=>[s(l(n.pricing.context_size),1)]),once_ratio:e(({record:n})=>[s(" $"+l(n.pricing.once_ratio||"0.00")+" / \u6B21 ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("midjourney")?(t(),u(B,{key:12,columns:ie.value,data:ge.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{name:e(({record:n})=>[s(l(n.pricing.name),1)]),action:e(({record:n})=>[s(l(n.pricing.action),1)]),path:e(({record:n})=>[s(l(n.pricing.path),1)]),once_ratio:e(({record:n})=>[s(" $"+l(n.pricing.once_ratio||"0.00")+" / \u6B21 ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0),m.value.billing_items.includes("once")?(t(),u(B,{key:13,columns:pe.value,data:ye.value,pagination:!1,bordered:!1,style:{"margin-bottom":"15px"}},{input_tokens:e(({record:n})=>[s(l(n.input_tokens||"0"),1)]),output_tokens:e(({record:n})=>[s(l(n.output_tokens||"0"),1)]),once_ratio:e(({record:n})=>[s(" $"+l(n.pricing.once_ratio||"0.00")+" / \u6B21 ",1)]),spend_tokens:e(({record:n})=>[s(" $"+l(n.spend_tokens?`${c(F)(n.spend_tokens)}`:"0.00"),1)]),_:1},8,["columns","data"])):q("",!0)],64)}}}),ga={style:{margin:"10px 0 30px 10px"}},ya={key:1},ba={key:1},wa={key:1},$a={key:1},xa={key:1},Ca={key:1},Fa={key:1},Ia={key:1},Va={key:1},Da={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Na={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ba={key:1},Ea={key:1},Sa={key:1},Aa={key:1},qa={key:1},Ua={key:1},Ma={key:1},za={key:1},La={key:1},Ta={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},ja={key:1},Pa={key:1},Ha={key:1},Ra={key:1},Oa={key:1},Ya={key:1},Ga={key:1},Ja={key:1},Ka={key:1},Qa={key:1},Wa={key:1},Xa={key:1},Za={key:1},el={key:1},tl={key:1},al={key:1},ll={key:1},nl={key:1},ol={key:1},sl={key:1},ul={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},il={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},dl={key:1},rl={key:1},cl={key:1},_l={key:1},ml={key:1},pl={key:1},fl={key:1},hl={key:1},vl={key:1},kl={key:1},gl={key:1},yl={key:1},bl={key:1},wl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},$l={key:1},xl={key:1},Cl={name:"ChatDetail"},Fl=Be({...Cl,props:{id:{type:String,default:""}},setup(X){const Z=X,{loading:i,setLoading:m}=ot(!0),d=k({}),{copy:D,copied:G}=va(),{proxy:ee}=tt();(async(x={id:Z.id})=>{m(!0);try{const{data:C}=await ua(x);d.value=C}catch{}finally{m(!1)}})();const L=x=>{D(x)};Ee(G,()=>{G.value&&ee.$message.success("\u590D\u5236\u6210\u529F")});const T=async(x,C)=>{const{data:h}=await ia({id:x,field:C});D(h.value)},H=k(!1),U=k(),te=k(),P=async(x,C)=>{H.value=!0,U.value=x,te.value=C};return(x,C)=>{const h=Dt,v=Nt,j=Bt,f=Et,b=at,R=St,ae=lt,K=At,le=qt,ne=nt,J=et("permission");return t(),p("div",ga,[y((t(),u(R,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[a(f,{label:"Trace ID",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",ya,[s(l(d.value.trace_id)+" ",1),a(j,{class:"copy-btn",onClick:C[0]||(C[0]=I=>L(d.value.trace_id))})]))]),_:1}),a(f,{label:"Host",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",ba,l(d.value.host||"-"),1))]),_:1}),a(f,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",wa,[s(l(d.value.creator)+" ",1),a(j,{class:"copy-btn",onClick:C[1]||(C[1]=I=>T(d.value.id,"creator"))})]))]),_:1}),a(f,{label:"\u7528\u6237ID"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",$a,l(d.value.user_id||"-"),1))]),_:1}),a(f,{label:"\u5E94\u7528ID"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",xa,l(d.value.app_id||"-"),1))]),_:1}),a(f,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ca,l(d.value.provider_name),1))]),_:1}),a(f,{label:"\u6A21\u578B"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Fa,l(d.value.model||"-"),1))]),_:1}),a(f,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ia,l(x.$t(`dict.model_type.${d.value.model_type}`)),1))]),_:1}),a(f,{label:"\u6D41\u5F0F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Va,l(x.$t(`chat.dict.stream.${d.value.stream||!1}`)),1))]),_:1}),a(f,{label:"\u63D0\u95EE",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Da,l(d.value.prompt||"-"),1))]),_:1}),a(f,{label:"\u56DE\u7B54",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Na,l(d.value.completion||"-"),1))]),_:1}),a(f,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ba,l(d.value.spend.group_name||"-"),1))]),_:1}),a(f,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ea,l(d.value.spend.group_discount>0?Number((d.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),a(f,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Sa,l(x.$t(`model.dict.billing_methods.${d.value.spend.billing_methods}`)),1))]),_:1}),a(f,{label:"\u603B\u82B1\u8D39"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",{key:1,class:"spend",onClick:C[2]||(C[2]=I=>P(d.value.spend,d.value.model_type))},l(d.value.spend.total_spend_tokens?`$${c(F)(d.value.spend.total_spend_tokens)}`:d.value.status===1?"$0.00":"-"),1))]),_:1}),a(f,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Aa,[d.value.conn_time>3e4?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.conn_time)+" ms ",1)]),_:1})):d.value.conn_time>15e3?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.conn_time)+" ms ",1)]),_:1})):d.value.conn_time>5e3?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.conn_time)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",qa,[d.value.duration>18e4?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.duration)+" ms ",1)]),_:1})):d.value.duration>12e4?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.duration)+" ms ",1)]),_:1})):d.value.duration>9e4?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.duration)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u603B\u8017\u65F6"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ua,[d.value.total_time>18e4?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.total_time)+" ms ",1)]),_:1})):d.value.total_time>12e4?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.total_time)+" ms ",1)]),_:1})):d.value.total_time>9e4?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.total_time)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u7ED3\u679C"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ma,[d.value.status===1?(t(),u(b,{key:0,color:"green"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1})):d.value.status===2?(t(),u(b,{key:1,color:"gold"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1})):d.value.status===3?(t(),u(b,{key:2,color:"orange"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1})):(t(),u(b,{key:3,color:"red"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1}))]))]),_:1}),a(f,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",za,l(d.value.client_ip||"-"),1))]),_:1}),a(f,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",La,l(d.value.req_time||"-"),1))]),_:1}),a(f,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ta,l(d.value.err_msg||"-"),1))]),_:1})]),_:1})),[[J,["reseller","user"]]]),y((t(),u(R,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[a(f,{label:"Trace ID",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",ja,[s(l(d.value.trace_id)+" ",1),a(j,{class:"copy-btn",onClick:C[3]||(C[3]=I=>L(d.value.trace_id))})]))]),_:1}),a(f,{label:"Host",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Pa,l(d.value.host||"-"),1))]),_:1}),a(f,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ha,[s(l(d.value.is_smart_match?"-":d.value.creator)+" ",1),d.value.is_smart_match?q("",!0):(t(),u(j,{key:0,class:"copy-btn",onClick:C[4]||(C[4]=I=>T(d.value.id,"creator"))}))]))]),_:1}),a(f,{label:"\u7528\u6237ID"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Ra,l(d.value.is_smart_match?"-":d.value.user_id||"-"),1))]),_:1}),a(f,{label:"\u5E94\u7528ID"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Oa,l(d.value.is_smart_match?"-":d.value.app_id||"-"),1))]),_:1}),a(f,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ya,l(d.value.provider_name),1))]),_:1}),a(f,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ga,l(x.$t(`dict.model_type.${d.value.model_type}`)),1))]),_:1}),a(f,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",Ja,l(d.value.model_name||"-"),1))]),_:1}),a(f,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Ka,l(d.value.model||"-"),1))]),_:1}),a(f,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Qa,l(d.value.real_model_name),1))]),_:1}),a(f,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Wa,l(d.value.real_model),1))]),_:1}),a(f,{label:"\u6D41\u5F0F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Xa,l(x.$t(`chat.dict.stream.${d.value.stream||!1}`)),1))]),_:1}),a(f,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",Za,l(x.$t(`chat.dict.is_enable_fallback.${d.value.is_enable_fallback||!1}`)),1))]),_:1}),a(f,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var I,M;return[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",el,l(((M=(I=d.value)==null?void 0:I.fallback_config)==null?void 0:M.model_agent_name)||"-"),1))]}),_:1}),a(f,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var I,M;return[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",tl,l(((M=(I=d.value)==null?void 0:I.fallback_config)==null?void 0:M.model)||"-"),1))]}),_:1}),a(f,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",al,l(x.$t(`chat.dict.is_enable_forward.${d.value.is_enable_forward||!1}`)),1))]),_:1}),a(f,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",ll,l(d.value.is_enable_forward?x.$t(`chat.dict.forward_rule.${d.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),a(f,{label:"\u542F\u7528\u4EE3\u7406"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",nl,l(x.$t(`chat.dict.is_enable_model_agent.${d.value.is_enable_model_agent||!1}`)),1))]),_:1}),a(f,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var I,M;return[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",ol,l(((M=(I=d.value)==null?void 0:I.model_agent)==null?void 0:M.name)||"-"),1))]}),_:1}),a(f,{label:"\u5BC6\u94A5",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",sl,[s(l(d.value.key?d.value.key.length>0?d.value.key.substr(0,d.value.key.length/2>10?10:d.value.key.length/2)+"************************************"+d.value.key.substr(-(d.value.key.length/2>5?5:d.value.key.length/2)):d.value.key:"-")+" ",1),a(j,{class:"copy-btn",onClick:C[5]||(C[5]=I=>T(d.value.id,"key"))})]))]),_:1}),a(f,{label:"\u63D0\u95EE",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",ul,l(d.value.prompt||"-"),1))]),_:1}),a(f,{label:"\u56DE\u7B54",span:2},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",il,l(d.value.completion||"-"),1))]),_:1}),a(f,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",dl,l(d.value.spend.group_name||"-"),1))]),_:1}),a(f,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",rl,l(d.value.spend.group_discount>0?Number((d.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),a(f,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",cl,l(x.$t(`model.dict.billing_methods.${d.value.spend.billing_methods}`)),1))]),_:1}),a(f,{label:"\u603B\u82B1\u8D39"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",{key:1,class:"spend",onClick:C[6]||(C[6]=I=>P(d.value.spend,d.value.model_type))},l(d.value.spend.total_spend_tokens?`$${c(F)(d.value.spend.total_spend_tokens)}`:d.value.status===1?"$0.00":"-"),1))]),_:1}),a(f,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",_l,[d.value.conn_time>1e4?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.conn_time)+" ms ",1)]),_:1})):d.value.conn_time>5e3?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.conn_time)+" ms ",1)]),_:1})):d.value.conn_time>3e3?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.conn_time)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",ml,[d.value.duration>12e4?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.duration)+" ms ",1)]),_:1})):d.value.duration>9e4?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.duration)+" ms ",1)]),_:1})):d.value.duration>6e4?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.duration)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u603B\u8017\u65F6"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",pl,[d.value.total_time>12e4?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.total_time)+" ms ",1)]),_:1})):d.value.total_time>9e4?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.total_time)+" ms ",1)]),_:1})):d.value.total_time>6e4?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.total_time)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u5185\u8017"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",fl,[d.value.internal_time>500?(t(),u(b,{key:0,color:"red"},{default:e(()=>[s(l(d.value.internal_time)+" ms ",1)]),_:1})):d.value.internal_time>300?(t(),u(b,{key:1,color:"orange"},{default:e(()=>[s(l(d.value.internal_time)+" ms ",1)]),_:1})):d.value.internal_time>100?(t(),u(b,{key:2,color:"gold"},{default:e(()=>[s(l(d.value.internal_time)+" ms ",1)]),_:1})):(t(),u(b,{key:3,color:"green"},{default:e(()=>[s(l(d.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(f,{label:"\u7ED3\u679C"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",hl,[d.value.status===1?(t(),u(b,{key:0,color:"green"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1})):d.value.status===2?(t(),u(b,{key:1,color:"gold"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1})):d.value.status===3?(t(),u(b,{key:2,color:"orange"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1})):(t(),u(b,{key:3,color:"red"},{default:e(()=>[s(l(x.$t(`chat.dict.status.${d.value.status}`)),1)]),_:1}))]))]),_:1}),a(f,{label:"\u672C\u5730IP"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",vl,l(d.value.local_ip||"-"),1))]),_:1}),a(f,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",kl,l(d.value.client_ip||"-"),1))]),_:1}),a(f,{label:"\u8FDC\u7A0BIP"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",gl,l(d.value.remote_ip||"-"),1))]),_:1}),a(f,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",yl,l(d.value.req_time||"-"),1))]),_:1}),a(f,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{widths:["200px"],rows:1})]),_:1})):(t(),p("span",bl,l(d.value.created_at||"-"),1))]),_:1}),a(f,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:1})]),_:1})):(t(),p("span",wl,l(d.value.err_msg||"-"),1))]),_:1})]),_:1})),[[J,["admin"]]]),a(R,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[a(f,null,{default:e(()=>[a(le,{type:"card"},{default:e(()=>[a(K,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:3})]),_:1})):(t(),u(ae,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[d.value.messages?(t(),u(c(Qe),{key:0,path:"res",data:d.value.messages,"show-length":!0},null,8,["data"])):(t(),p("span",$l,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),y((t(),u(R,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[a(f,null,{default:e(()=>[a(le,{type:"card"},{default:e(()=>[a(K,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[c(i)?(t(),u(v,{key:0,animation:!0},{default:e(()=>[a(h,{rows:3})]),_:1})):(t(),u(ae,{key:1},{default:e(()=>[d.value.model_agent?(t(),u(c(Qe),{key:0,data:d.value.model_agent,"show-length":!0},null,8,["data"])):(t(),p("span",xl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[J,["admin"]]]),a(ne,{visible:H.value,"onUpdate:visible":C[8]||(C[8]=I=>H.value=I),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[a(st,{modelValue:U.value,"onUpdate:modelValue":C[7]||(C[7]=I=>U.value=I),"model-type":te.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])])}}});const Il=Xe(Fl,[["__scopeId","data-v-4d9884f3"]]),Vl={class:"container"},Dl={class:"action-icon"},Nl={class:"action-icon"},Bl={id:"tableSetting"},El={style:{"margin-right":"4px",cursor:"move"}},Sl={class:"title"},Al=["onClick"],ql={name:"ChatList"},Ul=Be({...ql,setup(X){const{loading:Z,setLoading:i}=ot(!0),{t:m}=We(),d=localStorage.getItem("userRole"),D=Je({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),G=()=>({app_id:k(),trace_id:k(),user_id:k(),key:"",models:[],model_agents:[],total_time:k(),status:k(),req_time:[Ke().format("YYYY-MM-DD 00:00:00"),Ke().format("YYYY-MM-DD 23:59:59")]}),ee=k([]),g=k(G()),L=k([]),T=k([]),H=k("medium"),U=k([]),te=k(!0),P=k(),x={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},C=Je({...x}),h=De(()=>[{name:m("size.mini"),value:"mini"},{name:m("size.small"),value:"small"},{name:m("size.medium"),value:"medium"},{name:m("size.large"),value:"large"}]),v=De(()=>[{title:m(d==="reseller"||d==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:d==="reseller"||d==="admin"?"user_id":"app_id",slotName:d==="reseller"||d==="admin"?"user_id":"app_id",align:"center",width:75},{title:m("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:m("chat.columns.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:75},{title:m("chat.columns.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:75},{title:m("chat.columns.total_spend_tokens"),dataIndex:"total_spend_tokens",slotName:"total_spend_tokens",align:"center"},{title:m("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:m("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:m("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:m("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center"},{title:m("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:m("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:m("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:m("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);(d==="reseller"||d==="user")&&v.value.splice(9,1);const j=De(()=>[{label:m("chat.dict.status.1"),value:1},{label:m("chat.dict.status.2"),value:2},{label:m("chat.dict.status.-1"),value:-1}]);d==="admin"&&j.value.push({label:m("chat.dict.status.3"),value:3},{label:m("chat.dict.status.-100"),value:-100});const f=async(r={...x,...g.value})=>{i(!0);try{const{data:_}=await da(r);ee.value=_.items,C.current=r.current,C.pageSize=r.pageSize,C.total=_.paging.total}catch{}finally{i(!1),P.value.selectAll(!1)}};f();const b=()=>{f({...x,...g.value})},R=r=>{f({...x,...g.value,current:r})},ae=r=>{x.pageSize=r,f({...x,...g.value})},K=()=>{g.value=G(),b()},le=(r,_)=>{H.value=r},ne=(r,_,E)=>{r?L.value.splice(E,0,_):L.value=T.value.filter(z=>z.dataIndex!==_.dataIndex)},J=(r,_,E,z=!1)=>{const A=z?Ne(r):r;return _>-1&&E>-1&&A.splice(_,1,A.splice(E,1,A[_]).pop()),A},I=r=>{r&&Lt(()=>{const _=document.getElementById("tableSetting");new pa(_,{onEnd(E){const{oldIndex:z,newIndex:A}=E;J(L.value,z,A),J(T.value,z,A)}})})};Ee(()=>v.value,r=>{L.value=Ne(r),L.value.forEach((_,E)=>{_.checked=!0}),T.value=Ne(L.value)},{deep:!0,immediate:!0});const M=k([]);d==="user"&&(async()=>{try{const{data:r}=await _a();M.value=r.items}catch{}})();const ie=k([]);(async()=>{try{const{data:r}=await fa();ie.value=r.items}catch{}})();const pe=k([]);d==="admin"&&(async()=>{try{const{data:r}=await ha();pe.value=r.items}catch{}})();const{proxy:O}=tt(),fe=k(!1),B=k(),n=r=>{fe.value=!0,B.value=r},ut=()=>{fe.value=!1},Ae=k(0),qe=k(0),Ue=async(r={...g.value})=>{const{data:_}=await ma(r);Ae.value=_.rpm,qe.value=_.tpm};Ue();let Me;const ze=()=>{clearInterval(Me)},Le=()=>{Me=setInterval(Ue,3e3)},Te=()=>{document.visibilityState==="hidden"?ze():Le()};Ut(()=>{Le(),document.addEventListener("visibilitychange",Te)}),Mt(()=>{ze(),document.removeEventListener("visibilitychange",Te)});const je=k(),de=k(!1),Q=k({}),it=async r=>{var E;if(await((E=je.value)==null?void 0:E.validate())){de.value=!0,r(!1);return}r(),Pe({req_time:Q.value.req_time,user_id:Q.value.user_id})},dt=()=>{de.value=!1},Pe=r=>{if(U.value.length===0&&!r.req_time){de.value=!0;return}i(!0),r.ids=U.value,ra(r).then(_=>{i(!1),O.$message.success("\u5BFC\u51FA\u6210\u529F"),P.value.selectAll(!1);const E=new Blob([_.data],{type:"application/vnd.ms-excel"}),z=window.URL.createObjectURL(E),A=document.createElement("a");A.href=z,A.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(z)}).catch(_=>{O.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",_)})},He=k(),re=k(!1),S=k({status:[1,2,3,-1]}),rt=async r=>{var E;if(await((E=He.value)==null?void 0:E.validate())){re.value=!0,r(!1);return}r(),Re({action:"time",value:S.value.value,user_id:S.value.user_id,status:S.value.status})},ct=()=>{re.value=!1},_t=r=>{U.value=r,te.value=!r.length},Re=r=>{if(U.value.length===0&&!r.value)re.value=!0;else{let _=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${U.value.length}\u6761\u6570\u636E?`;switch(r.action){case"delete":_=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${U.value.length}\u6761\u6570\u636E?`;break;case"time":r.user_id?_=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${r.user_id} \u8BF7\u6C42\u65F6\u95F4: ${r.value[0]} \u81F3 ${r.value[1]} \u7684\u6570\u636E?`:_=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${r.value[0]} \u81F3 ${r.value[1]} \u7684\u6570\u636E?`;break}O.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:_,hideCancel:!1,onOk:()=>{i(!0),r.ids=U.value,ca(r).then(E=>{i(!1),O.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),b(),P.value.selectAll(!1)})}})}},be=k(!1),we=k(),Oe=k(),mt=async(r,_)=>{be.value=!0,we.value=r,Oe.value=_};return(r,_)=>{const E=xt,z=Tt,A=jt,he=Pt,oe=Ht,N=Rt,V=Ot,ce=Yt,se=Gt,ve=Jt,ke=Kt,$e=Qt,Ye=Wt,pt=Xt,_e=Zt,Ge=Ct,xe=lt,Ce=ea,ft=Ft,ht=ta,vt=aa,kt=It,gt=Vt,me=la,yt=na,$=at,bt=Ze,wt=oa,Fe=nt,$t=sa,w=et("permission");return t(),p("div",Vl,[a(A,{class:"container-breadcrumb"},{default:e(()=>[a(z,null,{default:e(()=>[a(E)]),_:1}),a(z,null,{default:e(()=>[s(l(r.$t("menu.chat")),1)]),_:1}),a(z,null,{default:e(()=>[s(l(r.$t("menu.chat.list")),1)]),_:1})]),_:1}),a($t,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[a(ke,null,{default:e(()=>[a(V,{flex:1},{default:e(()=>[a($e,{model:g.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[y((t(),u(ke,{gutter:16},{default:e(()=>[y((t(),u(V,{span:8},{default:e(()=>[a(N,{field:"app_id",label:r.$t("chat.form.app_id")},{default:e(()=>[a(oe,{modelValue:g.value.app_id,"onUpdate:modelValue":_[0]||(_[0]=o=>g.value.app_id=o),placeholder:r.$t("chat.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(W,null,ue(M.value,o=>(t(),u(he,{key:o.app_id,value:o.app_id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[w,["user"]]]),y((t(),u(V,{span:8},{default:e(()=>[a(N,{field:"trace_id",label:r.$t("chat.form.user.trace_id")},{default:e(()=>[a(ce,{modelValue:g.value.trace_id,"onUpdate:modelValue":_[1]||(_[1]=o=>g.value.trace_id=o),placeholder:r.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[w,["reseller"]]]),y((t(),u(V,{span:8},{default:e(()=>[a(N,{field:"user_id",label:r.$t("chat.form.reseller.user_id")},{default:e(()=>[a(se,{modelValue:g.value.user_id,"onUpdate:modelValue":_[2]||(_[2]=o=>g.value.user_id=o),placeholder:r.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[w,["reseller"]]]),y((t(),u(V,{span:8},{default:e(()=>[a(N,{field:"key",label:r.$t("chat.form.key")},{default:e(()=>[a(ce,{modelValue:g.value.key,"onUpdate:modelValue":_[3]||(_[3]=o=>g.value.key=o),placeholder:r.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[w,["user"]]]),y((t(),u(V,{span:8},{default:e(()=>[a(N,{field:"trace_id",label:r.$t("chat.form.user.trace_id")},{default:e(()=>[a(ce,{modelValue:g.value.trace_id,"onUpdate:modelValue":_[4]||(_[4]=o=>g.value.trace_id=o),placeholder:r.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[w,["user"]]]),y((t(),u(V,{span:8},{default:e(()=>[a(N,{field:"total_time",label:r.$t("chat.form.total_time")},{default:e(()=>[a(se,{modelValue:g.value.total_time,"onUpdate:modelValue":_[5]||(_[5]=o=>g.value.total_time=o),placeholder:r.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[w,["reseller"]]]),a(V,{span:8},{default:e(()=>[a(N,{field:"models",label:r.$t("chat.form.models")},{default:e(()=>[a(oe,{modelValue:g.value.models,"onUpdate:modelValue":_[6]||(_[6]=o=>g.value.models=o),placeholder:r.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(W,null,ue(ie.value,o=>(t(),u(he,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:8},{default:e(()=>[a(N,{field:"status",label:r.$t("chat.form.status")},{default:e(()=>[a(oe,{modelValue:g.value.status,"onUpdate:modelValue":_[7]||(_[7]=o=>g.value.status=o),placeholder:r.$t("chat.form.selectDefault"),options:c(j),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),a(V,{span:8},{default:e(()=>[a(N,{field:"req_time",label:r.$t("chat.form.req_time")},{default:e(()=>[a(ve,{modelValue:g.value.req_time,"onUpdate:modelValue":_[8]||(_[8]=o=>g.value.req_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[w,["reseller","user"]]]),y((t(),u(ke,{gutter:16},{default:e(()=>[a(V,{span:5},{default:e(()=>[a(N,{field:"trace_id",label:r.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[a(ce,{modelValue:g.value.trace_id,"onUpdate:modelValue":_[9]||(_[9]=o=>g.value.trace_id=o),placeholder:r.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:6},{default:e(()=>[a(N,{field:"models",label:r.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[a(oe,{modelValue:g.value.models,"onUpdate:modelValue":_[10]||(_[10]=o=>g.value.models=o),placeholder:r.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(W,null,ue(ie.value,o=>(t(),u(he,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:5},{default:e(()=>[a(N,{field:"key",label:r.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[a(ce,{modelValue:g.value.key,"onUpdate:modelValue":_[11]||(_[11]=o=>g.value.key=o),placeholder:r.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:8},{default:e(()=>[a(N,{field:"total_time",label:r.$t("chat.form.total_time")},{default:e(()=>[a(se,{modelValue:g.value.total_time,"onUpdate:modelValue":_[12]||(_[12]=o=>g.value.total_time=o),placeholder:r.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:5},{default:e(()=>[a(N,{field:"user_id",label:r.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[a(se,{modelValue:g.value.user_id,"onUpdate:modelValue":_[13]||(_[13]=o=>g.value.user_id=o),placeholder:r.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:6},{default:e(()=>[a(N,{field:"model_agents",label:r.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[a(oe,{modelValue:g.value.model_agents,"onUpdate:modelValue":_[14]||(_[14]=o=>g.value.model_agents=o),placeholder:r.$t("key.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),p(W,null,ue(pe.value,o=>(t(),u(he,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(V,{span:5},{default:e(()=>[a(N,{field:"status",label:r.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[a(oe,{modelValue:g.value.status,"onUpdate:modelValue":_[15]||(_[15]=o=>g.value.status=o),placeholder:r.$t("chat.form.selectDefault"),options:c(j),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),a(V,{span:8},{default:e(()=>[a(N,{field:"req_time",label:r.$t("chat.form.req_time")},{default:e(()=>[a(ve,{modelValue:g.value.req_time,"onUpdate:modelValue":_[16]||(_[16]=o=>g.value.req_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[w,["admin"]]])]),_:1},8,["model"])]),_:1}),a(Ye,{style:{height:"84px"},direction:"vertical"}),a(V,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[a(xe,{direction:"vertical",size:18},{default:e(()=>[a(_e,{type:"primary",onClick:b},{icon:e(()=>[a(pt)]),default:e(()=>[s(" "+l(r.$t("chat.form.search")),1)]),_:1}),a(_e,{onClick:K},{icon:e(()=>[a(Ge)]),default:e(()=>[s(" "+l(r.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(Ye,{style:{"margin-top":"0","margin-bottom":"16px"}}),a(ke,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[a(V,{span:3},{default:e(()=>[a(xe,null,{default:e(()=>[a(_e,{type:"primary",onClick:_[17]||(_[17]=o=>Pe({}))},{default:e(()=>[s(" \u5BFC\u51FA ")]),_:1}),y((t(),u(_e,{type:"primary",status:"danger",onClick:_[18]||(_[18]=o=>Re({action:"delete"}))},{default:e(()=>[s(" \u5220\u9664 ")]),_:1})),[[w,["admin"]]])]),_:1})]),_:1}),a(V,{span:14},{default:e(()=>[s(" \u603B\u82B1\u8D39 = \u5404\u8BA1\u8D39\u9879\u603B\u548C \xD7 \u5206\u7EC4\u6298\u6263 \xA0\xA0\u6216\xA0\xA0 \u6309\u6B21 \xD7 \u5206\u7EC4\u6298\u6263 ")]),_:1}),a(V,{span:2},{default:e(()=>[s(" RPM: \xA0"+l(Ae.value.toLocaleString()),1)]),_:1}),a(V,{span:3},{default:e(()=>[s(" TPM: \xA0"+l(qe.value.toLocaleString()),1)]),_:1}),a(V,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[a(Ce,{content:r.$t("actions.refresh")},{default:e(()=>[Y("div",{class:"action-icon",onClick:b},[a(Ge,{size:"18"})])]),_:1},8,["content"]),a(vt,{onSelect:le},{content:e(()=>[(t(!0),p(W,null,ue(c(h),o=>(t(),u(ht,{key:o.value,value:o.value,class:zt({active:o.value===H.value})},{default:e(()=>[Y("span",null,l(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[a(Ce,{content:r.$t("actions.density")},{default:e(()=>[Y("div",Dl,[a(ft,{size:"18"})])]),_:1},8,["content"])]),_:1}),a(Ce,{content:r.$t("actions.column_setting")},{default:e(()=>[a(yt,{trigger:"click",position:"bl",onPopupVisibleChange:I},{content:e(()=>[Y("div",Bl,[(t(!0),p(W,null,ue(T.value,(o,Ie)=>(t(),p("div",{key:o.dataIndex,class:"setting"},[Y("div",El,[a(gt)]),Y("div",null,[a(me,{modelValue:o.checked,"onUpdate:modelValue":Ve=>o.checked=Ve,onChange:Ve=>ne(Ve,o,Ie)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),Y("div",Sl,l(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:e(()=>[Y("div",Nl,[a(kt,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),a(bt,{ref_key:"tableRef",ref:P,"row-key":"id",loading:c(Z),pagination:C,columns:L.value,data:ee.value,bordered:!1,size:H.value,"row-selection":D,onPageChange:R,onPageSizeChange:ae,onSelectionChange:_t},{user_id:e(({record:o})=>[s(l(o.is_smart_match?"-":o.user_id),1)]),input_tokens:e(({record:o})=>[s(l(o.spend.text.input_tokens?o.spend.text.input_tokens:o.status===1?0:"-"),1)]),output_tokens:e(({record:o})=>[s(l(o.spend.text.output_tokens?o.spend.text.output_tokens:o.status===1?0:"-"),1)]),total_spend_tokens:e(({record:o})=>[Y("span",{class:"spend",onClick:Ie=>mt(o.spend,o.model_type)},l(o.spend.total_spend_tokens?`$${c(F)(o.spend.total_spend_tokens)}`:o.status===1?"$0.00":"-"),9,Al)]),stream:e(({record:o})=>[s(l(r.$t(`chat.dict.stream.${o.stream||!1}`)),1)]),conn_time:e(({record:o})=>[o.conn_time>3e4?y((t(),u($,{key:0,color:"red"},{default:e(()=>[s(l(o.conn_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.conn_time>15e3?y((t(),u($,{key:1,color:"orange"},{default:e(()=>[s(l(o.conn_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.conn_time>5e3?y((t(),u($,{key:2,color:"gold"},{default:e(()=>[s(l(o.conn_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):y((t(),u($,{key:3,color:"green"},{default:e(()=>[s(l(o.conn_time||"-"),1)]),_:2},1024)),[[w,["reseller","user"]]]),o.conn_time>1e4?y((t(),u($,{key:4,color:"red"},{default:e(()=>[s(l(o.conn_time),1)]),_:2},1024)),[[w,["admin"]]]):o.conn_time>5e3?y((t(),u($,{key:5,color:"orange"},{default:e(()=>[s(l(o.conn_time),1)]),_:2},1024)),[[w,["admin"]]]):o.conn_time>3e3?y((t(),u($,{key:6,color:"gold"},{default:e(()=>[s(l(o.conn_time),1)]),_:2},1024)),[[w,["admin"]]]):y((t(),u($,{key:7,color:"green"},{default:e(()=>[s(l(o.conn_time||"-"),1)]),_:2},1024)),[[w,["admin"]]])]),duration:e(({record:o})=>[o.duration>18e4?y((t(),u($,{key:0,color:"red"},{default:e(()=>[s(l(o.duration),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.duration>12e4?y((t(),u($,{key:1,color:"orange"},{default:e(()=>[s(l(o.duration),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.duration>9e4?y((t(),u($,{key:2,color:"gold"},{default:e(()=>[s(l(o.duration),1)]),_:2},1024)),[[w,["reseller","user"]]]):y((t(),u($,{key:3,color:"green"},{default:e(()=>[s(l(o.duration||"-"),1)]),_:2},1024)),[[w,["reseller","user"]]]),o.duration>12e4?y((t(),u($,{key:4,color:"red"},{default:e(()=>[s(l(o.duration),1)]),_:2},1024)),[[w,["admin"]]]):o.duration>9e4?y((t(),u($,{key:5,color:"orange"},{default:e(()=>[s(l(o.duration),1)]),_:2},1024)),[[w,["admin"]]]):o.duration>6e4?y((t(),u($,{key:6,color:"gold"},{default:e(()=>[s(l(o.duration),1)]),_:2},1024)),[[w,["admin"]]]):y((t(),u($,{key:7,color:"green"},{default:e(()=>[s(l(o.duration||"-"),1)]),_:2},1024)),[[w,["admin"]]])]),total_time:e(({record:o})=>[o.total_time>18e4?y((t(),u($,{key:0,color:"red"},{default:e(()=>[s(l(o.total_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.total_time>12e4?y((t(),u($,{key:1,color:"orange"},{default:e(()=>[s(l(o.total_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.total_time>9e4?y((t(),u($,{key:2,color:"gold"},{default:e(()=>[s(l(o.total_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):y((t(),u($,{key:3,color:"green"},{default:e(()=>[s(l(o.total_time||"-"),1)]),_:2},1024)),[[w,["reseller","user"]]]),o.total_time>12e4?y((t(),u($,{key:4,color:"red"},{default:e(()=>[s(l(o.total_time),1)]),_:2},1024)),[[w,["admin"]]]):o.total_time>9e4?y((t(),u($,{key:5,color:"orange"},{default:e(()=>[s(l(o.total_time),1)]),_:2},1024)),[[w,["admin"]]]):o.total_time>6e4?y((t(),u($,{key:6,color:"gold"},{default:e(()=>[s(l(o.total_time),1)]),_:2},1024)),[[w,["admin"]]]):y((t(),u($,{key:7,color:"green"},{default:e(()=>[s(l(o.total_time||"-"),1)]),_:2},1024)),[[w,["admin"]]])]),internal_time:e(({record:o})=>[o.internal_time>1e3?y((t(),u($,{key:0,color:"red"},{default:e(()=>[s(l(o.internal_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.internal_time>500?y((t(),u($,{key:1,color:"orange"},{default:e(()=>[s(l(o.internal_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):o.internal_time>300?y((t(),u($,{key:2,color:"gold"},{default:e(()=>[s(l(o.internal_time),1)]),_:2},1024)),[[w,["reseller","user"]]]):y((t(),u($,{key:3,color:"green"},{default:e(()=>[s(l(o.internal_time||"-"),1)]),_:2},1024)),[[w,["reseller","user"]]]),o.internal_time>500?y((t(),u($,{key:4,color:"red"},{default:e(()=>[s(l(o.internal_time),1)]),_:2},1024)),[[w,["admin"]]]):o.internal_time>300?y((t(),u($,{key:5,color:"orange"},{default:e(()=>[s(l(o.internal_time),1)]),_:2},1024)),[[w,["admin"]]]):o.internal_time>100?y((t(),u($,{key:6,color:"gold"},{default:e(()=>[s(l(o.internal_time),1)]),_:2},1024)),[[w,["admin"]]]):y((t(),u($,{key:7,color:"green"},{default:e(()=>[s(l(o.internal_time||"-"),1)]),_:2},1024)),[[w,["admin"]]])]),status:e(({record:o})=>[o.status===-1?(t(),u($,{key:0,color:"red"},{default:e(()=>[s(l(r.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024)):o.status===2?(t(),u($,{key:1,color:"gold"},{default:e(()=>[s(l(r.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024)):o.status===3?(t(),u($,{key:2,color:"orange"},{default:e(()=>[s(l(r.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024)):(t(),u($,{key:3,color:"green"},{default:e(()=>[s(l(r.$t(`chat.dict.status.${o.status}`)),1)]),_:2},1024))]),operations:e(({record:o})=>[a(_e,{type:"text",size:"small",onClick:Ie=>n(o.id)},{default:e(()=>[s(l(r.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),a(wt,{title:r.$t("menu.chat.detail"),width:700,footer:!1,visible:fe.value,"unmount-on-close":"","render-to-body":"",onCancel:ut},{default:e(()=>[a(Il,{id:B.value},null,8,["id"])]),_:1},8,["title","visible"]),a(Fe,{visible:de.value,"onUpdate:visible":_[21]||(_[21]=o=>de.value=o),title:r.$t("chat.form.title.chat_export"),onCancel:dt,onBeforeOk:it},{default:e(()=>[a($e,{ref_key:"chatExportForm",ref:je,model:Q.value},{default:e(()=>[a(N,{field:"req_time",label:r.$t("chat.form.req_time"),rules:[{required:!0,message:r.$t("chat.error.req_time.required")}]},{default:e(()=>[a(ve,{modelValue:Q.value.req_time,"onUpdate:modelValue":_[19]||(_[19]=o=>Q.value.req_time=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),y((t(),u(N,{field:"user_id",label:r.$t("chat.form.req.user_id")},{default:e(()=>[a(se,{modelValue:Q.value.user_id,"onUpdate:modelValue":_[20]||(_[20]=o=>Q.value.user_id=o),placeholder:r.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[w,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(Fe,{visible:re.value,"onUpdate:visible":_[28]||(_[28]=o=>re.value=o),title:r.$t("chat.form.title.chat_del"),onCancel:ct,onBeforeOk:rt},{default:e(()=>[a($e,{ref_key:"chatDelForm",ref:He,model:S.value},{default:e(()=>[a(N,{field:"value",label:r.$t("chat.form.req_time"),rules:[{required:!0,message:r.$t("chat.error.req_time.required")}]},{default:e(()=>[a(ve,{modelValue:S.value.value,"onUpdate:modelValue":_[22]||(_[22]=o=>S.value.value=o),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),a(N,{field:"status",label:r.$t("chat.form.req.status"),rules:[{required:!0,message:r.$t("chat.error.req.status.required")}]},{default:e(()=>[a(xe,{size:"large"},{default:e(()=>[a(me,{modelValue:S.value.status,"onUpdate:modelValue":_[23]||(_[23]=o=>S.value.status=o),value:1},{default:e(()=>[s(" \u6210\u529F ")]),_:1},8,["modelValue"]),a(me,{modelValue:S.value.status,"onUpdate:modelValue":_[24]||(_[24]=o=>S.value.status=o),value:2},{default:e(()=>[s(" \u4E2D\u6B62 ")]),_:1},8,["modelValue"]),a(me,{modelValue:S.value.status,"onUpdate:modelValue":_[25]||(_[25]=o=>S.value.status=o),value:3},{default:e(()=>[s(" \u91CD\u8BD5 ")]),_:1},8,["modelValue"]),a(me,{modelValue:S.value.status,"onUpdate:modelValue":_[26]||(_[26]=o=>S.value.status=o),value:-1},{default:e(()=>[s(" \u5931\u8D25 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),a(N,{field:"user_id",label:r.$t("chat.form.req.user_id")},{default:e(()=>[a(se,{modelValue:S.value.user_id,"onUpdate:modelValue":_[27]||(_[27]=o=>S.value.user_id=o),placeholder:r.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(Fe,{visible:be.value,"onUpdate:visible":_[30]||(_[30]=o=>be.value=o),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[a(st,{modelValue:we.value,"onUpdate:modelValue":_[29]||(_[29]=o=>we.value=o),"model-type":Oe.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])]),_:1})])}}});const fn=Xe(Ul,[["__scopeId","data-v-d2167bf6"]]);export{fn as default};

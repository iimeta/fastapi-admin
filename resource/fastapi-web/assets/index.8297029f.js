import{u as sa,b as ua,z as ia,s as da,A as ra,k as pa,B as ma,_ as _a}from"./index.c71c317e.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as Ce,e as v,B as s,C as m,aH as e,aG as a,u as p,aD as d,aM as u,aL as h,bA as ca,bB as va,bC as ba,bD as fa,bE as ya,r as we,c as ue,w as ha,bF as ga,bu as qe,aJ as G,aI as K,D as I,E as ka,aE as B,n as $a,aZ as Q,a_ as Ve,aK as wa,aF as qa,aS as Va,b2 as Ca,bG as xa,b1 as Sa,bH as Da,bI as Ua,bJ as za,bK as Ia,b5 as Aa,bL as La,ab as Ra,aU as Ta,bi as Ba,bj as Na,bk as Ha,bl as Ma,b4 as Pa,bM as Oa,aT as Ea,bN as ja,aV as Fa,bO as Ga,bP as Ka,bQ as Qa,bR as Ja,bS as Za,bT as Wa}from"./arco.3f46b4ae.js";import{u as xe}from"./loading.37fd256d.js";import{p as Xa,d as Ya,a as L}from"./common.cfd92899.js";import{q as el,a as al,s as ll,b as tl}from"./app.cd31bf09.js";import{s as ol,a as nl}from"./app_key.aae0c951.js";import{c as ie,S as sl}from"./sortable.esm.078712c4.js";import{q as ul,a as il}from"./model.60707606.js";import{q as dl}from"./group.e11130b0.js";import{M as rl}from"./models.8eb87a79.js";import{Q as q}from"./quota.9441354a.js";/* empty css                *//* empty css                */import"./chart.2cea905d.js";import"./vue.dbcf9bc3.js";import"./provider.e18dc58a.js";const pl={style:{margin:"10px 0 30px 10px"}},ml={key:1},_l={key:1},cl={key:1},vl={key:1},bl={key:1},fl={key:1},yl={key:1},hl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},gl={key:1},kl={key:1},$l={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},wl={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},ql={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Vl={key:1},Cl={key:1},xl={key:1},Sl={name:"AppDetail"},Dl=Ce({...Sl,props:{id:{type:String,default:""}},setup(de){const r=de,{loading:k,setLoading:V}=xe(!0),b=v({});return(async(_={id:r.id})=>{V(!0);try{const{data:R}=await el(_);b.value=R}catch{}finally{V(!1)}})(),(_,R)=>{const g=ca,i=va,c=ba,A=fa,N=ya;return s(),m("div",pl,[e(N,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:a(()=>[e(c,{label:_.$t("common.app_id")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",ml,u(b.value.app_id),1))]),_:1},8,["label"]),e(c,{label:_.$t("common.app_name")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",_l,u(b.value.name),1))]),_:1},8,["label"]),e(c,{label:_.$t("common.limit_quota")},{default:a(()=>{var f;return[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",cl,u(_.$t(`dict.${((f=b.value)==null?void 0:f.is_limit_quota)||!1}`)),1))]}),_:1},8,["label"]),e(c,{label:_.$t("common.current_quota")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",vl,[b.value.is_limit_quota?(s(),d(q,{key:0,"model-value":b.value.quota},null,8,["model-value"])):(s(),m("span",bl,u(_.$t("common.no_limit")),1))]))]),_:1},8,["label"]),e(c,{label:_.$t("common.used_quota")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",fl,[e(q,{"model-value":b.value.used_quota},null,8,["model-value"])]))]),_:1},8,["label"]),e(c,{label:_.$t("common.expires_at")},{default:a(()=>{var f;return[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",yl,u((f=b.value)!=null&&f.is_limit_quota&&b.value.quota_expires_at||"-"),1))]}),_:1},8,["label"]),e(c,{label:_.$t("common.models"),span:2},{default:a(()=>{var f,$;return[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",hl,u((($=(f=b.value)==null?void 0:f.model_names)==null?void 0:$.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(c,{label:_.$t("common.bind_group")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",gl,u(_.$t(`dict.enable.${b.value.is_bind_group||!1}`)),1))]),_:1},8,["label"]),e(c,{label:_.$t("common.groups")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",kl,u(b.value.group_name||"-"),1))]),_:1},8,["label"]),e(c,{label:_.$t("common.ip_whitelist")},{default:a(()=>{var f,$;return[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",$l,u((($=(f=b.value)==null?void 0:f.ip_whitelist)==null?void 0:$.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(c,{label:_.$t("common.ip_blacklist")},{default:a(()=>{var f,$;return[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",wl,u((($=(f=b.value)==null?void 0:f.ip_blacklist)==null?void 0:$.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(c,{label:_.$t("common.remark")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",ql,u(b.value.remark||"-"),1))]),_:1},8,["label"]),e(c,{label:_.$t("common.status")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",Vl,[b.value.status===1?(s(),d(A,{key:0,color:"green"},{default:a(()=>[h(u(_.$t(`dict.status.${b.value.status}`)),1)]),_:1})):(s(),d(A,{key:1,color:"red"},{default:a(()=>[h(u(_.$t(`dict.status.${b.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),e(c,{label:_.$t("common.created_at")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",Cl,u(b.value.created_at),1))]),_:1},8,["label"]),e(c,{label:_.$t("common.updated_at")},{default:a(()=>[p(k)?(s(),d(i,{key:0,animation:!0},{default:a(()=>[e(g,{rows:1})]),_:1})):(s(),m("span",xl,u(b.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Ul={class:"container"},zl={class:"action-icon"},Il={class:"action-icon"},Al={id:"tableSetting"},Ll={style:{"margin-right":"4px",cursor:"move"}},Rl={class:"title"},Tl={key:0},Bl={key:1},Nl={key:1},Hl={style:{"margin-left":"-15px"}},Ml={name:"AppList"},Pl=Ce({...Ml,setup(de){const{t:r}=sa(),{loading:k,setLoading:V}=xe(!0),b=ua(),re=localStorage.getItem("userRole"),_=we({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),R=()=>({user_id:v(),app_id:v(),name:"",models:[],app_key:"",type:v(),status:v(),quota_expires_at:[],created_at:[]}),g=v([]),i=v(R()),c=v([]),A=v([]),N=v("medium"),f=v([]),$=v(!0),J=v(),T={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},P=we({...T}),Se=ue(()=>[{name:r("size.mini"),value:"mini"},{name:r("size.small"),value:"small"},{name:r("size.medium"),value:"medium"},{name:r("size.large"),value:"large"}]),De=ue(()=>[{title:r("common.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center",width:80},{title:r("common.app_id"),dataIndex:"app_id",slotName:"app_id",align:"center",width:80},{title:r("common.app_name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:r("common.models"),dataIndex:"model_names",slotName:"model_names",align:"center",ellipsis:!0,tooltip:!0},{title:r("common.current_quota"),dataIndex:"quota",slotName:"quota",align:"center",ellipsis:!0,tooltip:!0},{title:r("common.used_quota"),dataIndex:"used_quota",slotName:"used_quota",align:"center",ellipsis:!0,tooltip:!0},{title:r("common.expires_at"),dataIndex:"quota_expires_at",slotName:"quota_expires_at",align:"center",ellipsis:!0,tooltip:!0},{title:r("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:r("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:260}]),Ue=ue(()=>[{label:r("dict.status.1"),value:1},{label:r("dict.status.2"),value:2}]),O=async(l={...T})=>{V(!0);try{const{data:o}=await al(l);g.value=o.items,P.current=l.current,P.pageSize=l.pageSize,P.total=o.paging.total}catch{}finally{V(!1),J.value.selectAll(!1)}};O();const H=()=>{O({...T,...i.value})},ze=l=>{O({...T,...i.value,current:l})},Ie=l=>{T.pageSize=l,O({...T,...i.value})},Ae=()=>{i.value=R(),H()},Le=(l,o)=>{N.value=l},Re=(l,o,w)=>{l?c.value.splice(w,0,o):c.value=A.value.filter(D=>D.dataIndex!==o.dataIndex)},pe=(l,o,w,D=!1)=>{const U=D?ie(l):l;return o>-1&&w>-1&&U.splice(o,1,U.splice(w,1,U[o]).pop()),U},Te=l=>{l&&$a(()=>{const o=document.getElementById("tableSetting");new sl(o,{onEnd(w){const{oldIndex:D,newIndex:U}=w;pe(c.value,D,U),pe(A.value,D,U)}})})};ha(()=>De.value,l=>{c.value=ie(l),re==="user"&&c.value.splice(0,1),c.value.forEach((o,w)=>{o.checked=!0}),A.value=ie(c.value)},{deep:!0,immediate:!0});const me=v([]);(async()=>{try{const{data:l}=await ul();me.value=l.items}catch{}})();const _e=v([]);(async()=>{try{const{data:l}=await il();_e.value=l.items}catch{}})();const ce=v([]);(async()=>{try{const{data:l}=await dl();ce.value=l.items}catch{}})();const Be=async l=>{V(!0);try{await ll(l),Q.success(r("success.operate")),H()}catch{}finally{V(!1)}},M=v(!1),ve=v(),n=v({billing_methods:[1]}),Ne=l=>{n.value.quota=l},He=async l=>{const{data:o}=await ol(l);n.value.app_id=o.app_id,n.value.key=o.key,n.value.quota_expires_rule="1",n.value.quota_expires_at="",n.value.quota_expires_minutes=v(),M.value=!0},Me=async l=>{var w;if(await((w=ve.value)==null?void 0:w.validate())){M.value=!0,l(!1);return}V(!0),n.value.quota_expires_rule==="1"&&(n.value.quota_expires_minutes=""),n.value.quota_expires_rule==="2"&&(n.value.quota_expires_at="");try{await nl(n.value),navigator.clipboard.writeText(n.value.key),Q.success(r("app.key.success.save")),l()}catch{l(!1)}finally{V(!1)}},Pe=()=>{M.value=!1},Z=v(!1),E=v(),Oe=l=>{Z.value=!0,E.value=l},Ee=()=>{Z.value=!1},W=v(!1),be=v(),je=l=>{W.value=!0,E.value=l,be.value="app"},Fe=l=>{f.value=l,$.value=!l.length},X=l=>{if(f.value.length===0)Q.info(r("placeholder.operation.data"));else{let o=r("placeholder.batch.operation",{count:f.value.length});switch(l.action){case"status":l.value===1?o=r("placeholder.batch.operation.enable",{count:f.value.length}):o=r("placeholder.batch.operation.disable",{count:f.value.length});break;case"delete":o=r("placeholder.batch.operation.delete",{count:f.value.length});break}Ve.warning({title:r("modal.warning.title"),titleAlign:"center",content:o,okText:r("button.ok"),cancelText:r("button.cancel"),hideCancel:!1,onOk:()=>{V(!0),l.ids=f.value,tl(l).then(w=>{V(!1),Q.success(r("success.operate")),H(),J.value.selectAll(!1)})}})}};return(l,o)=>{const w=ia,D=wa,U=qa,j=Va,y=Ca,C=xa,Y=Sa,fe=Da,ee=Ua,Ge=za,ae=Ia,ye=Aa,he=La,Ke=Ra,x=Ta,ge=da,F=Ba,le=Na,Qe=ra,Je=Ha,Ze=Ma,We=pa,Xe=ma,te=Pa,Ye=Oa,oe=Ea,ea=ja,aa=Fa,la=Ga,S=Ka,ta=Qa,oa=Ja,ne=Za,ke=Ve,na=Wa,$e=ga("permission");return s(),m("div",Ul,[e(U,{class:"container-breadcrumb"},{default:a(()=>[e(D,null,{default:a(()=>[e(w)]),_:1}),e(D,null,{default:a(()=>[h(u(l.$t("app.menu")),1)]),_:1})]),_:1}),e(na,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(ae,null,{default:a(()=>[e(C,{flex:1},{default:a(()=>[e(ye,{model:i.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(ae,{gutter:16},{default:a(()=>[qe((s(),d(C,{span:8},{default:a(()=>[e(y,{field:"user_id",label:l.$t("common.user_id")},{default:a(()=>[e(j,{modelValue:i.value.user_id,"onUpdate:modelValue":o[0]||(o[0]=t=>i.value.user_id=t),placeholder:l.$t("placeholder.user_id"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[$e,["reseller","admin"]]]),e(C,{span:8},{default:a(()=>[e(y,{field:"app_id",label:l.$t("common.app_id")},{default:a(()=>[e(j,{modelValue:i.value.app_id,"onUpdate:modelValue":o[1]||(o[1]=t=>i.value.app_id=t),placeholder:l.$t("placeholder.app_id"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(C,{span:8},{default:a(()=>[e(y,{field:"name",label:l.$t("common.app_name")},{default:a(()=>[e(Y,{modelValue:i.value.name,"onUpdate:modelValue":o[2]||(o[2]=t=>i.value.name=t),placeholder:l.$t("placeholder.app_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),qe((s(),d(C,{span:8},{default:a(()=>[e(y,{field:"models",label:l.$t("common.models")},{default:a(()=>[e(ee,{modelValue:i.value.models,"onUpdate:modelValue":o[3]||(o[3]=t=>i.value.models=t),placeholder:l.$t("common.all"),"max-tag-count":2,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(s(!0),m(G,null,K(me.value,t=>(s(),d(fe,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[$e,["user"]]]),e(C,{span:8},{default:a(()=>[e(y,{field:"key",label:l.$t("common.app_key")},{default:a(()=>[e(Y,{modelValue:i.value.app_key,"onUpdate:modelValue":o[4]||(o[4]=t=>i.value.app_key=t),placeholder:l.$t("placeholder.app_key"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(C,{span:8},{default:a(()=>[e(y,{field:"status",label:l.$t("common.status")},{default:a(()=>[e(ee,{modelValue:i.value.status,"onUpdate:modelValue":o[5]||(o[5]=t=>i.value.status=t),placeholder:l.$t("common.all"),options:p(Ue),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(C,{span:8},{default:a(()=>[e(y,{field:"quota_expires_at",label:l.$t("common.expires_at")},{default:a(()=>[e(Ge,{modelValue:i.value.quota_expires_at,"onUpdate:modelValue":o[6]||(o[6]=t=>i.value.quota_expires_at=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(he,{style:{height:"84px"},direction:"vertical"}),e(C,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(F,{direction:"vertical",size:18},{default:a(()=>[e(x,{type:"primary",onClick:H},{icon:a(()=>[e(Ke)]),default:a(()=>[h(" "+u(l.$t("button.search")),1)]),_:1}),e(x,{onClick:Ae},{icon:a(()=>[e(ge)]),default:a(()=>[h(" "+u(l.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(he,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(ae,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(C,{span:12},{default:a(()=>[e(F,null,{default:a(()=>[e(x,{type:"primary",onClick:o[7]||(o[7]=t=>l.$router.push({name:"AppCreate"}))},{default:a(()=>[h(u(l.$t("button.create")),1)]),_:1}),e(x,{type:"primary",status:"success",disabled:$.value,title:$.value?l.$t("placeholder.operation.data"):"",onClick:o[8]||(o[8]=t=>X({action:"status",value:1}))},{default:a(()=>[h(u(l.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(x,{type:"primary",status:"danger",disabled:$.value,title:$.value?l.$t("placeholder.operation.data"):"",onClick:o[9]||(o[9]=t=>X({action:"status",value:2}))},{default:a(()=>[h(u(l.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(x,{type:"primary",status:"danger",disabled:$.value,title:$.value?l.$t("placeholder.operation.data"):"",onClick:o[10]||(o[10]=t=>X({action:"delete"}))},{default:a(()=>[h(u(l.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(C,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(le,{content:l.$t("action.refresh")},{default:a(()=>[I("div",{class:"action-icon",onClick:H},[e(ge,{size:"18"})])]),_:1},8,["content"]),e(Ze,{onSelect:Le},{content:a(()=>[(s(!0),m(G,null,K(p(Se),t=>(s(),d(Je,{key:t.value,value:t.value,class:ka({active:t.value===N.value})},{default:a(()=>[I("span",null,u(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(le,{content:l.$t("action.density")},{default:a(()=>[I("div",zl,[e(Qe,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(le,{content:l.$t("action.column_setting")},{default:a(()=>[e(Ye,{trigger:"click",position:"bl",onPopupVisibleChange:Te},{content:a(()=>[I("div",Al,[(s(!0),m(G,null,K(A.value,(t,z)=>(s(),m("div",{key:t.dataIndex,class:"setting"},[I("div",Ll,[e(Xe)]),I("div",null,[e(te,{modelValue:t.checked,"onUpdate:modelValue":se=>t.checked=se,onChange:se=>Re(se,t,z)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),I("div",Rl,u(t.title),1)]))),128))])]),default:a(()=>[I("div",Il,[e(We,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ea,{ref_key:"tableRef",ref:J,"row-key":"id",loading:p(k),pagination:P,columns:c.value,data:g.value,bordered:!1,size:N.value,"row-selection":_,onPageChange:ze,onPageSizeChange:Ie,onSelectionChange:Fe},{model_names:a(({record:t})=>[t.model_names?(s(),m("span",Tl,[e(x,{type:"text",size:"small",onClick:z=>je(t.id)},{default:a(()=>[h(u(l.$t("button.view")),1)]),_:2},1032,["onClick"])])):(s(),m("span",Bl,u(l.$t("common.no_limit")),1))]),quota:a(({record:t})=>[t.is_limit_quota?(s(),d(q,{key:0,"model-value":t.quota},null,8,["model-value"])):(s(),m("span",Nl,u(l.$t("common.no_limit")),1))]),used_quota:a(({record:t})=>[e(q,{"model-value":t.used_quota},null,8,["model-value"])]),quota_expires_at:a(({record:t})=>[h(u(t.is_limit_quota&&t.quota_expires_at||"-"),1)]),status:a(({record:t})=>[e(oe,{modelValue:t.status,"onUpdate:modelValue":z=>t.status=z,"checked-value":1,"unchecked-value":2,onChange:z=>Be({id:t.id,status:t.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:t})=>[e(x,{type:"text",size:"small",onClick:z=>Oe(t.id)},{default:a(()=>[h(u(l.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:z=>l.$router.push({name:"AppUpdate",query:{id:t.id}})},{default:a(()=>[h(u(l.$t("button.update")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:z=>He({app_id:t.app_id})},{default:a(()=>[h(u(l.$t("app.columns.operations.create_key")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:z=>l.$router.push({name:"AppKeyList",query:{app_id:t.app_id}})},{default:a(()=>[h(u(l.$t("app.columns.operations.manage_key")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(aa,{title:l.$t("app.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:Z.value,onCancel:Ee},{default:a(()=>[e(Dl,{id:E.value},null,8,["id"])]),_:1},8,["title","visible"]),e(ke,{visible:M.value,"onUpdate:visible":o[26]||(o[26]=t=>M.value=t),width:726,title:l.$t("app.key.form.title.key_config"),"ok-text":l.$t("button.save"),"body-style":{height:"520px"},onCancel:Pe,onBeforeOk:Me},{default:a(()=>[e(ye,{ref_key:"formRef",ref:ve,model:n.value,"label-col-props":{span:4}},{default:a(()=>[e(y,{field:"key",label:l.$t("common.key")},{default:a(()=>[e(Y,{modelValue:n.value.key,"onUpdate:modelValue":o[11]||(o[11]=t=>n.value.key=t),placeholder:l.$t("common.key"),readonly:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(y,{field:"billing_methods",label:l.$t("common.billing_methods"),rules:[{required:!0,message:l.$t("placeholder.billing_methods")}]},{default:a(()=>[e(F,{size:"large"},{default:a(()=>[e(te,{modelValue:n.value.billing_methods,"onUpdate:modelValue":o[12]||(o[12]=t=>n.value.billing_methods=t),value:1,disabled:""},null,8,["modelValue"]),I("span",Hl,u(l.$t("app.key.dict.billing_methods.1")),1),e(te,{modelValue:n.value.billing_methods,"onUpdate:modelValue":o[13]||(o[13]=t=>n.value.billing_methods=t),value:2},{default:a(()=>[h(u(l.$t("app.key.dict.billing_methods.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(y,{field:"models",label:l.$t("common.models")},{default:a(()=>[e(la,{modelValue:n.value.models,"onUpdate:modelValue":o[14]||(o[14]=t=>n.value.models=t),placeholder:l.$t("app.key.placeholder.key.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:_e.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),e(y,{field:"is_limit_quota",label:l.$t("common.limit_quota")},{default:a(()=>[e(oe,{modelValue:n.value.is_limit_quota,"onUpdate:modelValue":o[15]||(o[15]=t=>n.value.is_limit_quota=t)},null,8,["modelValue"])]),_:1},8,["label"]),n.value.is_limit_quota?(s(),d(y,{key:0,field:"quota",label:l.$t("common.quota"),rules:[{required:!0,message:l.$t("placeholder.quota")}]},{default:a(()=>[e(j,{modelValue:n.value.quota,"onUpdate:modelValue":o[16]||(o[16]=t=>n.value.quota=t),placeholder:l.$t("app.placeholder.quota"),min:1e-6,max:9999999999999,parser:p(Xa),"allow-clear":""},{prefix:a(()=>[h(u(p(b).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label","rules"])):B("",!0),n.value.is_limit_quota?(s(),d(y,{key:1},{default:a(()=>[e(ta,{type:"button",onChange:Ne},{default:a(()=>[e(S,{value:10},{default:a(()=>[e(q,{"model-value":10})]),_:1}),e(S,{value:20},{default:a(()=>[e(q,{"model-value":20})]),_:1}),e(S,{value:50},{default:a(()=>[e(q,{"model-value":50})]),_:1}),e(S,{value:100},{default:a(()=>[e(q,{"model-value":100})]),_:1}),e(S,{value:200},{default:a(()=>[e(q,{"model-value":200})]),_:1}),e(S,{value:500},{default:a(()=>[e(q,{"model-value":500})]),_:1}),e(S,{value:1e3},{default:a(()=>[e(q,{"model-value":1e3})]),_:1}),e(S,{value:2e3},{default:a(()=>[e(q,{"model-value":2e3})]),_:1}),e(S,{value:5e3},{default:a(()=>[e(q,{"model-value":5e3})]),_:1})]),_:1})]),_:1})):B("",!0),n.value.is_limit_quota?(s(),d(y,{key:2,field:"quota_expires_rule",label:l.$t("app.key.label.quota_expires_rule")},{default:a(()=>[e(F,{size:"large"},{default:a(()=>[e(S,{modelValue:n.value.quota_expires_rule,"onUpdate:modelValue":o[17]||(o[17]=t=>n.value.quota_expires_rule=t),value:"1","default-checked":!0},{default:a(()=>[h(u(l.$t("dict.quota_expires_rule.1")),1)]),_:1},8,["modelValue"]),e(S,{modelValue:n.value.quota_expires_rule,"onUpdate:modelValue":o[18]||(o[18]=t=>n.value.quota_expires_rule=t),value:"2"},{default:a(()=>[h(u(l.$t("dict.quota_expires_rule.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])):B("",!0),n.value.is_limit_quota&&n.value.quota_expires_rule==="1"?(s(),d(y,{key:3,field:"quota_expires_at",label:l.$t("common.expires_at")},{default:a(()=>[e(oa,{modelValue:n.value.quota_expires_at,"onUpdate:modelValue":o[19]||(o[19]=t=>n.value.quota_expires_at=t),placeholder:l.$t("app.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":p(Ya),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>p(L)(n.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"])):B("",!0),n.value.is_limit_quota&&n.value.quota_expires_rule==="2"?(s(),d(y,{key:4,field:"quota_expires_minutes",label:l.$t("app.key.label.quota_expires_minutes")},{default:a(()=>[e(j,{modelValue:n.value.quota_expires_minutes,"onUpdate:modelValue":o[20]||(o[20]=t=>n.value.quota_expires_minutes=t),placeholder:l.$t("app.key.placeholder.quota_expires_minutes"),precision:0,min:1,max:9999999999999},{append:a(()=>[h(u(l.$t("unit.minute")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):B("",!0),e(y,{field:"is_bind_group",label:l.$t("common.bind_group")},{default:a(()=>[e(oe,{modelValue:n.value.is_bind_group,"onUpdate:modelValue":o[21]||(o[21]=t=>n.value.is_bind_group=t)},null,8,["modelValue"])]),_:1},8,["label"]),n.value.is_bind_group?(s(),d(y,{key:5,field:"group",label:l.$t("common.groups"),rules:[{required:!0,message:l.$t("app.error.required.group")}]},{default:a(()=>[e(ee,{modelValue:n.value.group,"onUpdate:modelValue":o[22]||(o[22]=t=>n.value.group=t),placeholder:l.$t("app.key.placeholder.group"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:a(()=>[(s(!0),m(G,null,K(ce.value,t=>(s(),d(fe,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):B("",!0),e(y,{field:"ip_whitelist",label:l.$t("common.ip_whitelist")},{default:a(()=>[e(ne,{modelValue:n.value.ip_whitelist,"onUpdate:modelValue":o[23]||(o[23]=t=>n.value.ip_whitelist=t),placeholder:l.$t("app.placeholder.ip_whitelist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(y,{field:"ip_blacklist",label:l.$t("common.ip_blacklist")},{default:a(()=>[e(ne,{modelValue:n.value.ip_blacklist,"onUpdate:modelValue":o[24]||(o[24]=t=>n.value.ip_blacklist=t),placeholder:l.$t("app.placeholder.ip_blacklist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(y,{field:"remark",label:l.$t("common.remark")},{default:a(()=>[e(ne,{modelValue:n.value.remark,"onUpdate:modelValue":o[25]||(o[25]=t=>n.value.remark=t),placeholder:l.$t("placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),e(ke,{visible:W.value,"onUpdate:visible":o[27]||(o[27]=t=>W.value=t),title:l.$t("common.models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":l.$t("button.close")},{default:a(()=>[e(rl,{id:E.value,action:be.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"])]),_:1})])}}});const wt=_a(Pl,[["__scopeId","data-v-9604ea3d"]]);export{wt as default};

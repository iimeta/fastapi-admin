import{_ as q,x as G}from"./index.dd127fc7.js";/* empty css               *//* empty css                */import{d as I,e as h,B as p,aD as $,aG as l,aH as a,C as U,aJ as D,aI as N,aL as b,aM as g,bA as R,bB as T,b2 as F,b1 as H,aS as P,bK as z,aU as L,b5 as K,aT as j,bi as E,bz as Q,F as W,bs as X,aE as Y,u as Z,aK as x,aF as ee,bL as ae,bM as le,bJ as te,bN as oe}from"./arco.4a860a7b.js";import{u as B}from"./loading.e639bbf4.js";import{d as J,e as ne}from"./agent.fda026e1.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{h as O}from"./vue.2ee6e12c.js";import{q as se}from"./corp.681c233b.js";/* empty css                */import{q as re}from"./model.40a56910.js";/* empty css                */import"./chart.e67bf0c7.js";import"./base.87fcf6e2.js";const ue=I({__name:"base-info",emits:["changeStep"],setup(_,{emit:i}){const{setLoading:d}=B(!1),u=O(),m=h(),n=h({id:"",corp:"",name:"",base_url:"",path:"",weight:h(),remark:"",status:1}),v=h([]);(async()=>{d(!0);try{const{data:t}=await se();v.value=t.items}catch{}finally{d(!1)}})(),(async(t={id:u.query.id})=>{d(!0);try{const{data:e}=await J(t);n.value.id=e.id,n.value.corp=e.corp,n.value.name=e.name,n.value.base_url=e.base_url,n.value.path=e.path,n.value.weight=e.weight,n.value.remark=e.remark,n.value.status=e.status}catch{}finally{d(!1)}})();const w=async()=>{var e;await((e=m.value)==null?void 0:e.validate())||i("changeStep","forward",{...n.value})};return(t,e)=>{const s=R,V=T,c=F,f=H,C=P,M=z,S=L,A=K;return p(),$(A,{ref_key:"formRef",ref:m,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:l(()=>[a(c,{field:"corp",label:t.$t("model.agent.label.corp"),rules:[{required:!0,message:t.$t("model.agent.error.corp.required")}]},{default:l(()=>[a(V,{modelValue:n.value.corp,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value.corp=r),placeholder:t.$t("model.agent.placeholder.corp"),"allow-search":""},{default:l(()=>[(p(!0),U(D,null,N(v.value,r=>(p(),$(s,{key:r.id,value:r.id,label:r.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(c,{field:"name",label:t.$t("model.agent.label.name"),rules:[{required:!0,message:t.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:t.$t("model.agent.error.name.pattern")}]},{default:l(()=>[a(f,{modelValue:n.value.name,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value.name=r),placeholder:t.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(c,{field:"base_url",label:t.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:t.$t("model.agent.error.baseUrl.required")}]},{default:l(()=>[a(f,{modelValue:n.value.base_url,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value.base_url=r),placeholder:t.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(c,{field:"path",label:t.$t("model.agent.label.path")},{default:l(()=>[a(f,{modelValue:n.value.path,"onUpdate:modelValue":e[3]||(e[3]=r=>n.value.path=r),placeholder:t.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(c,{field:"weight",label:t.$t("model.agent.label.weight")},{default:l(()=>[a(C,{modelValue:n.value.weight,"onUpdate:modelValue":e[4]||(e[4]=r=>n.value.weight=r),precision:0,min:0,max:99999,placeholder:t.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(c,{field:"remark",label:t.$t("model.agent.label.remark")},{default:l(()=>[a(M,{modelValue:n.value.remark,"onUpdate:modelValue":e[5]||(e[5]=r=>n.value.remark=r),placeholder:t.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(c,null,{default:l(()=>[a(S,{type:"primary",onClick:w},{default:l(()=>[b(g(t.$t("model.agent.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=q(ue,[["__scopeId","data-v-bb410a83"]]),me=I({__name:"advanced",emits:["changeStep"],setup(_,{emit:i}){const{setLoading:d}=B(!0),u=O(),m=h([]);(async()=>{d(!0);try{const{data:e}=await re();m.value=e.items}catch{}finally{d(!1)}})();const v=h(),o=h({models:[],key:"",is_agents_only:!0});(async(e={id:u.query.id})=>{d(!0);try{const{data:s}=await J(e);o.value.models=s.models,o.value.key=s.key}catch{}finally{d(!1)}})();const w=async()=>{var s;await((s=v.value)==null?void 0:s.validate())||i("changeStep","submit",{...o.value})},t=()=>{i("changeStep","backward")};return(e,s)=>{const V=R,c=T,f=F,C=z,M=j,S=L,A=E,r=K;return p(),$(r,{ref_key:"formRef",ref:v,model:o.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:l(()=>[a(f,{field:"models",label:e.$t("model.agent.label.models"),rules:[{required:!1}]},{default:l(()=>[a(c,{modelValue:o.value.models,"onUpdate:modelValue":s[0]||(s[0]=y=>o.value.models=y),placeholder:e.$t("model.agent.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:l(()=>[(p(!0),U(D,null,N(m.value,y=>(p(),$(V,{key:y.id,value:y.id,label:y.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(f,{field:"key",label:e.$t("model.agent.label.key")},{default:l(()=>[a(C,{modelValue:o.value.key,"onUpdate:modelValue":s[1]||(s[1]=y=>o.value.key=y),placeholder:e.$t("model.agent.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(f,{field:"is_agents_only",label:e.$t("model.agent.label.isAgentsOnly")},{default:l(()=>[a(M,{modelValue:o.value.is_agents_only,"onUpdate:modelValue":s[2]||(s[2]=y=>o.value.is_agents_only=y)},null,8,["modelValue"])]),_:1},8,["label"]),a(f,null,{default:l(()=>[a(A,null,{default:l(()=>[a(S,{type:"secondary",onClick:t},{default:l(()=>[b(g(e.$t("model.button.prev")),1)]),_:1}),a(S,{type:"primary",onClick:w},{default:l(()=>[b(g(e.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const pe=q(me,[["__scopeId","data-v-7c114a8c"]]);const ie={},ce={class:"success-wrap"};function _e(_,i){const d=Q,u=L,m=E;return p(),U("div",ce,[a(d,{status:"success",title:_.$t("model.agent.success.title"),subtitle:_.$t("model.agent.success.update.subTitle")},null,8,["title","subtitle"]),a(m,{size:16},{default:l(()=>[a(u,{key:"finish",type:"secondary",onClick:i[0]||(i[0]=n=>_.$router.push({name:"ModelAgentList"}))},{default:l(()=>[b(g(_.$t("model.agent.button.return")),1)]),_:1}),a(u,{key:"again",type:"primary",onClick:i[1]||(i[1]=n=>_.$router.push({name:"ModelAgentDetail",query:{id:`${_.$route.query.id}`}}))},{default:l(()=>[b(g(_.$t("model.agent.button.view")),1)]),_:1})]),_:1})])}const fe=q(ie,[["render",_e],["__scopeId","data-v-6fea42ce"]]),be={class:"container"},ge={class:"wrapper"},ve={name:"ModelAgentUpdate"},ye=I({...ve,setup(_){const{loading:i,setLoading:d}=B(!1),u=h(1),m=h({}),n=async()=>{d(!0);try{await ne(m.value),u.value=3,m.value={}}catch{}finally{d(!1)}},v=(o,k)=>{if(typeof o=="number"){u.value=o;return}if(o==="forward"||o==="submit"){if(m.value={...m.value,...k},o==="submit"){n();return}u.value+=1}else o==="backward"&&(u.value-=1)};return(o,k)=>{const w=G,t=x,e=ee,s=ae,V=le,c=te,f=oe;return p(),U("div",be,[a(e,{class:"container-breadcrumb"},{default:l(()=>[a(t,null,{default:l(()=>[a(w)]),_:1}),a(t,null,{default:l(()=>[b(g(o.$t("menu.agent")),1)]),_:1}),a(t,null,{default:l(()=>[b(g(o.$t("menu.model.agent.update")),1)]),_:1})]),_:1}),a(f,{loading:Z(i),style:{width:"100%"}},{default:l(()=>[a(c,{class:"general-card",bordered:!1},{default:l(()=>[W("div",ge,[a(V,{current:u.value,"onUpdate:current":k[0]||(k[0]=C=>u.value=C),style:{width:"660px"},"line-less":"",class:"steps"},{default:l(()=>[a(s,{description:o.$t("model.agent.subTitle.baseInfo")},{default:l(()=>[b(g(o.$t("model.agent.title.baseInfo")),1)]),_:1},8,["description"]),a(s,{description:o.$t("model.agent.subTitle.advanced")},{default:l(()=>[b(g(o.$t("model.agent.title.advanced")),1)]),_:1},8,["description"]),a(s,{description:o.$t("model.agent.subTitle.update.finish")},{default:l(()=>[b(g(o.$t("model.agent.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(p(),$(X,null,[u.value===1?(p(),$(de,{key:0,onChangeStep:v})):u.value===2?(p(),$(pe,{key:1,onChangeStep:v})):u.value===3?(p(),$(fe,{key:2,onChangeStep:v})):Y("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ke=q(ye,[["__scopeId","data-v-4bdc868b"]]);export{Ke as default};

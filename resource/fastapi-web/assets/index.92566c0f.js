import{u as K,a as Z,b as W,z as X,_ as Y}from"./index.9e0280d5.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{d as ee,e as m,bF as ae,B as n,C,aH as e,aG as o,aL as b,aM as f,D as R,bu as le,aD as _,u as r,aE as v,aJ as oe,aI as te,aZ as H,aK as ue,aF as se,aS as re,b2 as de,b1 as ie,bO as ne,aT as pe,bP as me,bQ as _e,bR as ce,bH as be,bI as fe,bS as ve,aU as ye,bi as ge,b5 as Ve,bT as qe,bU as ke}from"./arco.3f46b4ae.js";import{u as we}from"./loading.37fd256d.js";import{f as he}from"./vue.dbcf9bc3.js";import{p as $e,d as De,a as p}from"./common.cfd92899.js";import{c as Ue}from"./app.eab2a591.js";import{a as Se}from"./model.a8093b1a.js";import{q as Ce}from"./group.84bb5fa3.js";import{Q as i}from"./quota.624cca8b.js";import"./chart.2cea905d.js";const Re={class:"container"},He={class:"wrapper"},Ie={class:"submit-btn"},Le={name:"AppCreate"},Te=ee({...Le,setup(Be){const{t:q}=K(),{loading:I,setLoading:k}=we(!1),L=he(),w=Z(),T=W(),h=m([]);(async()=>{try{const{data:a}=await Se();h.value=a.items}catch{}})();const $=m([]);(async()=>{try{const{data:a}=await Ce();$.value=a.items}catch{}})();const D=m(),l=m({user_id:m(),name:"",models:[],is_limit_quota:!1,quota:m(),quota_expires_at:"",is_bind_group:!1,group:"",ip_whitelist:"",ip_blacklist:"",is_create_key:!0,remark:""}),B=async()=>{var t;if(!await((t=D.value)==null?void 0:t.validate())){k(!0);try{const{data:c}=await Ue(l.value);c.key?(navigator.clipboard.writeText(c.key),H.success(q("app.success.create"))):H.success(q("success.create")),L.push({name:"AppList"})}catch{}finally{k(!1)}}},A=a=>{l.value.quota=a};return(a,t)=>{const c=X,y=ue,F=se,U=re,s=de,G=ie,M=ne,g=pe,d=me,N=_e,Q=ce,z=be,P=fe,V=ve,S=ye,x=ge,E=Ve,O=qe,j=ke,J=ae("permission");return n(),C("div",Re,[e(F,{class:"container-breadcrumb"},{default:o(()=>[e(y,null,{default:o(()=>[e(c)]),_:1}),e(y,null,{default:o(()=>[b(f(a.$t("app.menu")),1)]),_:1}),e(y,null,{default:o(()=>[b(f(a.$t("app.menu.create")),1)]),_:1})]),_:1}),e(j,{loading:r(I),style:{width:"100%"}},{default:o(()=>[e(O,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:o(()=>[R("div",He,[e(E,{ref_key:"formRef",ref:D,model:l.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:o(()=>[le((n(),_(s,{field:"user_id",label:a.$t("common.user_id"),rules:[{required:r(w).role==="reseller"||r(w).role==="admin",message:a.$t("placeholder.user_id")}]},{default:o(()=>[e(U,{modelValue:l.value.user_id,"onUpdate:modelValue":t[0]||(t[0]=u=>l.value.user_id=u),placeholder:a.$t("placeholder.user_id"),precision:0,min:1},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])),[[J,["reseller","admin"]]]),e(s,{field:"name",label:a.$t("common.app_name"),rules:[{required:!0,message:a.$t("common.app_name")},{match:/^.{1,100}$/,message:a.$t("app.error.pattern.name")}]},{default:o(()=>[e(G,{modelValue:l.value.name,"onUpdate:modelValue":t[1]||(t[1]=u=>l.value.name=u),placeholder:a.$t("common.app_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(s,{field:"models",label:a.$t("common.models")},{default:o(()=>[e(M,{modelValue:l.value.models,"onUpdate:modelValue":t[2]||(t[2]=u=>l.value.models=u),placeholder:a.$t("app.placeholder.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:h.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),e(s,{field:"is_limit_quota",label:a.$t("common.limit_quota")},{default:o(()=>[e(g,{modelValue:l.value.is_limit_quota,"onUpdate:modelValue":t[3]||(t[3]=u=>l.value.is_limit_quota=u)},null,8,["modelValue"])]),_:1},8,["label"]),l.value.is_limit_quota?(n(),_(s,{key:0,field:"quota",label:a.$t("common.quota"),rules:[{required:!0,message:a.$t("placeholder.quota")}]},{default:o(()=>[e(U,{modelValue:l.value.quota,"onUpdate:modelValue":t[4]||(t[4]=u=>l.value.quota=u),placeholder:a.$t("app.placeholder.quota"),min:1e-6,max:9999999999999,parser:r($e),"allow-clear":""},{prefix:o(()=>[b(f(r(T).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label","rules"])):v("",!0),l.value.is_limit_quota?(n(),_(s,{key:1},{default:o(()=>[e(N,{type:"button",onChange:A},{default:o(()=>[e(d,{value:5},{default:o(()=>[e(i,{"model-value":5})]),_:1}),e(d,{value:10},{default:o(()=>[e(i,{"model-value":10})]),_:1}),e(d,{value:20},{default:o(()=>[e(i,{"model-value":20})]),_:1}),e(d,{value:50},{default:o(()=>[e(i,{"model-value":50})]),_:1}),e(d,{value:100},{default:o(()=>[e(i,{"model-value":100})]),_:1}),e(d,{value:200},{default:o(()=>[e(i,{"model-value":200})]),_:1}),e(d,{value:300},{default:o(()=>[e(i,{"model-value":300})]),_:1}),e(d,{value:500},{default:o(()=>[e(i,{"model-value":500})]),_:1}),e(d,{value:1e3},{default:o(()=>[e(i,{"model-value":1e3})]),_:1}),e(d,{value:2e3},{default:o(()=>[e(i,{"model-value":2e3})]),_:1}),e(d,{value:5e3},{default:o(()=>[e(i,{"model-value":5e3})]),_:1}),e(d,{value:1e4,style:{padding:"0 2px"}},{default:o(()=>[e(i,{"model-value":1e4})]),_:1})]),_:1})]),_:1})):v("",!0),l.value.is_limit_quota?(n(),_(s,{key:2,field:"quota_expires_at",label:a.$t("common.expires_at")},{default:o(()=>[e(Q,{modelValue:l.value.quota_expires_at,"onUpdate:modelValue":t[5]||(t[5]=u=>l.value.quota_expires_at=u),placeholder:a.$t("app.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":r(De),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>r(p)(l.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"])):v("",!0),e(s,{field:"is_bind_group",label:a.$t("common.bind_group")},{default:o(()=>[e(g,{modelValue:l.value.is_bind_group,"onUpdate:modelValue":t[6]||(t[6]=u=>l.value.is_bind_group=u)},null,8,["modelValue"])]),_:1},8,["label"]),l.value.is_bind_group?(n(),_(s,{key:3,field:"group",label:a.$t("common.groups"),rules:[{required:!0,message:a.$t("app.error.required.group")}]},{default:o(()=>[e(P,{modelValue:l.value.group,"onUpdate:modelValue":t[7]||(t[7]=u=>l.value.group=u),placeholder:a.$t("app.placeholder.group"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:o(()=>[(n(!0),C(oe,null,te($.value,u=>(n(),_(z,{key:u.id,value:u.id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):v("",!0),e(s,{field:"ip_whitelist",label:a.$t("common.ip_whitelist")},{default:o(()=>[e(V,{modelValue:l.value.ip_whitelist,"onUpdate:modelValue":t[8]||(t[8]=u=>l.value.ip_whitelist=u),placeholder:a.$t("app.placeholder.ip_whitelist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(s,{field:"ip_blacklist",label:a.$t("common.ip_blacklist")},{default:o(()=>[e(V,{modelValue:l.value.ip_blacklist,"onUpdate:modelValue":t[9]||(t[9]=u=>l.value.ip_blacklist=u),placeholder:a.$t("app.placeholder.ip_blacklist"),"auto-size":{minRows:5,maxRows:5}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(s,{field:"is_create_key",label:a.$t("app.label.is_create_key")},{default:o(()=>[e(g,{modelValue:l.value.is_create_key,"onUpdate:modelValue":t[10]||(t[10]=u=>l.value.is_create_key=u)},null,8,["modelValue"])]),_:1},8,["label"]),e(s,{field:"remark",label:a.$t("common.remark"),rules:[{required:!1}]},{default:o(()=>[e(V,{modelValue:l.value.remark,"onUpdate:modelValue":t[11]||(t[11]=u=>l.value.remark=u),placeholder:a.$t("placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(x,null,{default:o(()=>[R("div",Ie,[e(S,{type:"secondary",onClick:t[12]||(t[12]=u=>a.$router.push({name:"AppList"}))},{default:o(()=>[b(f(a.$t("button.cancel")),1)]),_:1}),e(S,{type:"primary",onClick:B},{default:o(()=>[b(f(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const ua=Y(Te,[["__scopeId","data-v-378e58c1"]]);export{ua as default};

import{u as R,f as x,_ as U}from"./index.dc70f908.js";/* empty css               *//* empty css               */import{d as k,e as r,c as S,r as T,t as D,B as L,C as z,F as E,aM as g,aH as t,aG as c,u as o,aL as V,aJ as G,b1 as H,b2 as J,aU as K,b3 as M,b5 as P,g as j}from"./arco.aed15247.js";import{f as A}from"./vue.0cc5b64a.js";import{g as O}from"./common.b3f59ccc.js";const Q={class:"sub-title"},W=k({__name:"forget",setup(X){const{proxy:h}=j(),{t:s}=R(),y=A(),p=r(!1),n=r(!1),m=r(!1),i=r(60),_=r(),u=r("login.captcha.get"),$=S(()=>s(u.value)),C=T({form:{email:"",password:"",captcha:""},rules:{email:[{required:!0,message:s("login.email.error.required.email")}],password:[{required:!0,message:s("login.email.error.required.password")}],captcha:[{required:!0,message:s("login.email.error.required.captcha")}]}}),{form:a,rules:I}=D(C),v=()=>{window.clearInterval(_.value),i.value=60,u.value="login.captcha.get",m.value=!1},B=()=>{n.value||h.$refs.formRef.validateField("email",l=>{l||(n.value=!0,u.value="login.captcha.ing",O({email:a.value.email,channel:"forget_account"}).then(()=>{n.value=!1,m.value=!0,u.value=`${s("login.captcha.get")}(${i.value-=1}s)`,_.value=window.setInterval(()=>{i.value-=1,u.value=`${s("login.captcha.get")}(${i.value}s)`,i.value<=0&&v()},1e3)}).catch(()=>{v(),n.value=!1}))})},F=({errors:l,values:e})=>{p.value||l||(p.value=!0,x({account:e.email,password:e.password,terminal:"web",code:e.captcha}).then(()=>{h.$message.success(s("forget.success")),y.go(0)}).catch(()=>{a.value.captcha=""}).finally(()=>{p.value=!1}))};return(l,e)=>{const w=H,f=J,b=K,q=M,N=P;return L(),z(G,null,[E("div",Q,g(l.$t("login.form.forget.title")),1),t(N,{ref:"formRef",model:o(a),rules:o(I),layout:"vertical",size:"large",class:"login-form",onSubmit:F},{default:c(()=>[t(f,{field:"email","hide-label":""},{default:c(()=>[t(w,{modelValue:o(a).email,"onUpdate:modelValue":e[0]||(e[0]=d=>o(a).email=d),placeholder:l.$t("login.email.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),t(f,{field:"captcha","hide-label":""},{default:c(()=>[t(w,{modelValue:o(a).captcha,"onUpdate:modelValue":e[1]||(e[1]=d=>o(a).captcha=d),placeholder:l.$t("login.email.placeholder.captcha"),"max-length":6,"allow-clear":"",style:{flex:"1 1"}},null,8,["modelValue","placeholder"]),t(b,{class:"captcha-btn",loading:n.value,disabled:m.value,onClick:B},{default:c(()=>[V(g(o($)),1)]),_:1},8,["loading","disabled"])]),_:1}),t(f,{field:"password","hide-label":""},{default:c(()=>[t(q,{modelValue:o(a).password,"onUpdate:modelValue":e[2]||(e[2]=d=>o(a).password=d),placeholder:l.$t("login.account.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),t(b,{class:"btn",loading:p.value,type:"primary","html-type":"submit"},{default:c(()=>[V(g(l.$t("forget.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});const oe=U(W,[["__scopeId","data-v-4e099c18"]]);export{oe as F};

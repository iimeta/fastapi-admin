import{V as Y,O as Z,k as x,_ as ee}from"./index.780491c6.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css               */import{d as le,e as b,B as p,C as h,aH as l,aG as u,aL as m,aM as U,D as B,aD as g,u as F,aE as j,aJ as k,aI as C,aK as ae,aF as oe,b1 as ue,b2 as te,aS as re,bQ as ne,bU as se,bO as ie,a5 as de,aU as me,a4 as pe,bi as ce,b5 as fe,bN as _e,bR as ge,g as ve}from"./arco.cbac690a.js";import{u as be}from"./loading.b56ef223.js";import{p as he}from"./common.5976a1f1.js";import{f as Ve,h as $e}from"./vue.4014b72a.js";import"./chart.e521dee8.js";import"./dayjs.min.4477b2e6.js";const ye={class:"container"},we={class:"wrapper"},Ue={class:"submit-btn"},ke={name:"SiteConfigUpdate"},Ce=le({...ke,setup(je){const{proxy:A}=ve(),N=Ve(),L=$e(),q=b(),e=b({id:"",domain:"",title:"",logo:"",favicon:"",avatar:"",bg_img:"",copyright:"",jump_url:"",keywords:"",description:"",icp_beian:"",ga_beian:"",register_tips:"",grant_quota:b(),quota_expires_at:b(),support_email_suffix:b(),register_welcome:"",host:"",port:b(),user_name:"",password:"",from_name:"",carousel1_title:"",carousels1:[],carousel2_title:"",carousels2:[],announcement_title:"",announcement_more_url:"",announcements:[],document_title:"",document_more_url:"",documents:[],recharge_tips:"",remark:"",status:1}),{loading:Q,setLoading:V}=be(!1),G=async()=>{var o;if(!await((o=q.value)==null?void 0:o.validate())){V(!0);try{e.value.support_email_suffix&&(e.value.support_email_suffix=e.value.support_email_suffix.split(","));const n=[];e.value.carousels1.forEach((r,c)=>{!r.image_url&&!r.jump_url&&n.push(c)}),n.reverse().forEach(r=>{e.value.carousels1.splice(r,1)});const v=[];e.value.carousels2.forEach((r,c)=>{!r.image_url&&!r.jump_url&&v.push(c)}),v.reverse().forEach(r=>{e.value.carousels2.splice(r,1)});const $=[];e.value.announcements.forEach((r,c)=>{!r.content&&!r.jump_url&&$.push(c)}),$.reverse().forEach(r=>{e.value.announcements.splice(r,1)});const s=[];e.value.documents.forEach((r,c)=>{!r.title&&!r.jump_url&&s.push(c)}),s.reverse().forEach(r=>{e.value.documents.splice(r,1)}),await Y(e.value).then(()=>{A.$message.success("\u66F4\u65B0\u6210\u529F"),N.push({name:"SiteConfig"})})}catch{e.value.support_email_suffix&&(e.value.support_email_suffix=e.value.support_email_suffix.join(","))}finally{V(!1)}}};(async(a={id:L.query.id})=>{var o;V(!0);try{const{data:n}=await Z(a);e.value.id=n.id,e.value.domain=n.domain,e.value.title=n.title,e.value.logo=n.logo,e.value.favicon=n.favicon,e.value.avatar=n.avatar,e.value.bg_img=n.bg_img,e.value.copyright=n.copyright,e.value.jump_url=n.jump_url,e.value.keywords=n.keywords,e.value.description=n.description,e.value.icp_beian=n.icp_beian,e.value.ga_beian=n.ga_beian,e.value.register_tips=n.register_tips,e.value.grant_quota=n.grant_quota,e.value.quota_expires_at=n.quota_expires_at,e.value.support_email_suffix=(o=n.support_email_suffix)==null?void 0:o.join(","),e.value.register_welcome=n.register_welcome,e.value.host=n.host,e.value.port=n.port,e.value.user_name=n.user_name,e.value.password=n.password,e.value.from_name=n.from_name,e.value.carousel1_title=n.carousel1_title,e.value.carousels1=n.carousels1,e.value.carousel2_title=n.carousel2_title,e.value.carousels2=n.carousels2,e.value.announcement_title=n.announcement_title,e.value.announcement_more_url=n.announcement_more_url,e.value.announcements=n.announcements,e.value.document_title=n.document_title,e.value.document_more_url=n.document_more_url,e.value.documents=n.documents,e.value.recharge_tips=n.recharge_tips,e.value.remark=n.remark,e.value.status=n.status,(!e.value.carousels1||e.value.carousels1.length===0)&&(e.value.carousels1=[],I()),(!e.value.carousels2||e.value.carousels2.length===0)&&(e.value.carousels2=[],D()),(!e.value.announcements||e.value.announcements.length===0)&&(e.value.announcements=[],R()),(!e.value.documents||e.value.documents.length===0)&&(e.value.documents=[],S())}catch{}finally{V(!1)}})();const M=a=>{e.value.grant_quota=a},I=()=>{const a={image_url:"",jump_url:""};e.value.carousels1.push(a)},O=a=>{e.value.carousels1.splice(a,1)},D=()=>{const a={image_url:"",jump_url:""};e.value.carousels2.push(a)},P=a=>{e.value.carousels2.splice(a,1)},R=()=>{const a={content:"",jump_url:""};e.value.announcements.push(a)},T=a=>{e.value.announcements.splice(a,1)},S=()=>{const a={title:"",jump_url:""};e.value.documents.push(a)},z=a=>{e.value.documents.splice(a,1)};return(a,o)=>{const n=x,v=ae,$=oe,s=ue,r=te,c=re,f=ne,H=se,E=ie,y=de,_=me,w=pe,J=ce,K=fe,W=_e,X=ge;return p(),h("div",ye,[l($,{class:"container-breadcrumb"},{default:u(()=>[l(v,null,{default:u(()=>[l(n)]),_:1}),l(v,null,{default:u(()=>[m(U(a.$t("menu.sys")),1)]),_:1}),l(v,null,{default:u(()=>[m(U(a.$t("menu.site.config.update")),1)]),_:1})]),_:1}),l(X,{loading:F(Q),style:{width:"100%"}},{default:u(()=>[l(W,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:u(()=>[B("div",we,[l(K,{ref_key:"formRef",ref:q,model:e.value,class:"form","label-col-props":{span:4}},{default:u(()=>[l(r,{field:"domain",label:a.$t("site.config.label.domain"),rules:[{required:!0,message:a.$t("site.config.error.domain.required")}]},{default:u(()=>[l(s,{modelValue:e.value.domain,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.domain=t),placeholder:a.$t("site.config.placeholder.domain"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(r,{field:"title",label:a.$t("site.config.label.title"),rules:[{required:!0,message:a.$t("site.config.error.title.required")}]},{default:u(()=>[l(s,{modelValue:e.value.title,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.title=t),placeholder:a.$t("site.config.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(r,{field:"logo",label:a.$t("site.config.label.logo"),rules:[{required:!0,message:a.$t("site.config.error.logo.required")}]},{default:u(()=>[l(s,{modelValue:e.value.logo,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.logo=t),placeholder:a.$t("site.config.placeholder.logo"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(r,{field:"favicon",label:a.$t("site.config.label.favicon"),rules:[{required:!0,message:a.$t("site.config.error.favicon.required")}]},{default:u(()=>[l(s,{modelValue:e.value.favicon,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.favicon=t),placeholder:a.$t("site.config.placeholder.favicon"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(r,{field:"avatar",label:a.$t("site.config.label.avatar")},{default:u(()=>[l(s,{modelValue:e.value.avatar,"onUpdate:modelValue":o[4]||(o[4]=t=>e.value.avatar=t),placeholder:a.$t("site.config.placeholder.avatar"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"bg_img",label:a.$t("site.config.label.bg_img")},{default:u(()=>[l(s,{modelValue:e.value.bg_img,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value.bg_img=t),placeholder:a.$t("site.config.placeholder.bg_img"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"copyright",label:a.$t("site.config.label.copyright")},{default:u(()=>[l(s,{modelValue:e.value.copyright,"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.copyright=t),placeholder:a.$t("site.config.placeholder.copyright"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"jump_url",label:a.$t("site.config.label.jump_url")},{default:u(()=>[l(s,{modelValue:e.value.jump_url,"onUpdate:modelValue":o[7]||(o[7]=t=>e.value.jump_url=t),placeholder:a.$t("site.config.placeholder.jump_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"keywords",label:a.$t("site.config.label.keywords")},{default:u(()=>[l(s,{modelValue:e.value.keywords,"onUpdate:modelValue":o[8]||(o[8]=t=>e.value.keywords=t),placeholder:a.$t("site.config.placeholder.keywords"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"description",label:a.$t("site.config.label.description")},{default:u(()=>[l(s,{modelValue:e.value.description,"onUpdate:modelValue":o[9]||(o[9]=t=>e.value.description=t),placeholder:a.$t("site.config.placeholder.description"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"icp_beian",label:a.$t("site.config.label.icp_beian")},{default:u(()=>[l(s,{modelValue:e.value.icp_beian,"onUpdate:modelValue":o[10]||(o[10]=t=>e.value.icp_beian=t),placeholder:a.$t("site.config.placeholder.icp_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"ga_beian",label:a.$t("site.config.label.ga_beian")},{default:u(()=>[l(s,{modelValue:e.value.ga_beian,"onUpdate:modelValue":o[11]||(o[11]=t=>e.value.ga_beian=t),placeholder:a.$t("site.config.placeholder.ga_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"register_tips",label:a.$t("site.config.label.register_tips")},{default:u(()=>[l(s,{modelValue:e.value.register_tips,"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.register_tips=t),placeholder:a.$t("site.config.placeholder.register_tips"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e.value.register_tips?j("",!0):(p(),g(r,{key:0,field:"grant_quota",label:a.$t("site.config.label.grant_quota")},{default:u(()=>[l(c,{modelValue:e.value.grant_quota,"onUpdate:modelValue":o[13]||(o[13]=t=>e.value.grant_quota=t),placeholder:a.$t("site.config.placeholder.grant_quota"),min:1e-6,max:9999999999999,parser:F(he),"allow-clear":""},{prefix:u(()=>[m(" $ ")]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label"])),e.value.register_tips?j("",!0):(p(),g(r,{key:1},{default:u(()=>[l(H,{type:"button",onChange:M},{default:u(()=>[l(f,{value:1},{default:u(()=>[m(" $1 ")]),_:1}),l(f,{value:2},{default:u(()=>[m(" $2 ")]),_:1}),l(f,{value:5},{default:u(()=>[m(" $5 ")]),_:1}),l(f,{value:10},{default:u(()=>[m(" $10 ")]),_:1}),l(f,{value:20},{default:u(()=>[m(" $20 ")]),_:1}),l(f,{value:50},{default:u(()=>[m(" $50 ")]),_:1}),l(f,{value:100},{default:u(()=>[m(" $100 ")]),_:1}),l(f,{value:200},{default:u(()=>[m(" $200 ")]),_:1}),l(f,{value:1e3},{default:u(()=>[m(" $1000 ")]),_:1}),l(f,{value:1e4},{default:u(()=>[m(" $10000 ")]),_:1})]),_:1})]),_:1})),e.value.register_tips?j("",!0):(p(),g(r,{key:2,field:"quota_expires_at",label:a.$t("site.config.label.quota_expires_at")},{default:u(()=>[l(c,{modelValue:e.value.quota_expires_at,"onUpdate:modelValue":o[14]||(o[14]=t=>e.value.quota_expires_at=t),placeholder:a.$t("site.config.placeholder.quota_expires_at"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),l(r,{field:"support_email_suffix",label:a.$t("site.config.label.support_email_suffix")},{default:u(()=>[l(s,{modelValue:e.value.support_email_suffix,"onUpdate:modelValue":o[15]||(o[15]=t=>e.value.support_email_suffix=t),placeholder:a.$t("site.config.placeholder.support_email_suffix"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"register_welcome",label:a.$t("site.config.label.register_welcome")},{default:u(()=>[l(E,{modelValue:e.value.register_welcome,"onUpdate:modelValue":o[16]||(o[16]=t=>e.value.register_welcome=t),placeholder:a.$t("site.config.placeholder.register_welcome"),"auto-size":{minRows:3,maxRows:20}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"host",label:a.$t("site.config.label.host")},{default:u(()=>[l(s,{modelValue:e.value.host,"onUpdate:modelValue":o[17]||(o[17]=t=>e.value.host=t),placeholder:a.$t("site.config.placeholder.host"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"port",label:a.$t("site.config.label.port")},{default:u(()=>[l(c,{modelValue:e.value.port,"onUpdate:modelValue":o[18]||(o[18]=t=>e.value.port=t),placeholder:a.$t("site.config.placeholder.port"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"user_name",label:a.$t("site.config.label.user_name")},{default:u(()=>[l(s,{modelValue:e.value.user_name,"onUpdate:modelValue":o[19]||(o[19]=t=>e.value.user_name=t),placeholder:a.$t("site.config.placeholder.user_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"password",label:a.$t("site.config.label.password")},{default:u(()=>[l(s,{modelValue:e.value.password,"onUpdate:modelValue":o[20]||(o[20]=t=>e.value.password=t),placeholder:a.$t("site.config.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"from_name",label:a.$t("site.config.label.from_name")},{default:u(()=>[l(s,{modelValue:e.value.from_name,"onUpdate:modelValue":o[21]||(o[21]=t=>e.value.from_name=t),placeholder:a.$t("site.config.placeholder.from_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"carousel1_title",label:a.$t("site.config.label.carousel1_title")},{default:u(()=>[l(s,{modelValue:e.value.carousel1_title,"onUpdate:modelValue":o[22]||(o[22]=t=>e.value.carousel1_title=t),placeholder:a.$t("site.config.placeholder.carousel1_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),h(k,null,C(e.value.carousels1,(t,i)=>(p(),g(r,{key:i,label:`${i+1}. `+a.$t("site.config.label.carousels1")},{default:u(()=>[l(s,{modelValue:e.value.carousels1[i].image_url,"onUpdate:modelValue":d=>e.value.carousels1[i].image_url=d,placeholder:a.$t("site.config.placeholder.carousels1.image_url"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(s,{modelValue:e.value.carousels1[i].jump_url,"onUpdate:modelValue":d=>e.value.carousels1[i].jump_url=d,placeholder:a.$t("site.config.placeholder.carousels1.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(_,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[23]||(o[23]=d=>I())},{default:u(()=>[l(y)]),_:1}),l(_,{type:"secondary",shape:"circle",onClick:d=>O(i)},{default:u(()=>[l(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),l(r,{field:"carousel2_title",label:a.$t("site.config.label.carousel2_title")},{default:u(()=>[l(s,{modelValue:e.value.carousel2_title,"onUpdate:modelValue":o[24]||(o[24]=t=>e.value.carousel2_title=t),placeholder:a.$t("site.config.placeholder.carousel2_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),h(k,null,C(e.value.carousels2,(t,i)=>(p(),g(r,{key:i,label:`${i+1}. `+a.$t("site.config.label.carousels2")},{default:u(()=>[l(s,{modelValue:e.value.carousels2[i].image_url,"onUpdate:modelValue":d=>e.value.carousels2[i].image_url=d,placeholder:a.$t("site.config.placeholder.carousels2.image_url"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(s,{modelValue:e.value.carousels2[i].jump_url,"onUpdate:modelValue":d=>e.value.carousels2[i].jump_url=d,placeholder:a.$t("site.config.placeholder.carousels2.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(_,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[25]||(o[25]=d=>D())},{default:u(()=>[l(y)]),_:1}),l(_,{type:"secondary",shape:"circle",onClick:d=>P(i)},{default:u(()=>[l(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),l(r,{field:"announcement_title",label:a.$t("site.config.label.announcement_title")},{default:u(()=>[l(s,{modelValue:e.value.announcement_title,"onUpdate:modelValue":o[26]||(o[26]=t=>e.value.announcement_title=t),placeholder:a.$t("site.config.placeholder.announcement_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"announcement_more_url",label:a.$t("site.config.label.announcement_more_url")},{default:u(()=>[l(s,{modelValue:e.value.announcement_more_url,"onUpdate:modelValue":o[27]||(o[27]=t=>e.value.announcement_more_url=t),placeholder:a.$t("site.config.placeholder.announcement_more_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),h(k,null,C(e.value.announcements,(t,i)=>(p(),g(r,{key:i,label:`${i+1}. `+a.$t("site.config.label.announcements")},{default:u(()=>[l(s,{modelValue:e.value.announcements[i].content,"onUpdate:modelValue":d=>e.value.announcements[i].content=d,placeholder:a.$t("site.config.placeholder.announcements.content"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(s,{modelValue:e.value.announcements[i].jump_url,"onUpdate:modelValue":d=>e.value.announcements[i].jump_url=d,placeholder:a.$t("site.config.placeholder.announcements.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(_,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[28]||(o[28]=d=>R())},{default:u(()=>[l(y)]),_:1}),l(_,{type:"secondary",shape:"circle",onClick:d=>T(i)},{default:u(()=>[l(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),l(r,{field:"document_title",label:a.$t("site.config.label.document_title")},{default:u(()=>[l(s,{modelValue:e.value.document_title,"onUpdate:modelValue":o[29]||(o[29]=t=>e.value.document_title=t),placeholder:a.$t("site.config.placeholder.document_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"document_more_url",label:a.$t("site.config.label.document_more_url")},{default:u(()=>[l(s,{modelValue:e.value.document_more_url,"onUpdate:modelValue":o[30]||(o[30]=t=>e.value.document_more_url=t),placeholder:a.$t("site.config.placeholder.document_more_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),h(k,null,C(e.value.documents,(t,i)=>(p(),g(r,{key:i,label:`${i+1}. `+a.$t("site.config.label.documents")},{default:u(()=>[l(s,{modelValue:e.value.documents[i].title,"onUpdate:modelValue":d=>e.value.documents[i].title=d,placeholder:a.$t("site.config.placeholder.documents.title"),style:{width:"42%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(s,{modelValue:e.value.documents[i].jump_url,"onUpdate:modelValue":d=>e.value.documents[i].jump_url=d,placeholder:a.$t("site.config.placeholder.documents.jump_url"),style:{width:"42%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(_,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[31]||(o[31]=d=>S())},{default:u(()=>[l(y)]),_:1}),l(_,{type:"secondary",shape:"circle",onClick:d=>z(i)},{default:u(()=>[l(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),l(r,{field:"recharge_tips",label:a.$t("site.config.label.recharge_tips")},{default:u(()=>[l(s,{modelValue:e.value.recharge_tips,"onUpdate:modelValue":o[32]||(o[32]=t=>e.value.recharge_tips=t),placeholder:a.$t("site.config.placeholder.recharge_tips"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(r,{field:"remark",label:a.$t("site.config.label.remark")},{default:u(()=>[l(E,{modelValue:e.value.remark,"onUpdate:modelValue":o[33]||(o[33]=t=>e.value.remark=t),placeholder:a.$t("site.config.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(J,null,{default:u(()=>[B("div",Ue,[l(_,{type:"secondary",onClick:o[34]||(o[34]=t=>a.$router.push({name:"SiteConfig"}))},{default:u(()=>[m(U(a.$t("button.cancel")),1)]),_:1}),l(_,{type:"primary",onClick:G},{default:u(()=>[m(U(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Me=ee(Ce,[["__scopeId","data-v-46139dbf"]]);export{Me as default};

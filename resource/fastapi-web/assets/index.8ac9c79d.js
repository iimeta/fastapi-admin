import{k as O,_ as P}from"./index.0c5004d5.js";/* empty css               *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css                */import{d as j,e as m,B as b,C as k,aH as e,aG as l,aL as u,aM as i,F as v,u as s,bT as p,aJ as z,aI as A,aD as J,aK as K,aF as W,b1 as X,b2 as Y,aS as Z,bQ as x,bV as ee,bi as ae,bW as le,bF as te,bG as re,bP as oe,bO as ue,aU as se,b5 as de,bN as ne,bR as pe,g as me}from"./arco.ba78a5b2.js";import{u as ie}from"./loading.0618e973.js";import{f as ce}from"./vue.2736b3ca.js";import{q as _e}from"./common.df364eef.js";import{h as fe}from"./admin_user.1ca7cdd7.js";import{b as be}from"./model.0c02f810.js";import{q as ve}from"./group.8098b32c.js";import"./chart.df189e8a.js";const qe={class:"container"},$e={class:"wrapper"},ye={style:{"margin-left":"10px"}},ge={class:"submit-btn"},Ve={name:"UserCreate"},he=j({...Ve,setup(we){const{proxy:U}=me(),{loading:C,setLoading:c}=ie(!1),D=ce(),q=localStorage.getItem("userRole"),$=m([]);(async()=>{c(!0);try{const{data:a}=await be();$.value=a.items}catch{}finally{c(!1)}})();const y=m([]);(async()=>{try{const{data:a}=await ve();y.value=a.items}catch{}})();const g=m(),t=m({name:"",email:"",account:"",password:"",quota:m(),quota_type:"1",quota_expires_at:"",models:[],groups:[],remark:""}),B=async()=>{var o;if(!await((o=g.value)==null?void 0:o.validate())){c(!0);try{await fe(t.value).then(()=>{U.$message.success("\u65B0\u5EFA\u6210\u529F"),D.push({name:"UserList"})})}catch{}finally{c(!1)}}},F=a=>{t.value.quota=a*5e5};return(a,o)=>{const V=O,f=K,I=W,_=X,n=Y,L=Z,d=x,H=ee,h=ae,R=le,S=te,T=re,G=oe,N=ue,w=se,M=de,Q=ne,E=pe;return b(),k("div",qe,[e(I,{class:"container-breadcrumb"},{default:l(()=>[e(f,null,{default:l(()=>[e(V)]),_:1}),e(f,null,{default:l(()=>[u(i(a.$t("menu.user")),1)]),_:1}),e(f,null,{default:l(()=>[u(i(a.$t("menu.user.create")),1)]),_:1})]),_:1}),e(E,{loading:s(C),style:{width:"100%"}},{default:l(()=>[e(Q,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:l(()=>[v("div",$e,[e(M,{ref_key:"formRef",ref:g,model:t.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:l(()=>[e(n,{field:"name",label:a.$t("user.label.name"),rules:[{required:!0,message:a.$t("user.error.name.required")},{match:/^.{1,30}$/,message:a.$t("user.error.name.pattern")}]},{default:l(()=>[e(_,{modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=r=>t.value.name=r),placeholder:a.$t("user.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"email",label:a.$t("user.label.email"),rules:[{required:!0,message:a.$t("user.error.email.required")}]},{default:l(()=>[e(_,{modelValue:t.value.email,"onUpdate:modelValue":o[1]||(o[1]=r=>t.value.email=r),placeholder:a.$t("user.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"account",label:a.$t("user.label.account"),rules:[{required:!0,message:a.$t("user.error.account.required")}]},{default:l(()=>[e(_,{modelValue:t.value.account,"onUpdate:modelValue":o[2]||(o[2]=r=>t.value.account=r),placeholder:a.$t("user.placeholder.account"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"password",label:a.$t("user.label.password"),rules:[{required:!0,message:a.$t("user.error.password.required")},{match:/^.{6,}$/,message:a.$t("user.error.password.pattern")}]},{default:l(()=>[e(_,{modelValue:t.value.password,"onUpdate:modelValue":o[3]||(o[3]=r=>t.value.password=r),placeholder:a.$t("user.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"quota",label:a.$t("user.label.quota"),rules:[{required:!0,message:a.$t("user.error.quota.required")}]},{default:l(()=>[e(L,{modelValue:t.value.quota,"onUpdate:modelValue":o[4]||(o[4]=r=>t.value.quota=r),placeholder:a.$t("user.placeholder.quota"),precision:0,min:1,max:9999999999999},null,8,["modelValue","placeholder"]),v("div",ye," $"+i(t.value.quota?s(_e)(t.value.quota):"0"),1)]),_:1},8,["label","rules"]),e(n,null,{default:l(()=>[e(H,{type:"button",onChange:F},{default:l(()=>[e(d,{value:1},{default:l(()=>[u(" $1 ")]),_:1}),e(d,{value:2},{default:l(()=>[u(" $2 ")]),_:1}),e(d,{value:5},{default:l(()=>[u(" $5 ")]),_:1}),e(d,{value:10},{default:l(()=>[u(" $10 ")]),_:1}),e(d,{value:20},{default:l(()=>[u(" $20 ")]),_:1}),e(d,{value:50},{default:l(()=>[u(" $50 ")]),_:1}),e(d,{value:100},{default:l(()=>[u(" $100 ")]),_:1}),e(d,{value:200},{default:l(()=>[u(" $200 ")]),_:1}),e(d,{value:500},{default:l(()=>[u(" $500 ")]),_:1}),e(d,{value:1e3},{default:l(()=>[u(" $1000 ")]),_:1})]),_:1},8,["onChange"])]),_:1}),e(n,{field:"quota_type",label:a.$t("user.label.quota_type"),rules:[{required:!0,message:a.$t("user.error.quota_type.required")}]},{default:l(()=>[e(h,{size:"large"},{default:l(()=>[e(d,{modelValue:t.value.quota_type,"onUpdate:modelValue":o[5]||(o[5]=r=>t.value.quota_type=r),value:"1","default-checked":!0},{default:l(()=>[u(" \u5145\u503C ")]),_:1},8,["modelValue"]),e(d,{modelValue:t.value.quota_type,"onUpdate:modelValue":o[6]||(o[6]=r=>t.value.quota_type=r),value:"3"},{default:l(()=>[u(" \u8D60\u9001 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(n,{field:"quota_expires_at",label:a.$t("user.label.quota_expires_at")},{default:l(()=>[e(R,{modelValue:t.value.quota_expires_at,"onUpdate:modelValue":o[7]||(o[7]=r=>t.value.quota_expires_at=r),placeholder:a.$t("user.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":r=>s(p)(r).isBefore(s(p)().subtract(1,"day")),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>s(p)(t.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),e(n,{field:"groups",label:a.$t("user.label.groups"),style:{"align-items":"center"}},{default:l(()=>[e(T,{modelValue:t.value.groups,"onUpdate:modelValue":o[8]||(o[8]=r=>t.value.groups=r),placeholder:a.$t(s(q)==="reseller"?"user.placeholder.reseller.create.groups":"user.placeholder.create.groups"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:l(()=>[(b(!0),k(z,null,A(y.value,r=>(b(),J(S,{key:r.id,value:r.id,label:r.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(n,{field:"models",label:a.$t("user.label.models")},{default:l(()=>[e(G,{modelValue:t.value.models,"onUpdate:modelValue":o[9]||(o[9]=r=>t.value.models=r),placeholder:a.$t(s(q)==="reseller"?"user.placeholder.reseller.create.models":"user.placeholder.create.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:$.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),e(n,{field:"remark",label:a.$t("user.label.remark")},{default:l(()=>[e(N,{modelValue:t.value.remark,"onUpdate:modelValue":o[10]||(o[10]=r=>t.value.remark=r),placeholder:a.$t("user.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(h,null,{default:l(()=>[v("div",ge,[e(w,{type:"secondary",onClick:o[11]||(o[11]=r=>a.$router.push({name:"UserList"}))},{default:l(()=>[u(i(a.$t("button.cancel")),1)]),_:1}),e(w,{type:"primary",onClick:B},{default:l(()=>[u(i(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const We=P(he,[["__scopeId","data-v-ccc97612"]]);export{We as default};

import{_ as Ge,u as wt,J as $t,s as Ft,A as Ct,k as Vt,B as Dt}from"./index.15d033c0.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Ke,e as w,w as Qe,bS as We,B as a,C as _,bn as v,aD as o,aG as e,aH as t,u as r,aL as d,aM as n,aE as Bt,g as Xe,bA as Et,bB as xt,ad as At,bC as It,bD as Ze,bE as qt,bi as et,bb as Ut,b6 as St,a_ as tt,r as Oe,c as Fe,h as ce,bj as Ye,a6 as Lt,bs as zt,b as Nt,aJ as J,aI as G,D as N,E as Mt,n as Pt,aK as Tt,aF as Ht,bF as Rt,bG as Ot,b2 as Yt,bH as jt,b1 as Jt,aS as Gt,bT as Kt,bI as Qt,b5 as Wt,bJ as Xt,ab as Zt,aU as ea,bk as ta,bl as aa,b4 as la,bK as ua,bM as oa,aV as na,bN as sa}from"./arco.cbac690a.js";import{u as at}from"./loading.b56ef223.js";import{q as Ve,a as je}from"./common.4090c8c2.js";import{V as Je,_ as lt,q as ia,c as da,a as ra,s as _a,b as ma}from"./spend.vue_vue_type_script_setup_true_lang.428536d4.js";import{f as ca}from"./app.fe90ad3d.js";import{b as pa}from"./dashboard.32ceeb73.js";import{c as Ce,S as fa}from"./sortable.esm.59243d4c.js";import{q as va}from"./model.9884c1b9.js";import{f as ya}from"./agent.9d225bc3.js";/* empty css               *//* empty css                *//* empty css                */import{u as ka}from"./vue.4014b72a.js";import"./chart.e521dee8.js";const ha={style:{margin:"10px 0 30px 10px"}},ba={key:1},ga={key:1},wa={key:1},$a={key:1},Fa={key:1},Ca={key:1},Va={key:1},Da={key:1},Ba={key:1},Ea={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},xa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Aa={key:1},Ia={key:1},qa={key:1},Ua={key:1},Sa={key:1},La={key:1},za={key:1},Na={key:1},Ma={key:1},Pa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ta={key:1},Ha={key:1},Ra={key:1},Oa={key:1},Ya={key:1},ja={key:1},Ja={key:1},Ga={key:1},Ka={key:1},Qa={key:1},Wa={key:1},Xa={key:1},Za={key:1},el={key:1},tl={key:1},al={key:1},ll={key:1},ul={key:1},ol={key:1},nl={key:1},sl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},il={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},dl={key:1},rl={key:1},_l={key:1},ml={key:1},cl={key:1},pl={key:1},fl={key:1},vl={key:1},yl={key:1},kl={key:1},hl={key:1},bl={key:1},gl={key:1},wl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},$l={key:1},Fl={key:1},Cl={name:"ChatDetail"},Vl=Ke({...Cl,props:{id:{type:String,default:""}},setup(De){const pe=De,{loading:m,setLoading:F}=at(!0),u=w({}),{copy:le,copied:K}=ka(),{proxy:ue}=Xe();(async(g={id:pe.id})=>{F(!0);try{const{data:$}=await ia(g);u.value=$}catch{}finally{F(!1)}})();const U=g=>{le(g)};Qe(K,()=>{K.value&&ue.$message.success("\u590D\u5236\u6210\u529F")});const M=async(g,$)=>{const{data:p}=await da({id:g,field:$});le(p.value)},P=w(!1),I=w(),oe=w(),T=async(g,$)=>{P.value=!0,I.value=g,oe.value=$};return(g,$)=>{const p=Et,f=xt,S=At,c=It,h=Ze,R=qt,ne=et,se=Ut,ie=St,fe=tt,O=We("permission");return a(),_("div",ha,[v((a(),o(R,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ba,[d(n(u.value.trace_id)+" ",1),t(S,{class:"copy-btn",onClick:$[0]||($[0]=D=>U(u.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ga,n(u.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",wa,[d(n(u.value.creator)+" ",1),t(S,{class:"copy-btn",onClick:$[1]||($[1]=D=>M(u.value.id,"creator"))})]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",$a,n(u.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Fa,n(u.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ca,n(u.value.provider_name),1))]),_:1}),t(c,{label:"\u6A21\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Va,n(u.value.model||"-"),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Da,n(g.$t(`dict.model_type.${u.value.model_type}`)),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ba,n(g.$t(`chat.dict.stream.${u.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ea,n(u.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",xa,n(u.value.completion||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Aa,n(u.value.spend.group_name||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ia,n(u.value.spend.group_discount>0?Number((u.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(c,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",qa,n(u.value.spend.billing_methods?g.$t(`model.dict.billing_methods.${u.value.spend.billing_methods}`):"-"),1))]),_:1}),t(c,{label:"\u603B\u82B1\u8D39"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",{key:1,class:"spend",onClick:$[2]||($[2]=D=>u.value.status===1||u.value.status===2?T(u.value.spend,u.value.model_type):void 0)},n(u.value.spend.total_spend_tokens?`$${r(Ve)(u.value.spend.total_spend_tokens)}`:u.value.status===1||u.value.status===2?"$0.00":"-"),1))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ua,[u.value.conn_time>3e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>15e3?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>5e3?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.conn_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Sa,[u.value.duration>18e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>12e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>9e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.duration)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",La,[u.value.total_time>18e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>12e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>9e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.total_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",za,[u.value.status===1?(a(),o(h,{key:0,color:"green"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===2?(a(),o(h,{key:1,color:"gold"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===3?(a(),o(h,{key:2,color:"orange"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):(a(),o(h,{key:3,color:"red"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Na,n(u.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ma,n(u.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Pa,n(u.value.err_msg||"-"),1))]),_:1})]),_:1})),[[O,["reseller","user"]]]),v((a(),o(R,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ta,[d(n(u.value.trace_id)+" ",1),t(S,{class:"copy-btn",onClick:$[3]||($[3]=D=>U(u.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ha,n(u.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ra,[d(n(u.value.is_smart_match?"-":u.value.creator)+" ",1),u.value.is_smart_match?Bt("",!0):(a(),o(S,{key:0,class:"copy-btn",onClick:$[4]||($[4]=D=>M(u.value.id,"creator"))}))]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Oa,n(u.value.is_smart_match?"-":u.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ya,n(u.value.is_smart_match?"-":u.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ja,n(u.value.provider_name),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ja,n(g.$t(`dict.model_type.${u.value.model_type}`)),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ga,n(u.value.model_name||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ka,n(u.value.model||"-"),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Qa,n(u.value.real_model_name),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Wa,n(u.value.real_model),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Xa,n(g.$t(`chat.dict.stream.${u.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Za,n(g.$t(`chat.dict.is_enable_fallback.${u.value.is_enable_fallback||!1}`)),1))]),_:1}),t(c,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var D,q;return[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",el,n(((q=(D=u.value)==null?void 0:D.fallback_config)==null?void 0:q.model_agent_name)||"-"),1))]}),_:1}),t(c,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var D,q;return[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",tl,n(((q=(D=u.value)==null?void 0:D.fallback_config)==null?void 0:q.model)||"-"),1))]}),_:1}),t(c,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",al,n(g.$t(`chat.dict.is_enable_forward.${u.value.is_enable_forward||!1}`)),1))]),_:1}),t(c,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ll,n(u.value.is_enable_forward?g.$t(`chat.dict.forward_rule.${u.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),t(c,{label:"\u542F\u7528\u4EE3\u7406"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ul,n(g.$t(`chat.dict.is_enable_model_agent.${u.value.is_enable_model_agent||!1}`)),1))]),_:1}),t(c,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var D,q;return[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",ol,n(((q=(D=u.value)==null?void 0:D.model_agent)==null?void 0:q.name)||"-"),1))]}),_:1}),t(c,{label:"\u5BC6\u94A5",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",nl,[d(n(u.value.key?u.value.key.length>0?u.value.key.substr(0,u.value.key.length/2>10?10:u.value.key.length/2)+"************************************"+u.value.key.substr(-(u.value.key.length/2>5?5:u.value.key.length/2)):u.value.key:"-")+" ",1),t(S,{class:"copy-btn",onClick:$[5]||($[5]=D=>M(u.value.id,"key"))})]))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",sl,n(u.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",il,n(u.value.completion||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",dl,n(u.value.spend.group_name||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",rl,n(u.value.spend.group_discount>0?Number((u.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(c,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",_l,n(u.value.spend.billing_methods?g.$t(`model.dict.billing_methods.${u.value.spend.billing_methods}`):"-"),1))]),_:1}),t(c,{label:"\u603B\u82B1\u8D39"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",{key:1,class:"spend",onClick:$[6]||($[6]=D=>u.value.status===1||u.value.status===2?T(u.value.spend,u.value.model_type):void 0)},n(u.value.spend.total_spend_tokens?`$${r(Ve)(u.value.spend.total_spend_tokens)}`:u.value.status===1||u.value.status===2?"$0.00":"-"),1))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ml,[u.value.conn_time>1e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>5e3?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>3e3?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.conn_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",cl,[u.value.duration>12e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>9e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>6e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.duration)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",pl,[u.value.total_time>12e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>9e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>6e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.total_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u5185\u8017"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",fl,[u.value.internal_time>500?(a(),o(h,{key:0,color:"red"},{default:e(()=>[d(n(u.value.internal_time)+" ms ",1)]),_:1})):u.value.internal_time>300?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[d(n(u.value.internal_time)+" ms ",1)]),_:1})):u.value.internal_time>100?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[d(n(u.value.internal_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[d(n(u.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",vl,[u.value.status===1?(a(),o(h,{key:0,color:"green"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===2?(a(),o(h,{key:1,color:"gold"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===3?(a(),o(h,{key:2,color:"orange"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):(a(),o(h,{key:3,color:"red"},{default:e(()=>[d(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u672C\u5730IP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",yl,n(u.value.local_ip||"-"),1))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",kl,n(u.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8FDC\u7A0BIP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",hl,n(u.value.remote_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",bl,n(u.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",gl,n(u.value.created_at||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",wl,n(u.value.err_msg||"-"),1))]),_:1})]),_:1})),[[O,["admin"]]]),t(R,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,null,{default:e(()=>[t(ie,{type:"card"},{default:e(()=>[t(se,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:3})]),_:1})):(a(),o(ne,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[u.value.messages?(a(),o(r(Je),{key:0,path:"res",data:u.value.messages,"show-length":!0},null,8,["data"])):(a(),_("span",$l,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),v((a(),o(R,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,null,{default:e(()=>[t(ie,{type:"card"},{default:e(()=>[t(se,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:3})]),_:1})):(a(),o(ne,{key:1},{default:e(()=>[u.value.model_agent?(a(),o(r(Je),{key:0,data:u.value.model_agent,"show-length":!0},null,8,["data"])):(a(),_("span",Fl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[O,["admin"]]]),t(fe,{visible:P.value,"onUpdate:visible":$[8]||($[8]=D=>P.value=D),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[t(lt,{modelValue:I.value,"onUpdate:modelValue":$[7]||($[7]=D=>I.value=D),"model-type":oe.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])])}}});const Dl=Ge(Vl,[["__scopeId","data-v-3b790704"]]),Bl={class:"container"},El={class:"action-icon"},xl={class:"action-icon"},Al={id:"tableSetting"},Il={style:{"margin-right":"4px",cursor:"move"}},ql={class:"title"},Ul=["onClick"],Sl={name:"ChatList"},Ll=Ke({...Sl,setup(De){const{loading:pe,setLoading:m}=at(!0),{t:F}=wt(),u=localStorage.getItem("userRole"),le=Oe({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),K=()=>({app_id:w(),trace_id:w(),user_id:w(),key:"",models:[],model_agents:[],total_time:w(),status:w(),req_time:[je().format("YYYY-MM-DD 00:00:00"),je().format("YYYY-MM-DD 23:59:59")]}),ue=w([]),y=w(K()),U=w([]),M=w([]),P=w("medium"),I=w([]),oe=w(!0),T=w(),g={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},$=Oe({...g}),p=Fe(()=>[{name:F("size.mini"),value:"mini"},{name:F("size.small"),value:"small"},{name:F("size.medium"),value:"medium"},{name:F("size.large"),value:"large"}]),f=Fe(()=>[{title:F(u==="reseller"||u==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:u==="reseller"||u==="admin"?"user_id":"app_id",slotName:u==="reseller"||u==="admin"?"user_id":"app_id",align:"center",width:75},{title:F("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:F("chat.columns.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:75},{title:F("chat.columns.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:75},{title:F("chat.columns.total_spend_tokens"),dataIndex:"total_spend_tokens",slotName:"total_spend_tokens",align:"center",slots:{title:()=>[ce("div",{style:{display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"}},[ce("span",F("chat.columns.total_spend_tokens")),ce(Ye,{content:"\u5404\u8BA1\u8D39\u9879\u603B\u548C \xD7 \u5206\u7EC4\u6298\u6263 \xA0\xA0 \u6216 \xA0\xA0 \u6309\u6B21 \xD7 \u5206\u7EC4\u6298\u6263"},{default:()=>ce(Lt,{style:{color:"var(--color-text-3)",whiteSpace:"pre"}})})])]}},{title:F("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:F("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:F("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:F("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center"},{title:F("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:F("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:F("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:F("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);(u==="reseller"||u==="user")&&f.value.splice(9,1);const S=Fe(()=>[{label:F("chat.dict.status.1"),value:1},{label:F("chat.dict.status.2"),value:2},{label:F("chat.dict.status.-1"),value:-1}]);u==="admin"&&S.value.push({label:F("chat.dict.status.3"),value:3},{label:F("chat.dict.status.-100"),value:-100});const c=async(s={...g,...y.value})=>{m(!0);try{const{data:i}=await ra(s);ue.value=i.items,$.current=s.current,$.pageSize=s.pageSize,$.total=i.paging.total}catch{}finally{m(!1),T.value.selectAll(!1)}};c();const h=()=>{c({...g,...y.value})},R=s=>{c({...g,...y.value,current:s})},ne=s=>{g.pageSize=s,c({...g,...y.value})},se=()=>{y.value=K(),h()},ie=(s,i)=>{P.value=s},fe=(s,i,B)=>{s?U.value.splice(B,0,i):U.value=M.value.filter(A=>A.dataIndex!==i.dataIndex)},O=(s,i,B,A=!1)=>{const x=A?Ce(s):s;return i>-1&&B>-1&&x.splice(i,1,x.splice(B,1,x[i]).pop()),x},D=s=>{s&&Pt(()=>{const i=document.getElementById("tableSetting");new fa(i,{onEnd(B){const{oldIndex:A,newIndex:x}=B;O(U.value,A,x),O(M.value,A,x)}})})};Qe(()=>f.value,s=>{U.value=Ce(s),U.value.forEach((i,B)=>{i.checked=!0}),M.value=Ce(U.value)},{deep:!0,immediate:!0});const q=w([]);u==="user"&&(async()=>{try{const{data:s}=await ca();q.value=s.items}catch{}})();const ve=w([]);(async()=>{try{const{data:s}=await va();ve.value=s.items}catch{}})();const Be=w([]);u==="admin"&&(async()=>{try{const{data:s}=await ya();Be.value=s.items}catch{}})();const{proxy:de}=Xe(),ye=w(!1),Ee=w(),ut=s=>{ye.value=!0,Ee.value=s},ot=()=>{ye.value=!1},xe=w(0),Ae=w(0),Ie=async(s={...y.value})=>{const{data:i}=await pa(s);xe.value=i.rpm,Ae.value=i.tpm};Ie();let qe;const Ue=()=>{clearInterval(qe)},Se=()=>{qe=setInterval(Ie,3e3)},Le=()=>{document.visibilityState==="hidden"?Ue():Se()};zt(()=>{Se(),document.addEventListener("visibilitychange",Le)}),Nt(()=>{Ue(),document.removeEventListener("visibilitychange",Le)});const ze=w(),Q=w(!1),H=w({}),nt=async s=>{var B;if(await((B=ze.value)==null?void 0:B.validate())){Q.value=!0,s(!1);return}s(),Ne({req_time:H.value.req_time,user_id:H.value.user_id})},st=()=>{Q.value=!1},Ne=s=>{if(I.value.length===0&&!s.req_time){Q.value=!0;return}m(!0),s.ids=I.value,_a(s).then(i=>{m(!1),de.$message.success("\u5BFC\u51FA\u6210\u529F"),T.value.selectAll(!1);const B=new Blob([i.data],{type:"application/vnd.ms-excel"}),A=window.URL.createObjectURL(B),x=document.createElement("a");x.href=A,x.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(A)}).catch(i=>{de.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",i)})},Me=w(),W=w(!1),E=w({status:[1,2,3,-1]}),it=async s=>{var B;if(await((B=Me.value)==null?void 0:B.validate())){W.value=!0,s(!1);return}s(),Pe({action:"time",value:E.value.value,user_id:E.value.user_id,status:E.value.status})},dt=()=>{W.value=!1},rt=s=>{I.value=s,oe.value=!s.length},Pe=s=>{if(I.value.length===0&&!s.value)W.value=!0;else{let i=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${I.value.length}\u6761\u6570\u636E?`;switch(s.action){case"delete":i=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${I.value.length}\u6761\u6570\u636E?`;break;case"time":s.user_id?i=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${s.user_id} \u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`:i=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`;break}de.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:i,hideCancel:!1,onOk:()=>{m(!0),s.ids=I.value,ma(s).then(B=>{m(!1),de.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),h(),T.value.selectAll(!1)})}})}},ke=w(!1),he=w(),Te=w(),_t=async(s,i)=>{ke.value=!0,he.value=s,Te.value=i};return(s,i)=>{const B=$t,A=Tt,x=Ht,re=Rt,Y=Ot,V=Yt,C=jt,X=Jt,j=Gt,_e=Kt,me=Qt,be=Wt,He=Xt,mt=Zt,Z=ea,Re=Ft,ge=et,we=Ye,ct=Ct,pt=ta,ft=aa,vt=Vt,yt=Dt,ee=la,kt=ua,b=Ze,ht=oa,bt=na,$e=tt,gt=sa,k=We("permission");return a(),_("div",Bl,[t(x,{class:"container-breadcrumb"},{default:e(()=>[t(A,null,{default:e(()=>[t(B)]),_:1}),t(A,null,{default:e(()=>[d(n(s.$t("menu.chat")),1)]),_:1}),t(A,null,{default:e(()=>[d(n(s.$t("menu.chat.list")),1)]),_:1})]),_:1}),t(gt,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[t(me,null,{default:e(()=>[t(C,{flex:1},{default:e(()=>[t(be,{model:y.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[v((a(),o(me,{gutter:16},{default:e(()=>[v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"app_id",label:s.$t("chat.form.app_id")},{default:e(()=>[t(Y,{modelValue:y.value.app_id,"onUpdate:modelValue":i[0]||(i[0]=l=>y.value.app_id=l),placeholder:s.$t("chat.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(q.value,l=>(a(),o(re,{key:l.app_id,value:l.app_id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(X,{modelValue:y.value.trace_id,"onUpdate:modelValue":i[1]||(i[1]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"user_id",label:s.$t("chat.form.reseller.user_id")},{default:e(()=>[t(j,{modelValue:y.value.user_id,"onUpdate:modelValue":i[2]||(i[2]=l=>y.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"key",label:s.$t("chat.form.key")},{default:e(()=>[t(X,{modelValue:y.value.key,"onUpdate:modelValue":i[3]||(i[3]=l=>y.value.key=l),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(X,{modelValue:y.value.trace_id,"onUpdate:modelValue":i[4]||(i[4]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(j,{modelValue:y.value.total_time,"onUpdate:modelValue":i[5]||(i[5]=l=>y.value.total_time=l),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),t(C,{span:8},{default:e(()=>[t(V,{field:"models",label:s.$t("chat.form.models")},{default:e(()=>[t(Y,{modelValue:y.value.models,"onUpdate:modelValue":i[6]||(i[6]=l=>y.value.models=l),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(ve.value,l=>(a(),o(re,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"status",label:s.$t("chat.form.status")},{default:e(()=>[t(Y,{modelValue:y.value.status,"onUpdate:modelValue":i[7]||(i[7]=l=>y.value.status=l),placeholder:s.$t("chat.form.selectDefault"),options:r(S),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(_e,{modelValue:y.value.req_time,"onUpdate:modelValue":i[8]||(i[8]=l=>y.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["reseller","user"]]]),v((a(),o(me,{gutter:16},{default:e(()=>[t(C,{span:5},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[t(X,{modelValue:y.value.trace_id,"onUpdate:modelValue":i[9]||(i[9]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:6},{default:e(()=>[t(V,{field:"models",label:s.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[t(Y,{modelValue:y.value.models,"onUpdate:modelValue":i[10]||(i[10]=l=>y.value.models=l),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(ve.value,l=>(a(),o(re,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"key",label:s.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[t(X,{modelValue:y.value.key,"onUpdate:modelValue":i[11]||(i[11]=l=>y.value.key=l),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(j,{modelValue:y.value.total_time,"onUpdate:modelValue":i[12]||(i[12]=l=>y.value.total_time=l),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"user_id",label:s.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[t(j,{modelValue:y.value.user_id,"onUpdate:modelValue":i[13]||(i[13]=l=>y.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:6},{default:e(()=>[t(V,{field:"model_agents",label:s.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[t(Y,{modelValue:y.value.model_agents,"onUpdate:modelValue":i[14]||(i[14]=l=>y.value.model_agents=l),placeholder:s.$t("key.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(Be.value,l=>(a(),o(re,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"status",label:s.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[t(Y,{modelValue:y.value.status,"onUpdate:modelValue":i[15]||(i[15]=l=>y.value.status=l),placeholder:s.$t("chat.form.selectDefault"),options:r(S),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(_e,{modelValue:y.value.req_time,"onUpdate:modelValue":i[16]||(i[16]=l=>y.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["admin"]]])]),_:1},8,["model"])]),_:1}),t(He,{style:{height:"84px"},direction:"vertical"}),t(C,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[t(ge,{direction:"vertical",size:18},{default:e(()=>[t(Z,{type:"primary",onClick:h},{icon:e(()=>[t(mt)]),default:e(()=>[d(" "+n(s.$t("chat.form.search")),1)]),_:1}),t(Z,{onClick:se},{icon:e(()=>[t(Re)]),default:e(()=>[d(" "+n(s.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(He,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(me,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[t(C,{span:16},{default:e(()=>[t(ge,null,{default:e(()=>[t(Z,{type:"primary",onClick:i[17]||(i[17]=l=>Ne({}))},{default:e(()=>[d(" \u5BFC\u51FA ")]),_:1}),v((a(),o(Z,{type:"primary",status:"danger",onClick:i[18]||(i[18]=l=>Pe({action:"delete"}))},{default:e(()=>[d(" \u5220\u9664 ")]),_:1})),[[k,["admin"]]])]),_:1})]),_:1}),t(C,{span:3},{default:e(()=>[d(" RPM: \xA0"+n(xe.value.toLocaleString()),1)]),_:1}),t(C,{span:3},{default:e(()=>[d(" TPM: \xA0"+n(Ae.value.toLocaleString()),1)]),_:1}),t(C,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[t(we,{content:s.$t("actions.refresh")},{default:e(()=>[N("div",{class:"action-icon",onClick:h},[t(Re,{size:"18"})])]),_:1},8,["content"]),t(ft,{onSelect:ie},{content:e(()=>[(a(!0),_(J,null,G(r(p),l=>(a(),o(pt,{key:l.value,value:l.value,class:Mt({active:l.value===P.value})},{default:e(()=>[N("span",null,n(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[t(we,{content:s.$t("actions.density")},{default:e(()=>[N("div",El,[t(ct,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(we,{content:s.$t("actions.column_setting")},{default:e(()=>[t(kt,{trigger:"click",position:"bl",onPopupVisibleChange:D},{content:e(()=>[N("div",Al,[(a(!0),_(J,null,G(M.value,(l,L)=>(a(),_("div",{key:l.dataIndex,class:"setting"},[N("div",Il,[t(yt)]),N("div",null,[t(ee,{modelValue:l.checked,"onUpdate:modelValue":z=>l.checked=z,onChange:z=>fe(z,l,L)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),N("div",ql,n(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:e(()=>[N("div",xl,[t(vt,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t(ht,{ref_key:"tableRef",ref:T,"row-key":"id",loading:r(pe),pagination:$,columns:U.value,data:ue.value,bordered:!1,size:P.value,"row-selection":le,onPageChange:R,onPageSizeChange:ne,onSelectionChange:rt},{user_id:e(({record:l})=>[d(n(l.is_smart_match?"-":l.user_id),1)]),input_tokens:e(({record:l})=>{var L,z,te,ae;return[d(n((L=l.spend.text)!=null&&L.input_tokens?(z=l.spend.text)==null?void 0:z.input_tokens:(te=l.spend.tiered_text)!=null&&te.input_tokens?(ae=l.spend.tiered_text)==null?void 0:ae.input_tokens:l.status===1?0:"-"),1)]}),output_tokens:e(({record:l})=>{var L,z,te,ae;return[d(n((L=l.spend.text)!=null&&L.output_tokens?(z=l.spend.text)==null?void 0:z.output_tokens:(te=l.spend.tiered_text)!=null&&te.output_tokens?(ae=l.spend.tiered_text)==null?void 0:ae.output_tokens:l.status===1?0:"-"),1)]}),total_spend_tokens:e(({record:l})=>[N("span",{class:"spend",onClick:L=>l.status===1||l.status===2?_t(l.spend,l.model_type):void 0},n(l.spend.total_spend_tokens?`$${r(Ve)(l.spend.total_spend_tokens)}`:l.status===1||l.status===2?"$0.00":"-"),9,Ul)]),stream:e(({record:l})=>[d(n(s.$t(`chat.dict.stream.${l.stream||!1}`)),1)]),conn_time:e(({record:l})=>[l.conn_time>3e4?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.conn_time>15e3?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.conn_time>5e3?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[d(n(l.conn_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.conn_time>1e4?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):l.conn_time>5e3?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):l.conn_time>3e3?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[d(n(l.conn_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),duration:e(({record:l})=>[l.duration>18e4?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.duration>12e4?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.duration>9e4?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[d(n(l.duration||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.duration>12e4?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):l.duration>9e4?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):l.duration>6e4?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[d(n(l.duration||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),total_time:e(({record:l})=>[l.total_time>18e4?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.total_time>12e4?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.total_time>9e4?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[d(n(l.total_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.total_time>12e4?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):l.total_time>9e4?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):l.total_time>6e4?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[d(n(l.total_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),internal_time:e(({record:l})=>[l.internal_time>1e3?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.internal_time>500?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.internal_time>300?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[d(n(l.internal_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.internal_time>500?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):l.internal_time>300?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):l.internal_time>100?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[d(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[d(n(l.internal_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),status:e(({record:l})=>[l.status===-1?(a(),o(b,{key:0,color:"red"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===2?(a(),o(b,{key:1,color:"gold"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===3?(a(),o(b,{key:2,color:"orange"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):(a(),o(b,{key:3,color:"green"},{default:e(()=>[d(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024))]),operations:e(({record:l})=>[t(Z,{type:"text",size:"small",onClick:L=>ut(l.id)},{default:e(()=>[d(n(s.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),t(bt,{title:s.$t("menu.chat.detail"),width:700,footer:!1,visible:ye.value,"unmount-on-close":"","render-to-body":"",onCancel:ot},{default:e(()=>[t(Dl,{id:Ee.value},null,8,["id"])]),_:1},8,["title","visible"]),t($e,{visible:Q.value,"onUpdate:visible":i[21]||(i[21]=l=>Q.value=l),title:s.$t("chat.form.title.chat_export"),onCancel:st,onBeforeOk:nt},{default:e(()=>[t(be,{ref_key:"chatExportForm",ref:ze,model:H.value},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(_e,{modelValue:H.value.req_time,"onUpdate:modelValue":i[19]||(i[19]=l=>H.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),v((a(),o(V,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[t(j,{modelValue:H.value.user_id,"onUpdate:modelValue":i[20]||(i[20]=l=>H.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[k,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t($e,{visible:W.value,"onUpdate:visible":i[28]||(i[28]=l=>W.value=l),title:s.$t("chat.form.title.chat_del"),onCancel:dt,onBeforeOk:it},{default:e(()=>[t(be,{ref_key:"chatDelForm",ref:Me,model:E.value},{default:e(()=>[t(V,{field:"value",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(_e,{modelValue:E.value.value,"onUpdate:modelValue":i[22]||(i[22]=l=>E.value.value=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(V,{field:"status",label:s.$t("chat.form.req.status"),rules:[{required:!0,message:s.$t("chat.error.req.status.required")}]},{default:e(()=>[t(ge,{size:"large"},{default:e(()=>[t(ee,{modelValue:E.value.status,"onUpdate:modelValue":i[23]||(i[23]=l=>E.value.status=l),value:1},{default:e(()=>[d(" \u6210\u529F ")]),_:1},8,["modelValue"]),t(ee,{modelValue:E.value.status,"onUpdate:modelValue":i[24]||(i[24]=l=>E.value.status=l),value:2},{default:e(()=>[d(" \u4E2D\u6B62 ")]),_:1},8,["modelValue"]),t(ee,{modelValue:E.value.status,"onUpdate:modelValue":i[25]||(i[25]=l=>E.value.status=l),value:3},{default:e(()=>[d(" \u91CD\u8BD5 ")]),_:1},8,["modelValue"]),t(ee,{modelValue:E.value.status,"onUpdate:modelValue":i[26]||(i[26]=l=>E.value.status=l),value:-1},{default:e(()=>[d(" \u5931\u8D25 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),t(V,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[t(j,{modelValue:E.value.user_id,"onUpdate:modelValue":i[27]||(i[27]=l=>E.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t($e,{visible:ke.value,"onUpdate:visible":i[30]||(i[30]=l=>ke.value=l),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[t(lt,{modelValue:he.value,"onUpdate:modelValue":i[29]||(i[29]=l=>he.value=l),"model-type":Te.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])]),_:1})])}}});const vu=Ge(Ll,[["__scopeId","data-v-0638a62e"]]);export{vu as default};

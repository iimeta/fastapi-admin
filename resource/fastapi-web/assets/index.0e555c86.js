import{_ as I,C as G}from"./index.dc70f908.js";/* empty css               *//* empty css                */import{d as L,e as g,B as _,aD as $,aG as a,aH as e,aL as c,aM as f,bB as D,bC as U,b2 as N,b1 as J,bK as H,aU as q,b5 as T,C as S,aJ as M,aI as B,aT as P,bi as F,bz as Q,F as W,bs as X,aE as Y,u as Z,aK as x,aF as ee,bL as ae,bM as te,bJ as le,bN as oe}from"./arco.aed15247.js";import{u as A}from"./loading.b5911e1d.js";import{c as R,d as se}from"./key.b6046ac2.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as O}from"./vue.0cc5b64a.js";/* empty css               */import{q as ne}from"./model.4c1fb15d.js";import{e as re}from"./agent.4d9ba6a8.js";/* empty css               */import"./chart.9aa6eafa.js";import"./base.87fcf6e2.js";const ue=L({__name:"base-info",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:d}=A(!1),u=O(),p=g(),n=g({id:"",corp:"",key:"",remark:"",status:1});(async(o={id:u.query.id})=>{d(!0);try{const{data:t}=await R(o);n.value.id=t.id,n.value.corp=t.corp,n.value.key=t.key,n.value.remark=t.remark,n.value.status=t.status}catch{}finally{d(!1)}})();const l=async()=>{var t;await((t=p.value)==null?void 0:t.validate())||m("changeStep","forward",{...n.value})};return(o,t)=>{const k=D,C=U,v=N,s=J,r=H,w=q,V=T;return _(),$(V,{ref_key:"formRef",ref:p,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(v,{field:"corp",label:o.$t("key.label.corp"),rules:[{required:!0,message:o.$t("key.error.corp.required")}]},{default:a(()=>[e(C,{modelValue:n.value.corp,"onUpdate:modelValue":t[0]||(t[0]=b=>n.value.corp=b),placeholder:o.$t("key.placeholder.corp")},{default:a(()=>[e(k,{value:"OpenAI"},{default:a(()=>[c("OpenAI")]),_:1}),e(k,{value:"Midjourney"},{default:a(()=>[c("Midjourney")]),_:1}),e(k,{value:"GLM"},{default:a(()=>[c("\u667A\u8C31AI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(v,{field:"key",label:o.$t("key.label.key"),rules:[{required:!0,message:o.$t("key.error.key.required")}]},{default:a(()=>[e(s,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=b=>n.value.key=b),placeholder:o.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(v,{field:"remark",label:o.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(r,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=b=>n.value.remark=b),placeholder:o.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,null,{default:a(()=>[e(w,{type:"primary",onClick:l},{default:a(()=>[c(f(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=I(ue,[["__scopeId","data-v-4106c1fc"]]),ce=L({__name:"advanced",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:d}=A(!0),u=O(),p=g([]);(async()=>{d(!0);try{const{data:s}=await ne();p.value=s.items}catch{}finally{d(!1)}})();const h=g([]);(async()=>{d(!0);try{const{data:s}=await re();h.value=s.items}catch{}finally{d(!1)}})();const o=g(),t=g({models:[],model_agents:[],is_agents_only:!1});(async(s={id:u.query.id})=>{d(!0);try{const{data:r}=await R(s);t.value.models=r.models,t.value.model_agents=r.model_agents,t.value.is_agents_only=r.is_agents_only}catch{}finally{d(!1)}})();const C=async()=>{var r;await((r=o.value)==null?void 0:r.validate())||m("changeStep","submit",{...t.value})},v=()=>{m("changeStep","backward")};return(s,r)=>{const w=D,V=U,b=N,j=P,K=q,z=F,E=T;return _(),$(E,{ref_key:"formRef",ref:o,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"models",label:s.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:t.value.models,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value.models=i),placeholder:s.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),S(M,null,B(p.value,i=>(_(),$(w,{key:i.id,value:i.id,label:i.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,{field:"model_agents",label:s.$t("key.label.modelAgents")},{default:a(()=>[e(V,{modelValue:t.value.model_agents,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value.model_agents=i),placeholder:s.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),S(M,null,B(h.value,i=>(_(),$(w,{key:i.id,value:i.id,label:i.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,{field:"is_agents_only",label:s.$t("key.label.isAgentsOnly")},{default:a(()=>[e(j,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":r[2]||(r[2]=i=>t.value.is_agents_only=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(z,null,{default:a(()=>[e(K,{type:"secondary",onClick:v},{default:a(()=>[c(f(s.$t("key.button.prev")),1)]),_:1}),e(K,{type:"primary",onClick:C},{default:a(()=>[c(f(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ie=I(ce,[["__scopeId","data-v-d826004b"]]);const pe={},_e={class:"success-wrap"};function me(y,m){const d=Q,u=q,p=F;return _(),S("div",_e,[e(d,{status:"success",title:y.$t("key.success.title"),subtitle:y.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(p,{size:16},{default:a(()=>[e(u,{key:"finish",type:"secondary",onClick:m[0]||(m[0]=n=>y.$router.push({name:"KeyModelList"}))},{default:a(()=>[c(f(y.$t("key.button.return")),1)]),_:1}),e(u,{key:"again",type:"primary",onClick:m[1]||(m[1]=n=>y.$router.push({name:"KeyDetail",query:{id:`${y.$route.query.id}`}}))},{default:a(()=>[c(f(y.$t("key.button.view")),1)]),_:1})]),_:1})])}const fe=I(pe,[["render",me],["__scopeId","data-v-016ee704"]]),ye={class:"container"},ve={class:"wrapper"},be={name:"KeyUpdate"},ke=L({...be,setup(y){const{loading:m,setLoading:d}=A(!1),u=g(1),p=g({}),n=async()=>{d(!0);try{await se(p.value),u.value=3,p.value={}}catch{}finally{d(!1)}},h=(l,o)=>{if(typeof l=="number"){u.value=l;return}if(l==="forward"||l==="submit"){if(p.value={...p.value,...o},l==="submit"){n();return}u.value+=1}else l==="backward"&&(u.value-=1)};return(l,o)=>{const t=G,k=x,C=ee,v=ae,s=te,r=le,w=oe;return _(),S("div",ye,[e(C,{class:"container-breadcrumb"},{default:a(()=>[e(k,null,{default:a(()=>[e(t)]),_:1}),e(k,null,{default:a(()=>[c(f(l.$t("menu.key")),1)]),_:1}),e(k,null,{default:a(()=>[c(f(l.$t("menu.key.update")),1)]),_:1})]),_:1}),e(w,{loading:Z(m),style:{width:"100%"}},{default:a(()=>[e(r,{class:"general-card",bordered:!1},{title:a(()=>[c(f(l.$t("key.title.update")),1)]),default:a(()=>[W("div",ve,[e(s,{current:u.value,"onUpdate:current":o[0]||(o[0]=V=>u.value=V),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(v,{description:l.$t("key.subTitle.baseInfo")},{default:a(()=>[c(f(l.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(v,{description:l.$t("key.subTitle.advanced")},{default:a(()=>[c(f(l.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(v,{description:l.$t("key.subTitle.update.finish")},{default:a(()=>[c(f(l.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(_(),$(X,null,[u.value===1?(_(),$(de,{key:0,onChangeStep:h})):u.value===2?(_(),$(ie,{key:1,onChangeStep:h})):u.value===3?(_(),$(fe,{key:2,onChangeStep:h})):Y("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Re=I(ke,[["__scopeId","data-v-b0da38cd"]]);export{Re as default};

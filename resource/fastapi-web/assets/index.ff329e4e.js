import{B as N,_ as T}from"./index.b8904415.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{d as E,e as i,B as n,C as p,aH as a,aG as o,aL as u,aM as m,F as q,aJ as y,aI as b,aD as g,u as J,aK as O,aF as z,bF as G,bA as H,bB as j,b2 as P,bK as Q,aT as W,aU as X,bi as Y,b5 as Z,bJ as x,bL as ee,g as ae}from"./arco.17b1a46f.js";import{u as le}from"./loading.44762de3.js";import{f as oe}from"./vue.32c094a4.js";import{c as te}from"./key.6094a176.js";import{q as re}from"./corp.1c244aa8.js";import{q as se}from"./model.65b014dc.js";import{f as ne}from"./agent.260ead94.js";import"./chart.d5ce7f1f.js";import"./base.87fcf6e2.js";const de={class:"container"},ue={class:"wrapper"},me={class:"submit-btn"},ie={name:"KeyCreate"},pe=E({...ie,setup(ce){const{loading:B,setLoading:s}=le(!1),{proxy:A}=ae(),F=oe(),v=i([]);(async()=>{s(!0);try{const{data:e}=await re();v.value=e.items}catch{}finally{s(!1)}})();const k=i([]);(async()=>{s(!0);try{const{data:e}=await se();k.value=e.items}catch{}finally{s(!1)}})();const $=i([]);(async()=>{s(!0);try{const{data:e}=await ne();$.value=e.items}catch{}finally{s(!1)}})();const V=i(),r=i({corp:"",key:"",remark:"",models:[],model_agents:[],is_agents_only:!1}),M=async()=>{var t;if(!await((t=V.value)==null?void 0:t.validate())){s(!0);try{await te(r.value).then(()=>{A.$message.success("\u65B0\u5EFA\u6210\u529F"),F.push({name:"ModelKeyList"})})}catch{}finally{s(!1)}}};return(e,t)=>{const h=N,c=O,I=z,w=G,f=H,_=j,d=P,L=Q,U=W,C=X,K=Y,S=Z,R=x,D=ee;return n(),p("div",de,[a(I,{class:"container-breadcrumb"},{default:o(()=>[a(c,null,{default:o(()=>[a(h)]),_:1}),a(c,null,{default:o(()=>[u(m(e.$t("menu.key")),1)]),_:1}),a(c,null,{default:o(()=>[u(m(e.$t("menu.key.create")),1)]),_:1})]),_:1}),a(D,{loading:J(B),style:{width:"100%"}},{default:o(()=>[a(R,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:o(()=>[q("div",ue,[a(S,{ref_key:"formRef",ref:V,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:o(()=>[a(w,{orientation:"left"},{default:o(()=>[u(m(e.$t("model.title.baseInfo")),1)]),_:1}),a(d,{field:"corp",label:e.$t("key.label.corp"),rules:[{required:!0,message:e.$t("key.error.corp.required")}]},{default:o(()=>[a(_,{modelValue:r.value.corp,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value.corp=l),placeholder:e.$t("key.placeholder.corp"),"allow-search":""},{default:o(()=>[(n(!0),p(y,null,b(v.value,l=>(n(),g(f,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(d,{field:"key",label:e.$t("key.label.key"),rules:[{required:!0,message:e.$t("key.error.key.required")}]},{default:o(()=>[a(L,{modelValue:r.value.key,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value.key=l),placeholder:e.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(d,{field:"remark",label:e.$t("key.label.remark"),rules:[{required:!1}]},{default:o(()=>[a(L,{modelValue:r.value.remark,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value.remark=l),placeholder:e.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(w,{orientation:"left"},{default:o(()=>[u(m(e.$t("model.title.advanced")),1)]),_:1}),a(d,{field:"models",label:e.$t("key.label.models"),rules:[{required:!1}]},{default:o(()=>[a(_,{modelValue:r.value.models,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value.models=l),placeholder:e.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:o(()=>[(n(!0),p(y,null,b(k.value,l=>(n(),g(f,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{field:"model_agents",label:e.$t("key.label.modelAgents")},{default:o(()=>[a(_,{modelValue:r.value.model_agents,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value.model_agents=l),placeholder:e.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:o(()=>[(n(!0),p(y,null,b($.value,l=>(n(),g(f,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{field:"is_agents_only",label:e.$t("key.label.isAgentsOnly")},{default:o(()=>[a(U,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":t[5]||(t[5]=l=>r.value.is_agents_only=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(K,null,{default:o(()=>[q("div",me,[a(C,{type:"secondary",onClick:t[6]||(t[6]=l=>e.$router.push({name:"ModelKeyList"}))},{default:o(()=>[u(m(e.$t("form.button.cancel")),1)]),_:1}),a(C,{type:"primary",onClick:M},{default:o(()=>[u(m(e.$t("form.button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const De=T(pe,[["__scopeId","data-v-b5715548"]]);export{De as default};

import{u as we,w as $e,o as ke,x as Ce,I as Ie,y as Ve,_ as ze}from"./index.dc70f908.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                */import{c as B,S as Se}from"./sortable.esm.2109e0e3.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as De,r as K,e as _,c as T,w as Ae,B as g,C as b,aH as e,aG as a,aL as i,aM as s,aJ as L,aI as N,aD as R,u as U,F as h,D as Me,n as Be,aK as Te,aF as Le,b1 as Ne,b2 as Ue,bA as Fe,bB as Pe,bC as xe,bD as qe,bE as Ee,b5 as Oe,bF as je,ab as He,aU as Ke,bi as Re,a5 as Ge,bj as Je,bl as Qe,bm as We,b4 as Xe,bG as Ye,bH as Ze,bI as et,bJ as tt}from"./arco.aed15247.js";import{u as at}from"./loading.b5911e1d.js";import{s as lt,q as ot,a as nt}from"./agent.4d9ba6a8.js";import{q as st}from"./model.4c1fb15d.js";import"./chart.9aa6eafa.js";import"./vue.0cc5b64a.js";import"./base.87fcf6e2.js";const dt={class:"container"},it={class:"action-icon"},ut={class:"action-icon"},ct={id:"tableSetting"},rt={style:{"margin-right":"4px",cursor:"move"}},mt={class:"title"},pt={key:0,class:"circle red"},_t={key:1,class:"circle"},gt={name:"ModelAgentList"},ft=De({...gt,setup(ht){const G=K({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),F=_([]);(async()=>{try{const{data:t}=await st();F.value=t.items}catch{}})();const J=async t=>{y(!0);try{await lt(t),V()}catch{}finally{y(!1)}},P=()=>({app_id:_(),name:"",models:[],key:"",type:_(),status:_(),created_at:[]}),{loading:Q,setLoading:y}=at(!0),{t:d}=we(),x=_([]),n=_(P()),v=_([]),k=_([]),z=_("medium"),w={current:1,pageSize:10,showTotal:!0,showPageSize:!0},C=K({...w}),W=T(()=>[{name:d("searchTable.size.mini"),value:"mini"},{name:d("searchTable.size.small"),value:"small"},{name:d("searchTable.size.medium"),value:"medium"},{name:d("searchTable.size.large"),value:"large"}]),X=T(()=>[{title:d("model.agent.columns.name"),dataIndex:"name",slotName:"name",align:"center",width:200},{title:d("model.agent.columns.baseUrl"),dataIndex:"base_url",slotName:"base_url",align:"center",width:200},{title:d("model.agent.columns.models"),dataIndex:"model_names",slotName:"model_names",align:"center",ellipsis:!0,tooltip:!0},{title:d("model.agent.columns.weight"),dataIndex:"weight",slotName:"weight",align:"center",width:80},{title:d("model.agent.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:80},{title:d("model.agent.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:170},{title:d("model.agent.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:290}]),Y=T(()=>[{label:d("model.agent.dict.status.1"),value:1},{label:d("model.agent.dict.status.2"),value:2}]),I=async(t={...w})=>{y(!0);try{const{data:o}=await ot(t);x.value=o.items,C.current=t.current,C.pageSize=t.pageSize,C.total=o.paging.total}catch{}finally{y(!1)}},V=()=>{I({...w,...n.value})},Z=t=>{I({...w,...n.value,current:t})},ee=t=>{w.pageSize=t,I({...w,...n.value})};I();const te=()=>{n.value=P()},ae=async t=>{y(!0);try{t.status=t.status===1?2:1,await nt(t),V()}catch{}finally{y(!1)}},le=(t,o)=>{z.value=t},oe=(t,o,r)=>{t?v.value.splice(r,0,o):v.value=k.value.filter(u=>u.dataIndex!==o.dataIndex)},q=(t,o,r,u=!1)=>{const m=u?B(t):t;return o>-1&&r>-1&&m.splice(o,1,m.splice(r,1,m[o]).pop()),m},ne=t=>{t&&Be(()=>{const o=document.getElementById("tableSetting");new Se(o,{onEnd(r){const{oldIndex:u,newIndex:m}=r;q(v.value,u,m),q(k.value,u,m)}})})};return Ae(()=>X.value,t=>{v.value=B(t),v.value.forEach((o,r)=>{o.checked=!0}),k.value=B(v.value)},{deep:!0,immediate:!0}),(t,o)=>{const r=$e,u=Te,m=Le,S=Ne,$=Ue,c=Fe,se=Pe,E=xe,de=qe,D=Ee,ie=Oe,O=je,ue=He,f=Ke,j=ke,H=Re,ce=Ge,A=Je,re=Ce,me=Qe,pe=We,_e=Ie,ge=Ve,fe=Xe,he=Ye,ve=Ze,be=et,ye=tt;return g(),b("div",dt,[e(m,{class:"container-breadcrumb"},{default:a(()=>[e(u,null,{default:a(()=>[e(r)]),_:1}),e(u,null,{default:a(()=>[i(s(t.$t("menu.agent")),1)]),_:1}),e(u,null,{default:a(()=>[i(s(t.$t("menu.model.agent.list")),1)]),_:1})]),_:1}),e(ye,{class:"general-card",title:t.$t("menu.model.agent.list"),bordered:!1},{default:a(()=>[e(D,null,{default:a(()=>[e(c,{flex:1},{default:a(()=>[e(ie,{model:n.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(D,{gutter:16},{default:a(()=>[e(c,{span:8},{default:a(()=>[e($,{field:"app_id",label:t.$t("model.agent.form.appId")},{default:a(()=>[e(S,{modelValue:n.value.app_id,"onUpdate:modelValue":o[0]||(o[0]=l=>n.value.app_id=l),placeholder:t.$t("model.agent.form.appId.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(c,{span:8},{default:a(()=>[e($,{field:"name",label:t.$t("model.agent.form.name")},{default:a(()=>[e(S,{modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value.name=l),placeholder:t.$t("model.agent.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(c,{span:8},{default:a(()=>[e($,{field:"models",label:t.$t("model.agent.form.models")},{default:a(()=>[e(E,{modelValue:n.value.models,"onUpdate:modelValue":o[2]||(o[2]=l=>n.value.models=l),placeholder:t.$t("model.agent.form.selectDefault"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(g(!0),b(L,null,N(F.value,l=>(g(),R(se,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(c,{span:8},{default:a(()=>[e($,{field:"key",label:t.$t("model.agent.form.key")},{default:a(()=>[e(S,{modelValue:n.value.key,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value.key=l),placeholder:t.$t("model.agent.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(c,{span:8},{default:a(()=>[e($,{field:"status",label:t.$t("model.agent.form.status")},{default:a(()=>[e(E,{modelValue:n.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>n.value.status=l),options:U(Y),placeholder:t.$t("model.agent.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(c,{span:8},{default:a(()=>[e($,{field:"created_at",label:t.$t("model.agent.form.created_at")},{default:a(()=>[e(de,{modelValue:n.value.created_at,"onUpdate:modelValue":o[5]||(o[5]=l=>n.value.created_at=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(O,{style:{height:"84px"},direction:"vertical"}),e(c,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(H,{direction:"vertical",size:18},{default:a(()=>[e(f,{type:"primary",onClick:V},{icon:a(()=>[e(ue)]),default:a(()=>[i(" "+s(t.$t("model.agent.form.search")),1)]),_:1}),e(f,{onClick:te},{icon:a(()=>[e(j)]),default:a(()=>[i(" "+s(t.$t("model.agent.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{style:{"margin-top":"0"}}),e(D,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(H,null,{default:a(()=>[e(f,{type:"primary",onClick:o[6]||(o[6]=l=>t.$router.push({name:"ModelAgentCreate"}))},{icon:a(()=>[e(ce)]),default:a(()=>[i(" "+s(t.$t("model.agent.operation.create")),1)]),_:1})]),_:1})]),_:1}),e(c,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:a(()=>[e(A,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[h("div",{class:"action-icon",onClick:V},[e(j,{size:"18"})])]),_:1},8,["content"]),e(pe,{onSelect:le},{content:a(()=>[(g(!0),b(L,null,N(U(W),l=>(g(),R(me,{key:l.value,value:l.value,class:Me({active:l.value===z.value})},{default:a(()=>[h("span",null,s(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(A,{content:t.$t("searchTable.actions.density")},{default:a(()=>[h("div",it,[e(re,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(A,{content:t.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(he,{trigger:"click",position:"bl",onPopupVisibleChange:ne},{content:a(()=>[h("div",ct,[(g(!0),b(L,null,N(k.value,(l,p)=>(g(),b("div",{key:l.dataIndex,class:"setting"},[h("div",rt,[e(ge)]),h("div",null,[e(fe,{modelValue:l.checked,"onUpdate:modelValue":M=>l.checked=M,onChange:M=>oe(M,l,p)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),h("div",mt,s(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:a(()=>[h("div",ut,[e(_e,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(be,{"row-key":"id",loading:U(Q),pagination:C,columns:v.value,data:x.value,bordered:!1,size:z.value,"row-selection":G,onPageChange:Z,onPageSizeChange:ee},{model_names:a(({record:l})=>{var p;return[i(s(((p=l==null?void 0:l.model_names)==null?void 0:p.join(","))||"-"),1)]}),weight:a(({record:l})=>[i(s(l.weight||"-"),1)]),status:a(({record:l})=>[l.status===2?(g(),b("span",pt)):(g(),b("span",_t)),i(" "+s(t.$t(`app.dict.status.${l.status}`)),1)]),operations:a(({record:l})=>[e(f,{type:"text",size:"small",onClick:p=>t.$router.push({name:"ModelAgentDetail",query:{id:`${l.id}`}})},{default:a(()=>[i(s(t.$t("model.agent.columns.operations.view")),1)]),_:2},1032,["onClick"]),e(f,{type:"text",size:"small",onClick:p=>t.$router.push({name:"ModelAgentUpdate",query:{id:`${l.id}`}})},{default:a(()=>[i(s(t.$t("model.agent.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(f,{type:"text",size:"small",onClick:p=>t.$router.push({name:"KeyModelList",query:{agent_id:`${l.id}`}})},{default:a(()=>[i(s(t.$t("model.agent.columns.operations.manageKey")),1)]),_:2},1032,["onClick"]),e(f,{type:"text",size:"small",onClick:p=>ae({id:`${l.id}`,status:Number(`${l.status}`)})},{default:a(()=>[i(s(t.$t(`key.columns.operations.status.${l.status}`)),1)]),_:2},1032,["onClick"]),e(ve,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:p=>J({id:`${l.id}`})},{default:a(()=>[e(f,{type:"text",size:"small"},{default:a(()=>[i(s(t.$t("model.agent.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1},8,["title"])])}}});const Ot=ze(ft,[["__scopeId","data-v-0c03dc64"]]);export{Ot as default};

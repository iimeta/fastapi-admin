import{u as we,k as Ve,s as $e,A as Se,B as Ie,_ as ze}from"./index.d4c38361.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              */import{d as Pe,r as K,e as c,c as z,w as xe,B as V,C as P,aH as a,aG as t,aL as p,aM as i,u as x,D as b,aJ as Z,aI as Q,aD as Ue,E as Be,n as De,aZ as U,a_ as Ne,aK as Te,aF as Ae,b1 as Le,b2 as Ee,bG as Fe,bI as Oe,bJ as Re,bK as Me,b5 as je,bL as qe,ab as Ge,aU as He,bi as Je,bj as Ke,bk as Ze,bl as Qe,b4 as We,bM as Xe,aT as Ye,bN as ea,bT as aa}from"./arco.3f46b4ae.js";import{u as ta}from"./loading.37fd256d.js";import{a as la,s as oa,b as na,c as sa}from"./provider.0bd78509.js";import{c as F,S as ia}from"./sortable.esm.078712c4.js";import"./chart.2cea905d.js";import"./vue.dbcf9bc3.js";const da={class:"container"},ra={class:"action-icon"},ua={class:"action-icon"},ca={id:"tableSetting"},pa={style:{"margin-right":"4px",cursor:"move"}},ma={class:"title"},_a={name:"ProviderList"},va=Pe({..._a,setup(ba){const{t:n}=we(),{loading:W,setLoading:_}=ta(!0),X=K({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),O=()=>({name:"",code:"",remark:"",is_public:c(),status:c(),updated_at:[]}),R=c([]),s=c(O()),f=c([]),$=c([]),B=c("medium"),h=c([]),g=c(!0),D=c(),y={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},S=K({...y}),Y=z(()=>[{name:n("size.mini"),value:"mini"},{name:n("size.small"),value:"small"},{name:n("size.medium"),value:"medium"},{name:n("size.large"),value:"large"}]),ee=z(()=>[{title:n("provider.label.name"),dataIndex:"name",slotName:"name",align:"center"},{title:n("provider.label.code"),dataIndex:"code",slotName:"code",align:"center"},{title:n("provider.label.sort"),dataIndex:"sort",slotName:"sort",align:"center"},{title:n("common.public"),dataIndex:"is_public",slotName:"is_public",align:"center"},{title:n("common.remark"),dataIndex:"remark",slotName:"remark",align:"center"},{title:n("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:n("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:n("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]),ae=z(()=>[{label:n("provider.dict.status.1"),value:1},{label:n("provider.dict.status.2"),value:2}]),te=z(()=>[{label:n("provider.dict.is_public.true"),value:"true"},{label:n("provider.dict.is_public.false"),value:"false"}]),I=async(e={...y})=>{_(!0);try{const{data:l}=await la(e);R.value=l.items,S.current=e.current,S.pageSize=e.pageSize,S.total=l.paging.total}catch{}finally{_(!1),D.value.selectAll(!1)}};I();const C=()=>{I({...y,...s.value})},le=e=>{I({...y,...s.value,current:e})},oe=e=>{y.pageSize=e,I({...y,...s.value})},ne=()=>{s.value=O(),C()},se=(e,l)=>{B.value=e},ie=(e,l,d)=>{e?f.value.splice(d,0,l):f.value=$.value.filter(r=>r.dataIndex!==l.dataIndex)},M=(e,l,d,r=!1)=>{const m=r?F(e):e;return l>-1&&d>-1&&m.splice(l,1,m.splice(d,1,m[l]).pop()),m},de=e=>{e&&De(()=>{const l=document.getElementById("tableSetting");new ia(l,{onEnd(d){const{oldIndex:r,newIndex:m}=d;M(f.value,r,m),M($.value,r,m)}})})};xe(()=>ee.value,e=>{f.value=F(e),f.value.forEach((l,d)=>{l.checked=!0}),$.value=F(f.value)},{deep:!0,immediate:!0});const re=async e=>{_(!0);try{await oa(e),U.success(n("success.operate")),C()}catch{}finally{_(!1)}},ue=async e=>{_(!0);try{await na(e),U.success(n("success.operate")),C()}catch{}finally{_(!1)}},ce=e=>{h.value=e,g.value=!e.length},N=e=>{if(h.value.length===0)U.info(n("placeholder.operation.data"));else{let l=n("placeholder.batch.operation",{count:h.value.length});switch(e.action){case"status":e.value===1?l=n("placeholder.batch.operation.enable",{count:h.value.length}):l=n("placeholder.batch.operation.disable",{count:h.value.length});break;case"delete":l=n("placeholder.batch.operation.delete",{count:h.value.length});break}Ne.warning({title:n("modal.warning.title"),titleAlign:"center",content:l,okText:n("button.ok"),cancelText:n("button.cancel"),hideCancel:!1,onOk:()=>{_(!0),e.ids=h.value,sa(e).then(d=>{_(!1),U.success(n("success.operate")),C(),D.value.selectAll(!1)})}})}};return(e,l)=>{const d=Ve,r=Te,m=Ae,T=Le,w=Ee,u=Fe,j=Oe,pe=Re,A=Me,me=je,q=qe,_e=Ge,k=He,G=$e,H=Je,L=Ke,ve=Se,be=Ze,fe=Qe,he=Ie,ge=We,ke=Xe,J=Ye,ye=ea,Ce=aa;return V(),P("div",da,[a(m,{class:"container-breadcrumb"},{default:t(()=>[a(r,null,{default:t(()=>[a(d)]),_:1}),a(r,null,{default:t(()=>[p(i(e.$t("sys.menu")),1)]),_:1}),a(r,null,{default:t(()=>[p(i(e.$t("provider.menu")),1)]),_:1})]),_:1}),a(Ce,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[a(A,null,{default:t(()=>[a(u,{flex:1},{default:t(()=>[a(me,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[a(A,{gutter:16},{default:t(()=>[a(u,{span:8},{default:t(()=>[a(w,{field:"name",label:e.$t("provider.label.name")},{default:t(()=>[a(T,{modelValue:s.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.name=o),placeholder:e.$t("provider.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(u,{span:8},{default:t(()=>[a(w,{field:"code",label:e.$t("provider.label.code")},{default:t(()=>[a(T,{modelValue:s.value.code,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.code=o),placeholder:e.$t("provider.form.placeholder.code"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(u,{span:8},{default:t(()=>[a(w,{field:"remark",label:e.$t("common.remark")},{default:t(()=>[a(T,{modelValue:s.value.remark,"onUpdate:modelValue":l[2]||(l[2]=o=>s.value.remark=o),placeholder:e.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(u,{span:8},{default:t(()=>[a(w,{field:"is_public",label:e.$t("common.is_public")},{default:t(()=>[a(j,{modelValue:s.value.is_public,"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.is_public=o),placeholder:e.$t("common.all"),options:x(te),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),a(u,{span:8},{default:t(()=>[a(w,{field:"status",label:e.$t("common.status")},{default:t(()=>[a(j,{modelValue:s.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>s.value.status=o),placeholder:e.$t("common.all"),options:x(ae),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),a(u,{span:8},{default:t(()=>[a(w,{field:"updated_at",label:e.$t("common.updated_at")},{default:t(()=>[a(pe,{modelValue:s.value.updated_at,"onUpdate:modelValue":l[5]||(l[5]=o=>s.value.updated_at=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(q,{style:{height:"84px"},direction:"vertical"}),a(u,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[a(H,{direction:"vertical",size:18},{default:t(()=>[a(k,{type:"primary",onClick:C},{icon:t(()=>[a(_e)]),default:t(()=>[p(" "+i(e.$t("button.search")),1)]),_:1}),a(k,{onClick:ne},{icon:t(()=>[a(G)]),default:t(()=>[p(" "+i(e.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(q,{style:{"margin-top":"0","margin-bottom":"16px"}}),a(A,{style:{"margin-bottom":"16px"}},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(H,null,{default:t(()=>[a(k,{type:"primary",onClick:l[6]||(l[6]=o=>e.$router.push({name:"ProviderCreate"}))},{default:t(()=>[p(i(e.$t("button.create")),1)]),_:1}),a(k,{type:"primary",status:"success",disabled:g.value,title:g.value?e.$t("placeholder.operation.data"):"",onClick:l[7]||(l[7]=o=>N({action:"status",value:1}))},{default:t(()=>[p(i(e.$t("button.enable")),1)]),_:1},8,["disabled","title"]),a(k,{type:"primary",status:"danger",disabled:g.value,title:g.value?e.$t("placeholder.operation.data"):"",onClick:l[8]||(l[8]=o=>N({action:"status",value:2}))},{default:t(()=>[p(i(e.$t("button.disable")),1)]),_:1},8,["disabled","title"]),a(k,{type:"primary",status:"danger",disabled:g.value,title:g.value?e.$t("placeholder.operation.data"):"",onClick:l[9]||(l[9]=o=>N({action:"delete"}))},{default:t(()=>[p(i(e.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),a(u,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[a(L,{content:e.$t("action.refresh")},{default:t(()=>[b("div",{class:"action-icon",onClick:C},[a(G,{size:"18"})])]),_:1},8,["content"]),a(fe,{onSelect:se},{content:t(()=>[(V(!0),P(Z,null,Q(x(Y),o=>(V(),Ue(be,{key:o.value,value:o.value,class:Be({active:o.value===B.value})},{default:t(()=>[b("span",null,i(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[a(L,{content:e.$t("action.density")},{default:t(()=>[b("div",ra,[a(ve,{size:"18"})])]),_:1},8,["content"])]),_:1}),a(L,{content:e.$t("action.column_setting")},{default:t(()=>[a(ke,{trigger:"click",position:"bl",onPopupVisibleChange:de},{content:t(()=>[b("div",ca,[(V(!0),P(Z,null,Q($.value,(o,v)=>(V(),P("div",{key:o.dataIndex,class:"setting"},[b("div",pa,[a(he)]),b("div",null,[a(ge,{modelValue:o.checked,"onUpdate:modelValue":E=>o.checked=E,onChange:E=>ie(E,o,v)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),b("div",ma,i(o.title),1)]))),128))])]),default:t(()=>[b("div",ua,[a(d,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),a(ye,{ref_key:"tableRef",ref:D,"row-key":"id",loading:x(W),pagination:S,columns:f.value,data:R.value,bordered:!1,size:B.value,"row-selection":X,onPageChange:le,onPageSizeChange:oe,onSelectionChange:ce},{is_public:t(({record:o})=>[a(J,{modelValue:o.is_public,"onUpdate:modelValue":v=>o.is_public=v,"checked-value":!0,"unchecked-value":!1,onChange:v=>re({id:o.id,is_public:o.is_public})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),remark:t(({record:o})=>[p(i(o.remark||"-"),1)]),status:t(({record:o})=>[a(J,{modelValue:o.status,"onUpdate:modelValue":v=>o.status=v,"checked-value":1,"unchecked-value":2,onChange:v=>ue({id:o.id,status:o.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:t(({record:o})=>[a(k,{type:"text",size:"small",onClick:v=>e.$router.push({name:"ProviderUpdate",query:{id:o.id}})},{default:t(()=>[p(i(e.$t("button.update")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Ea=ze(va,[["__scopeId","data-v-ac5614fd"]]);export{Ea as default};

import{u as O,E as z,_ as G}from"./index.d4c38361.js";/* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as J,e as d,B as p,C as f,aH as a,aG as t,aL as i,aM as m,D as S,aJ as U,aI as C,aD as q,u as X,aZ as Z,aK as j,aF as Q,bL as W,bH as Y,bI as x,b2 as ee,bS as ae,aS as le,bO as oe,aT as te,aU as re,bi as se,b5 as ne,bT as de,bU as ue}from"./arco.3f46b4ae.js";import{u as ie}from"./loading.37fd256d.js";import{f as me}from"./vue.dbcf9bc3.js";import{c as ce}from"./key.91480cec.js";import{q as pe}from"./provider.0bd78509.js";import{a as _e}from"./model.bdeb73a5.js";import{q as fe}from"./model_agent.43c0e0ab.js";import"./chart.2cea905d.js";const be={class:"container"},ve={class:"wrapper"},ye={class:"submit-btn"},ge={name:"KeyCreate"},ke=J({...ge,setup(he){const{loading:I,setLoading:b}=ie(!1),T=me(),{t:n}=O(),c=d([]),v=new Map;(async()=>{try{const{data:e}=await pe();c.value=e.items;for(let l=0;l<c.value.length;l+=1)v.set(c.value[l].id,c.value[l])}catch{}})();const u=d(n("key.placeholder.key")),D=async()=>{switch(v.get(r.value.provider_id).code){case"Baidu":u.value=n("key.placeholder.key.baidu");break;case"Xfyun":u.value=n("key.placeholder.key.xfyun");break;case"DeepSeek-Baidu":u.value=n("key.placeholder.key.deepseek.baidu");break;case"VolcEngine":u.value=n("key.placeholder.key.volcengine");break;default:u.value=n("key.placeholder.key")}},y=d([]);(async()=>{try{const{data:e}=await _e();y.value=e.items}catch{}})();const g=d([]);(async()=>{try{const{data:e}=await fe();g.value=e.items}catch{}})();const k=d(),r=d({provider_id:"",key:"",weight:d(20),remark:"",models:[],model_agents:[],is_agents_only:!1,is_never_disable:!1}),K=async()=>{var l;if(!await((l=k.value)==null?void 0:l.validate())){b(!0);try{await ce(r.value).then(()=>{Z.success(n("success.task")),T.push({name:"ModelKeyList"})})}catch{}finally{b(!1)}}};return(e,l)=>{const h=z,_=j,F=Q,V=W,w=Y,$=x,s=ee,L=ae,P=le,R=oe,M=te,B=re,A=se,N=ne,E=de,H=ue;return p(),f("div",be,[a(F,{class:"container-breadcrumb"},{default:t(()=>[a(_,null,{default:t(()=>[a(h)]),_:1}),a(_,null,{default:t(()=>[i(m(e.$t("key.menu")),1)]),_:1}),a(_,null,{default:t(()=>[i(m(e.$t("key.menu.create")),1)]),_:1})]),_:1}),a(H,{loading:X(I),style:{width:"100%"}},{default:t(()=>[a(E,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:t(()=>[S("div",ve,[a(N,{ref_key:"formRef",ref:k,model:r.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:t(()=>[a(V,{orientation:"left"},{default:t(()=>[i(m(e.$t("common.title.base_info")),1)]),_:1}),a(s,{field:"provider_id",label:e.$t("common.provider"),rules:[{required:!0,message:e.$t("placeholder.provider")}]},{default:t(()=>[a($,{modelValue:r.value.provider_id,"onUpdate:modelValue":l[0]||(l[0]=o=>r.value.provider_id=o),placeholder:e.$t("placeholder.provider"),scrollbar:!1,"allow-search":"",onChange:D},{default:t(()=>[(p(!0),f(U,null,C(c.value,o=>(p(),q(w,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(s,{field:"key",label:e.$t("common.key"),rules:[{required:!0,message:e.$t("key.error.required.key")}]},{default:t(()=>[a(L,{modelValue:r.value.key,"onUpdate:modelValue":l[1]||(l[1]=o=>r.value.key=o),placeholder:u.value,"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(s,{field:"weight",label:e.$t("common.weight")},{default:t(()=>[a(P,{modelValue:r.value.weight,"onUpdate:modelValue":l[2]||(l[2]=o=>r.value.weight=o),precision:0,min:1,max:100,placeholder:e.$t("placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(s,{field:"remark",label:e.$t("common.remark")},{default:t(()=>[a(L,{modelValue:r.value.remark,"onUpdate:modelValue":l[3]||(l[3]=o=>r.value.remark=o),placeholder:e.$t("placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(V,{orientation:"left"},{default:t(()=>[i(m(e.$t("common.title.advanced")),1)]),_:1}),a(s,{field:"models",label:e.$t("common.bind_models")},{default:t(()=>[a(R,{modelValue:r.value.models,"onUpdate:modelValue":l[4]||(l[4]=o=>r.value.models=o),placeholder:e.$t("key.placeholder.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:y.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),a(s,{field:"model_agents",label:e.$t("common.bind_model_agents")},{default:t(()=>[a($,{modelValue:r.value.model_agents,"onUpdate:modelValue":l[5]||(l[5]=o=>r.value.model_agents=o),placeholder:e.$t("key.placeholder.model_agents"),"max-tag-count":3,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(p(!0),f(U,null,C(g.value,o=>(p(),q(w,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(s,{field:"is_agents_only",label:e.$t("key.label.is_agents_only")},{default:t(()=>[a(M,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":l[6]||(l[6]=o=>r.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(s,{field:"is_never_disable",label:e.$t("key.label.is_never_disable")},{default:t(()=>[a(M,{modelValue:r.value.is_never_disable,"onUpdate:modelValue":l[7]||(l[7]=o=>r.value.is_never_disable=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(A,null,{default:t(()=>[S("div",ye,[a(B,{type:"secondary",onClick:l[8]||(l[8]=o=>e.$router.push({name:"ModelKeyList"}))},{default:t(()=>[i(m(e.$t("button.cancel")),1)]),_:1}),a(B,{type:"primary",onClick:K},{default:t(()=>[i(m(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Oe=G(ke,[["__scopeId","data-v-15ca6fef"]]);export{Oe as default};

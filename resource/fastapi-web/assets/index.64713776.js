import{_ as V,A as P}from"./index.75d20446.js";/* empty css               *//* empty css                */import{d as S,e as g,B as d,aD as v,aG as a,aH as e,aL as u,aM as _,b1 as j,b2 as N,bK as T,aU as L,b5 as M,C as U,aJ as H,aI as O,F as D,aE as q,u as b,bR as h,bA as x,bB as W,aT as X,aS as Y,bS as Z,bT as ee,bU as ae,bi as z,bz as te,bs as le,aK as oe,aF as se,bL as ne,bM as pe,bJ as ue,bN as re}from"./arco.4a860a7b.js";import{u as K}from"./loading.e639bbf4.js";import{d as de}from"./app.72728911.js";/* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               */import{q as ie}from"./model.4070cf47.js";/* empty css                */import"./chart.e67bf0c7.js";import"./vue.2ee6e12c.js";import"./base.87fcf6e2.js";const _e=S({__name:"base-info",emits:["changeStep"],setup(C,{emit:$}){const m=g(),o=g({name:"",remark:""}),c=async()=>{var t;await((t=m.value)==null?void 0:t.validate())||$("changeStep","forward",{...o.value})};return(r,t)=>{const s=j,i=N,w=T,l=L,n=M;return d(),v(n,{ref_key:"formRef",ref:m,model:o.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:a(()=>[e(i,{field:"name",label:r.$t("app.label.name"),rules:[{required:!0,message:r.$t("app.error.name.required")},{match:/^.{1,100}$/,message:r.$t("app.error.name.pattern")}]},{default:a(()=>[e(s,{modelValue:o.value.name,"onUpdate:modelValue":t[0]||(t[0]=y=>o.value.name=y),placeholder:r.$t("app.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(i,{field:"remark",label:r.$t("app.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(w,{modelValue:o.value.remark,"onUpdate:modelValue":t[1]||(t[1]=y=>o.value.remark=y),placeholder:r.$t("app.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(i,null,{default:a(()=>[e(l,{type:"primary",onClick:c},{default:a(()=>[u(_(r.$t("app.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const me=V(_e,[["__scopeId","data-v-e5d3d922"]]),ce=S({__name:"advanced",emits:["changeStep"],setup(C,{emit:$}){const{setLoading:m}=K(!0),o=g([]);(async()=>{m(!0);try{const{data:l}=await ie();o.value=l.items}catch{}finally{m(!1)}})();const r=g(),t=g({models:[],is_limit_quota:!1,quota:g(),quota_expires_at:"",ip_whitelist:"",ip_blacklist:""}),s=l=>{t.value.quota=l*5e5},i=async()=>{var n;await((n=r.value)==null?void 0:n.validate())||$("changeStep","submit",{...t.value})},w=()=>{$("changeStep","backward")};return(l,n)=>{const y=x,I=W,f=N,R=X,B=Y,k=Z,Q=ee,E=ae,A=T,F=L,G=z,J=M;return d(),v(J,{ref_key:"formRef",ref:r,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(f,{field:"models",label:l.$t("app.label.models")},{default:a(()=>[e(I,{modelValue:t.value.models,"onUpdate:modelValue":n[0]||(n[0]=p=>t.value.models=p),placeholder:l.$t("app.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(d(!0),U(H,null,O(o.value,p=>(d(),v(y,{key:p.id,value:p.id,label:p.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(f,{field:"is_limit_quota",label:l.$t("app.label.isLimitQuota")},{default:a(()=>[e(R,{modelValue:t.value.is_limit_quota,"onUpdate:modelValue":n[1]||(n[1]=p=>t.value.is_limit_quota=p)},null,8,["modelValue"])]),_:1},8,["label"]),t.value.is_limit_quota?(d(),v(f,{key:0,field:"quota",label:l.$t("app.label.quota"),rules:[{required:!0,message:l.$t("app.error.quota.required")}]},{default:a(()=>[e(B,{modelValue:t.value.quota,"onUpdate:modelValue":n[2]||(n[2]=p=>t.value.quota=p),placeholder:l.$t("app.placeholder.quota"),precision:0,min:0,max:9999999999999,style:{"margin-right":"10px"}},null,8,["modelValue","placeholder"]),D("div",null," $"+_(t.value.quota?parseFloat((t.value.quota/5e5).toFixed(6)):"0"),1)]),_:1},8,["label","rules"])):q("",!0),t.value.is_limit_quota?(d(),v(f,{key:1},{default:a(()=>[e(Q,{type:"button",onChange:s},{default:a(()=>[e(k,{value:1},{default:a(()=>[u(" $1 ")]),_:1}),e(k,{value:5},{default:a(()=>[u(" $5 ")]),_:1}),e(k,{value:10},{default:a(()=>[u(" $10 ")]),_:1}),e(k,{value:20},{default:a(()=>[u(" $20 ")]),_:1}),e(k,{value:100},{default:a(()=>[u(" $100 ")]),_:1}),e(k,{value:500},{default:a(()=>[u(" $500 ")]),_:1}),e(k,{value:1e3},{default:a(()=>[u(" $1000 ")]),_:1})]),_:1},8,["onChange"])]),_:1})):q("",!0),t.value.is_limit_quota?(d(),v(f,{key:2,field:"quota_expires_at",label:l.$t("app.label.quota_expires_at")},{default:a(()=>[e(E,{modelValue:t.value.quota_expires_at,"onUpdate:modelValue":n[3]||(n[3]=p=>t.value.quota_expires_at=p),placeholder:l.$t("app.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":p=>b(h)(p).isBefore(b(h)()),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>b(h)().add(1,"day")},{label:"7",value:()=>b(h)().add(7,"day")},{label:"15",value:()=>b(h)().add(15,"day")},{label:"30",value:()=>b(h)().add(30,"day")},{label:"90",value:()=>b(h)().add(90,"day")},{label:"180",value:()=>b(h)().add(180,"day")},{label:"365",value:()=>b(h)().add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"])):q("",!0),e(f,{field:"ip_whitelist",label:l.$t("app.label.ip_whitelist")},{default:a(()=>[e(A,{modelValue:t.value.ip_whitelist,"onUpdate:modelValue":n[4]||(n[4]=p=>t.value.ip_whitelist=p),placeholder:l.$t("app.placeholder.ip_whitelist"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(f,{field:"ip_blacklist",label:l.$t("app.label.ip_blacklist")},{default:a(()=>[e(A,{modelValue:t.value.ip_blacklist,"onUpdate:modelValue":n[5]||(n[5]=p=>t.value.ip_blacklist=p),placeholder:l.$t("app.placeholder.ip_blacklist"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(f,null,{default:a(()=>[e(G,null,{default:a(()=>[e(F,{type:"secondary",onClick:w},{default:a(()=>[u(_(l.$t("app.button.prev")),1)]),_:1}),e(F,{type:"primary",onClick:i},{default:a(()=>[u(_(l.$t("app.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const fe=V(ce,[["__scopeId","data-v-e5ee1139"]]),be={class:"success-wrap"},ve=S({__name:"success",emits:["changeStep"],setup(C,{emit:$}){const m=()=>{$("changeStep",1)};return(o,c)=>{const r=te,t=L,s=z;return d(),U("div",be,[e(r,{status:"success",title:o.$t("app.success.title"),subtitle:o.$t("app.success.create.subTitle")},null,8,["title","subtitle"]),e(s,{size:16},{default:a(()=>[e(t,{key:"finish",type:"secondary",onClick:c[0]||(c[0]=i=>o.$router.push({name:"AppList"}))},{default:a(()=>[u(_(o.$t("app.button.finish")),1)]),_:1}),e(t,{key:"again",type:"primary",onClick:m},{default:a(()=>[u(_(o.$t("app.button.again")),1)]),_:1})]),_:1})])}}});const ye=V(ve,[["__scopeId","data-v-9ee08270"]]),he={class:"container"},$e={class:"wrapper"},ge={name:"AppCreate"},ke=S({...ge,setup(C){const{loading:$,setLoading:m}=K(!1),o=g(1),c=g({}),r=async()=>{m(!0);try{await de(c.value),o.value=3,c.value={}}catch{}finally{m(!1)}},t=(s,i)=>{if(typeof s=="number"){o.value=s;return}if(s==="forward"||s==="submit"){if(c.value={...c.value,...i},s==="submit"){r();return}o.value+=1}else s==="backward"&&(o.value-=1)};return(s,i)=>{const w=P,l=oe,n=se,y=ne,I=pe,f=ue,R=re;return d(),U("div",he,[e(n,{class:"container-breadcrumb"},{default:a(()=>[e(l,null,{default:a(()=>[e(w)]),_:1}),e(l,null,{default:a(()=>[u(_(s.$t("menu.app")),1)]),_:1}),e(l,null,{default:a(()=>[u(_(s.$t("menu.app.create")),1)]),_:1})]),_:1}),e(R,{loading:b($),style:{width:"100%"}},{default:a(()=>[e(f,{class:"general-card",bordered:!1},{default:a(()=>[D("div",$e,[e(I,{current:o.value,"onUpdate:current":i[0]||(i[0]=B=>o.value=B),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(y,{description:s.$t("app.subTitle.baseInfo")},{default:a(()=>[u(_(s.$t("app.title.baseInfo")),1)]),_:1},8,["description"]),e(y,{description:s.$t("app.subTitle.advanced")},{default:a(()=>[u(_(s.$t("app.title.advanced")),1)]),_:1},8,["description"]),e(y,{description:s.$t("app.subTitle.create.finish")},{default:a(()=>[u(_(s.$t("app.title.create.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(d(),v(le,null,[o.value===1?(d(),v(me,{key:0,onChangeStep:t})):o.value===2?(d(),v(fe,{key:1,onChangeStep:t})):o.value===3?(d(),v(ye,{key:2,onChangeStep:t})):q("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Pe=V(ke,[["__scopeId","data-v-2488c8dd"]]);export{Pe as default};

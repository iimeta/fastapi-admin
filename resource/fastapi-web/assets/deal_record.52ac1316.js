import{b as he,u as ye,E as we,p as ke,y as Ce,i as xe,z as ze,_ as Ie}from"./index.b8904415.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as V,S as Se}from"./sortable.esm.f8f875e8.js";/* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css              */import{d as Ve,r as L,e as m,c as $,w as $e,bT as De,B as u,C as b,aH as e,aG as a,aL as v,aM as d,bu as N,aD as R,u as h,F as _,aJ as U,aI as A,D as Te,n as qe,aK as Be,aF as Fe,b1 as Pe,b2 as Ee,bC as Le,bB as Ne,bD as Re,bE as Ue,b5 as Ae,bF as Me,ab as je,aU as Ge,bi as He,bj as Je,bl as Oe,bm as Ke,b4 as We,bG as Qe,bI as Xe,bJ as Ye}from"./arco.17b1a46f.js";import{u as Ze}from"./loading.44762de3.js";import{q as M}from"./common.ac936b7b.js";import"./chart.d5ce7f1f.js";import"./vue.32c094a4.js";function ea(D){return he.post("/api/v1/finance/deal/record",D)}const aa={class:"container"},ta={class:"action-icon"},na={class:"action-icon"},oa={id:"tableSetting"},sa={style:{"margin-right":"4px",cursor:"move"}},la={class:"title"},ca={key:0,class:"circle red"},ia={key:1,class:"circle"},ra={name:"CorpList"},ua=Ve({...ra,setup(D){const j=L({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),G=()=>({user_id:"",status:m(),created_at:[]}),{loading:H,setLoading:T}=Ze(!0),{t:c}=ye(),q=m([]),s=m(G()),p=m([]),y=m([]),C=m("medium"),J=m(),f={current:1,pageSize:10,showTotal:!0,showPageSize:!0,pageSizeOptions:[10,50,100,500,1e3]},w=L({...f}),O=$(()=>[{name:c("searchTable.size.mini"),value:"mini"},{name:c("searchTable.size.small"),value:"small"},{name:c("searchTable.size.medium"),value:"medium"},{name:c("searchTable.size.large"),value:"large"}]),K=$(()=>[{title:c("finance.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center"},{title:c("finance.columns.quota"),dataIndex:"quota",slotName:"quota",align:"center"},{title:c("finance.columns.status"),dataIndex:"status",slotName:"status",align:"center"},{title:c("finance.columns.created_at"),dataIndex:"created_at",slotName:"created_at",align:"center"}]),W=$(()=>[{label:c("finance.dict.status.1"),value:1}]),k=async(t={...f})=>{T(!0);try{const{data:o}=await ea(t);q.value=o.items,w.current=t.current,w.pageSize=t.pageSize,w.total=o.paging.total}catch{}finally{T(!1)}},B=()=>{k({...f,...s.value})},Q=t=>{k({...f,...s.value,current:t})},X=t=>{f.pageSize=t,k({...f,...s.value})};k();const Y=(t,o)=>{C.value=t},Z=(t,o,i)=>{t?p.value.splice(i,0,o):p.value=y.value.filter(l=>l.dataIndex!==o.dataIndex)},F=(t,o,i,l=!1)=>{const r=l?V(t):t;return o>-1&&i>-1&&r.splice(o,1,r.splice(i,1,r[o]).pop()),r},ee=t=>{t&&qe(()=>{const o=document.getElementById("tableSetting");new Se(o,{onEnd(i){const{oldIndex:l,newIndex:r}=i;F(p.value,l,r),F(y.value,l,r)}})})};return $e(()=>K.value,t=>{p.value=V(t),p.value.forEach((o,i)=>{o.checked=!0}),y.value=V(p.value)},{deep:!0,immediate:!0}),(t,o)=>{const i=we,l=Be,r=Fe,ae=Pe,x=Ee,g=Le,te=Ne,ne=Re,z=Ue,oe=Ae,P=Me,se=je,le=Ge,ce=He,ie=ke,I=Je,re=Ce,ue=Oe,de=Ke,_e=xe,pe=ze,me=We,fe=Qe,ge=Xe,be=Ye,E=De("permission");return u(),b("div",aa,[e(r,{class:"container-breadcrumb"},{default:a(()=>[e(l,null,{default:a(()=>[e(i)]),_:1}),e(l,null,{default:a(()=>[v(d(t.$t("menu.finance")),1)]),_:1}),e(l,null,{default:a(()=>[v(d(t.$t("menu.deal_record.list")),1)]),_:1})]),_:1}),e(be,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[N((u(),R(z,null,{default:a(()=>[e(g,{flex:1},{default:a(()=>[e(oe,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(z,{gutter:16},{default:a(()=>[e(g,{span:8},{default:a(()=>[e(x,{field:"name",label:t.$t("finance.form.user_id")},{default:a(()=>[e(ae,{modelValue:s.value.user_id,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value.user_id=n),placeholder:t.$t("finance.form.user_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(g,{span:8},{default:a(()=>[e(x,{field:"status",label:t.$t("finance.form.status")},{default:a(()=>[e(te,{modelValue:s.value.status,"onUpdate:modelValue":o[1]||(o[1]=n=>s.value.status=n),options:h(W),placeholder:t.$t("finance.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(g,{span:8},{default:a(()=>[e(x,{field:"created_at",label:t.$t("finance.form.created_at")},{default:a(()=>[e(ne,{modelValue:s.value.created_at,"onUpdate:modelValue":o[2]||(o[2]=n=>s.value.created_at=n),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{style:{height:"42px"},direction:"vertical"}),e(g,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(ce,{direction:"vertical",size:18},{default:a(()=>[e(le,{type:"primary",onClick:B},{icon:a(()=>[e(se)]),default:a(()=>[v(" "+d(t.$t("finance.form.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})),[[E,["admin"]]]),N(e(P,{style:{"margin-top":"0","margin-bottom":"16px"}},null,512),[[E,["admin"]]]),e(z,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(g,{span:24,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(I,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[_("div",{class:"action-icon",onClick:B},[e(ie,{size:"18"})])]),_:1},8,["content"]),e(de,{onSelect:Y},{content:a(()=>[(u(!0),b(U,null,A(h(O),n=>(u(),R(ue,{key:n.value,value:n.value,class:Te({active:n.value===C.value})},{default:a(()=>[_("span",null,d(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(I,{content:t.$t("searchTable.actions.density")},{default:a(()=>[_("div",ta,[e(re,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(I,{content:t.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(fe,{trigger:"click",position:"bl",onPopupVisibleChange:ee},{content:a(()=>[_("div",oa,[(u(!0),b(U,null,A(y.value,(n,ve)=>(u(),b("div",{key:n.dataIndex,class:"setting"},[_("div",sa,[e(pe)]),_("div",null,[e(me,{modelValue:n.checked,"onUpdate:modelValue":S=>n.checked=S,onChange:S=>Z(S,n,ve)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_("div",la,d(n.title==="#"?"\u5E8F\u5217\u53F7":n.title),1)]))),128))])]),default:a(()=>[_("div",na,[e(_e,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ge,{ref_key:"tableRef",ref:J,"row-key":"id",loading:h(H),pagination:w,columns:p.value,data:q.value,bordered:!1,size:C.value,"row-selection":j,onPageChange:Q,onPageSizeChange:X},{quota:a(({record:n})=>[v(d(n.quota>0?`$${h(M)(n.quota)}`:n.quota<0?`-$${h(M)(-n.quota)}`:"$0.00"),1)]),remark:a(({record:n})=>[v(d(n.remark||"-"),1)]),status:a(({record:n})=>[n.status===2?(u(),b("span",ca)):(u(),b("span",ia)),v(" "+d(t.$t(`finance.dict.status.${n.status}`)),1)]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Fa=Ie(ua,[["__scopeId","data-v-834bcb93"]]);export{Fa as default};

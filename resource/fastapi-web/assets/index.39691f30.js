import{u as Fe,k as ml,s as vl,A as fl,B as bl,_ as gl}from"./index.3187c658.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{d as Be,e as y,B as s,C as v,aH as e,aG as l,u as o,aD as m,aM as i,aL as n,bA as yl,bB as hl,bC as $l,bD as kl,bE as ql,r as Ve,c as se,w as wl,D as P,aJ as ne,aI as re,E as Cl,aE as De,n as Vl,aW as Ee,aK as Dl,aF as El,aS as xl,b2 as Fl,bH as Bl,b1 as Ul,bG as Al,bT as Sl,bI as Rl,b5 as zl,bJ as Hl,ab as Il,aU as Nl,bi as Pl,bj as Ll,bk as Ol,bl as Tl,b4 as Ml,bK as Gl,bV as Ql,aT as jl,bM as Jl,aV as Kl,bQ as Wl,bU as Xl,a_ as Yl,bF as Zl,bP as ea,bN as la,g as aa}from"./arco.cbac690a.js";import{u as Ue}from"./loading.b56ef223.js";import{q as F,d as xe,a as E}from"./common.4090c8c2.js";import{a as ta,b as ua,s as oa,c as sa,d as na,e as ra,f as ia,g as da}from"./admin_reseller.af68991d.js";import{c as ie,S as _a}from"./sortable.esm.59243d4c.js";import{b as ca}from"./model.13054116.js";import{q as pa}from"./group.3b3a69ed.js";/* empty css                *//* empty css                */import"./chart.e521dee8.js";import"./vue.4014b72a.js";const ma={style:{margin:"10px 0 0 10px"}},va={key:1},fa={key:1},ba={key:1},ga={key:1},ya={key:1},ha={key:1},$a={key:1},ka={key:1},qa={key:1},wa={key:1},Ca={key:1},Va={key:1},Da={key:1},Ea={key:1},xa={key:1},Fa={key:1},Ba={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ua={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Aa={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Sa={key:1},Ra={key:1},za={key:1},Ha={key:1},Ia={key:1},Na={key:1},Pa={name:"ResellerDetail"},La=Be({...Pa,props:{id:{type:String,default:""}},setup(de){const Y=de,{t:r}=Fe(),{loading:c,setLoading:k}=Ue(!0),_=y({});return(async(h={id:Y.id})=>{k(!0);try{const{data:q}=await ta(h);_.value=q}catch{}finally{k(!1)}})(),(h,q)=>{const p=yl,f=hl,b=$l,D=kl,S=ql;return s(),v("div",ma,[e(S,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:l(()=>[e(b,{label:o(r)("common.reseller_id")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",va,i(_.value.user_id),1))]),_:1},8,["label"]),e(b,{label:o(r)("common.account")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",fa,i(_.value.account),1))]),_:1},8,["label"]),e(b,{label:o(r)("common.name")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",ba,i(_.value.name),1))]),_:1},8,["label"]),e(b,{label:o(r)("common.email")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",ga,i(_.value.email),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.quota")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",ya,i(_.value.quota>0?`$${o(F)(_.value.quota)}`:_.value.quota<0?`-$${o(F)(-_.value.quota)}`:"$0.00"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.used_quota")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",ha,i(_.value.used_quota>0?`$${o(F)(_.value.used_quota)}`:"$0.00"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.allocated_quota")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",$a,i(_.value.allocated_quota>0?`$${o(F)(_.value.allocated_quota)}`:"$0.00"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.to_be_allocated")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",ka,i(_.value.to_be_allocated>0?`$${o(F)(_.value.to_be_allocated)}`:"$0.00"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.quota_expires_at")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",qa,i(_.value.quota_expires_at||"-"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.quota_warning")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",wa,i(h.$t(`operations.open.${_.value.quota_warning||_.value.warning_threshold===0&&_.value.expire_warning_threshold===0}`)),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.warning_threshold")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ca," $"+i(_.value.warning_threshold||50),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.expire_warning_threshold")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Va,i(_.value.expire_warning_threshold||3)+"\u5929 ",1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.warning_notice")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Da,i(h.$t(`dict.notice.${_.value.warning_notice||!1}`)),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.expire_warning_notice")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ea,i(h.$t(`dict.notice.${_.value.expire_warning_notice||!1}`)),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.exhaustion_notice")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",xa,i(h.$t(`dict.notice.${_.value.exhaustion_notice||!1}`)),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.expire_notice")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Fa,i(h.$t(`dict.notice.${_.value.expire_notice||!1}`)),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.groups"),span:2},{default:l(()=>{var B,U;return[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ba,i(((U=(B=_.value)==null?void 0:B.group_names)==null?void 0:U.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.models"),span:2},{default:l(()=>{var B,U;return[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ua,i(((U=(B=_.value)==null?void 0:B.model_names)==null?void 0:U.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(b,{label:o(r)("common.remark"),span:2},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Aa,i(_.value.remark||"-"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.login_ip")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Sa,i(_.value.login_ip||"-"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.login_time")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ra,i(_.value.login_time||"-"),1))]),_:1},8,["label"]),e(b,{label:o(r)("reseller.detail.label.login_domain")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",za,i(_.value.login_domain||"-"),1))]),_:1},8,["label"]),e(b,{label:o(r)("common.status")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ha,[_.value.status===1?(s(),m(D,{key:0,color:"green"},{default:l(()=>[n(i(h.$t(`dict.status.${_.value.status}`)),1)]),_:1})):(s(),m(D,{key:1,color:"red"},{default:l(()=>[n(i(h.$t(`dict.status.${_.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),e(b,{label:o(r)("common.created_at")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Ia,i(_.value.created_at),1))]),_:1},8,["label"]),e(b,{label:o(r)("common.updated_at")},{default:l(()=>[o(c)?(s(),m(f,{key:0,animation:!0},{default:l(()=>[e(p,{rows:1})]),_:1})):(s(),v("span",Na,i(_.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Oa={class:"container"},Ta={class:"action-icon"},Ma={class:"action-icon"},Ga={id:"tableSetting"},Qa={style:{"margin-right":"4px",cursor:"move"}},ja={class:"title"},Ja={name:"ResellerList"},Ka=Be({...Ja,setup(de){const{loading:Y,setLoading:r}=Ue(!0),{proxy:c}=aa(),{t:k}=Fe(),_=Ve({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),Z=()=>({user_id:y(),name:"",account:"",quota:y(),status:y(),quota_expires_at:[]}),h=y([]),q=y(Z()),p=y([]),f=y([]),b=y("medium"),D=y([]),S=y(!0),B=y(),U={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},j=Ve({...U}),Ae=se(()=>[{name:k("size.mini"),value:"mini"},{name:k("size.small"),value:"small"},{name:k("size.medium"),value:"medium"},{name:k("size.large"),value:"large"}]),Se=se(()=>[{title:k("reseller.columns.userId"),dataIndex:"user_id",slotName:"user_id",align:"center",width:90},{title:k("reseller.columns.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.account"),dataIndex:"account",slotName:"account",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.quota"),dataIndex:"quota",slotName:"quota",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.used_quota"),dataIndex:"used_quota",slotName:"used_quota",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.allocated_quota"),dataIndex:"allocated_quota",slotName:"allocated_quota",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.to_be_allocated"),dataIndex:"to_be_allocated",slotName:"to_be_allocated",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:k("reseller.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:k("reseller.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:262}]),Re=se(()=>[{label:k("reseller.dict.status.1"),value:1},{label:k("reseller.dict.status.2"),value:2}]),J=async(a={...U})=>{r(!0);try{const{data:u}=await ua(a);h.value=u.items,j.current=a.current,j.pageSize=a.pageSize,j.total=u.paging.total}catch{}finally{r(!1),B.value.selectAll(!1)}};J();const H=()=>{J({...U,...q.value})},ze=a=>{J({...U,...q.value,current:a})},He=a=>{U.pageSize=a,J({...U,...q.value})},Ie=()=>{q.value=Z(),H()},Ne=(a,u)=>{b.value=a},Pe=(a,u,g)=>{a?p.value.splice(g,0,u):p.value=f.value.filter($=>$.dataIndex!==u.dataIndex)},_e=(a,u,g,$=!1)=>{const N=$?ie(a):a;return u>-1&&g>-1&&N.splice(u,1,N.splice(g,1,N[u]).pop()),N},Le=a=>{a&&Vl(()=>{const u=document.getElementById("tableSetting");new _a(u,{onEnd(g){const{oldIndex:$,newIndex:N}=g;_e(p.value,$,N),_e(f.value,$,N)}})})};wl(()=>Se.value,a=>{p.value=ie(a),p.value.forEach((u,g)=>{u.checked=!0}),f.value=ie(p.value)},{deep:!0,immediate:!0});const ce=y([]);(async()=>{r(!0);try{const{data:a}=await ca();ce.value=a.items}catch{}finally{r(!1)}})();const pe=y([]);(async()=>{try{const{data:a}=await pa();pe.value=a.items}catch{}})();const I=new Map;I.set(1,"\u7528\u6237\u6570\u636E"),I.set(2,"\u5E94\u7528\u6570\u636E"),I.set(3,"\u4EA4\u6613\u8BB0\u5F55"),I.set(4,"\u8D26\u5355\u660E\u7EC6"),I.set(5,"\u65E5\u5FD7\u6570\u636E");const Oe=async a=>{let u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u4EE3\u7406\u5546: ${a.name}?`;if(a.data&&a.data.length>0){let g="";for(let $=0;$<a.data.length;$+=1)$===0?g=I.get(a.data[$]):g+=`\u3001${I.get(a.data[$])}`;u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u4EE3\u7406\u5546: ${a.name} \u4EE5\u53CA\u540C\u65F6\u5220\u9664: ${g}?`}c.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{r(!0),da(a).then(g=>{r(!1),c.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),H(),B.value.selectAll(!1)})}})},Te=async a=>{r(!0);try{await oa(a),c.$message.success("\u64CD\u4F5C\u6210\u529F"),H()}catch{}finally{r(!1)}},Me=async a=>{r(!0);try{await sa(a),c.$message.success("\u64CD\u4F5C\u6210\u529F"),H()}catch{}finally{r(!1)}},L=y(0),O=y(!1),M=y(!1),G=y(!1),me=y(),d=y({}),ve=y(),R=y({}),fe=y(),w=y({}),Ge=async a=>{r(!0);try{L.value=0,d.value.quota=y(),d.value.quota_type="1",d.value.user_id=a.user_id,d.value.quota_expires_at=a.quota_expires_at,d.value.is_send_notice=!0,B.value.selectAll(!1),O.value=!0}catch{}finally{r(!1)}},be=a=>{d.value.quota=a*5e5},Qe=async a=>{r(!0);try{R.value.user_id=a.user_id,a.models&&a.models.length>0&&a.models[0]!=="undefined"?R.value.models=a.models:R.value.models=[],a.groups&&a.groups.length>0&&a.groups[0]!=="undefined"?R.value.groups=a.groups:R.value.groups=[],M.value=!0}catch{}finally{r(!1)}},je=async a=>{var g;if(await((g=me.value)==null?void 0:g.validate())){O.value=!0,a(!1);return}if(D.value.length>0){a(),Q({action:"recharge",value:d.value.quota,quota_type:d.value.quota_type,quota_expires_at:d.value.quota_expires_at,is_send_notice:d.value.is_send_notice});return}r(!0);try{await na(d.value),Ee.success(k("success.recharge")),a(),H()}catch{}finally{r(!1)}},Je=()=>{O.value=!1},Ke=async a=>{var g;if(await((g=ve.value)==null?void 0:g.validate())){M.value=!0,a(!1);return}r(!0);try{await ra(R.value),Ee.success(k("success.save")),a(),H()}catch{}finally{r(!1)}},We=()=>{M.value=!1},ee=y(!1),ge=y(),Xe=a=>{ee.value=!0,ge.value=a},Ye=()=>{ee.value=!1},Ze=a=>{D.value=a,S.value=!a.length},Q=a=>{if(D.value.length===0)c.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let u=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546?`;switch(a.action){case"recharge":a.value?d.value.quota_type==="2"?u=`\u662F\u5426\u786E\u5B9A\u6263\u9664\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546 $${F(a.value)} \u989D\u5EA6?`:u=`\u662F\u5426\u786E\u5B9A\u7ED9\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546${d.value.quota_type==="1"?"\u5145\u503C":"\u8D60\u9001"} $${F(a.value)} \u989D\u5EA6?`:(L.value=0,d.value.quota=y(),d.value.quota_type="1",d.value.quota_expires_at="",d.value.is_send_notice=!0,O.value=!0);break;case"status":a.value===1?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546?`:u=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546?`;break;case"delete":if(u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546?`,a.data&&a.data.length>0){let g="";for(let $=0;$<a.data.length;$+=1)$===0?g=I.get(a.data[$]):g+=`\u3001${I.get(a.data[$])}`;u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${D.value.length}\u4F4D\u4EE3\u7406\u5546\u4EE5\u53CA\u540C\u65F6\u5220\u9664: ${g}?`}break}if(a.action==="recharge"&&!a.value)return;c.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{r(!0),a.ids=D.value,ia(a).then(g=>{r(!1),c.$message.success("\u64CD\u4F5C\u6210\u529F"),H(),B.value.selectAll(!1)})}})}},ye=async a=>{w.value=a,G.value=!0,a.action||B.value.selectAll(!1)},el=async a=>{var g;if(await((g=fe.value)==null?void 0:g.validate())){G.value=!0,a(!1);return}w.value.action?Q({action:"delete",data:w.value.data}):Oe(w.value)},ll=()=>{G.value=!1};return(a,u)=>{const g=ml,$=Dl,N=El,le=xl,V=Fl,z=Bl,K=Ul,he=Al,al=Sl,ae=Rl,W=zl,$e=Hl,tl=Il,x=Nl,ke=vl,X=Pl,te=Ll,ul=fl,ol=Ol,sl=Tl,nl=bl,T=Ml,rl=Gl,qe=Ql,we=jl,il=Jl,dl=Kl,C=Wl,Ce=Xl,ue=Yl,_l=Zl,cl=ea,pl=la;return s(),v("div",Oa,[e(N,{class:"container-breadcrumb"},{default:l(()=>[e($,null,{default:l(()=>[e(g)]),_:1}),e($,null,{default:l(()=>[n(i(a.$t("menu.sys")),1)]),_:1}),e($,null,{default:l(()=>[n(i(a.$t("menu.reseller")),1)]),_:1})]),_:1}),e(pl,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:l(()=>[e(ae,null,{default:l(()=>[e(z,{flex:1},{default:l(()=>[e(W,{model:q.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:l(()=>[e(ae,{gutter:16},{default:l(()=>[e(z,{span:8},{default:l(()=>[e(V,{field:"user_id",label:a.$t("reseller.form.userId")},{default:l(()=>[e(le,{modelValue:q.value.user_id,"onUpdate:modelValue":u[0]||(u[0]=t=>q.value.user_id=t),placeholder:a.$t("reseller.form.userId.placeholder"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:7},{default:l(()=>[e(V,{field:"account",label:a.$t("reseller.form.account")},{default:l(()=>[e(K,{modelValue:q.value.account,"onUpdate:modelValue":u[1]||(u[1]=t=>q.value.account=t),placeholder:a.$t("reseller.form.account.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:9},{default:l(()=>[e(V,{field:"name",label:a.$t("reseller.form.name")},{default:l(()=>[e(K,{modelValue:q.value.name,"onUpdate:modelValue":u[2]||(u[2]=t=>q.value.name=t),placeholder:a.$t("reseller.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:8},{default:l(()=>[e(V,{field:"quota",label:a.$t("reseller.form.quota")},{default:l(()=>[e(le,{modelValue:q.value.quota,"onUpdate:modelValue":u[3]||(u[3]=t=>q.value.quota=t),placeholder:a.$t("reseller.form.quota.placeholder"),min:1e-6,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder","min"])]),_:1},8,["label"])]),_:1}),e(z,{span:7},{default:l(()=>[e(V,{field:"status",label:a.$t("reseller.form.status")},{default:l(()=>[e(he,{modelValue:q.value.status,"onUpdate:modelValue":u[4]||(u[4]=t=>q.value.status=t),placeholder:a.$t("reseller.form.selectDefault"),options:o(Re),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(z,{span:9},{default:l(()=>[e(V,{field:"quota_expires_at",label:a.$t("reseller.form.quota_expires_at")},{default:l(()=>[e(al,{modelValue:q.value.quota_expires_at,"onUpdate:modelValue":u[5]||(u[5]=t=>q.value.quota_expires_at=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e($e,{style:{height:"84px"},direction:"vertical"}),e(z,{flex:"86px",style:{"text-align":"right"}},{default:l(()=>[e(X,{direction:"vertical",size:18},{default:l(()=>[e(x,{type:"primary",onClick:H},{icon:l(()=>[e(tl)]),default:l(()=>[n(" "+i(a.$t("reseller.form.search")),1)]),_:1}),e(x,{onClick:Ie},{icon:l(()=>[e(ke)]),default:l(()=>[n(" "+i(a.$t("reseller.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e($e,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(ae,{style:{"margin-bottom":"16px"}},{default:l(()=>[e(z,{span:12},{default:l(()=>[e(X,null,{default:l(()=>[e(x,{type:"primary",onClick:u[6]||(u[6]=t=>a.$router.push({name:"ResellerCreate"}))},{default:l(()=>[n(i(a.$t("reseller.operation.create")),1)]),_:1}),e(x,{type:"primary",status:"warning",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[7]||(u[7]=t=>Q({action:"recharge"}))},{default:l(()=>[n(" \u5145\u503C ")]),_:1},8,["disabled","title"]),e(x,{type:"primary",status:"success",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[8]||(u[8]=t=>Q({action:"status",value:1}))},{default:l(()=>[n(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(x,{type:"primary",status:"danger",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[9]||(u[9]=t=>Q({action:"status",value:2}))},{default:l(()=>[n(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(x,{type:"primary",status:"danger",disabled:S.value,title:S.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[10]||(u[10]=t=>ye({action:"delete",data:[1,2,3,4,5]}))},{default:l(()=>[n(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(z,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:l(()=>[e(te,{content:a.$t("actions.refresh")},{default:l(()=>[P("div",{class:"action-icon",onClick:H},[e(ke,{size:"18"})])]),_:1},8,["content"]),e(sl,{onSelect:Ne},{content:l(()=>[(s(!0),v(ne,null,re(o(Ae),t=>(s(),m(ol,{key:t.value,value:t.value,class:Cl({active:t.value===b.value})},{default:l(()=>[P("span",null,i(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:l(()=>[e(te,{content:a.$t("actions.density")},{default:l(()=>[P("div",Ta,[e(ul,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(te,{content:a.$t("actions.column_setting")},{default:l(()=>[e(rl,{trigger:"click",position:"bl",onPopupVisibleChange:Le},{content:l(()=>[P("div",Ga,[(s(!0),v(ne,null,re(f.value,(t,A)=>(s(),v("div",{key:t.dataIndex,class:"setting"},[P("div",Qa,[e(nl)]),P("div",null,[e(T,{modelValue:t.checked,"onUpdate:modelValue":oe=>t.checked=oe,onChange:oe=>Pe(oe,t,A)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),P("div",ja,i(t.title==="#"?"\u5E8F\u5217\u53F7":t.title),1)]))),128))])]),default:l(()=>[P("div",Ma,[e(g,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(il,{ref_key:"tableRef",ref:B,"row-key":"id",loading:o(Y),pagination:j,columns:p.value,data:h.value,bordered:!1,size:b.value,"row-selection":_,onPageChange:ze,onPageSizeChange:He,onSelectionChange:Ze},{quota:l(({record:t})=>[n(i(t.quota>0?`$${o(F)(t.quota)}`:t.quota<0?`-$${o(F)(-t.quota)}`:"$0.00"),1)]),used_quota:l(({record:t})=>[n(" $"+i(t.used_quota>0?o(F)(t.used_quota):"0.00"),1)]),allocated_quota:l(({record:t})=>[n(" $"+i(t.allocated_quota>0?o(F)(t.allocated_quota):"0.00"),1)]),to_be_allocated:l(({record:t})=>[n(" $"+i(t.to_be_allocated>0?o(F)(t.to_be_allocated):"0.00"),1)]),quota_expires_at:l(({rowIndex:t})=>[e(qe,{modelValue:h.value[t].quota_expires_at,"onUpdate:modelValue":A=>h.value[t].quota_expires_at=A,placeholder:a.$t("reseller.columns.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":o(xe),"show-time":"",shortcuts:[{label:"1",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>o(E)(h.value[t].quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}],onChange:A=>Te({id:`${h.value[t].id}`,quota_expires_at:`${h.value[t].quota_expires_at}`})},{default:l(()=>[e(x,{style:{width:"150px"}},{default:l(()=>[n(i(h.value[t].quota_expires_at||a.$t("reseller.columns.placeholder.quota_expires_at")),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled-date","shortcuts","onChange"])]),remark:l(({record:t})=>[n(i(t.remark||"-"),1)]),status:l(({record:t})=>[e(we,{modelValue:t.status,"onUpdate:modelValue":A=>t.status=A,"checked-value":1,"unchecked-value":2,onChange:A=>Me({id:`${t.id}`,status:Number(`${t.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:l(({record:t})=>[e(x,{type:"text",size:"small",onClick:A=>Ge({user_id:`${t.user_id}`,quota_expires_at:`${t.quota_expires_at}`})},{default:l(()=>[n(i(a.$t("reseller.columns.operations.recharge")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:A=>Qe({user_id:`${t.user_id}`,models:`${t.models}`.split(","),groups:`${t.groups}`.split(",")})},{default:l(()=>[n(i(a.$t("reseller.columns.operations.permissions")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:A=>Xe(t.id)},{default:l(()=>[n(i(a.$t("reseller.columns.operations.view")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:A=>a.$router.push({name:"ResellerUpdate",query:{id:`${t.id}`}})},{default:l(()=>[n(i(a.$t("reseller.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(x,{type:"text",size:"small",onClick:A=>ye({id:`${t.id}`,user_id:`${t.user_id}`,name:`${t.name}`,data:[1,2,3,4,5]})},{default:l(()=>[n(i(a.$t("reseller.columns.operations.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(dl,{title:a.$t("menu.reseller.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:ee.value,onCancel:Ye},{default:l(()=>[e(La,{id:ge.value},null,8,["id"])]),_:1},8,["title","visible"]),e(ue,{visible:O.value,"onUpdate:visible":u[19]||(u[19]=t=>O.value=t),title:a.$t("reseller.form.title.recharge"),"ok-text":a.$t("button.ok"),width:660,onCancel:Je,onBeforeOk:je},{default:l(()=>[e(W,{ref_key:"formRef",ref:me,model:d.value},{default:l(()=>[e(V,{field:"quota",label:a.$t("reseller.label.quota"),rules:[{required:!0,message:a.$t("reseller.error.quota.required")}]},{default:l(()=>[e(le,{modelValue:d.value.quota,"onUpdate:modelValue":u[11]||(u[11]=t=>d.value.quota=t),placeholder:a.$t("reseller.placeholder.recharge"),precision:0,min:1,max:9999999999999,style:{"margin-right":"10px"}},null,8,["modelValue","placeholder"]),P("div",null," $"+i(d.value.quota?o(F)(d.value.quota):"0.00"),1)]),_:1},8,["label","rules"]),e(V,{style:{width:"280px","margin-bottom":"10px"}},{default:l(()=>[e(Ce,{modelValue:L.value,"onUpdate:modelValue":u[12]||(u[12]=t=>L.value=t),type:"button",onChange:be},{default:l(()=>[e(C,{value:1},{default:l(()=>[n(" $1 ")]),_:1}),e(C,{value:2},{default:l(()=>[n(" $2 ")]),_:1}),e(C,{value:5},{default:l(()=>[n(" $5 ")]),_:1}),e(C,{value:10},{default:l(()=>[n(" $10 ")]),_:1}),e(C,{value:20},{default:l(()=>[n(" $20 ")]),_:1}),e(C,{value:50},{default:l(()=>[n(" $50 ")]),_:1}),e(C,{value:100},{default:l(()=>[n(" $100 ")]),_:1}),e(C,{value:200},{default:l(()=>[n(" $200 ")]),_:1}),e(C,{value:500},{default:l(()=>[n(" $500 ")]),_:1}),e(C,{value:1e3},{default:l(()=>[n(" $1,000 ")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(V,{style:{width:"280px"}},{default:l(()=>[e(Ce,{modelValue:L.value,"onUpdate:modelValue":u[13]||(u[13]=t=>L.value=t),type:"button",onChange:be},{default:l(()=>[e(C,{value:2e3},{default:l(()=>[n(" $2,000 ")]),_:1}),e(C,{value:3e3},{default:l(()=>[n(" $3,000 ")]),_:1}),e(C,{value:5e3},{default:l(()=>[n(" $5,000 ")]),_:1}),e(C,{value:1e4},{default:l(()=>[n(" $10,000 ")]),_:1}),e(C,{value:2e4},{default:l(()=>[n(" $20,000 ")]),_:1}),e(C,{value:5e4},{default:l(()=>[n(" $50,000 ")]),_:1}),e(C,{value:1e5},{default:l(()=>[n(" $100,000 ")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(V,{field:"quota_type",label:a.$t("reseller.label.quota_type"),rules:[{required:!0,message:a.$t("reseller.error.quota_type.required")}]},{default:l(()=>[e(X,{size:"large"},{default:l(()=>[e(C,{modelValue:d.value.quota_type,"onUpdate:modelValue":u[14]||(u[14]=t=>d.value.quota_type=t),value:"1","default-checked":!0},{default:l(()=>[n(" \u5145\u503C ")]),_:1},8,["modelValue"]),e(C,{modelValue:d.value.quota_type,"onUpdate:modelValue":u[15]||(u[15]=t=>d.value.quota_type=t),value:"2"},{default:l(()=>[n(" \u6263\u9664 ")]),_:1},8,["modelValue"]),e(C,{modelValue:d.value.quota_type,"onUpdate:modelValue":u[16]||(u[16]=t=>d.value.quota_type=t),value:"3"},{default:l(()=>[n(" \u8D60\u9001 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(V,{field:"quota_expires_at",label:a.$t("reseller.label.quota_expires_at")},{default:l(()=>[e(qe,{modelValue:d.value.quota_expires_at,"onUpdate:modelValue":u[17]||(u[17]=t=>d.value.quota_expires_at=t),placeholder:a.$t("reseller.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":o(xe),position:"tl",style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>o(E)(d.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),e(V,{field:"is_send_notice",label:a.$t("reseller.label.is_send_notice")},{default:l(()=>[e(we,{modelValue:d.value.is_send_notice,"onUpdate:modelValue":u[18]||(u[18]=t=>d.value.is_send_notice=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),e(ue,{visible:M.value,"onUpdate:visible":u[22]||(u[22]=t=>M.value=t),title:a.$t("reseller.form.title.permissions"),"ok-text":a.$t("button.save"),width:700,onCancel:We,onBeforeOk:Ke},{default:l(()=>[e(W,{ref_key:"permissionsFormRef",ref:ve,model:R.value},{default:l(()=>[e(V,{field:"groups",label:a.$t("reseller.label.groups"),style:{"align-items":"center"}},{default:l(()=>[e(he,{modelValue:R.value.groups,"onUpdate:modelValue":u[20]||(u[20]=t=>R.value.groups=t),placeholder:a.$t("reseller.placeholder.groups"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":"",style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:l(()=>[(s(!0),v(ne,null,re(pe.value,t=>(s(),m(_l,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(V,{field:"models",label:a.$t("reseller.label.models"),style:{"align-items":"center"}},{default:l(()=>[e(cl,{modelValue:R.value.models,"onUpdate:modelValue":u[21]||(u[21]=t=>R.value.models=t),placeholder:a.$t("reseller.placeholder.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:ce.value,scrollbar:!1,"tree-checked-strategy":"child",style:{"max-height":"220px",display:"block",overflow:"auto"}},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),e(ue,{visible:G.value,"onUpdate:visible":u[30]||(u[30]=t=>G.value=t),title:a.$t("reseller.form.title.del"),width:700,onCancel:ll,onBeforeOk:el},{default:l(()=>[e(W,{ref_key:"delFormRef",ref:fe,model:w.value},{default:l(()=>[w.value.user_id?(s(),m(V,{key:0,field:"user_id",label:a.$t("reseller.form.userId"),rules:[{required:!0}]},{default:l(()=>[e(K,{modelValue:w.value.user_id,"onUpdate:modelValue":u[23]||(u[23]=t=>w.value.user_id=t),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])):De("",!0),w.value.name?(s(),m(V,{key:1,field:"name",label:a.$t("reseller.label.name"),rules:[{required:!0}]},{default:l(()=>[e(K,{modelValue:w.value.name,"onUpdate:modelValue":u[24]||(u[24]=t=>w.value.name=t),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])):De("",!0),e(V,{field:"data",label:a.$t("reseller.label.del.data")},{default:l(()=>[e(X,{size:"large"},{default:l(()=>[e(T,{modelValue:w.value.data,"onUpdate:modelValue":u[25]||(u[25]=t=>w.value.data=t),value:1},{default:l(()=>[n(" \u7528\u6237\u6570\u636E ")]),_:1},8,["modelValue"]),e(T,{modelValue:w.value.data,"onUpdate:modelValue":u[26]||(u[26]=t=>w.value.data=t),value:2},{default:l(()=>[n(" \u5E94\u7528\u6570\u636E ")]),_:1},8,["modelValue"]),e(T,{modelValue:w.value.data,"onUpdate:modelValue":u[27]||(u[27]=t=>w.value.data=t),value:3},{default:l(()=>[n(" \u4EA4\u6613\u8BB0\u5F55 ")]),_:1},8,["modelValue"]),e(T,{modelValue:w.value.data,"onUpdate:modelValue":u[28]||(u[28]=t=>w.value.data=t),value:4},{default:l(()=>[n(" \u8D26\u5355\u660E\u7EC6 ")]),_:1},8,["modelValue"]),e(T,{modelValue:w.value.data,"onUpdate:modelValue":u[29]||(u[29]=t=>w.value.data=t),value:5},{default:l(()=>[n(" \u65E5\u5FD7\u6570\u636E ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const Dt=gl(Ka,[["__scopeId","data-v-6fbc2b89"]]);export{Dt as default};

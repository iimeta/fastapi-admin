import{_ as Oe,u as kt,J as ht,s as bt,A as gt,k as wt,B as $t}from"./index.35e1896c.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Ye,e as w,w as je,bS as Je,B as a,C as _,bn as v,aD as o,aG as e,aH as t,u as r,aL as i,aM as n,aE as Ft,g as Ge,bA as Ct,bB as Vt,ad as Dt,bC as Bt,bD as Ke,bE as Et,bi as Qe,bb as At,b6 as xt,a_ as We,r as Te,c as ge,bs as It,b as qt,aJ as J,aI as G,D as N,E as Ut,n as St,aK as Lt,aF as zt,bF as Nt,bG as Mt,b2 as Pt,bH as Tt,b1 as Ht,aS as Rt,bT as Ot,bI as Yt,b5 as jt,bJ as Jt,ab as Gt,aU as Kt,bj as Qt,bk as Wt,bl as Xt,b4 as Zt,bK as ea,bM as ta,aV as aa,bN as la}from"./arco.cbac690a.js";import{u as Xe}from"./loading.b56ef223.js";import{q as $e,a as He}from"./common.4090c8c2.js";import{V as Re,_ as Ze,q as ua,c as oa,a as na,s as sa,b as ia}from"./spend.vue_vue_type_script_setup_true_lang.fa8b543d.js";import{f as da}from"./app.088769ea.js";import{b as ra}from"./dashboard.5a329a19.js";import{c as we,S as _a}from"./sortable.esm.59243d4c.js";import{q as ma}from"./model.48ba2ee7.js";import{f as ca}from"./agent.cd58af2e.js";/* empty css               *//* empty css                *//* empty css                */import{u as pa}from"./vue.4014b72a.js";import"./chart.e521dee8.js";const fa={style:{margin:"10px 0 30px 10px"}},va={key:1},ya={key:1},ka={key:1},ha={key:1},ba={key:1},ga={key:1},wa={key:1},$a={key:1},Fa={key:1},Ca={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Va={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Da={key:1},Ba={key:1},Ea={key:1},Aa={key:1},xa={key:1},Ia={key:1},qa={key:1},Ua={key:1},Sa={key:1},La={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},za={key:1},Na={key:1},Ma={key:1},Pa={key:1},Ta={key:1},Ha={key:1},Ra={key:1},Oa={key:1},Ya={key:1},ja={key:1},Ja={key:1},Ga={key:1},Ka={key:1},Qa={key:1},Wa={key:1},Xa={key:1},Za={key:1},el={key:1},tl={key:1},al={key:1},ll={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},ul={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},ol={key:1},nl={key:1},sl={key:1},il={key:1},dl={key:1},rl={key:1},_l={key:1},ml={key:1},cl={key:1},pl={key:1},fl={key:1},vl={key:1},yl={key:1},kl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},hl={key:1},bl={key:1},gl={name:"ChatDetail"},wl=Ye({...gl,props:{id:{type:String,default:""}},setup(Fe){const _e=Fe,{loading:m,setLoading:F}=Xe(!0),u=w({}),{copy:te,copied:K}=pa(),{proxy:ae}=Ge();(async(g={id:_e.id})=>{F(!0);try{const{data:$}=await ua(g);u.value=$}catch{}finally{F(!1)}})();const U=g=>{te(g)};je(K,()=>{K.value&&ae.$message.success("\u590D\u5236\u6210\u529F")});const M=async(g,$)=>{const{data:p}=await oa({id:g,field:$});te(p.value)},P=w(!1),I=w(),le=w(),T=async(g,$)=>{P.value=!0,I.value=g,le.value=$};return(g,$)=>{const p=Ct,f=Vt,S=Dt,c=Bt,h=Ke,R=Et,ue=Qe,oe=At,ne=xt,me=We,O=Je("permission");return a(),_("div",fa,[v((a(),o(R,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",va,[i(n(u.value.trace_id)+" ",1),t(S,{class:"copy-btn",onClick:$[0]||($[0]=D=>U(u.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ya,n(u.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ka,[i(n(u.value.creator)+" ",1),t(S,{class:"copy-btn",onClick:$[1]||($[1]=D=>M(u.value.id,"creator"))})]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",ha,n(u.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",ba,n(u.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ga,n(u.value.provider_name),1))]),_:1}),t(c,{label:"\u6A21\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",wa,n(u.value.model||"-"),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",$a,n(g.$t(`dict.model_type.${u.value.model_type}`)),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Fa,n(g.$t(`chat.dict.stream.${u.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ca,n(u.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Va,n(u.value.completion||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Da,n(u.value.spend.group_name||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ba,n(u.value.spend.group_discount>0?Number((u.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(c,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ea,n(u.value.spend.billing_methods?g.$t(`model.dict.billing_methods.${u.value.spend.billing_methods}`):"-"),1))]),_:1}),t(c,{label:"\u603B\u82B1\u8D39"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",{key:1,class:"spend",onClick:$[2]||($[2]=D=>u.value.status===1||u.value.status===2?T(u.value.spend,u.value.model_type):void 0)},n(u.value.spend.total_spend_tokens?`$${r($e)(u.value.spend.total_spend_tokens)}`:u.value.status===1||u.value.status===2?"$0.00":"-"),1))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Aa,[u.value.conn_time>3e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>15e3?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>5e3?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.conn_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",xa,[u.value.duration>18e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>12e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>9e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.duration)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ia,[u.value.total_time>18e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>12e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>9e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.total_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",qa,[u.value.status===1?(a(),o(h,{key:0,color:"green"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===2?(a(),o(h,{key:1,color:"gold"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===3?(a(),o(h,{key:2,color:"orange"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):(a(),o(h,{key:3,color:"red"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ua,n(u.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Sa,n(u.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",La,n(u.value.err_msg||"-"),1))]),_:1})]),_:1})),[[O,["reseller","user"]]]),v((a(),o(R,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",za,[i(n(u.value.trace_id)+" ",1),t(S,{class:"copy-btn",onClick:$[3]||($[3]=D=>U(u.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Na,n(u.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ma,[i(n(u.value.is_smart_match?"-":u.value.creator)+" ",1),u.value.is_smart_match?Ft("",!0):(a(),o(S,{key:0,class:"copy-btn",onClick:$[4]||($[4]=D=>M(u.value.id,"creator"))}))]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Pa,n(u.value.is_smart_match?"-":u.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Ta,n(u.value.is_smart_match?"-":u.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ha,n(u.value.provider_name),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ra,n(g.$t(`dict.model_type.${u.value.model_type}`)),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Oa,n(u.value.model_name||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ya,n(u.value.model||"-"),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ja,n(u.value.real_model_name),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ja,n(u.value.real_model),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ga,n(g.$t(`chat.dict.stream.${u.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Ka,n(g.$t(`chat.dict.is_enable_fallback.${u.value.is_enable_fallback||!1}`)),1))]),_:1}),t(c,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var D,q;return[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Qa,n(((q=(D=u.value)==null?void 0:D.fallback_config)==null?void 0:q.model_agent_name)||"-"),1))]}),_:1}),t(c,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var D,q;return[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",Wa,n(((q=(D=u.value)==null?void 0:D.fallback_config)==null?void 0:q.model)||"-"),1))]}),_:1}),t(c,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Xa,n(g.$t(`chat.dict.is_enable_forward.${u.value.is_enable_forward||!1}`)),1))]),_:1}),t(c,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",Za,n(u.value.is_enable_forward?g.$t(`chat.dict.forward_rule.${u.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),t(c,{label:"\u542F\u7528\u4EE3\u7406"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",el,n(g.$t(`chat.dict.is_enable_model_agent.${u.value.is_enable_model_agent||!1}`)),1))]),_:1}),t(c,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var D,q;return[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",tl,n(((q=(D=u.value)==null?void 0:D.model_agent)==null?void 0:q.name)||"-"),1))]}),_:1}),t(c,{label:"\u5BC6\u94A5",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",al,[i(n(u.value.key?u.value.key.length>0?u.value.key.substr(0,u.value.key.length/2>10?10:u.value.key.length/2)+"************************************"+u.value.key.substr(-(u.value.key.length/2>5?5:u.value.key.length/2)):u.value.key:"-")+" ",1),t(S,{class:"copy-btn",onClick:$[5]||($[5]=D=>M(u.value.id,"key"))})]))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ll,n(u.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54",span:2},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ul,n(u.value.completion||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ol,n(u.value.spend.group_name||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",nl,n(u.value.spend.group_discount>0?Number((u.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(c,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",sl,n(u.value.spend.billing_methods?g.$t(`model.dict.billing_methods.${u.value.spend.billing_methods}`):"-"),1))]),_:1}),t(c,{label:"\u603B\u82B1\u8D39"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",{key:1,class:"spend",onClick:$[6]||($[6]=D=>u.value.status===1||u.value.status===2?T(u.value.spend,u.value.model_type):void 0)},n(u.value.spend.total_spend_tokens?`$${r($e)(u.value.spend.total_spend_tokens)}`:u.value.status===1||u.value.status===2?"$0.00":"-"),1))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",il,[u.value.conn_time>1e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>5e3?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.conn_time)+" ms ",1)]),_:1})):u.value.conn_time>3e3?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.conn_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",dl,[u.value.duration>12e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>9e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.duration)+" ms ",1)]),_:1})):u.value.duration>6e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.duration)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",rl,[u.value.total_time>12e4?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>9e4?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.total_time)+" ms ",1)]),_:1})):u.value.total_time>6e4?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.total_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u5185\u8017"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",_l,[u.value.internal_time>500?(a(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(u.value.internal_time)+" ms ",1)]),_:1})):u.value.internal_time>300?(a(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(u.value.internal_time)+" ms ",1)]),_:1})):u.value.internal_time>100?(a(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(u.value.internal_time)+" ms ",1)]),_:1})):(a(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(u.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",ml,[u.value.status===1?(a(),o(h,{key:0,color:"green"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===2?(a(),o(h,{key:1,color:"gold"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):u.value.status===3?(a(),o(h,{key:2,color:"orange"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1})):(a(),o(h,{key:3,color:"red"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${u.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u672C\u5730IP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",cl,n(u.value.local_ip||"-"),1))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",pl,n(u.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8FDC\u7A0BIP"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",fl,n(u.value.remote_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",vl,n(u.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),_("span",yl,n(u.value.created_at||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),_("span",kl,n(u.value.err_msg||"-"),1))]),_:1})]),_:1})),[[O,["admin"]]]),t(R,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,null,{default:e(()=>[t(ne,{type:"card"},{default:e(()=>[t(oe,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:3})]),_:1})):(a(),o(ue,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[u.value.messages?(a(),o(r(Re),{key:0,path:"res",data:u.value.messages,"show-length":!0},null,8,["data"])):(a(),_("span",hl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),v((a(),o(R,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,null,{default:e(()=>[t(ne,{type:"card"},{default:e(()=>[t(oe,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[r(m)?(a(),o(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:3})]),_:1})):(a(),o(ue,{key:1},{default:e(()=>[u.value.model_agent?(a(),o(r(Re),{key:0,data:u.value.model_agent,"show-length":!0},null,8,["data"])):(a(),_("span",bl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[O,["admin"]]]),t(me,{visible:P.value,"onUpdate:visible":$[8]||($[8]=D=>P.value=D),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[t(Ze,{modelValue:I.value,"onUpdate:modelValue":$[7]||($[7]=D=>I.value=D),"model-type":le.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])])}}});const $l=Oe(wl,[["__scopeId","data-v-3b790704"]]),Fl={class:"container"},Cl={class:"action-icon"},Vl={class:"action-icon"},Dl={id:"tableSetting"},Bl={style:{"margin-right":"4px",cursor:"move"}},El={class:"title"},Al=["onClick"],xl={name:"ChatList"},Il=Ye({...xl,setup(Fe){const{loading:_e,setLoading:m}=Xe(!0),{t:F}=kt(),u=localStorage.getItem("userRole"),te=Te({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),K=()=>({app_id:w(),trace_id:w(),user_id:w(),key:"",models:[],model_agents:[],total_time:w(),status:w(),req_time:[He().format("YYYY-MM-DD 00:00:00"),He().format("YYYY-MM-DD 23:59:59")]}),ae=w([]),y=w(K()),U=w([]),M=w([]),P=w("medium"),I=w([]),le=w(!0),T=w(),g={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},$=Te({...g}),p=ge(()=>[{name:F("size.mini"),value:"mini"},{name:F("size.small"),value:"small"},{name:F("size.medium"),value:"medium"},{name:F("size.large"),value:"large"}]),f=ge(()=>[{title:F(u==="reseller"||u==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:u==="reseller"||u==="admin"?"user_id":"app_id",slotName:u==="reseller"||u==="admin"?"user_id":"app_id",align:"center",width:75},{title:F("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:F("chat.columns.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:75},{title:F("chat.columns.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:75},{title:F("chat.columns.total_spend_tokens"),dataIndex:"total_spend_tokens",slotName:"total_spend_tokens",align:"center"},{title:F("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:F("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:F("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:F("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center"},{title:F("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:F("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:F("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:F("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);(u==="reseller"||u==="user")&&f.value.splice(9,1);const S=ge(()=>[{label:F("chat.dict.status.1"),value:1},{label:F("chat.dict.status.2"),value:2},{label:F("chat.dict.status.-1"),value:-1}]);u==="admin"&&S.value.push({label:F("chat.dict.status.3"),value:3},{label:F("chat.dict.status.-100"),value:-100});const c=async(s={...g,...y.value})=>{m(!0);try{const{data:d}=await na(s);ae.value=d.items,$.current=s.current,$.pageSize=s.pageSize,$.total=d.paging.total}catch{}finally{m(!1),T.value.selectAll(!1)}};c();const h=()=>{c({...g,...y.value})},R=s=>{c({...g,...y.value,current:s})},ue=s=>{g.pageSize=s,c({...g,...y.value})},oe=()=>{y.value=K(),h()},ne=(s,d)=>{P.value=s},me=(s,d,B)=>{s?U.value.splice(B,0,d):U.value=M.value.filter(x=>x.dataIndex!==d.dataIndex)},O=(s,d,B,x=!1)=>{const A=x?we(s):s;return d>-1&&B>-1&&A.splice(d,1,A.splice(B,1,A[d]).pop()),A},D=s=>{s&&St(()=>{const d=document.getElementById("tableSetting");new _a(d,{onEnd(B){const{oldIndex:x,newIndex:A}=B;O(U.value,x,A),O(M.value,x,A)}})})};je(()=>f.value,s=>{U.value=we(s),U.value.forEach((d,B)=>{d.checked=!0}),M.value=we(U.value)},{deep:!0,immediate:!0});const q=w([]);u==="user"&&(async()=>{try{const{data:s}=await da();q.value=s.items}catch{}})();const ce=w([]);(async()=>{try{const{data:s}=await ma();ce.value=s.items}catch{}})();const Ce=w([]);u==="admin"&&(async()=>{try{const{data:s}=await ca();Ce.value=s.items}catch{}})();const{proxy:se}=Ge(),pe=w(!1),Ve=w(),et=s=>{pe.value=!0,Ve.value=s},tt=()=>{pe.value=!1},De=w(0),Be=w(0),Ee=async(s={...y.value})=>{const{data:d}=await ra(s);De.value=d.rpm,Be.value=d.tpm};Ee();let Ae;const xe=()=>{clearInterval(Ae)},Ie=()=>{Ae=setInterval(Ee,3e3)},qe=()=>{document.visibilityState==="hidden"?xe():Ie()};It(()=>{Ie(),document.addEventListener("visibilitychange",qe)}),qt(()=>{xe(),document.removeEventListener("visibilitychange",qe)});const Ue=w(),Q=w(!1),H=w({}),at=async s=>{var B;if(await((B=Ue.value)==null?void 0:B.validate())){Q.value=!0,s(!1);return}s(),Se({req_time:H.value.req_time,user_id:H.value.user_id})},lt=()=>{Q.value=!1},Se=s=>{if(I.value.length===0&&!s.req_time){Q.value=!0;return}m(!0),s.ids=I.value,sa(s).then(d=>{m(!1),se.$message.success("\u5BFC\u51FA\u6210\u529F"),T.value.selectAll(!1);const B=new Blob([d.data],{type:"application/vnd.ms-excel"}),x=window.URL.createObjectURL(B),A=document.createElement("a");A.href=x,A.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(x)}).catch(d=>{se.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",d)})},Le=w(),W=w(!1),E=w({status:[1,2,3,-1]}),ut=async s=>{var B;if(await((B=Le.value)==null?void 0:B.validate())){W.value=!0,s(!1);return}s(),ze({action:"time",value:E.value.value,user_id:E.value.user_id,status:E.value.status})},ot=()=>{W.value=!1},nt=s=>{I.value=s,le.value=!s.length},ze=s=>{if(I.value.length===0&&!s.value)W.value=!0;else{let d=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${I.value.length}\u6761\u6570\u636E?`;switch(s.action){case"delete":d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${I.value.length}\u6761\u6570\u636E?`;break;case"time":s.user_id?d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${s.user_id} \u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`:d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`;break}se.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:d,hideCancel:!1,onOk:()=>{m(!0),s.ids=I.value,ia(s).then(B=>{m(!1),se.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),h(),T.value.selectAll(!1)})}})}},fe=w(!1),ve=w(),Ne=w(),st=async(s,d)=>{fe.value=!0,ve.value=s,Ne.value=d};return(s,d)=>{const B=ht,x=Lt,A=zt,ie=Nt,Y=Mt,V=Pt,C=Tt,X=Ht,j=Rt,de=Ot,re=Yt,ye=jt,Me=Jt,it=Gt,Z=Kt,Pe=bt,ke=Qe,he=Qt,dt=gt,rt=Wt,_t=Xt,mt=wt,ct=$t,ee=Zt,pt=ea,b=Ke,ft=ta,vt=aa,be=We,yt=la,k=Je("permission");return a(),_("div",Fl,[t(A,{class:"container-breadcrumb"},{default:e(()=>[t(x,null,{default:e(()=>[t(B)]),_:1}),t(x,null,{default:e(()=>[i(n(s.$t("menu.chat")),1)]),_:1}),t(x,null,{default:e(()=>[i(n(s.$t("menu.chat.list")),1)]),_:1})]),_:1}),t(yt,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[t(re,null,{default:e(()=>[t(C,{flex:1},{default:e(()=>[t(ye,{model:y.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[v((a(),o(re,{gutter:16},{default:e(()=>[v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"app_id",label:s.$t("chat.form.app_id")},{default:e(()=>[t(Y,{modelValue:y.value.app_id,"onUpdate:modelValue":d[0]||(d[0]=l=>y.value.app_id=l),placeholder:s.$t("chat.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(q.value,l=>(a(),o(ie,{key:l.app_id,value:l.app_id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(X,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[1]||(d[1]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"user_id",label:s.$t("chat.form.reseller.user_id")},{default:e(()=>[t(j,{modelValue:y.value.user_id,"onUpdate:modelValue":d[2]||(d[2]=l=>y.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"key",label:s.$t("chat.form.key")},{default:e(()=>[t(X,{modelValue:y.value.key,"onUpdate:modelValue":d[3]||(d[3]=l=>y.value.key=l),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(X,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[4]||(d[4]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),o(C,{span:8},{default:e(()=>[t(V,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(j,{modelValue:y.value.total_time,"onUpdate:modelValue":d[5]||(d[5]=l=>y.value.total_time=l),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),t(C,{span:8},{default:e(()=>[t(V,{field:"models",label:s.$t("chat.form.models")},{default:e(()=>[t(Y,{modelValue:y.value.models,"onUpdate:modelValue":d[6]||(d[6]=l=>y.value.models=l),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(ce.value,l=>(a(),o(ie,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"status",label:s.$t("chat.form.status")},{default:e(()=>[t(Y,{modelValue:y.value.status,"onUpdate:modelValue":d[7]||(d[7]=l=>y.value.status=l),placeholder:s.$t("chat.form.selectDefault"),options:r(S),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(de,{modelValue:y.value.req_time,"onUpdate:modelValue":d[8]||(d[8]=l=>y.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["reseller","user"]]]),v((a(),o(re,{gutter:16},{default:e(()=>[t(C,{span:5},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[t(X,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[9]||(d[9]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:6},{default:e(()=>[t(V,{field:"models",label:s.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[t(Y,{modelValue:y.value.models,"onUpdate:modelValue":d[10]||(d[10]=l=>y.value.models=l),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(ce.value,l=>(a(),o(ie,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"key",label:s.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[t(X,{modelValue:y.value.key,"onUpdate:modelValue":d[11]||(d[11]=l=>y.value.key=l),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(j,{modelValue:y.value.total_time,"onUpdate:modelValue":d[12]||(d[12]=l=>y.value.total_time=l),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"user_id",label:s.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[t(j,{modelValue:y.value.user_id,"onUpdate:modelValue":d[13]||(d[13]=l=>y.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:6},{default:e(()=>[t(V,{field:"model_agents",label:s.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[t(Y,{modelValue:y.value.model_agents,"onUpdate:modelValue":d[14]||(d[14]=l=>y.value.model_agents=l),placeholder:s.$t("key.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),_(J,null,G(Ce.value,l=>(a(),o(ie,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"status",label:s.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[t(Y,{modelValue:y.value.status,"onUpdate:modelValue":d[15]||(d[15]=l=>y.value.status=l),placeholder:s.$t("chat.form.selectDefault"),options:r(S),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(de,{modelValue:y.value.req_time,"onUpdate:modelValue":d[16]||(d[16]=l=>y.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["admin"]]])]),_:1},8,["model"])]),_:1}),t(Me,{style:{height:"84px"},direction:"vertical"}),t(C,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[t(ke,{direction:"vertical",size:18},{default:e(()=>[t(Z,{type:"primary",onClick:h},{icon:e(()=>[t(it)]),default:e(()=>[i(" "+n(s.$t("chat.form.search")),1)]),_:1}),t(Z,{onClick:oe},{icon:e(()=>[t(Pe)]),default:e(()=>[i(" "+n(s.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(Me,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(re,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[t(C,{span:3},{default:e(()=>[t(ke,null,{default:e(()=>[t(Z,{type:"primary",onClick:d[17]||(d[17]=l=>Se({}))},{default:e(()=>[i(" \u5BFC\u51FA ")]),_:1}),v((a(),o(Z,{type:"primary",status:"danger",onClick:d[18]||(d[18]=l=>ze({action:"delete"}))},{default:e(()=>[i(" \u5220\u9664 ")]),_:1})),[[k,["admin"]]])]),_:1})]),_:1}),t(C,{span:14},{default:e(()=>[i(" \u603B\u82B1\u8D39 = \u5404\u8BA1\u8D39\u9879\u603B\u548C \xD7 \u5206\u7EC4\u6298\u6263 \xA0\xA0\u6216\xA0\xA0 \u6309\u6B21 \xD7 \u5206\u7EC4\u6298\u6263 ")]),_:1}),t(C,{span:2},{default:e(()=>[i(" RPM: \xA0"+n(De.value.toLocaleString()),1)]),_:1}),t(C,{span:3},{default:e(()=>[i(" TPM: \xA0"+n(Be.value.toLocaleString()),1)]),_:1}),t(C,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[t(he,{content:s.$t("actions.refresh")},{default:e(()=>[N("div",{class:"action-icon",onClick:h},[t(Pe,{size:"18"})])]),_:1},8,["content"]),t(_t,{onSelect:ne},{content:e(()=>[(a(!0),_(J,null,G(r(p),l=>(a(),o(rt,{key:l.value,value:l.value,class:Ut({active:l.value===P.value})},{default:e(()=>[N("span",null,n(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[t(he,{content:s.$t("actions.density")},{default:e(()=>[N("div",Cl,[t(dt,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(he,{content:s.$t("actions.column_setting")},{default:e(()=>[t(pt,{trigger:"click",position:"bl",onPopupVisibleChange:D},{content:e(()=>[N("div",Dl,[(a(!0),_(J,null,G(M.value,(l,L)=>(a(),_("div",{key:l.dataIndex,class:"setting"},[N("div",Bl,[t(ct)]),N("div",null,[t(ee,{modelValue:l.checked,"onUpdate:modelValue":z=>l.checked=z,onChange:z=>me(z,l,L)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),N("div",El,n(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:e(()=>[N("div",Vl,[t(mt,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t(ft,{ref_key:"tableRef",ref:T,"row-key":"id",loading:r(_e),pagination:$,columns:U.value,data:ae.value,bordered:!1,size:P.value,"row-selection":te,onPageChange:R,onPageSizeChange:ue,onSelectionChange:nt},{user_id:e(({record:l})=>[i(n(l.is_smart_match?"-":l.user_id),1)]),input_tokens:e(({record:l})=>{var L,z;return[i(n((L=l.spend.text)!=null&&L.input_tokens?(z=l.spend.text)==null?void 0:z.input_tokens:l.status===1?0:"-"),1)]}),output_tokens:e(({record:l})=>{var L,z;return[i(n((L=l.spend.text)!=null&&L.output_tokens?(z=l.spend.text)==null?void 0:z.output_tokens:l.status===1?0:"-"),1)]}),total_spend_tokens:e(({record:l})=>[N("span",{class:"spend",onClick:L=>l.status===1||l.status===2?st(l.spend,l.model_type):void 0},n(l.spend.total_spend_tokens?`$${r($e)(l.spend.total_spend_tokens)}`:l.status===1||l.status===2?"$0.00":"-"),9,Al)]),stream:e(({record:l})=>[i(n(s.$t(`chat.dict.stream.${l.stream||!1}`)),1)]),conn_time:e(({record:l})=>[l.conn_time>3e4?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.conn_time>15e3?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.conn_time>5e3?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(l.conn_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.conn_time>1e4?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):l.conn_time>5e3?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):l.conn_time>3e3?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(l.conn_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),duration:e(({record:l})=>[l.duration>18e4?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.duration>12e4?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.duration>9e4?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(l.duration||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.duration>12e4?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):l.duration>9e4?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):l.duration>6e4?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(l.duration||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),total_time:e(({record:l})=>[l.total_time>18e4?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.total_time>12e4?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.total_time>9e4?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(l.total_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.total_time>12e4?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):l.total_time>9e4?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):l.total_time>6e4?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(l.total_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),internal_time:e(({record:l})=>[l.internal_time>1e3?v((a(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.internal_time>500?v((a(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.internal_time>300?v((a(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(l.internal_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.internal_time>500?v((a(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):l.internal_time>300?v((a(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):l.internal_time>100?v((a(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(l.internal_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),status:e(({record:l})=>[l.status===-1?(a(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===2?(a(),o(b,{key:1,color:"gold"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===3?(a(),o(b,{key:2,color:"orange"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):(a(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024))]),operations:e(({record:l})=>[t(Z,{type:"text",size:"small",onClick:L=>et(l.id)},{default:e(()=>[i(n(s.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),t(vt,{title:s.$t("menu.chat.detail"),width:700,footer:!1,visible:pe.value,"unmount-on-close":"","render-to-body":"",onCancel:tt},{default:e(()=>[t($l,{id:Ve.value},null,8,["id"])]),_:1},8,["title","visible"]),t(be,{visible:Q.value,"onUpdate:visible":d[21]||(d[21]=l=>Q.value=l),title:s.$t("chat.form.title.chat_export"),onCancel:lt,onBeforeOk:at},{default:e(()=>[t(ye,{ref_key:"chatExportForm",ref:Ue,model:H.value},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(de,{modelValue:H.value.req_time,"onUpdate:modelValue":d[19]||(d[19]=l=>H.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),v((a(),o(V,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[t(j,{modelValue:H.value.user_id,"onUpdate:modelValue":d[20]||(d[20]=l=>H.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[k,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(be,{visible:W.value,"onUpdate:visible":d[28]||(d[28]=l=>W.value=l),title:s.$t("chat.form.title.chat_del"),onCancel:ot,onBeforeOk:ut},{default:e(()=>[t(ye,{ref_key:"chatDelForm",ref:Le,model:E.value},{default:e(()=>[t(V,{field:"value",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(de,{modelValue:E.value.value,"onUpdate:modelValue":d[22]||(d[22]=l=>E.value.value=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(V,{field:"status",label:s.$t("chat.form.req.status"),rules:[{required:!0,message:s.$t("chat.error.req.status.required")}]},{default:e(()=>[t(ke,{size:"large"},{default:e(()=>[t(ee,{modelValue:E.value.status,"onUpdate:modelValue":d[23]||(d[23]=l=>E.value.status=l),value:1},{default:e(()=>[i(" \u6210\u529F ")]),_:1},8,["modelValue"]),t(ee,{modelValue:E.value.status,"onUpdate:modelValue":d[24]||(d[24]=l=>E.value.status=l),value:2},{default:e(()=>[i(" \u4E2D\u6B62 ")]),_:1},8,["modelValue"]),t(ee,{modelValue:E.value.status,"onUpdate:modelValue":d[25]||(d[25]=l=>E.value.status=l),value:3},{default:e(()=>[i(" \u91CD\u8BD5 ")]),_:1},8,["modelValue"]),t(ee,{modelValue:E.value.status,"onUpdate:modelValue":d[26]||(d[26]=l=>E.value.status=l),value:-1},{default:e(()=>[i(" \u5931\u8D25 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),t(V,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[t(j,{modelValue:E.value.user_id,"onUpdate:modelValue":d[27]||(d[27]=l=>E.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(be,{visible:fe.value,"onUpdate:visible":d[30]||(d[30]=l=>fe.value=l),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[t(Ze,{modelValue:ve.value,"onUpdate:modelValue":d[29]||(d[29]=l=>ve.value=l),"model-type":Ne.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])]),_:1})])}}});const mu=Oe(Il,[["__scopeId","data-v-6a23c1e9"]]);export{mu as default};

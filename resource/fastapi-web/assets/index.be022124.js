import{u as le,O as Ue,s as qe,A as Be,k as Le,B as Pe,_ as Ae}from"./index.9e0280d5.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as ne,e as h,B as i,C as f,aH as e,aG as t,u as g,aD as S,aM as c,aL as b,bA as Ee,bB as He,bC as Me,bD as Oe,bE as Fe,r as ee,c as L,w as Re,D as I,aJ as te,aI as ae,E as je,n as Ge,aZ as P,a_ as Je,aK as Ke,aF as Ze,b1 as Qe,b2 as We,bG as Xe,bI as Ye,bK as et,b5 as tt,bL as at,ab as lt,aU as nt,bi as ot,bj as st,bk as it,bl as ct,b4 as ut,bM as dt,aT as rt,bN as pt,aV as mt,bT as _t}from"./arco.3f46b4ae.js";import{u as oe}from"./loading.37fd256d.js";import{a as bt,b as ft,s as vt,c as ht,d as gt}from"./notice_template.3ee29351.js";import{c as j,S as yt}from"./sortable.esm.078712c4.js";/* empty css                *//* empty css                */import"./chart.2cea905d.js";import"./vue.dbcf9bc3.js";const kt={style:{margin:"10px 0 30px 10px"}},$t={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},wt={key:1},Ct={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},Vt=["innerHTML"],St={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},It={key:1},xt={key:1},Nt={key:1},Tt={name:"NoticeTemplateDetail"},zt=ne({...Tt,props:{id:{type:String,default:""}},setup(G){const A=G,{t:y}=le(),{loading:l,setLoading:D}=oe(!0),_=h({});return(async(s={id:A.id})=>{D(!0);try{const{data:m}=await bt(s);for(let u=0;u<m.scenes.length;u+=1)m.scenes[u]=y(`notice.template.dict.scenes.${m.scenes[u]}`);_.value=m}catch{}finally{D(!1)}})(),(s,m)=>{const u=Ee,v=He,d=Me,w=Oe,z=Fe;return i(),f("div",kt,[e(z,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(d,{label:s.$t("notice.template.label.name")},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",$t,c(_.value.name),1))]),_:1},8,["label"]),e(d,{label:s.$t("notice.template.label.scenes")},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",wt,c(_.value.scenes.toString()),1))]),_:1},8,["label"]),e(d,{label:s.$t("notice.template.label.title"),span:2},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",Ct,c(_.value.title),1))]),_:1},8,["label"]),e(d,{label:s.$t("notice.template.label.content"),span:2},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",{key:1,style:{"max-height":"500px",display:"block",overflow:"auto"},innerHTML:_.value.content},null,8,Vt))]),_:1},8,["label"]),e(d,{label:s.$t("common.remark")},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",St,c(_.value.remark||"-"),1))]),_:1},8,["label"]),e(d,{label:s.$t("common.status")},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",It,[e(w,{color:_.value.status===1?"green":"red"},{default:t(()=>[b(c(s.$t(`dict.status.${_.value.status}`)),1)]),_:1},8,["color"])]))]),_:1},8,["label"]),e(d,{label:s.$t("common.created_at")},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",xt,c(_.value.created_at),1))]),_:1},8,["label"]),e(d,{label:s.$t("common.updated_at")},{default:t(()=>[g(l)?(i(),S(v,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(i(),f("span",Nt,c(_.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),Dt={class:"container"},Ut={class:"action-icon"},qt={class:"action-icon"},Bt={id:"tableSetting"},Lt={style:{"margin-right":"4px",cursor:"move"}},Pt={class:"title"},At={name:"NoticeTemplateList"},Et=ne({...At,setup(G){const{loading:A,setLoading:y}=oe(!0),{t:l}=le(),D=ee({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),_=()=>({name:"",scenes:[],status:h(),title:"",content:"",remark:""}),E=h([]),s=h(_()),m=h([]),u=h([]),v=h("medium"),d=h([]),w=h(!0),z=h(),x={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},U=ee({...x}),se=L(()=>[{name:l("size.mini"),value:"mini"},{name:l("size.small"),value:"small"},{name:l("size.medium"),value:"medium"},{name:l("size.large"),value:"large"}]),ie=L(()=>[{title:l("notice.template.label.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:l("notice.template.label.scenes"),dataIndex:"scenes",slotName:"scenes",align:"center",ellipsis:!0,tooltip:!0},{title:l("notice.template.label.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:l("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:l("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:l("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:l("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:160}]),ce=L(()=>[{label:l("notice.template.dict.scenes.code"),value:"code"},{label:l("notice.template.dict.scenes.register"),value:"register"},{label:l("notice.template.dict.scenes.login"),value:"login"},{label:l("notice.template.dict.scenes.forget_password"),value:"forget_password"},{label:l("notice.template.dict.scenes.change_password"),value:"change_password"},{label:l("notice.template.dict.scenes.change_email"),value:"change_email"},{label:l("notice.template.dict.scenes.quota_recharge"),value:"quota_recharge"},{label:l("notice.template.dict.scenes.quota_warning"),value:"quota_warning"},{label:l("notice.template.dict.scenes.quota_exhaustion"),value:"quota_exhaustion"},{label:l("notice.template.dict.scenes.quota_expire_warning"),value:"quota_expire_warning"},{label:l("notice.template.dict.scenes.quota_expire"),value:"quota_expire"},{label:l("notice.template.dict.scenes.notice"),value:"notice"},{label:l("notice.template.dict.scenes.notice_register"),value:"notice_register"},{label:l("notice.template.dict.scenes.notice_login"),value:"notice_login"}]),ue=L(()=>[{label:l("dict.status.1"),value:1},{label:l("dict.status.2"),value:2}]),q=async(a={...x})=>{y(!0);try{const{data:n}=await ft(a);for(let r=0;r<n.items.length;r+=1)for(let p=0;p<n.items[r].scenes.length;p+=1)n.items[r].scenes[p]=l(`notice.template.dict.scenes.${n.items[r].scenes[p]}`);E.value=n.items,U.current=a.current,U.pageSize=a.pageSize,U.total=n.paging.total}catch{}finally{y(!1),z.value.selectAll(!1)}};q();const N=()=>{q({...x,...s.value})},de=a=>{q({...x,...s.value,current:a})},re=a=>{x.pageSize=a,q({...x,...s.value})},pe=()=>{s.value=_(),N()},me=(a,n)=>{v.value=a},_e=(a,n,r)=>{a?m.value.splice(r,0,n):m.value=u.value.filter(p=>p.dataIndex!==n.dataIndex)},J=(a,n,r,p=!1)=>{const C=p?j(a):a;return n>-1&&r>-1&&C.splice(n,1,C.splice(r,1,C[n]).pop()),C},be=a=>{a&&Ge(()=>{const n=document.getElementById("tableSetting");new yt(n,{onEnd(r){const{oldIndex:p,newIndex:C}=r;J(m.value,p,C),J(u.value,p,C)}})})};Re(()=>ie.value,a=>{m.value=j(a),m.value.forEach((n,r)=>{n.checked=!0}),u.value=j(m.value)},{deep:!0,immediate:!0});const fe=async a=>{y(!0);try{await vt(a),P.success(l("success.operate")),N()}catch{}finally{y(!1)}},ve=async a=>{y(!0);try{await ht(a),P.success(l("success.operate")),N()}catch{}finally{y(!1)}},he=a=>{d.value=a,w.value=!a.length},H=a=>{if(d.value.length===0)P.info(l("placeholder.operation.data"));else{let n=l("placeholder.batch.operation",{count:d.value.length});switch(a.action){case"status":a.value===1?n=l("placeholder.batch.operation.enable",{count:d.value.length}):n=l("placeholder.batch.operation.disable",{count:d.value.length});break;case"delete":n=l("placeholder.batch.operation.delete",{count:d.value.length});break}Je.warning({title:l("modal.warning.title"),titleAlign:"center",content:n,okText:l("button.ok"),cancelText:l("button.cancel"),hideCancel:!1,onOk:()=>{y(!0),a.ids=d.value,gt(a).then(r=>{y(!1),P.success(l("success.operate")),N(),z.value.selectAll(!1)})}})}},M=h(!1),K=h(),ge=a=>{M.value=!0,K.value=a},ye=()=>{M.value=!1};return(a,n)=>{const r=Ue,p=Ke,C=Ze,B=Qe,T=We,k=Xe,Z=Ye,O=et,ke=tt,Q=at,$e=lt,V=nt,W=qe,X=ot,F=st,we=Be,Ce=it,Ve=ct,Se=Le,Ie=Pe,xe=ut,Ne=dt,Y=rt,Te=pt,ze=mt,De=_t;return i(),f("div",Dt,[e(C,{class:"container-breadcrumb"},{default:t(()=>[e(p,null,{default:t(()=>[e(r)]),_:1}),e(p,null,{default:t(()=>[b(c(a.$t("notice.menu")),1)]),_:1}),e(p,null,{default:t(()=>[b(c(a.$t("notice.template.menu")),1)]),_:1})]),_:1}),e(De,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(O,null,{default:t(()=>[e(k,{flex:1},{default:t(()=>[e(ke,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e(k,{span:8},{default:t(()=>[e(T,{field:"name",label:a.$t("notice.template.label.name")},{default:t(()=>[e(B,{modelValue:s.value.name,"onUpdate:modelValue":n[0]||(n[0]=o=>s.value.name=o),placeholder:a.$t("notice.template.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(k,{span:8},{default:t(()=>[e(T,{field:"title",label:a.$t("notice.template.label.title")},{default:t(()=>[e(B,{modelValue:s.value.title,"onUpdate:modelValue":n[1]||(n[1]=o=>s.value.title=o),placeholder:a.$t("notice.template.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(k,{span:8},{default:t(()=>[e(T,{field:"content",label:a.$t("notice.template.label.content")},{default:t(()=>[e(B,{modelValue:s.value.content,"onUpdate:modelValue":n[2]||(n[2]=o=>s.value.content=o),placeholder:a.$t("notice.template.placeholder.content"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(k,{span:8},{default:t(()=>[e(T,{field:"scenes",label:a.$t("notice.template.label.scenes")},{default:t(()=>[e(Z,{modelValue:s.value.scenes,"onUpdate:modelValue":n[3]||(n[3]=o=>s.value.scenes=o),placeholder:a.$t("common.all"),options:g(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(k,{span:8},{default:t(()=>[e(T,{field:"status",label:a.$t("common.status")},{default:t(()=>[e(Z,{modelValue:s.value.status,"onUpdate:modelValue":n[4]||(n[4]=o=>s.value.status=o),placeholder:a.$t("common.all"),options:g(ue),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(k,{span:8},{default:t(()=>[e(T,{field:"remark",label:a.$t("common.remark")},{default:t(()=>[e(B,{modelValue:s.value.remark,"onUpdate:modelValue":n[5]||(n[5]=o=>s.value.remark=o),placeholder:a.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{style:{height:"84px"},direction:"vertical"}),e(k,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(X,{direction:"vertical",size:18},{default:t(()=>[e(V,{type:"primary",onClick:N},{icon:t(()=>[e($e)]),default:t(()=>[b(" "+c(a.$t("button.search")),1)]),_:1}),e(V,{onClick:pe},{icon:t(()=>[e(W)]),default:t(()=>[b(" "+c(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(O,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(k,{span:12},{default:t(()=>[e(X,null,{default:t(()=>[e(V,{type:"primary",onClick:n[6]||(n[6]=o=>a.$router.push({name:"NoticeTemplateCreate"}))},{default:t(()=>[b(c(a.$t("button.create")),1)]),_:1}),e(V,{type:"primary",status:"success",disabled:w.value,title:w.value?a.$t("placeholder.operation.data"):"",onClick:n[7]||(n[7]=o=>H({action:"status",value:1}))},{default:t(()=>[b(c(a.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(V,{type:"primary",status:"danger",disabled:w.value,title:w.value?a.$t("placeholder.operation.data"):"",onClick:n[8]||(n[8]=o=>H({action:"status",value:2}))},{default:t(()=>[b(c(a.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(V,{type:"primary",status:"danger",disabled:w.value,title:w.value?a.$t("placeholder.operation.data"):"",onClick:n[9]||(n[9]=o=>H({action:"delete"}))},{default:t(()=>[b(c(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(k,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(F,{content:a.$t("action.refresh")},{default:t(()=>[I("div",{class:"action-icon",onClick:N},[e(W,{size:"18"})])]),_:1},8,["content"]),e(Ve,{onSelect:me},{content:t(()=>[(i(!0),f(te,null,ae(g(se),o=>(i(),S(Ce,{key:o.value,value:o.value,class:je({active:o.value===v.value})},{default:t(()=>[I("span",null,c(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(F,{content:a.$t("action.density")},{default:t(()=>[I("div",Ut,[e(we,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(F,{content:a.$t("action.column_setting")},{default:t(()=>[e(Ne,{trigger:"click",position:"bl",onPopupVisibleChange:be},{content:t(()=>[I("div",Bt,[(i(!0),f(te,null,ae(u.value,(o,$)=>(i(),f("div",{key:o.dataIndex,class:"setting"},[I("div",Lt,[e(Ie)]),I("div",null,[e(xe,{modelValue:o.checked,"onUpdate:modelValue":R=>o.checked=R,onChange:R=>_e(R,o,$)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),I("div",Pt,c(o.title),1)]))),128))])]),default:t(()=>[I("div",qt,[e(Se,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(Te,{ref_key:"tableRef",ref:z,"row-key":"id",loading:g(A),pagination:U,columns:m.value,data:E.value,bordered:!1,size:v.value,"row-selection":D,onPageChange:de,onPageSizeChange:re,onSelectionChange:he},{is_public:t(({record:o})=>[e(Y,{modelValue:o.is_public,"onUpdate:modelValue":$=>o.is_public=$,"checked-value":!0,"unchecked-value":!1,onChange:$=>fe({id:o.id,is_public:o.is_public})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),status:t(({record:o})=>[e(Y,{modelValue:o.status,"onUpdate:modelValue":$=>o.status=$,"checked-value":1,"unchecked-value":2,onChange:$=>ve({id:o.id,status:o.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),remark:t(({record:o})=>[b(c(o.remark||"-"),1)]),operations:t(({record:o})=>[e(V,{type:"text",size:"small",onClick:$=>ge(o.id)},{default:t(()=>[b(c(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(V,{type:"text",size:"small",onClick:$=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:o.id,action:"copy"}})},{default:t(()=>[b(c(a.$t("button.copy")),1)]),_:2},1032,["onClick"]),e(V,{type:"text",size:"small",onClick:$=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:o.id}})},{default:t(()=>[b(c(a.$t("button.update")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(ze,{title:a.$t("notice.template.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:M.value,onCancel:ye},{default:t(()=>[e(zt,{id:K.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const ia=Ae(Et,[["__scopeId","data-v-e40db937"]]);export{ia as default};

import{C as z,_ as G}from"./index.9b75afac.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as H,e as d,B as i,C as c,aH as l,aG as r,aL as u,aM as m,F as V,aJ as $,aI as L,aD as C,u as J,aK as P,aF as j,bE as Q,bA as W,bB as X,b2 as Y,b1 as Z,aS as x,bO as ee,bP as ae,aT as le,aU as te,bi as oe,b5 as re,bI as se,bR as ne,g as de}from"./arco.91d8d802.js";import{u as ue}from"./loading.d8a03711.js";import{f as me,h as ie}from"./vue.90059513.js";import{e as pe,c as ce}from"./key.cbd32715.js";import{q as _e}from"./corp.ab9abacc.js";import{a as fe}from"./model.9407e965.js";import{f as ye}from"./agent.781d5737.js";import"./chart.1c4d013e.js";const be={class:"container"},ge={class:"wrapper"},ve={class:"submit-btn"},ke={name:"KeyUpdate"},he=H({...ke,setup(we){const{loading:q,setLoading:s}=ue(!1),{proxy:B}=de(),I=me(),U=ie(),_=d([]);(async()=>{s(!0);try{const{data:e}=await _e();_.value=e.items}catch{}finally{s(!1)}})();const f=d([]);(async()=>{s(!0);try{const{data:e}=await fe();f.value=e.items}catch{}finally{s(!1)}})();const y=d([]);(async()=>{s(!0);try{const{data:e}=await ye();y.value=e.items}catch{}finally{s(!1)}})();const b=d(),t=d({id:"",corp:"",key:"",weight:d(20),remark:"",status:1,models:[],model_agents:[],is_agents_only:!1}),M=async()=>{var a;if(!await((a=b.value)==null?void 0:a.validate())){s(!0);try{await pe(t.value).then(()=>{B.$message.success("\u66F4\u65B0\u6210\u529F"),I.push({name:"ModelKeyList"})})}catch{}finally{s(!1)}}};return(async(e={id:U.query.id})=>{s(!0);try{const{data:a}=await ce(e);t.value.id=a.id,t.value.corp=a.corp,t.value.key=a.key,t.value.weight=a.weight,t.value.remark=a.remark,t.value.status=a.status,t.value.models=a.models,t.value.model_agents=a.model_agents,t.value.is_agents_only=a.is_agents_only}catch{}finally{s(!1)}})(),(e,a)=>{const g=z,p=P,A=j,v=Q,k=W,h=X,n=Y,D=Z,F=x,K=ee,S=ae,R=le,w=te,T=oe,N=re,O=se,E=ne;return i(),c("div",be,[l(A,{class:"container-breadcrumb"},{default:r(()=>[l(p,null,{default:r(()=>[l(g)]),_:1}),l(p,null,{default:r(()=>[u(m(e.$t("menu.key")),1)]),_:1}),l(p,null,{default:r(()=>[u(m(e.$t("menu.key.update")),1)]),_:1})]),_:1}),l(E,{loading:J(q),style:{width:"100%"}},{default:r(()=>[l(O,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[V("div",ge,[l(N,{ref_key:"formRef",ref:b,model:t.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:r(()=>[l(v,{orientation:"left"},{default:r(()=>[u(m(e.$t("common.title.baseInfo")),1)]),_:1}),l(n,{field:"corp",label:e.$t("key.label.corp"),rules:[{required:!0,message:e.$t("key.error.corp.required")}]},{default:r(()=>[l(h,{modelValue:t.value.corp,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.corp=o),placeholder:e.$t("key.placeholder.corp"),"allow-search":""},{default:r(()=>[(i(!0),c($,null,L(_.value,o=>(i(),C(k,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(n,{field:"key",label:e.$t("key.label.key"),rules:[{required:!0,message:e.$t("key.error.key.required")}]},{default:r(()=>[l(D,{modelValue:t.value.key,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.key=o),placeholder:e.$t("key.placeholder.update.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(n,{field:"weight",label:e.$t("model.agent.label.weight")},{default:r(()=>[l(F,{modelValue:t.value.weight,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.weight=o),precision:0,min:0,max:999,placeholder:e.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{field:"remark",label:e.$t("key.label.remark")},{default:r(()=>[l(K,{modelValue:t.value.remark,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.remark=o),placeholder:e.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(v,{orientation:"left"},{default:r(()=>[u(m(e.$t("common.title.advanced")),1)]),_:1}),l(n,{field:"models",label:e.$t("key.label.models")},{default:r(()=>[l(S,{modelValue:t.value.models,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.models=o),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:f.value,placeholder:e.$t("key.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),l(n,{field:"model_agents",label:e.$t("key.label.modelAgents")},{default:r(()=>[l(h,{modelValue:t.value.model_agents,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.model_agents=o),placeholder:e.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(i(!0),c($,null,L(y.value,o=>(i(),C(k,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{field:"is_agents_only",label:e.$t("key.label.isAgentsOnly")},{default:r(()=>[l(R,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),l(T,null,{default:r(()=>[V("div",ve,[l(w,{type:"secondary",onClick:a[7]||(a[7]=o=>e.$router.push({name:"ModelKeyList"}))},{default:r(()=>[u(m(e.$t("button.cancel")),1)]),_:1}),l(w,{type:"primary",onClick:M},{default:r(()=>[u(m(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Xe=G(he,[["__scopeId","data-v-dc98a8ae"]]);export{Xe as default};

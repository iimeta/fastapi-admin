import{u as z,x as K,_ as G}from"./index.b24b4575.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as H,e as p,B as f,C as B,aH as a,aG as o,aL as d,aM as i,F as C,aJ as J,aI as Q,aD as X,u as j,aK as W,aF as Y,bE as Z,bA as x,bB as ee,b2 as ae,b1 as le,aS as te,bO as oe,bP as re,bQ as ne,bi as de,aT as se,aU as ue,b5 as me,bI as pe,bR as ie,g as ce}from"./arco.a9260898.js";import{u as be}from"./loading.1f346a94.js";import{f as _e}from"./vue.ad52ddbe.js";import{d as fe}from"./agent.53baf448.js";import{q as ge}from"./corp.4e269a74.js";import{b as ye}from"./model.13b6297c.js";import"./chart.d103b168.js";const ve={class:"container"},he={class:"wrapper"},ke={class:"submit-btn"},Ve={name:"ModelAgentCreate"},$e=H({...Ve,setup(we){const{loading:I,setLoading:s}=be(!1),{proxy:M}=ce(),q=_e(),{t:u}=z(),c=p([]),g=new Map;(async()=>{s(!0);try{const{data:e}=await ge();c.value=e.items;for(let l=0;l<c.value.length;l+=1)g.set(c.value[l].id,c.value[l])}catch{}finally{s(!1)}})();const m=p(u("key.placeholder.key")),F=async()=>{switch(g.get(r.value.corp).code){case"Baidu":m.value=u("key.placeholder.key.baidu");break;case"Xfyun":m.value=u("key.placeholder.key.xfyun");break;case"DeepSeek-Baidu":m.value=u("key.placeholder.key.deepseek.baidu");break;case"VolcEngine":m.value=u("key.placeholder.key.volcengine");break;default:m.value=u("key.placeholder.key")}},y=p([]);(async()=>{s(!0);try{const{data:e}=await ye();y.value=e.items}catch{}finally{s(!1)}})();const v=p(),r=p({corp:"",name:"",base_url:"",path:"",weight:p(20),remark:"",models:[],lb_strategy:"1",key:"",is_agents_only:!0}),L=async()=>{var l;if(!await((l=v.value)==null?void 0:l.validate())){s(!0);try{await fe(r.value).then(()=>{M.$message.success("\u65B0\u5EFA\u6210\u529F"),q.push({name:"ModelAgentList"})})}catch{}finally{s(!1)}}};return(e,l)=>{const h=K,b=W,S=Y,k=Z,A=x,D=ee,n=ae,_=le,R=te,V=oe,T=re,$=ne,w=de,E=se,U=ue,N=me,O=pe,P=ie;return f(),B("div",ve,[a(S,{class:"container-breadcrumb"},{default:o(()=>[a(b,null,{default:o(()=>[a(h)]),_:1}),a(b,null,{default:o(()=>[d(i(e.$t("menu.agent")),1)]),_:1}),a(b,null,{default:o(()=>[d(i(e.$t("menu.model.agent.create")),1)]),_:1})]),_:1}),a(P,{loading:j(I),style:{width:"100%"}},{default:o(()=>[a(O,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:o(()=>[C("div",he,[a(N,{ref_key:"formRef",ref:v,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:o(()=>[a(k,{orientation:"left"},{default:o(()=>[d(i(e.$t("common.title.baseInfo")),1)]),_:1}),a(n,{field:"corp",label:e.$t("model.agent.label.corp"),rules:[{required:!0,message:e.$t("model.agent.error.corp.required")}]},{default:o(()=>[a(D,{modelValue:r.value.corp,"onUpdate:modelValue":l[0]||(l[0]=t=>r.value.corp=t),placeholder:e.$t("model.agent.placeholder.corp"),"allow-search":"",onChange:F},{default:o(()=>[(f(!0),B(J,null,Q(c.value,t=>(f(),X(A,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"name",label:e.$t("model.agent.label.name"),rules:[{required:!0,message:e.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:e.$t("model.agent.error.name.pattern")}]},{default:o(()=>[a(_,{modelValue:r.value.name,"onUpdate:modelValue":l[1]||(l[1]=t=>r.value.name=t),placeholder:e.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"base_url",label:e.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:e.$t("model.agent.error.baseUrl.required")}]},{default:o(()=>[a(_,{modelValue:r.value.base_url,"onUpdate:modelValue":l[2]||(l[2]=t=>r.value.base_url=t),placeholder:e.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"path",label:e.$t("model.agent.label.path")},{default:o(()=>[a(_,{modelValue:r.value.path,"onUpdate:modelValue":l[3]||(l[3]=t=>r.value.path=t),placeholder:e.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"weight",label:e.$t("model.agent.label.weight")},{default:o(()=>[a(R,{modelValue:r.value.weight,"onUpdate:modelValue":l[4]||(l[4]=t=>r.value.weight=t),precision:0,min:1,max:100,placeholder:e.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"remark",label:e.$t("model.agent.label.remark")},{default:o(()=>[a(V,{modelValue:r.value.remark,"onUpdate:modelValue":l[5]||(l[5]=t=>r.value.remark=t),placeholder:e.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(k,{orientation:"left"},{default:o(()=>[d(i(e.$t("common.title.advanced")),1)]),_:1}),a(n,{field:"models",label:e.$t("model.agent.label.models")},{default:o(()=>[a(T,{modelValue:r.value.models,"onUpdate:modelValue":l[6]||(l[6]=t=>r.value.models=t),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:y.value,placeholder:e.$t("model.agent.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),a(n,{field:"lb_strategy",label:e.$t("model.agent.label.lb_strategy")},{default:o(()=>[a(w,{size:"large"},{default:o(()=>[a($,{modelValue:r.value.lb_strategy,"onUpdate:modelValue":l[7]||(l[7]=t=>r.value.lb_strategy=t),value:"1","default-checked":!0},{default:o(()=>[d(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),a($,{modelValue:r.value.lb_strategy,"onUpdate:modelValue":l[8]||(l[8]=t=>r.value.lb_strategy=t),value:"2"},{default:o(()=>[d("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),a(n,{field:"key",label:e.$t("model.agent.label.key")},{default:o(()=>[a(V,{modelValue:r.value.key,"onUpdate:modelValue":l[9]||(l[9]=t=>r.value.key=t),placeholder:m.value,"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"is_agents_only",label:e.$t("model.agent.label.isAgentsOnly")},{default:o(()=>[a(E,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":l[10]||(l[10]=t=>r.value.is_agents_only=t)},null,8,["modelValue"])]),_:1},8,["label"]),a(w,null,{default:o(()=>[C("div",ke,[a(U,{type:"secondary",onClick:l[11]||(l[11]=t=>e.$router.push({name:"ModelAgentList"}))},{default:o(()=>[d(i(e.$t("button.cancel")),1)]),_:1}),a(U,{type:"primary",onClick:L},{default:o(()=>[d(i(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const We=G($e,[["__scopeId","data-v-787d0a04"]]);export{We as default};

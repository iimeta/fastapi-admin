import{k as G,_ as S}from"./index.2b50796c.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              */import{d as N,e as _,B as b,C as w,aH as r,aG as o,aL as m,aM as i,D as $,u as s,aJ as O,aI as T,aD as j,aK as E,aF as J,b1 as K,b2 as M,bV as P,bF as z,bG as A,bO as Q,aU as W,bi as X,b5 as Y,bN as Z,bR as ee,g as ae}from"./arco.278964f1.js";import{u as le}from"./loading.a887a82e.js";import{d as re,b as d}from"./common.aee3db13.js";import{h as te,f as oe}from"./vue.f2e81e01.js";import{a as se,h as ue}from"./admin_reseller.af50450c.js";import{q as de}from"./group.e0fad17a.js";import"./chart.3af80f5f.js";const ne={class:"container"},pe={class:"wrapper"},me={class:"submit-btn"},ie={name:"ResellerUpdate"},ce=N({...ie,setup(_e){const{proxy:h}=ae(),{loading:V,setLoading:n}=le(!1),q=te(),k=oe(),f=_([]);(async()=>{try{const{data:a}=await de();f.value=a.items}catch{}})();const v=_(),e=_({id:"",name:"",email:"",account:"",password:"",quota_expires_at:"",groups:[],remark:"",status:1});(async(a={id:q.query.id})=>{n(!0);try{const{data:l}=await se(a);e.value.id=l.id,e.value.name=l.name,e.value.email=l.email,e.value.account=l.account,e.value.quota_expires_at=l.quota_expires_at,e.value.groups=l.groups,e.value.remark=l.remark,e.value.status=l.status}catch{}finally{n(!1)}})();const D=async()=>{var l;if(!await((l=v.value)==null?void 0:l.validate())){n(!0);try{await ue(e.value).then(()=>{h.$message.success("\u66F4\u65B0\u6210\u529F"),k.push({name:"ResellerList"})})}catch{}finally{n(!1)}}};return(a,l)=>{const y=G,c=E,R=J,p=K,u=M,U=P,B=z,L=A,F=Q,g=W,H=X,C=Y,I=Z,x=ee;return b(),w("div",ne,[r(R,{class:"container-breadcrumb"},{default:o(()=>[r(c,null,{default:o(()=>[r(y)]),_:1}),r(c,null,{default:o(()=>[m(i(a.$t("menu.sys")),1)]),_:1}),r(c,null,{default:o(()=>[m(i(a.$t("menu.reseller.update")),1)]),_:1})]),_:1}),r(x,{loading:s(V),style:{width:"100%"}},{default:o(()=>[r(I,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:o(()=>[$("div",pe,[r(C,{ref_key:"formRef",ref:v,model:e.value,class:"form","label-col-props":{span:3},"wrapper-col-props":{span:21}},{default:o(()=>[r(u,{field:"name",label:a.$t("reseller.label.name"),rules:[{required:!0,message:a.$t("reseller.error.name.required")},{match:/^.{1,30}$/,message:a.$t("reseller.error.name.pattern")}]},{default:o(()=>[r(p,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.name=t),placeholder:a.$t("reseller.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),r(u,{field:"email",label:a.$t("reseller.label.email"),rules:[{required:!0,message:a.$t("reseller.error.email.required")}]},{default:o(()=>[r(p,{modelValue:e.value.email,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.email=t),placeholder:a.$t("reseller.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),r(u,{field:"account",label:a.$t("reseller.label.account"),rules:[{required:!0,message:a.$t("reseller.error.account.required")}]},{default:o(()=>[r(p,{modelValue:e.value.account,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.account=t),placeholder:a.$t("reseller.placeholder.account"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),r(u,{field:"password",label:a.$t("reseller.label.password"),rules:[{match:/^.{6,}$/,message:a.$t("reseller.error.password.pattern")}]},{default:o(()=>[r(p,{modelValue:e.value.password,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.password=t),placeholder:a.$t("reseller.update.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),r(u,{field:"quota_expires_at",label:a.$t("reseller.label.quota_expires_at")},{default:o(()=>[r(U,{modelValue:e.value.quota_expires_at,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.quota_expires_at=t),placeholder:a.$t("reseller.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":s(re),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>s(d)(e.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),r(u,{field:"groups",label:a.$t("reseller.label.groups"),style:{"align-items":"center"}},{default:o(()=>[r(L,{modelValue:e.value.groups,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.groups=t),placeholder:a.$t("reseller.placeholder.groups"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:o(()=>[(b(!0),w(O,null,T(f.value,t=>(b(),j(B,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{field:"remark",label:a.$t("reseller.label.remark")},{default:o(()=>[r(F,{modelValue:e.value.remark,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.remark=t),placeholder:a.$t("reseller.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(H,null,{default:o(()=>[$("div",me,[r(g,{type:"secondary",onClick:l[7]||(l[7]=t=>a.$router.push({name:"ResellerList"}))},{default:o(()=>[m(i(a.$t("button.cancel")),1)]),_:1}),r(g,{type:"primary",onClick:D},{default:o(()=>[m(i(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const xe=S(ce,[["__scopeId","data-v-17414cd8"]]);export{xe as default};

import{u as sa,b as da,n as ia,s as ra,A as ca,k as _a,B as pa,_ as ma}from"./index.c71c317e.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as Ue,e as h,B as u,C as f,aH as e,aG as a,u as d,aD as b,aM as n,aL as y,bA as va,bB as fa,bC as ba,bD as ya,bE as ga,r as ke,c as ue,w as ha,D as B,aJ as $e,aI as qe,E as ka,aE as we,n as $a,aZ as Q,a_ as ne,aK as qa,aF as wa,aS as Va,b2 as Ca,bG as Ua,b1 as Da,bI as Sa,bJ as xa,bK as za,b5 as Ha,bL as Ia,ab as Ba,aU as Na,bi as Ra,bj as Aa,bk as Ta,bl as Pa,b4 as La,bM as Ea,bR as Oa,aT as Qa,bN as Fa,aV as Ma,bP as ja,bQ as Ga,bT as Ja}from"./arco.3f46b4ae.js";import{u as De}from"./loading.37fd256d.js";import{d as Ve,a as U,p as Ka,b as Ce}from"./common.cfd92899.js";import{a as Za,b as Wa,s as Xa,c as Ya,d as et,e as at,f as tt}from"./admin_user.5918c8d9.js";import{c as se,S as lt}from"./sortable.esm.078712c4.js";import{Q as $}from"./quota.9441354a.js";/* empty css                *//* empty css                */import"./chart.2cea905d.js";import"./vue.dbcf9bc3.js";const ot={style:{margin:"10px 0 30px 10px"}},ut={key:1},nt={key:1},st={key:1},dt={key:1},it={key:1},rt={key:1},ct={key:1},_t={key:1},pt={key:1},mt={key:1},vt={key:1},ft={key:1},bt={key:1},yt={key:1},gt={key:1},ht={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},kt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},$t={key:1},qt={key:1},wt={key:1},Vt={key:1},Ct={key:1},Ut={name:"UserDetail"},Dt=Ue({...Ut,props:{id:{type:String,default:""}},setup(de){const X=de,{loading:r,setLoading:s}=De(!0),v=h({});return(async(p={id:X.id})=>{s(!0);try{const{data:A}=await Za(p);v.value=A}catch{}finally{s(!1)}})(),(p,A)=>{const c=va,i=fa,m=ba,R=ya,M=ga;return u(),f("div",ot,[e(M,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:a(()=>[e(m,{label:p.$t("common.user_id")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",ut,n(v.value.user_id),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.reseller_id")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",nt,n(v.value.rid||"-"),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.account")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",st,n(v.value.account),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.name")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",dt,n(v.value.name),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.email")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",it,n(v.value.email),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.current_quota")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",rt,[e($,{"model-value":v.value.quota},null,8,["model-value"])]))]),_:1},8,["label"]),e(m,{label:p.$t("common.used_quota")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",ct,[e($,{"model-value":v.value.used_quota},null,8,["model-value"])]))]),_:1},8,["label"]),e(m,{label:p.$t("user.label.quota_expires_at")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",_t,n(v.value.quota_expires_at||"-"),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.status")},{default:a(()=>[v.value.status===1?(u(),b(R,{key:0,color:"green"},{default:a(()=>[y(n(p.$t(`dict.status.${v.value.status}`)),1)]),_:1})):(u(),b(R,{key:1,color:"red"},{default:a(()=>[y(n(p.$t(`dict.status.${v.value.status}`)),1)]),_:1}))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.quota_warning")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",pt,n(p.$t(`dict.open.${v.value.quota_warning||v.value.warning_threshold===0&&v.value.expire_warning_threshold===0}`)),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.warning_threshold")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",mt,[e($,{"model-value":v.value.warning_threshold},null,8,["model-value"])]))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.expire_warning_threshold")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",vt,n(v.value.expire_warning_threshold)+n(p.$t("unit.day")),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.warning_notice")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",ft,n(p.$t(`dict.notice.${v.value.warning_notice||!1}`)),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.expire_warning_notice")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",bt,n(p.$t(`dict.notice.${v.value.expire_warning_notice||!1}`)),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.exhaustion_notice")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",yt,n(p.$t(`dict.notice.${v.value.exhaustion_notice||!1}`)),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.expire_notice")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",gt,n(p.$t(`dict.notice.${v.value.expire_notice||!1}`)),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.groups"),span:2},{default:a(()=>{var C,D;return[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",ht,n(((D=(C=v.value)==null?void 0:C.group_names)==null?void 0:D.join(`
`))||"-"),1))]}),_:1},8,["label"]),e(m,{label:p.$t("common.remark"),span:2},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",kt,n(v.value.remark||"-"),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.login_ip")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",$t,n(v.value.login_ip||"-"),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.login_time")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",qt,n(v.value.login_time||"-"),1))]),_:1},8,["label"]),e(m,{label:p.$t("user.detail.login_domain")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",wt,n(v.value.login_domain||"-"),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.created_at")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",Vt,n(v.value.created_at),1))]),_:1},8,["label"]),e(m,{label:p.$t("common.updated_at")},{default:a(()=>[d(r)?(u(),b(i,{key:0,animation:!0},{default:a(()=>[e(c,{rows:1})]),_:1})):(u(),f("span",Ct,n(v.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),St={class:"container"},xt={class:"action-icon"},zt={class:"action-icon"},Ht={id:"tableSetting"},It={style:{"margin-right":"4px",cursor:"move"}},Bt={class:"title"},Nt=["title"],Rt={key:1},At={name:"UserList"},Tt=Ue({...At,setup(de){const{loading:X,setLoading:r}=De(!0),{t:s}=sa(),v=localStorage.getItem("userRole"),F=da(),p=ke({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),A=()=>({user_id:h(),name:"",account:"",quota:h(),status:h(),quota_expires_at:[]}),c=h([]),i=h(A()),m=h([]),R=h([]),M=h("medium"),C=h([]),D=h(!0),T=h(),P={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},J=ke({...P}),Se=ue(()=>[{name:s("size.mini"),value:"mini"},{name:s("size.small"),value:"small"},{name:s("size.medium"),value:"medium"},{name:s("size.large"),value:"large"}]),xe=ue(()=>[{title:s("common.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center",width:80},{title:s("common.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:s("common.account"),dataIndex:"account",slotName:"account",align:"center",ellipsis:!0,tooltip:!0},{title:s("common.current_quota"),dataIndex:"quota",slotName:"quota",align:"center",ellipsis:!0,tooltip:!0},{title:s("common.used_quota"),dataIndex:"used_quota",slotName:"used_quota",align:"center",ellipsis:!0,tooltip:!0},{title:s("user.label.quota_expires_at"),dataIndex:"quota_expires_at",slotName:"quota_expires_at",align:"center",width:170},{title:s("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:s("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:s("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:200}]),ze=ue(()=>[{label:s("dict.status.1"),value:1},{label:s("dict.status.2"),value:2}]),K=async(t={...P})=>{r(!0);try{const{data:o}=await Wa(t);c.value=o.items,J.current=t.current,J.pageSize=t.pageSize,J.total=o.paging.total}catch{}finally{r(!1),T.value.selectAll(!1)}};K();const N=()=>{K({...P,...i.value})},He=t=>{K({...P,...i.value,current:t})},Ie=t=>{P.pageSize=t,K({...P,...i.value})},Be=()=>{i.value=A(),N()},Ne=(t,o)=>{M.value=t},Re=(t,o,g)=>{t?m.value.splice(g,0,o):m.value=R.value.filter(k=>k.dataIndex!==o.dataIndex)},ie=(t,o,g,k=!1)=>{const I=k?se(t):t;return o>-1&&g>-1&&I.splice(o,1,I.splice(g,1,I[o]).pop()),I},Ae=t=>{t&&$a(()=>{const o=document.getElementById("tableSetting");new lt(o,{onEnd(g){const{oldIndex:k,newIndex:I}=g;ie(m.value,k,I),ie(R.value,k,I)}})})};ha(()=>xe.value,t=>{m.value=se(t),m.value.forEach((o,g)=>{o.checked=!0}),R.value=se(m.value)},{deep:!0,immediate:!0});const H=new Map;H.set(2,s("dict.del_data.2")),H.set(3,s("dict.del_data.3")),H.set(4,s("dict.del_data.4")),H.set(5,s("dict.del_data.5")),H.set(6,s("dict.del_data.6"));const Te=async t=>{let o=`${s("user.placeholder.are_you_sure_delete")}: ${t.name}?`;if(t.data&&t.data.length>0){let g="";for(let k=0;k<t.data.length;k+=1)k===0?g=H.get(t.data[k]):g+=`\u3001${H.get(t.data[k])}`;o=`${s("user.placeholder.are_you_sure_delete")}: ${t.name} ${s("user.placeholder.and_also_delete")}: ${g}?`}ne.warning({title:s("modal.warning.title"),titleAlign:"center",content:o,okText:s("button.ok"),cancelText:s("button.cancel"),hideCancel:!1,onOk:()=>{r(!0),tt(t).then(g=>{r(!1),Q.success(s("success.task")),N(),T.value.selectAll(!1)})}})},Pe=async t=>{r(!0);try{await Xa(t),Q.success(s("success.operate")),N()}catch{}finally{r(!1)}},Le=async t=>{r(!0);try{await Ya(t),Q.success(s("success.operate")),N()}catch{}finally{r(!1)}},L=h(0),E=h(!1),j=h(!1),re=h(),_=h({}),ce=h(),q=h({}),Ee=async t=>{r(!0);try{L.value=0,_.value.quota=h(),_.value.quota_type="1",_.value.user_id=t.user_id,_.value.quota_expires_at=t.quota_expires_at,_.value.is_send_notice=!0,T.value.selectAll(!1),E.value=!0}catch{}finally{r(!1)}},_e=t=>{_.value.quota=t},Oe=async t=>{var g;if(await((g=re.value)==null?void 0:g.validate())){E.value=!0,t(!1);return}if(C.value.length>0){t(),G({action:"recharge",value:_.value.quota,quota_type:_.value.quota_type,quota_expires_at:_.value.quota_expires_at,is_send_notice:_.value.is_send_notice});return}r(!0);try{await et(_.value),Q.success(s("success.recharge")),t(),N()}catch{t(!1)}finally{r(!1)}},Qe=()=>{E.value=!1},Y=h(!1),pe=h(),Fe=t=>{Y.value=!0,pe.value=t},Me=()=>{Y.value=!1},je=t=>{C.value=t,D.value=!t.length},G=t=>{if(C.value.length===0)Q.info(s("placeholder.operation.data"));else{let o=s("user.placeholder.batch.operation",{count:C.value.length});switch(t.action){case"recharge":t.value?_.value.quota_type==="2"?o=s("user.placeholder.batch.operation.deduct",{count:C.value.length,currencySymbol:F.getCurrencySymbol,quota:Ce(t.value)}):o=s("user.placeholder.batch.operation.quota_type",{count:C.value.length,quotaType:_.value.quota_type==="1"?s("finance.dict.deal_type.1"):s("finance.dict.deal_type.3"),currencySymbol:F.getCurrencySymbol,quota:Ce(t.value)}):(L.value=0,_.value.quota=h(),_.value.quota_type="1",_.value.quota_expires_at="",_.value.is_send_notice=!0,E.value=!0);break;case"status":t.value===1?o=s("user.placeholder.batch.operation.enable",{count:C.value.length}):o=s("user.placeholder.batch.operation.disable",{count:C.value.length});break;case"delete":if(o=s("user.placeholder.batch.operation.delete",{count:C.value.length}),t.data&&t.data.length>0){let g="";for(let k=0;k<t.data.length;k+=1)k===0?g=H.get(t.data[k]):g+=`\u3001${H.get(t.data[k])}`;o=s("user.placeholder.batch.operation.delete_data",{count:C.value.length,del_data:g})}break}if(t.action==="recharge"&&!t.value)return;ne.warning({title:s("modal.warning.title"),titleAlign:"center",content:o,okText:s("button.ok"),cancelText:s("button.cancel"),hideCancel:!1,onOk:()=>{r(!0),t.ids=C.value,at(t).then(g=>{r(!1),Q.success(s("success.operate")),N(),T.value.selectAll(!1)})}})}},me=async t=>{q.value=t,j.value=!0,t.action||T.value.selectAll(!1)},Ge=async t=>{var g;if(await((g=ce.value)==null?void 0:g.validate())){j.value=!0,t(!1);return}q.value.action?G({action:"delete",data:q.value.data}):Te(q.value)},Je=()=>{j.value=!1};return(t,o)=>{const g=ia,k=qa,I=wa,ee=Va,V=Ca,z=Ua,Z=Da,Ke=Sa,Ze=xa,ae=za,te=Ha,ve=Ia,We=Ba,S=Na,fe=ra,W=Ra,le=Aa,Xe=ca,Ye=Ta,ea=Pa,aa=_a,ta=pa,O=La,la=Ea,be=Oa,ye=Qa,oa=Fa,ua=Ma,w=ja,ge=Ga,he=ne,na=Ja;return u(),f("div",St,[e(I,{class:"container-breadcrumb"},{default:a(()=>[e(k,null,{default:a(()=>[e(g)]),_:1}),e(k,null,{default:a(()=>[y(n(t.$t("user.menu")),1)]),_:1})]),_:1}),e(na,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(ae,null,{default:a(()=>[e(z,{flex:1},{default:a(()=>[e(te,{model:i.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(ae,{gutter:16},{default:a(()=>[e(z,{span:8},{default:a(()=>[e(V,{field:"user_id",label:t.$t("common.user_id")},{default:a(()=>[e(ee,{modelValue:i.value.user_id,"onUpdate:modelValue":o[0]||(o[0]=l=>i.value.user_id=l),placeholder:t.$t("placeholder.user_id"),precision:0,min:1,max:9999999999999,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:7},{default:a(()=>[e(V,{field:"account",label:t.$t("common.account")},{default:a(()=>[e(Z,{modelValue:i.value.account,"onUpdate:modelValue":o[1]||(o[1]=l=>i.value.account=l),placeholder:t.$t("user.error.required.account"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:9},{default:a(()=>[e(V,{field:"name",label:t.$t("user.form.name")},{default:a(()=>[e(Z,{modelValue:i.value.name,"onUpdate:modelValue":o[2]||(o[2]=l=>i.value.name=l),placeholder:t.$t("user.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:8},{default:a(()=>[e(V,{field:"quota",label:t.$t("user.form.quota")},{default:a(()=>[e(ee,{modelValue:i.value.quota,"onUpdate:modelValue":o[3]||(o[3]=l=>i.value.quota=l),placeholder:t.$t("placeholder.quota"),min:1e-6,max:9999999999999,"allow-clear":""},{prefix:a(()=>[y(n(d(F).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min"])]),_:1},8,["label"])]),_:1}),e(z,{span:7},{default:a(()=>[e(V,{field:"status",label:t.$t("common.status")},{default:a(()=>[e(Ke,{modelValue:i.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>i.value.status=l),placeholder:t.$t("common.all"),options:d(ze),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(z,{span:9},{default:a(()=>[e(V,{field:"quota_expires_at",label:t.$t("common.expires_at")},{default:a(()=>[e(Ze,{modelValue:i.value.quota_expires_at,"onUpdate:modelValue":o[5]||(o[5]=l=>i.value.quota_expires_at=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(ve,{style:{height:"84px"},direction:"vertical"}),e(z,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(W,{direction:"vertical",size:18},{default:a(()=>[e(S,{type:"primary",onClick:N},{icon:a(()=>[e(We)]),default:a(()=>[y(" "+n(t.$t("button.search")),1)]),_:1}),e(S,{onClick:Be},{icon:a(()=>[e(fe)]),default:a(()=>[y(" "+n(t.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(ve,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(ae,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(z,{span:12},{default:a(()=>[e(W,null,{default:a(()=>[e(S,{type:"primary",onClick:o[6]||(o[6]=l=>t.$router.push({name:"UserCreate"}))},{default:a(()=>[y(n(t.$t("button.create")),1)]),_:1}),e(S,{type:"primary",status:"warning",disabled:D.value,title:D.value?t.$t("placeholder.operation.data"):"",onClick:o[7]||(o[7]=l=>G({action:"recharge"}))},{default:a(()=>[y(n(t.$t("button.recharge")),1)]),_:1},8,["disabled","title"]),e(S,{type:"primary",status:"success",disabled:D.value,title:D.value?t.$t("placeholder.operation.data"):"",onClick:o[8]||(o[8]=l=>G({action:"status",value:1}))},{default:a(()=>[y(n(t.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(S,{type:"primary",status:"danger",disabled:D.value,title:D.value?t.$t("placeholder.operation.data"):"",onClick:o[9]||(o[9]=l=>G({action:"status",value:2}))},{default:a(()=>[y(n(t.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(S,{type:"primary",status:"danger",disabled:D.value,title:D.value?t.$t("placeholder.operation.data"):"",onClick:o[10]||(o[10]=l=>me({action:"delete",data:[2,3,4,5,6]}))},{default:a(()=>[y(n(t.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(z,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(le,{content:t.$t("action.refresh")},{default:a(()=>[B("div",{class:"action-icon",onClick:N},[e(fe,{size:"18"})])]),_:1},8,["content"]),e(ea,{onSelect:Ne},{content:a(()=>[(u(!0),f($e,null,qe(d(Se),l=>(u(),b(Ye,{key:l.value,value:l.value,class:ka({active:l.value===M.value})},{default:a(()=>[B("span",null,n(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(le,{content:t.$t("action.density")},{default:a(()=>[B("div",xt,[e(Xe,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(le,{content:t.$t("action.column_setting")},{default:a(()=>[e(la,{trigger:"click",position:"bl",onPopupVisibleChange:Ae},{content:a(()=>[B("div",Ht,[(u(!0),f($e,null,qe(R.value,(l,x)=>(u(),f("div",{key:l.dataIndex,class:"setting"},[B("div",It,[e(ta)]),B("div",null,[e(O,{modelValue:l.checked,"onUpdate:modelValue":oe=>l.checked=oe,onChange:oe=>Re(oe,l,x)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),B("div",Bt,n(l.title),1)]))),128))])]),default:a(()=>[B("div",zt,[e(aa,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(oa,{ref_key:"tableRef",ref:T,"row-key":"id",loading:d(X),pagination:J,columns:m.value,data:c.value,bordered:!1,size:M.value,"row-selection":p,onPageChange:He,onPageSizeChange:Ie,onSelectionChange:je},{user_id:a(({record:l})=>[l.rid&&d(v)==="admin"?(u(),f("span",{key:0,title:l.rid},[B("b",null,n(l.user_id),1)],8,Nt)):(u(),f("span",Rt,n(l.user_id),1))]),quota:a(({record:l})=>[e($,{"model-value":l.quota},null,8,["model-value"])]),used_quota:a(({record:l})=>[e($,{"model-value":l.used_quota},null,8,["model-value"])]),quota_expires_at:a(({rowIndex:l})=>[e(be,{modelValue:c.value[l].quota_expires_at,"onUpdate:modelValue":x=>c.value[l].quota_expires_at=x,placeholder:t.$t("user.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":d(Ve),"show-time":"",shortcuts:[{label:"1",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>d(U)(c.value[l].quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}],onChange:x=>Pe({id:c.value[l].id,quota_expires_at:c.value[l].quota_expires_at})},{default:a(()=>[e(S,{style:{width:"150px"}},{default:a(()=>[y(n(c.value[l].quota_expires_at||t.$t("user.placeholder.quota_expires_at")),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled-date","shortcuts","onChange"])]),remark:a(({record:l})=>[y(n(l.remark||"-"),1)]),status:a(({record:l})=>[e(ye,{modelValue:l.status,"onUpdate:modelValue":x=>l.status=x,"checked-value":1,"unchecked-value":2,onChange:x=>Le({id:l.id,status:l.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:l})=>[e(S,{type:"text",size:"small",onClick:x=>Ee({user_id:l.user_id,quota_expires_at:l.quota_expires_at})},{default:a(()=>[y(n(t.$t("button.recharge")),1)]),_:2},1032,["onClick"]),e(S,{type:"text",size:"small",onClick:x=>Fe(l.id)},{default:a(()=>[y(n(t.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(S,{type:"text",size:"small",onClick:x=>t.$router.push({name:"UserUpdate",query:{id:l.id}})},{default:a(()=>[y(n(t.$t("button.update")),1)]),_:2},1032,["onClick"]),e(S,{type:"text",size:"small",onClick:x=>me({id:l.id,user_id:l.user_id,name:l.name,data:[2,3,4,5,6]})},{default:a(()=>[y(n(t.$t("button.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(ua,{title:t.$t("user.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:Y.value,onCancel:Me},{default:a(()=>[e(Dt,{id:pe.value},null,8,["id"])]),_:1},8,["title","visible"]),e(he,{visible:E.value,"onUpdate:visible":o[19]||(o[19]=l=>E.value=l),title:t.$t("user.label.recharge"),"ok-text":t.$t("button.ok"),width:728,onCancel:Qe,onBeforeOk:Oe},{default:a(()=>[e(te,{ref_key:"formRef",ref:re,model:_.value,"label-col-props":{span:4}},{default:a(()=>[e(V,{field:"quota",label:t.$t("user.label.recharge"),rules:[{required:!0,message:t.$t("user.placeholder.recharge")}]},{default:a(()=>[e(ee,{modelValue:_.value.quota,"onUpdate:modelValue":o[11]||(o[11]=l=>_.value.quota=l),placeholder:t.$t("user.placeholder.recharge"),min:1e-6,max:9999999999999,parser:d(Ka),"allow-clear":""},{prefix:a(()=>[y(n(d(F).getCurrencySymbol),1)]),_:1},8,["modelValue","placeholder","min","parser"])]),_:1},8,["label","rules"]),e(V,{style:{"margin-bottom":"8px"}},{default:a(()=>[e(ge,{modelValue:L.value,"onUpdate:modelValue":o[12]||(o[12]=l=>L.value=l),type:"button",onChange:_e},{default:a(()=>[e(w,{value:1},{default:a(()=>[e($,{"model-value":1})]),_:1}),e(w,{value:2},{default:a(()=>[e($,{"model-value":2})]),_:1}),e(w,{value:5},{default:a(()=>[e($,{"model-value":5})]),_:1}),e(w,{value:10},{default:a(()=>[e($,{"model-value":10})]),_:1}),e(w,{value:20},{default:a(()=>[e($,{"model-value":20})]),_:1}),e(w,{value:50},{default:a(()=>[e($,{"model-value":50})]),_:1}),e(w,{value:100},{default:a(()=>[e($,{"model-value":100})]),_:1}),e(w,{value:200},{default:a(()=>[e($,{"model-value":200})]),_:1}),e(w,{value:500},{default:a(()=>[e($,{"model-value":500})]),_:1}),e(w,{value:1e3,style:{padding:"0 3px 0 2px"}},{default:a(()=>[e($,{"model-value":1e3})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(V,{style:{"margin-bottom":"10px"}},{default:a(()=>[e(ge,{modelValue:L.value,"onUpdate:modelValue":o[13]||(o[13]=l=>L.value=l),type:"button",onChange:_e},{default:a(()=>[e(w,{value:2e3},{default:a(()=>[e($,{"model-value":2e3})]),_:1}),e(w,{value:3e3},{default:a(()=>[e($,{"model-value":3e3})]),_:1}),e(w,{value:5e3},{default:a(()=>[e($,{"model-value":5e3})]),_:1}),e(w,{value:1e4},{default:a(()=>[e($,{"model-value":1e4})]),_:1}),e(w,{value:2e4},{default:a(()=>[e($,{"model-value":2e4})]),_:1}),e(w,{value:5e4},{default:a(()=>[e($,{"model-value":5e4})]),_:1}),e(w,{value:1e5,style:{"padding-right":"1px"}},{default:a(()=>[e($,{"model-value":1e5})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(V,{field:"quota_type",label:t.$t("user.label.quota_type"),rules:[{required:!0,message:t.$t("user.error.required.quota_type")}]},{default:a(()=>[e(W,{size:"large"},{default:a(()=>[e(w,{modelValue:_.value.quota_type,"onUpdate:modelValue":o[14]||(o[14]=l=>_.value.quota_type=l),value:"1","default-checked":!0},{default:a(()=>[y(n(t.$t("finance.dict.deal_type.1")),1)]),_:1},8,["modelValue"]),e(w,{modelValue:_.value.quota_type,"onUpdate:modelValue":o[15]||(o[15]=l=>_.value.quota_type=l),value:"2"},{default:a(()=>[y(n(t.$t("finance.dict.deal_type.2")),1)]),_:1},8,["modelValue"]),e(w,{modelValue:_.value.quota_type,"onUpdate:modelValue":o[16]||(o[16]=l=>_.value.quota_type=l),value:"3"},{default:a(()=>[y(n(t.$t("finance.dict.deal_type.3")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(V,{field:"quota_expires_at",label:t.$t("user.label.quota_expires_at")},{default:a(()=>[e(be,{modelValue:_.value.quota_expires_at,"onUpdate:modelValue":o[17]||(o[17]=l=>_.value.quota_expires_at=l),placeholder:t.$t("user.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":d(Ve),position:"tl",style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>d(U)(_.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),e(V,{field:"is_send_notice",label:t.$t("user.label.is_send_notice")},{default:a(()=>[e(ye,{modelValue:_.value.is_send_notice,"onUpdate:modelValue":o[18]||(o[18]=l=>_.value.is_send_notice=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","ok-text"]),e(he,{visible:j.value,"onUpdate:visible":o[27]||(o[27]=l=>j.value=l),title:t.$t("user.form.title.del"),width:688,onCancel:Je,onBeforeOk:Ge},{default:a(()=>[e(te,{ref_key:"delFormRef",ref:ce,model:q.value,"label-col-props":{span:4}},{default:a(()=>[q.value.user_id?(u(),b(V,{key:0,field:"user_id",label:t.$t("common.user_id"),rules:[{required:!0}]},{default:a(()=>[e(Z,{modelValue:q.value.user_id,"onUpdate:modelValue":o[20]||(o[20]=l=>q.value.user_id=l),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])):we("",!0),q.value.name?(u(),b(V,{key:1,field:"name",label:t.$t("common.name"),rules:[{required:!0}]},{default:a(()=>[e(Z,{modelValue:q.value.name,"onUpdate:modelValue":o[21]||(o[21]=l=>q.value.name=l),readonly:""},null,8,["modelValue"])]),_:1},8,["label"])):we("",!0),e(V,{field:"data",label:t.$t("user.label.del.data")},{default:a(()=>[e(W,{size:"large"},{default:a(()=>[e(O,{modelValue:q.value.data,"onUpdate:modelValue":o[22]||(o[22]=l=>q.value.data=l),value:2},{default:a(()=>[y(n(t.$t("dict.del_data.2")),1)]),_:1},8,["modelValue"]),e(O,{modelValue:q.value.data,"onUpdate:modelValue":o[23]||(o[23]=l=>q.value.data=l),value:3},{default:a(()=>[y(n(t.$t("dict.del_data.3")),1)]),_:1},8,["modelValue"]),e(O,{modelValue:q.value.data,"onUpdate:modelValue":o[24]||(o[24]=l=>q.value.data=l),value:4},{default:a(()=>[y(n(t.$t("dict.del_data.4")),1)]),_:1},8,["modelValue"]),e(O,{modelValue:q.value.data,"onUpdate:modelValue":o[25]||(o[25]=l=>q.value.data=l),value:5},{default:a(()=>[y(n(t.$t("dict.del_data.5")),1)]),_:1},8,["modelValue"]),e(O,{modelValue:q.value.data,"onUpdate:modelValue":o[26]||(o[26]=l=>q.value.data=l),value:6},{default:a(()=>[y(n(t.$t("dict.del_data.6")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const rl=ma(Tt,[["__scopeId","data-v-923af766"]]);export{rl as default};

import{u as fe,_ as ze,N as dt,s as it,A as ut,k as rt,B as mt}from"./index.715607dd.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as ge,e as h,B as l,C as p,aH as e,aG as t,u as w,aD as c,aM as n,aL as b,bA as ct,bB as pt,bC as _t,bD as Me,bE as bt,c as ne,w as De,aJ as X,aI as Y,aE as be,bH as Ue,bI as Ae,b2 as Ne,bG as xe,b1 as Pe,bK as qe,b5 as Be,bL as Te,ab as Ee,aU as Fe,bi as He,bP as vt,bU as ft,b7 as gt,bN as Re,bT as je,r as Le,D as B,E as ht,n as yt,aZ as ve,a_ as Se,aK as kt,aF as $t,bj as wt,bk as Vt,bl as Ct,b4 as It,bM as Lt,aT as St,aV as zt}from"./arco.3f46b4ae.js";import{u as he}from"./loading.37fd256d.js";import{a as Mt,t as Dt,b as Ut,s as At,c as Nt}from"./model_agent.afa5a206.js";import{c as ee,S as xt}from"./sortable.esm.078712c4.js";import{q as Oe}from"./provider.d342cbcd.js";import{b as Pt,q as qt}from"./model.92c00dcf.js";import{M as Bt}from"./models.45e5667d.js";/* empty css                *//* empty css                *//* empty css              */import{f as Tt}from"./vue.dbcf9bc3.js";import"./chart.2cea905d.js";const Et={style:{margin:"10px 0 30px 10px"}},Ft={key:1},Ht={key:1},Rt={key:1},jt={key:1},Ot={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Gt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Kt={key:1},Jt={key:1},Zt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Qt={key:1},Wt={key:1},Xt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Yt={key:1},ea={key:1},ta={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},aa={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},la={key:1},oa={key:1},na={name:"ModelAgentDetail"},sa=ge({...na,props:{id:{type:String,default:""}},setup(te){const A=te;fe();const{loading:g,setLoading:m}=he(!0),v=h({});return(async(_={id:A.id})=>{m(!0);try{const{data:k}=await Mt(_);v.value=k}catch{}finally{m(!1)}})(),(_,k)=>{const u=ct,f=pt,$=_t,I=Me,L=bt;return l(),p("div",Et,[e(L,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e($,{label:_.$t("common.provider")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Ft,n(v.value.provider_name),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.name")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Ht,n(v.value.name),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.base_url"),span:2},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Rt,n(v.value.base_url),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.path"),span:2},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",jt,n(v.value.path||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("common.bind_group"),span:2},{default:t(()=>{var r,V;return[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Ot,n(((V=(r=v.value)==null?void 0:r.group_names)==null?void 0:V.join(`
`))||"-"),1))]}),_:1},8,["label"]),e($,{label:_.$t("common.bind_models"),span:2},{default:t(()=>{var r,V;return[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Gt,n(((V=(r=v.value)==null?void 0:r.model_names)==null?void 0:V.join(`
`))||"-"),1))]}),_:1},8,["label"]),e($,{label:_.$t("common.billing_methods"),span:2},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Kt,n(_.$t(`dict.billing_methods.${v.value.billing_methods||1}`)),1))]),_:1},8,["label"]),e($,{label:_.$t("common.weight")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Jt,n(v.value.weight||0),1))]),_:1},8,["label"]),e($,{label:_.$t("model.agent.detail.fallback_models")},{default:t(()=>{var r,V;return[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Zt,n(((V=(r=v.value)==null?void 0:r.fallback_model_names)==null?void 0:V.join(`
`))||"-"),1))]}),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.is_never_disable")},{default:t(()=>{var r;return[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Qt,n(_.$t(`dict.${((r=v.value)==null?void 0:r.is_never_disable)||!1}`)),1))]}),_:1},8,["label"]),e($,{label:_.$t("model.agent.label.lb_strategy")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Wt,n(_.$t(`dict.lb_strategy.${v.value.lb_strategy||1}`)),1))]),_:1},8,["label"]),e($,{label:_.$t("common.key"),span:2},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Xt,n(v.value.key||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("key.detail.is_auto_disabled")},{default:t(()=>{var r;return[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",Yt,n(_.$t(`dict.${((r=v.value)==null?void 0:r.is_auto_disabled)||!1}`)),1))]}),_:1},8,["label"]),e($,{label:_.$t("common.status")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",ea,[v.value.status===1?(l(),c(I,{key:0,color:"green"},{default:t(()=>[b(n(_.$t(`dict.status.${v.value.status}`)),1)]),_:1})):(l(),c(I,{key:1,color:"red"},{default:t(()=>[b(n(_.$t(`dict.status.${v.value.status}`)),1)]),_:1}))]))]),_:1},8,["label"]),e($,{label:_.$t("key.detail.auto_disabled_reason"),span:2},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",ta,n(v.value.auto_disabled_reason||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("common.remark"),span:2},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",aa,n(v.value.remark||"-"),1))]),_:1},8,["label"]),e($,{label:_.$t("common.created_at")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",la,n(v.value.created_at),1))]),_:1},8,["label"]),e($,{label:_.$t("common.updated_at")},{default:t(()=>[w(g)?(l(),c(f,{key:0,animation:!0},{default:t(()=>[e(u,{rows:1})]),_:1})):(l(),p("span",oa,n(v.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),da={class:"container"},ia={key:1},ua={key:0},ra={key:1},ma={key:2},ca={key:3},pa={name:"Models"},_a=ge({...pa,props:{id:{type:String,default:""},action:{type:String,default:""}},setup(te){const A=te,{loading:g,setLoading:m}=he(!0),{t:v}=fe(),K=Tt(),_=()=>({provider_id:"",name:"",model:"",type:h(),status:h()}),k=h([]),u=h(_()),f=h([]),$=h([]),I=h("medium"),L=h(),r=h({model_agent_id:A.id,test_method:1}),V=ne(()=>[{title:v("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center"},{title:v("common.model_name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:v("common.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:v("model.agent.columns.result_total_time"),dataIndex:"result_total_time",slotName:"result_total_time",align:"center"},{title:v("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:120}]),T=async(i={id:A.id,action:A.action})=>{m(!0);try{const{data:y}=await Pt(i);k.value=y.items}catch{}finally{m(!1)}};T();const se=()=>{T({id:A.id,action:A.action,...u.value})};De(()=>V.value,i=>{f.value=ee(i),f.value.forEach((y,P)=>{y.checked=!0}),$.value=ee(f.value)},{deep:!0,immediate:!0});const ae=h([]);(async()=>{m(!0);try{const{data:i}=await Oe();ae.value=i.items}catch{}finally{m(!1)}})();const R=async i=>{var P;if(!await((P=L.value)==null?void 0:P.validate())){i.testing=!0,i.trace_id="",r.value.model_id=i.id;const{data:F}=await Dt(r.value);i.trace_id=F.trace_id,i.result=F.result,i.total_time=F.total_time,i.testing=!1}},E=i=>{const y=new Map([[2,"LogImageList"],[5,"LogAudioList"],[6,"LogAudioList"],[8,"LogVideoList"],[1e4,"LogGeneralList"]]);return K.resolve({name:y.get(i.type)||"LogTextList",query:{trace_id:i.id}}).href};return(i,y)=>{const P=Ue,F=Ae,q=Ne,z=xe,j=Pe,O=qe,de=Be,J=Te,ke=Ee,le=Fe,oe=He,H=vt,Z=ft,C=Me,ie=gt,ue=Re,Q=je;return l(),p("div",da,[e(Q,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"0px"}},{default:t(()=>[e(O,null,{default:t(()=>[e(z,{flex:1},{default:t(()=>[e(de,{model:u.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e(z,{span:8},{default:t(()=>[e(q,{field:"provider_id",label:i.$t("common.provider"),"label-col-props":{span:6}},{default:t(()=>[e(F,{modelValue:u.value.provider_id,"onUpdate:modelValue":y[0]||(y[0]=d=>u.value.provider_id=d),placeholder:i.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),p(X,null,Y(ae.value,d=>(l(),c(P,{key:d.id,value:d.id,label:d.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:8},{default:t(()=>[e(q,{field:"name",label:i.$t("common.model_name"),"label-col-props":{span:6}},{default:t(()=>[e(j,{modelValue:u.value.name,"onUpdate:modelValue":y[1]||(y[1]=d=>u.value.name=d),placeholder:i.$t("model.form.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(z,{span:8},{default:t(()=>[e(q,{field:"model",label:i.$t("common.model"),"label-col-props":{span:6}},{default:t(()=>[e(j,{modelValue:u.value.model,"onUpdate:modelValue":y[2]||(y[2]=d=>u.value.model=d),placeholder:i.$t("model.form.placeholder.model"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(J,{style:{height:"32px"},direction:"vertical"}),e(z,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(oe,{direction:"vertical",size:18},{default:t(()=>[e(le,{type:"primary",onClick:se},{icon:t(()=>[e(ke)]),default:t(()=>[b(" "+n(i.$t("button.search")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(J,{style:{"margin-top":"0"}}),e(de,{ref_key:"testModelFormRef",ref:L,model:r.value,"label-col-props":{span:4},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e(z,{span:11},{default:t(()=>[e(q,{field:"test_method",label:i.$t("model.agent.label.test_models.test_method"),"wrapper-col-props":{span:15}},{default:t(()=>[e(oe,{size:"large"},{default:t(()=>[e(H,{modelValue:r.value.test_method,"onUpdate:modelValue":y[3]||(y[3]=d=>r.value.test_method=d),value:1},{default:t(()=>[b(n(i.$t("model.agent.dict.test_method.1")),1)]),_:1},8,["modelValue"]),e(H,{modelValue:r.value.test_method,"onUpdate:modelValue":y[4]||(y[4]=d=>r.value.test_method=d),value:2},{default:t(()=>[b(n(i.$t("model.agent.dict.test_method.2")),1)]),_:1},8,["modelValue"]),e(H,{modelValue:r.value.test_method,"onUpdate:modelValue":y[5]||(y[5]=d=>r.value.test_method=d),value:3},{default:t(()=>[b(n(i.$t("model.agent.dict.test_method.3")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),_:1}),r.value.test_method===3?(l(),c(z,{key:0,span:13},{default:t(()=>[e(q,{field:"base_url",label:i.$t("model.agent.label.test_models.base_url"),rules:[{required:!0,message:i.$t("model.agent.error.required.test_models.base_url")}],"label-col-props":{span:5},"wrapper-col-props":{span:19}},{default:t(()=>[e(j,{modelValue:r.value.base_url,"onUpdate:modelValue":y[6]||(y[6]=d=>r.value.base_url=d),placeholder:i.$t("model.agent.placeholder.test_models.base_url")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1})):be("",!0),r.value.test_method!==2?(l(),c(z,{key:1,span:13},{default:t(()=>[e(q,{field:"key",label:i.$t("model.agent.label.test_models.key"),rules:[{required:!0,message:i.$t("model.agent.placeholder.test_models.key")}],"label-col-props":{span:4},"wrapper-col-props":{span:20}},{default:t(()=>[e(j,{modelValue:r.value.key,"onUpdate:modelValue":y[7]||(y[7]=d=>r.value.key=d),placeholder:i.$t("model.agent.placeholder.test_models.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1})):be("",!0)]),_:1})]),_:1},8,["model"]),e(ue,{"row-key":"id",loading:w(g),pagination:!1,columns:f.value,data:k.value,bordered:!1,size:I.value,scroll:{y:"380px"},scrollbar:!1},{result_total_time:t(({record:d})=>[d.testing?(l(),c(Z,{key:0})):(l(),p("span",ia,[d.result!=null?(l(),p("span",ua,[d.result?(l(),c(C,{key:0,color:"green"},{default:t(()=>[b(n(i.$t(`dict.success.${d.result}`)),1)]),_:2},1024)):(l(),c(C,{key:1,color:"red"},{default:t(()=>[b(n(i.$t(`dict.success.${d.result}`)),1)]),_:2},1024))])):(l(),p("span",ra," - ")),b(" / "),d.total_time?(l(),p("span",ma,[d.total_time>12e4?(l(),c(C,{key:0,color:"red"},{default:t(()=>[b(n(d.total_time)+" ms ",1)]),_:2},1024)):d.total_time>9e4?(l(),c(C,{key:1,color:"orange"},{default:t(()=>[b(n(d.total_time)+" ms ",1)]),_:2},1024)):d.total_time>6e4?(l(),c(C,{key:2,color:"gold"},{default:t(()=>[b(n(d.total_time)+" ms ",1)]),_:2},1024)):(l(),c(C,{key:3,color:"green"},{default:t(()=>[b(n(d.total_time||"-")+" ms",1)]),_:2},1024))])):(l(),p("span",ca," - "))]))]),operations:t(({record:d})=>[e(le,{type:"text",size:"small",disabled:d.testing,onClick:W=>R(d)},{default:t(()=>[b(n(i.$t("button.test")),1)]),_:2},1032,["disabled","onClick"]),r.value.test_method!==2?(l(),c(ie,{key:0,href:E(d),disabled:!d.trace_id||d.trace_id==="",target:"_blank"},{default:t(()=>[b(n(i.$t("button.detail")),1)]),_:2},1032,["href","disabled"])):be("",!0)]),_:1},8,["loading","columns","data","size"])]),_:1})])}}});const ba=ze(_a,[["__scopeId","data-v-063856ac"]]),va={class:"container"},fa={class:"action-icon"},ga={class:"action-icon"},ha={id:"tableSetting"},ya={style:{"margin-right":"4px",cursor:"move"}},ka={class:"title"},$a={key:0},wa={key:1},Va={name:"ModelAgentList"},Ca=ge({...Va,setup(te){const{loading:A,setLoading:g}=he(!0),{t:m}=fe(),v=Le({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),K=()=>({provider_id:"",name:"",base_url:"",models:[],status:h(),remark:""}),_=h([]),k=h(K()),u=h([]),f=h([]),$=h("medium"),I=h([]),L=h(!0),r=h(),V={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},T=Le({...V}),se=ne(()=>[{name:m("size.mini"),value:"mini"},{name:m("size.small"),value:"small"},{name:m("size.medium"),value:"medium"},{name:m("size.large"),value:"large"}]),ae=ne(()=>[{title:m("common.provider"),dataIndex:"provider_name",slotName:"provider_name",align:"center",width:120},{title:m("model.agent.label.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.bind_group"),dataIndex:"group_names",slotName:"group_names",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.bind_models"),dataIndex:"model_names",slotName:"model_names",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.weight"),dataIndex:"weight",slotName:"weight",align:"center"},{title:m("common.lb_strategy"),dataIndex:"lb_strategy",slotName:"lb_strategy",align:"center"},{title:m("common.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:m("common.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:m("common.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:m("common.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:200}]),ye=ne(()=>[{label:m("dict.status.1"),value:1},{label:m("dict.status.2"),value:2}]),R=async(a={...V})=>{g(!0);try{const{data:s}=await Ut(a);_.value=s.items,T.current=a.current,T.pageSize=a.pageSize,T.total=s.paging.total}catch{}finally{g(!1),r.value.selectAll(!1)}};R();const E=()=>{R({...V,...k.value})},i=a=>{R({...V,...k.value,current:a})},y=a=>{V.pageSize=a,R({...V,...k.value})},P=()=>{k.value=K(),E()},F=(a,s)=>{$.value=a},q=(a,s,D)=>{a?u.value.splice(D,0,s):u.value=f.value.filter(N=>N.dataIndex!==s.dataIndex)},z=(a,s,D,N=!1)=>{const x=N?ee(a):a;return s>-1&&D>-1&&x.splice(s,1,x.splice(D,1,x[s]).pop()),x},j=a=>{a&&yt(()=>{const s=document.getElementById("tableSetting");new xt(s,{onEnd(D){const{oldIndex:N,newIndex:x}=D;z(u.value,N,x),z(f.value,N,x)}})})};De(()=>ae.value,a=>{u.value=ee(a),u.value.forEach((s,D)=>{s.checked=!0}),f.value=ee(u.value)},{deep:!0,immediate:!0});const O=h([]);(async()=>{try{const{data:a}=await Oe();O.value=a.items}catch{}})();const J=h([]);(async()=>{try{const{data:a}=await qt();J.value=a.items}catch{}})();const le=async a=>{g(!0);try{await At(a),ve.success(m("success.operate")),E()}catch{}finally{g(!1)}},oe=a=>{I.value=a,L.value=!a.length},H=a=>{if(I.value.length===0)ve.info(m("placeholder.operation.data"));else{let s=m("placeholder.batch.operation",{count:I.value.length});switch(a.action){case"status":a.value===1?s=m("placeholder.batch.operation.enable",{count:I.value.length}):s=m("placeholder.batch.operation.disable",{count:I.value.length});break;case"delete":s=m("placeholder.batch.operation.delete",{count:I.value.length});break}Se.warning({title:m("modal.warning.title"),titleAlign:"center",content:s,okText:m("button.ok"),cancelText:m("button.cancel"),hideCancel:!1,onOk:()=>{g(!0),a.ids=I.value,Nt(a).then(D=>{g(!1),ve.success(m("success.operate")),E(),r.value.selectAll(!1)})}})}},Z=h(!1),C=h(),ie=a=>{Z.value=!0,C.value=a},ue=()=>{Z.value=!1},Q=h(!1),d=h(!1),W=h(),Ge=a=>{Q.value=!0,C.value=a,W.value="agent"},Ke=a=>{d.value=!0,C.value=a,W.value="agent"};return(a,s)=>{const D=dt,N=kt,x=$t,$e=Ue,re=Ae,G=Ne,U=xe,me=Pe,ce=qe,Je=Be,we=Te,Ze=Ee,M=Fe,Ve=it,Ce=He,pe=wt,Qe=ut,We=Vt,Xe=Ct,Ye=rt,et=mt,tt=It,at=Lt,lt=St,ot=Re,nt=zt,Ie=Se,st=je;return l(),p("div",va,[e(x,{class:"container-breadcrumb"},{default:t(()=>[e(N,null,{default:t(()=>[e(D)]),_:1}),e(N,null,{default:t(()=>[b(n(a.$t("model.agent.menu")),1)]),_:1})]),_:1}),e(st,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(ce,null,{default:t(()=>[e(U,{flex:1},{default:t(()=>[e(Je,{model:k.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(ce,{gutter:16},{default:t(()=>[e(U,{span:8},{default:t(()=>[e(G,{field:"provider_id",label:a.$t("common.provider")},{default:t(()=>[e(re,{modelValue:k.value.provider_id,"onUpdate:modelValue":s[0]||(s[0]=o=>k.value.provider_id=o),placeholder:a.$t("common.all"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),p(X,null,Y(O.value,o=>(l(),c($e,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(U,{span:8},{default:t(()=>[e(G,{field:"name",label:a.$t("model.agent.label.name")},{default:t(()=>[e(me,{modelValue:k.value.name,"onUpdate:modelValue":s[1]||(s[1]=o=>k.value.name=o),placeholder:a.$t("model.agent.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(U,{span:8},{default:t(()=>[e(G,{field:"base_url",label:a.$t("model.agent.label.base_url")},{default:t(()=>[e(me,{modelValue:k.value.base_url,"onUpdate:modelValue":s[2]||(s[2]=o=>k.value.base_url=o),placeholder:a.$t("model.agent.error.required.base_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(U,{span:8},{default:t(()=>[e(G,{field:"models",label:a.$t("common.bind_models")},{default:t(()=>[e(re,{modelValue:k.value.models,"onUpdate:modelValue":s[3]||(s[3]=o=>k.value.models=o),placeholder:a.$t("common.all"),"max-tag-count":2,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(l(!0),p(X,null,Y(J.value,o=>(l(),c($e,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(U,{span:8},{default:t(()=>[e(G,{field:"status",label:a.$t("common.status")},{default:t(()=>[e(re,{modelValue:k.value.status,"onUpdate:modelValue":s[4]||(s[4]=o=>k.value.status=o),placeholder:a.$t("common.all"),options:w(ye),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(U,{span:8},{default:t(()=>[e(G,{field:"remark",label:a.$t("common.remark")},{default:t(()=>[e(me,{modelValue:k.value.remark,"onUpdate:modelValue":s[5]||(s[5]=o=>k.value.remark=o),placeholder:a.$t("placeholder.remark"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(we,{style:{height:"84px"},direction:"vertical"}),e(U,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Ce,{direction:"vertical",size:18},{default:t(()=>[e(M,{type:"primary",onClick:E},{icon:t(()=>[e(Ze)]),default:t(()=>[b(" "+n(a.$t("button.search")),1)]),_:1}),e(M,{onClick:P},{icon:t(()=>[e(Ve)]),default:t(()=>[b(" "+n(a.$t("button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(we,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(ce,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(U,{span:12},{default:t(()=>[e(Ce,null,{default:t(()=>[e(M,{type:"primary",onClick:s[6]||(s[6]=o=>a.$router.push({name:"ModelAgentCreate"}))},{default:t(()=>[b(n(a.$t("button.create")),1)]),_:1}),e(M,{type:"primary",status:"success",disabled:L.value,title:L.value?a.$t("placeholder.operation.data"):"",onClick:s[7]||(s[7]=o=>H({action:"status",value:1}))},{default:t(()=>[b(n(a.$t("button.enable")),1)]),_:1},8,["disabled","title"]),e(M,{type:"primary",status:"danger",disabled:L.value,title:L.value?a.$t("placeholder.operation.data"):"",onClick:s[8]||(s[8]=o=>H({action:"status",value:2}))},{default:t(()=>[b(n(a.$t("button.disable")),1)]),_:1},8,["disabled","title"]),e(M,{type:"primary",status:"danger",disabled:L.value,title:L.value?a.$t("placeholder.operation.data"):"",onClick:s[9]||(s[9]=o=>H({action:"delete"}))},{default:t(()=>[b(n(a.$t("button.delete")),1)]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(U,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(pe,{content:a.$t("action.refresh")},{default:t(()=>[B("div",{class:"action-icon",onClick:E},[e(Ve,{size:"18"})])]),_:1},8,["content"]),e(Xe,{onSelect:F},{content:t(()=>[(l(!0),p(X,null,Y(w(se),o=>(l(),c(We,{key:o.value,value:o.value,class:ht({active:o.value===$.value})},{default:t(()=>[B("span",null,n(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(pe,{content:a.$t("action.density")},{default:t(()=>[B("div",fa,[e(Qe,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(pe,{content:a.$t("action.column_setting")},{default:t(()=>[e(at,{trigger:"click",position:"bl",onPopupVisibleChange:j},{content:t(()=>[B("div",ha,[(l(!0),p(X,null,Y(f.value,(o,S)=>(l(),p("div",{key:o.dataIndex,class:"setting"},[B("div",ya,[e(et)]),B("div",null,[e(tt,{modelValue:o.checked,"onUpdate:modelValue":_e=>o.checked=_e,onChange:_e=>q(_e,o,S)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),B("div",ka,n(o.title),1)]))),128))])]),default:t(()=>[B("div",ga,[e(Ye,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ot,{ref_key:"tableRef",ref:r,"row-key":"id",loading:w(A),pagination:T,columns:u.value,data:_.value,bordered:!1,size:$.value,"row-selection":v,onPageChange:i,onPageSizeChange:y,onSelectionChange:oe},{group_names:t(({record:o})=>{var S;return[b(n(((S=o==null?void 0:o.group_names)==null?void 0:S.join(","))||"-"),1)]}),model_names:t(({record:o})=>[o.model_names?(l(),p("span",$a,[e(M,{type:"text",size:"small",onClick:S=>Ge(o.id)},{default:t(()=>[b(n(a.$t("button.view")),1)]),_:2},1032,["onClick"])])):(l(),p("span",wa,n("-")))]),weight:t(({record:o})=>[b(n(o.weight||0),1)]),lb_strategy:t(({record:o})=>[b(n(a.$t(`dict.lb_strategy.${o.lb_strategy||1}`)),1)]),remark:t(({record:o})=>[b(n(o.remark||"-"),1)]),status:t(({record:o})=>[e(lt,{modelValue:o.status,"onUpdate:modelValue":S=>o.status=S,"checked-value":1,"unchecked-value":2,onChange:S=>le({id:o.id,status:o.status})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:t(({record:o})=>[e(M,{type:"text",size:"small",onClick:S=>ie(o.id)},{default:t(()=>[b(n(a.$t("button.detail")),1)]),_:2},1032,["onClick"]),e(M,{type:"text",size:"small",onClick:S=>a.$router.push({name:"ModelAgentUpdate",query:{id:o.id}})},{default:t(()=>[b(n(a.$t("button.update")),1)]),_:2},1032,["onClick"]),e(M,{type:"text",size:"small",onClick:S=>a.$router.push({name:"ModelKeyList",query:{agent_id:o.id}})},{default:t(()=>[b(n(a.$t("button.key")),1)]),_:2},1032,["onClick"]),e(M,{type:"text",size:"small",onClick:S=>Ke(o.id)},{default:t(()=>[b(n(a.$t("button.test")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(nt,{title:a.$t("model.agent.menu.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:Z.value,onCancel:ue},{default:t(()=>[e(sa,{id:C.value},null,8,["id"])]),_:1},8,["title","visible"]),e(Ie,{visible:Q.value,"onUpdate:visible":s[10]||(s[10]=o=>Q.value=o),title:a.$t("common.bind_models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":a.$t("button.close")},{default:t(()=>[e(Bt,{id:C.value,action:W.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"]),e(Ie,{visible:d.value,"onUpdate:visible":s[11]||(s[11]=o=>d.value=o),title:a.$t("model.agent.title.test_models"),"modal-style":{padding:"25px 15px 20px 15px"},"unmount-on-close":"","hide-cancel":"",simple:"",width:"1080px","ok-text":a.$t("button.close")},{default:t(()=>[e(ba,{id:C.value,action:W.value},null,8,["id","action"])]),_:1},8,["visible","title","ok-text"])]),_:1})])}}});const Wa=ze(Ca,[["__scopeId","data-v-171937a4"]]);export{Wa as default};

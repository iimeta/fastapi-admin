import{i as A,_ as E}from"./index.08e59efd.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css                */import{d as O,e as m,B as b,C as h,aH as e,aG as a,aL as u,aM as i,F as v,u as n,bT as p,aJ as P,aI as j,aD as z,aK as J,aF as K,b1 as W,b2 as X,aS as Y,bQ as Z,bV as x,bi as ee,bW as le,bA as ae,bB as re,bP as te,bO as oe,aU as ue,b5 as se,bI as de,bR as ne,g as pe}from"./arco.75032696.js";import{u as me}from"./loading.96e1cbd7.js";import{f as ie}from"./vue.ebfaaf45.js";import{q as ce}from"./common.df364eef.js";import{g as _e}from"./admin_reseller.f90677ce.js";import{b as fe}from"./model.8597253e.js";import{q as be}from"./group.35149327.js";import"./chart.f8f3ffb1.js";const ve={class:"container"},qe={class:"wrapper"},$e={style:{"margin-left":"10px"}},ye={class:"submit-btn"},ge={name:"ResellerCreate"},Ve=O({...ge,setup(we){const{proxy:k}=pe(),{loading:C,setLoading:c}=me(!1),D=ie(),q=m([]);(async()=>{c(!0);try{const{data:l}=await fe();q.value=l.items}catch{}finally{c(!1)}})();const $=m([]);(async()=>{try{const{data:l}=await be();$.value=l.items}catch{}})();const y=m(),r=m({name:"",email:"",account:"",password:"",quota:m(),quota_type:"1",quota_expires_at:"",models:[],groups:[],remark:""}),U=async()=>{var o;if(!await((o=y.value)==null?void 0:o.validate())){c(!0);try{await _e(r.value).then(()=>{k.$message.success("\u65B0\u5EFA\u6210\u529F"),D.push({name:"ResellerList"})})}catch{}finally{c(!1)}}},B=l=>{r.value.quota=l*5e5};return(l,o)=>{const g=A,f=J,R=K,_=W,d=X,I=Y,s=Z,L=x,V=ee,F=le,H=ae,S=re,T=te,G=oe,w=ue,M=se,N=de,Q=ne;return b(),h("div",ve,[e(R,{class:"container-breadcrumb"},{default:a(()=>[e(f,null,{default:a(()=>[e(g)]),_:1}),e(f,null,{default:a(()=>[u(i(l.$t("menu.sys")),1)]),_:1}),e(f,null,{default:a(()=>[u(i(l.$t("menu.reseller.create")),1)]),_:1})]),_:1}),e(Q,{loading:n(C),style:{width:"100%"}},{default:a(()=>[e(N,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:a(()=>[v("div",qe,[e(M,{ref_key:"formRef",ref:y,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:a(()=>[e(d,{field:"name",label:l.$t("reseller.label.name"),rules:[{required:!0,message:l.$t("reseller.error.name.required")},{match:/^.{1,30}$/,message:l.$t("reseller.error.name.pattern")}]},{default:a(()=>[e(_,{modelValue:r.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>r.value.name=t),placeholder:l.$t("reseller.placeholder.name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(d,{field:"email",label:l.$t("reseller.label.email"),rules:[{required:!0,message:l.$t("reseller.error.email.required")}]},{default:a(()=>[e(_,{modelValue:r.value.email,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.email=t),placeholder:l.$t("reseller.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(d,{field:"account",label:l.$t("reseller.label.account"),rules:[{required:!0,message:l.$t("reseller.error.account.required")}]},{default:a(()=>[e(_,{modelValue:r.value.account,"onUpdate:modelValue":o[2]||(o[2]=t=>r.value.account=t),placeholder:l.$t("reseller.placeholder.account"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(d,{field:"password",label:l.$t("reseller.label.password"),rules:[{required:!0,message:l.$t("reseller.error.password.required")},{match:/^.{6,}$/,message:l.$t("reseller.error.password.pattern")}]},{default:a(()=>[e(_,{modelValue:r.value.password,"onUpdate:modelValue":o[3]||(o[3]=t=>r.value.password=t),placeholder:l.$t("reseller.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(d,{field:"quota",label:l.$t("reseller.label.quota"),rules:[{required:!0,message:l.$t("reseller.error.quota.required")}]},{default:a(()=>[e(I,{modelValue:r.value.quota,"onUpdate:modelValue":o[4]||(o[4]=t=>r.value.quota=t),placeholder:l.$t("reseller.placeholder.quota"),precision:0,min:1,max:9999999999999},null,8,["modelValue","placeholder"]),v("div",$e," $"+i(r.value.quota?n(ce)(r.value.quota):"0"),1)]),_:1},8,["label","rules"]),e(d,null,{default:a(()=>[e(L,{type:"button",onChange:B},{default:a(()=>[e(s,{value:1},{default:a(()=>[u(" $1 ")]),_:1}),e(s,{value:2},{default:a(()=>[u(" $2 ")]),_:1}),e(s,{value:5},{default:a(()=>[u(" $5 ")]),_:1}),e(s,{value:10},{default:a(()=>[u(" $10 ")]),_:1}),e(s,{value:20},{default:a(()=>[u(" $20 ")]),_:1}),e(s,{value:50},{default:a(()=>[u(" $50 ")]),_:1}),e(s,{value:100},{default:a(()=>[u(" $100 ")]),_:1}),e(s,{value:200},{default:a(()=>[u(" $200 ")]),_:1}),e(s,{value:500},{default:a(()=>[u(" $500 ")]),_:1}),e(s,{value:1e3},{default:a(()=>[u(" $1000 ")]),_:1})]),_:1},8,["onChange"])]),_:1}),e(d,{field:"quota_type",label:l.$t("reseller.label.quota_type"),rules:[{required:!0,message:l.$t("reseller.error.quota_type.required")}]},{default:a(()=>[e(V,{size:"large"},{default:a(()=>[e(s,{modelValue:r.value.quota_type,"onUpdate:modelValue":o[5]||(o[5]=t=>r.value.quota_type=t),value:"1","default-checked":!0},{default:a(()=>[u(" \u5145\u503C ")]),_:1},8,["modelValue"]),e(s,{modelValue:r.value.quota_type,"onUpdate:modelValue":o[6]||(o[6]=t=>r.value.quota_type=t),value:"3"},{default:a(()=>[u(" \u8D60\u9001 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(d,{field:"quota_expires_at",label:l.$t("reseller.label.quota_expires_at")},{default:a(()=>[e(F,{modelValue:r.value.quota_expires_at,"onUpdate:modelValue":o[7]||(o[7]=t=>r.value.quota_expires_at=t),placeholder:l.$t("reseller.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":t=>n(p)(t).isBefore(n(p)().subtract(1,"day")),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>n(p)(r.value.quota_expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),e(d,{field:"groups",label:l.$t("reseller.label.groups"),style:{"align-items":"center"}},{default:a(()=>[e(S,{modelValue:r.value.groups,"onUpdate:modelValue":o[8]||(o[8]=t=>r.value.groups=t),placeholder:l.$t("reseller.placeholder.create.groups"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(b(!0),h(P,null,j($.value,t=>(b(),z(H,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(d,{field:"models",label:l.$t("reseller.label.models")},{default:a(()=>[e(T,{modelValue:r.value.models,"onUpdate:modelValue":o[9]||(o[9]=t=>r.value.models=t),placeholder:l.$t("reseller.placeholder.create.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:q.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),e(d,{field:"remark",label:l.$t("reseller.label.remark")},{default:a(()=>[e(G,{modelValue:r.value.remark,"onUpdate:modelValue":o[10]||(o[10]=t=>r.value.remark=t),placeholder:l.$t("reseller.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(V,null,{default:a(()=>[v("div",ye,[e(w,{type:"secondary",onClick:o[11]||(o[11]=t=>l.$router.push({name:"ResellerList"}))},{default:a(()=>[u(i(l.$t("button.cancel")),1)]),_:1}),e(w,{type:"primary",onClick:U},{default:a(()=>[u(i(l.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const We=E(Ve,[["__scopeId","data-v-8f2dfb80"]]);export{We as default};

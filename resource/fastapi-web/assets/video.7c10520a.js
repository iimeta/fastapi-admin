import{c as Ve,u as Ie,q as Ce,z as Se,j as ze,A as $e,_ as xe}from"./index.3ddc5c8a.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as De,r as K,e as d,c as F,w as Fe,bF as Le,B as p,C as h,aH as e,aG as t,aL as k,aM as _,bu as L,aD as I,aJ as N,aI as B,u as U,D as m,E as Ne,n as Be,as as Ue,aK as Ae,aF as Pe,bH as Ee,bI as Re,b2 as Te,bG as Me,aS as Oe,b1 as je,bJ as qe,bK as He,b5 as Ge,bL as Je,ab as Ke,aU as Qe,bi as We,bj as Xe,bl as Ye,bm as Ze,b4 as ea,bM as aa,bO as ta,bU as la}from"./arco.088e2a49.js";import{u as oa}from"./loading.6f488126.js";import{f as na}from"./app.d1b01837.js";import{c as A,S as sa}from"./sortable.esm.70bb3f9a.js";import"./chart.0bfa65d3.js";import"./vue.bd25b247.js";function ia(P){return Ve.post("/api/v1/task/video/page",P)}const da={class:"container"},ra={class:"action-icon"},ca={class:"action-icon"},ua={id:"tableSetting"},pa={style:{"margin-right":"4px",cursor:"move"}},_a={class:"title"},ma={name:"TaskVideoList"},fa=De({...ma,setup(P){const f=localStorage.getItem("userRole"),Q=K({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),E=()=>({user_id:d(),app_id:d(),trace_id:"",task_id:"",status:d(),created_at:[]}),{loading:W,setLoading:R}=oa(!0),{t:n}=Ie(),T=d([]),s=d(E()),v=d([]),w=d([]),C=d("medium"),X=d(),M=d([]);f==="user"&&(async()=>{try{const{data:a}=await na();M.value=a.items}catch{}})();const g={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},y=K({...g}),Y=F(()=>[{name:n("size.mini"),value:"mini"},{name:n("size.small"),value:"small"},{name:n("size.medium"),value:"medium"},{name:n("size.large"),value:"large"}]),Z=F(()=>[{title:n(f==="reseller"||f==="admin"?"task.columns.user_id":"task.columns.app_id"),dataIndex:f==="reseller"||f==="admin"?"user_id":"app_id",slotName:f==="reseller"||f==="admin"?"user_id":"app_id",align:"center",width:75},{title:n("task.columns.trace_id"),dataIndex:"trace_id",slotName:"trace_id",align:"center"},{title:n("task.columns.task_id"),dataIndex:"task_id",slotName:"task_id",align:"center",width:75},{title:n("task.columns.video_url"),dataIndex:"video_url",slotName:"video_url",align:"center"},{title:n("task.columns.video_time"),dataIndex:"video_time",slotName:"video_time",align:"center",width:115},{title:n("task.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:75},{title:n("task.columns.created_at"),dataIndex:"created_at",slotName:"created_at",align:"center",width:132}]),ee=F(()=>[{label:n("task.dict.status.1"),value:1},{label:n("task.dict.status.2"),value:2},{label:n("task.dict.status.3"),value:3},{label:n("task.dict.status.-2"),value:-2},{label:n("task.dict.status.-1"),value:-1}]),V=async(a={...g})=>{R(!0);try{const{data:o}=await ia(a);T.value=o.items,y.current=a.current,y.pageSize=a.pageSize,y.total=o.paging.total}catch{}finally{R(!1)}},S=()=>{V({...g,...s.value})},ae=a=>{V({...g,...s.value,current:a})},te=a=>{g.pageSize=a,V({...g,...s.value})};V();const le=()=>{s.value=E(),S()},oe=(a,o)=>{C.value=a},ne=(a,o,r)=>{a?v.value.splice(r,0,o):v.value=w.value.filter(i=>i.dataIndex!==o.dataIndex)},O=(a,o,r,i=!1)=>{const c=i?A(a):a;return o>-1&&r>-1&&c.splice(o,1,c.splice(r,1,c[o]).pop()),c},se=a=>{a&&Be(()=>{const o=document.getElementById("tableSetting");new sa(o,{onEnd(r){const{oldIndex:i,newIndex:c}=r;O(v.value,i,c),O(w.value,i,c)}})})};return Fe(()=>Z.value,a=>{v.value=A(a),v.value.forEach((o,r)=>{o.checked=!0}),w.value=A(v.value)},{deep:!0,immediate:!0}),(a,o)=>{const r=Ue,i=Ae,c=Pe,ie=Ee,j=Re,b=Te,u=Me,de=Oe,q=je,re=qe,z=He,ce=Ge,H=Je,ue=Ke,G=Qe,J=Ce,pe=We,$=Xe,_e=Se,me=Ye,fe=Ze,ve=ze,ge=$e,be=ea,ke=aa,he=ta,we=la,x=Le("permission");return p(),h("div",da,[e(c,{class:"container-breadcrumb"},{default:t(()=>[e(i,null,{default:t(()=>[e(r)]),_:1}),e(i,null,{default:t(()=>[k(_(a.$t("menu.task")),1)]),_:1}),e(i,null,{default:t(()=>[k(_(a.$t("menu.task.video.list")),1)]),_:1})]),_:1}),e(we,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(z,null,{default:t(()=>[e(u,{flex:1},{default:t(()=>[e(ce,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(z,{gutter:16},{default:t(()=>[L((p(),I(u,{span:8},{default:t(()=>[e(b,{field:"app_id",label:a.$t("task.form.app_id")},{default:t(()=>[e(j,{modelValue:s.value.app_id,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value.app_id=l),placeholder:a.$t("task.form.selectDefault"),"allow-search":"","allow-clear":""},{default:t(()=>[(p(!0),h(N,null,B(M.value,l=>(p(),I(ie,{key:l.app_id,value:l.app_id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[x,["user"]]]),L((p(),I(u,{span:8},{default:t(()=>[e(b,{field:"user_id",label:a.$t("task.form.user_id")},{default:t(()=>[e(de,{modelValue:s.value.user_id,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.user_id=l),placeholder:a.$t("task.form.user_id.placeholder"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[x,["reseller","admin"]]]),e(u,{span:8},{default:t(()=>[e(b,{field:"trace_id",label:a.$t("task.form.trace_id")},{default:t(()=>[e(q,{modelValue:s.value.trace_id,"onUpdate:modelValue":o[2]||(o[2]=l=>s.value.trace_id=l),placeholder:a.$t("task.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(b,{field:"task_id",label:a.$t("task.form.task_id")},{default:t(()=>[e(q,{modelValue:s.value.task_id,"onUpdate:modelValue":o[3]||(o[3]=l=>s.value.task_id=l),placeholder:a.$t("task.form.task_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(b,{field:"status",label:a.$t("task.form.status")},{default:t(()=>[e(j,{modelValue:s.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>s.value.status=l),options:U(ee),placeholder:a.$t("task.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(b,{field:"created_at",label:a.$t("task.form.created_at")},{default:t(()=>[e(re,{modelValue:s.value.created_at,"onUpdate:modelValue":o[5]||(o[5]=l=>s.value.created_at=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,{style:{height:"84px"},direction:"vertical"}),e(u,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(pe,{direction:"vertical",size:18},{default:t(()=>[e(G,{type:"primary",onClick:S},{icon:t(()=>[e(ue)]),default:t(()=>[k(" "+_(a.$t("task.form.search")),1)]),_:1}),e(G,{onClick:le},{icon:t(()=>[e(J)]),default:t(()=>[k(" "+_(a.$t("task.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),L(e(H,{style:{"margin-top":"0","margin-bottom":"16px"}},null,512),[[x,["reseller","admin"]]]),e(z,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(u,{span:24,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e($,{content:a.$t("actions.refresh")},{default:t(()=>[m("div",{class:"action-icon",onClick:S},[e(J,{size:"18"})])]),_:1},8,["content"]),e(fe,{onSelect:oe},{content:t(()=>[(p(!0),h(N,null,B(U(Y),l=>(p(),I(me,{key:l.value,value:l.value,class:Ne({active:l.value===C.value})},{default:t(()=>[m("span",null,_(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e($,{content:a.$t("actions.density")},{default:t(()=>[m("div",ra,[e(_e,{size:"18"})])]),_:1},8,["content"])]),_:1}),e($,{content:a.$t("actions.column_setting")},{default:t(()=>[e(ke,{trigger:"click",position:"bl",onPopupVisibleChange:se},{content:t(()=>[m("div",ua,[(p(!0),h(N,null,B(w.value,(l,ye)=>(p(),h("div",{key:l.dataIndex,class:"setting"},[m("div",pa,[e(ge)]),m("div",null,[e(be,{modelValue:l.checked,"onUpdate:modelValue":D=>l.checked=D,onChange:D=>ne(D,l,ye)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),m("div",_a,_(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:t(()=>[m("div",ca,[e(ve,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(he,{ref_key:"tableRef",ref:X,"row-key":"id",loading:U(W),pagination:y,columns:v.value,data:T.value,bordered:!1,size:C.value,"row-selection":Q,onPageChange:ae,onPageSizeChange:te},{video_url:t(({record:l})=>[k(_(l.video_url||"-"),1)]),status:t(({record:l})=>[k(_(a.$t(`task.dict.status.${l.status}`)),1)]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Ra=xe(fa,[["__scopeId","data-v-1594fd1e"]]);export{Ra as default};

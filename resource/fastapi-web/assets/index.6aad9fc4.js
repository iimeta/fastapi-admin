import{x as K,_ as O}from"./index.c1641553.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{d as z,e as m,B as i,C as f,aH as a,aG as r,aL as d,aM as u,F as w,aJ as U,aI as q,aD as L,u as E,aK as G,aF as H,bF as j,bA as P,bB as Q,b2 as W,b1 as X,aS as Y,bK as Z,aT as x,aU as ee,bi as le,b5 as ae,bJ as te,bL as oe,g as re}from"./arco.06d431a4.js";import{u as ne}from"./loading.403a6ba1.js";import{h as se,f as de}from"./vue.4e689e11.js";import{d as ue,e as me}from"./agent.8d936405.js";import{q as ie}from"./corp.9582ffee.js";import{q as pe}from"./model.a8c54871.js";import"./chart.ac3cbee9.js";import"./base.87fcf6e2.js";const ce={class:"container"},fe={class:"wrapper"},be={class:"submit-btn"},_e={name:"ModelAgentUpdate"},ge=z({..._e,setup(ve){const{loading:B,setLoading:s}=ne(!1),{proxy:M}=re(),C=se(),A=de(),b=m([]);(async()=>{s(!0);try{const{data:e}=await ie();b.value=e.items}catch{}finally{s(!1)}})();const _=m([]);(async()=>{s(!0);try{const{data:e}=await pe();_.value=e.items}catch{}finally{s(!1)}})();const g=m(),t=m({id:"",corp:"",name:"",base_url:"",path:"",weight:m(),remark:"",status:1,models:[],key:"",is_agents_only:!0}),F=async()=>{var l;if(!await((l=g.value)==null?void 0:l.validate())){s(!0);try{await ue(t.value).then(()=>{M.$message.success("\u66F4\u65B0\u6210\u529F"),A.push({name:"ModelAgentList"})})}catch{}finally{s(!1)}}};return(async(e={id:C.query.id})=>{s(!0);try{const{data:l}=await me(e);t.value.id=l.id,t.value.corp=l.corp,t.value.name=l.name,t.value.base_url=l.base_url,t.value.path=l.path,t.value.weight=l.weight,t.value.remark=l.remark,t.value.status=l.status,t.value.models=l.models,t.value.key=l.key}catch{}finally{s(!1)}})(),(e,l)=>{const v=K,p=G,I=H,y=j,h=P,$=Q,n=W,c=X,D=Y,V=Z,R=x,k=ee,S=le,N=ae,T=te,J=oe;return i(),f("div",ce,[a(I,{class:"container-breadcrumb"},{default:r(()=>[a(p,null,{default:r(()=>[a(v)]),_:1}),a(p,null,{default:r(()=>[d(u(e.$t("menu.agent")),1)]),_:1}),a(p,null,{default:r(()=>[d(u(e.$t("menu.model.agent.update")),1)]),_:1})]),_:1}),a(J,{loading:E(B),style:{width:"100%"}},{default:r(()=>[a(T,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[w("div",fe,[a(N,{ref_key:"formRef",ref:g,model:t.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:r(()=>[a(y,{orientation:"left"},{default:r(()=>[d(u(e.$t("model.title.baseInfo")),1)]),_:1}),a(n,{field:"corp",label:e.$t("model.agent.label.corp"),rules:[{required:!0,message:e.$t("model.agent.error.corp.required")}]},{default:r(()=>[a($,{modelValue:t.value.corp,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.corp=o),placeholder:e.$t("model.agent.placeholder.corp"),"allow-search":""},{default:r(()=>[(i(!0),f(U,null,q(b.value,o=>(i(),L(h,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"name",label:e.$t("model.agent.label.name"),rules:[{required:!0,message:e.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:e.$t("model.agent.error.name.pattern")}]},{default:r(()=>[a(c,{modelValue:t.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.name=o),placeholder:e.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"base_url",label:e.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:e.$t("model.agent.error.baseUrl.required")}]},{default:r(()=>[a(c,{modelValue:t.value.base_url,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.base_url=o),placeholder:e.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"path",label:e.$t("model.agent.label.path")},{default:r(()=>[a(c,{modelValue:t.value.path,"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.path=o),placeholder:e.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"weight",label:e.$t("model.agent.label.weight")},{default:r(()=>[a(D,{modelValue:t.value.weight,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.weight=o),precision:0,min:0,max:99999,placeholder:e.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"remark",label:e.$t("model.agent.label.remark")},{default:r(()=>[a(V,{modelValue:t.value.remark,"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.remark=o),placeholder:e.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(y,{orientation:"left"},{default:r(()=>[d(u(e.$t("model.title.advanced")),1)]),_:1}),a(n,{field:"models",label:e.$t("model.agent.label.models"),rules:[{required:!1}]},{default:r(()=>[a($,{modelValue:t.value.models,"onUpdate:modelValue":l[6]||(l[6]=o=>t.value.models=o),placeholder:e.$t("model.agent.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(i(!0),f(U,null,q(_.value,o=>(i(),L(h,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"key",label:e.$t("model.agent.label.key")},{default:r(()=>[a(V,{modelValue:t.value.key,"onUpdate:modelValue":l[7]||(l[7]=o=>t.value.key=o),placeholder:e.$t("model.agent.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"is_agents_only",label:e.$t("model.agent.label.isAgentsOnly")},{default:r(()=>[a(R,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":l[8]||(l[8]=o=>t.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(S,null,{default:r(()=>[w("div",be,[a(k,{type:"secondary",onClick:l[9]||(l[9]=o=>e.$router.push({name:"ModelAgentList"}))},{default:r(()=>[d(u(e.$t("form.button.cancel")),1)]),_:1}),a(k,{type:"primary",onClick:F},{default:r(()=>[d(u(e.$t("form.button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Oe=O(ge,[["__scopeId","data-v-c6ac79e3"]]);export{Oe as default};

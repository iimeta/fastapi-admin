import{_ as Ke,u as Ct,J as Vt,s as Dt,A as Bt,k as Et,B as xt}from"./index.6d5d1e7c.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Xe,e as w,w as Ze,bS as et,B as a,C as r,bu as v,aD as u,aG as e,aH as t,u as _,aL as i,aM as n,D as U,aE as At,g as tt,bA as It,bB as qt,ad as Ut,bC as St,a6 as Ee,bj as ye,bD as at,bE as Lt,bi as lt,bb as zt,b6 as Nt,a_ as ot,r as Qe,c as De,h as P,bq as Mt,b as Pt,aJ as W,aI as G,E as Tt,n as Ht,aK as Rt,aF as Ot,bF as Yt,bG as jt,b2 as Jt,bH as Qt,b1 as Wt,aS as Gt,bT as Kt,bI as Xt,b5 as Zt,bJ as ea,ab as ta,aU as aa,bk as la,bl as oa,b4 as ua,bK as na,bM as sa,aV as ia,bN as da}from"./arco.241c8905.js";import{u as ut}from"./loading.09e1934c.js";import{b as K,a as We}from"./common.af12dbbc.js";import{V as Ge,_ as nt,q as ra,c as _a,a as ma,s as ca,b as pa}from"./styles.765cd88c.js";import{f as fa}from"./app.7a6adc87.js";import{b as va}from"./dashboard.ef631edc.js";import{c as Be,S as ya}from"./sortable.esm.92d6ff5b.js";import{q as ka}from"./model.4c23f924.js";import{f as ha}from"./agent.d851bc22.js";import{Q as xe}from"./quota.21d7723a.js";/* empty css               *//* empty css                *//* empty css                */import{u as ba}from"./vue.02ada051.js";import"./chart.31a39ec4.js";const ga={style:{margin:"10px 0 30px 10px"}},wa={key:1},$a={key:1},Fa={key:1},Ca={key:1},Va={key:1},Da={key:1},Ba={key:1},Ea={key:1},xa={key:1},Aa={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Ia={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},qa={key:1},Ua={key:1},Sa={key:1},La={key:1},za={key:1},Na={key:1},Ma={key:1},Pa={key:1},Ta={key:1},Ha={key:1},Ra={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Oa={key:1},Ya={key:1},ja={key:1},Ja={key:1},Qa={key:1},Wa={key:1},Ga={key:1},Ka={key:1},Xa={key:1},Za={key:1},el={key:1},tl={key:1},al={key:1},ll={key:1},ol={key:1},ul={key:1},nl={key:1},sl={key:1},il={key:1},dl={key:1},rl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},_l={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},ml={key:1},cl={key:1},pl={key:1},fl={key:1},vl={key:1},yl={key:1},kl={key:1},hl={key:1},bl={key:1},gl={key:1},wl={key:1},$l={key:1},Fl={key:1},Cl={key:1},Vl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Dl={key:1},Bl={key:1},El={name:"ChatDetail"},xl=Xe({...El,props:{id:{type:String,default:""}},setup(Ae){const ke=Ae,{loading:m,setLoading:$}=ut(!0),o=w({}),{copy:se,copied:X}=ba(),{proxy:ie}=tt();(async(g={id:ke.id})=>{$(!0);try{const{data:F}=await ra(g);o.value=F}catch{}finally{$(!1)}})();const S=g=>{se(g)};Ze(X,()=>{X.value&&ie.$message.success("\u590D\u5236\u6210\u529F")});const M=async(g,F)=>{const{data:p}=await _a({id:g,field:F});se(p.value)},T=w(!1),q=w(),de=w(),H=async(g,F)=>{T.value=!0,q.value=g,de.value=F};return(g,F)=>{const p=It,f=qt,L=Ut,c=St,R=Ee,re=ye,h=at,Y=Lt,_e=lt,me=zt,Z=Nt,he=ot,j=et("permission");return a(),r("div",ga,[v((a(),u(Y,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",wa,[i(n(o.value.trace_id)+" ",1),t(L,{class:"copy-btn",onClick:F[0]||(F[0]=D=>S(o.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",$a,n(o.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Fa,[i(n(o.value.creator)+" ",1),t(L,{class:"copy-btn",onClick:F[1]||(F[1]=D=>M(o.value.id,"creator"))})]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ca,n(o.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Va,n(o.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Da,n(o.value.provider_name),1))]),_:1}),t(c,{label:"\u6A21\u578B"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ba,n(o.value.model||"-"),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ea,n(g.$t(`dict.model_type.${o.value.model_type}`)),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",xa,n(g.$t(`chat.dict.stream.${o.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Aa,n(o.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ia,n(o.value.completion||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",qa,n(o.value.spend.group_name||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ua,n(o.value.spend.group_discount>0?Number((o.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(c,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Sa,n(o.value.spend.billing_methods?g.$t(`model.dict.billing_methods.${o.value.spend.billing_methods}`):"-"),1))]),_:1}),t(c,{label:"\u603B\u82B1\u8D39"},{label:e(()=>[U("span",null,[i(" \u603B\u82B1\u8D39 "),t(re,{content:g.$t("chat.columns.tooltip.total_spend_tokens"),"content-style":{whiteSpace:"nowrap",maxWidth:"none"}},{default:e(()=>[t(R,{style:{color:"var(--color-text-3)"}})]),_:1},8,["content"])])]),default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",{key:1,class:"spend",onClick:F[2]||(F[2]=D=>o.value.status===1||o.value.status===2?H(o.value.spend,o.value.model_type):void 0)},[o.value.status===1||o.value.status===2?(a(),u(xe,{key:0,"model-value":o.value.spend.total_spend_tokens},null,8,["model-value"])):(a(),r("span",La," - "))]))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",za,[o.value.conn_time>3e4?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>15e3?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>5e3?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.conn_time)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Na,[o.value.duration>18e4?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>12e4?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>9e4?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.duration)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ma,[o.value.total_time>18e4?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>12e4?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>9e4?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.total_time)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Pa,[o.value.status===1?(a(),u(h,{key:0,color:"green"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===2?(a(),u(h,{key:1,color:"gold"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===3?(a(),u(h,{key:2,color:"orange"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):(a(),u(h,{key:3,color:"red"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ta,n(o.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ha,n(o.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ra,n(o.value.err_msg||"-"),1))]),_:1})]),_:1})),[[j,["reseller","user"]]]),v((a(),u(Y,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[t(c,{label:"Trace ID",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Oa,[i(n(o.value.trace_id)+" ",1),t(L,{class:"copy-btn",onClick:F[3]||(F[3]=D=>S(o.value.trace_id))})]))]),_:1}),t(c,{label:"Host",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ya,n(o.value.host||"-"),1))]),_:1}),t(c,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",ja,[i(n(o.value.is_smart_match?"-":o.value.creator)+" ",1),o.value.is_smart_match?At("",!0):(a(),u(L,{key:0,class:"copy-btn",onClick:F[4]||(F[4]=D=>M(o.value.id,"creator"))}))]))]),_:1}),t(c,{label:"\u7528\u6237ID"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ja,n(o.value.is_smart_match?"-":o.value.user_id||"-"),1))]),_:1}),t(c,{label:"\u5E94\u7528ID"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Qa,n(o.value.is_smart_match?"-":o.value.app_id||"-"),1))]),_:1}),t(c,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Wa,n(o.value.provider_name),1))]),_:1}),t(c,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Ga,n(g.$t(`dict.model_type.${o.value.model_type}`)),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Ka,n(o.value.model_name||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Xa,n(o.value.model||"-"),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Za,n(o.value.real_model_name),1))]),_:1}),t(c,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",el,n(o.value.real_model),1))]),_:1}),t(c,{label:"\u6D41\u5F0F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",tl,n(g.$t(`chat.dict.stream.${o.value.stream||!1}`)),1))]),_:1}),t(c,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",al,n(g.$t(`chat.dict.is_enable_fallback.${o.value.is_enable_fallback||!1}`)),1))]),_:1}),t(c,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var D,I;return[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",ll,n(((I=(D=o.value)==null?void 0:D.fallback_config)==null?void 0:I.model_agent_name)||"-"),1))]}),_:1}),t(c,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var D,I;return[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",ol,n(((I=(D=o.value)==null?void 0:D.fallback_config)==null?void 0:I.model)||"-"),1))]}),_:1}),t(c,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",ul,n(g.$t(`chat.dict.is_enable_forward.${o.value.is_enable_forward||!1}`)),1))]),_:1}),t(c,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",nl,n(o.value.is_enable_forward?g.$t(`chat.dict.forward_rule.${o.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),t(c,{label:"\u542F\u7528\u4EE3\u7406"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",sl,n(g.$t(`chat.dict.is_enable_model_agent.${o.value.is_enable_model_agent||!1}`)),1))]),_:1}),t(c,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var D,I;return[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",il,n(((I=(D=o.value)==null?void 0:D.model_agent)==null?void 0:I.name)||"-"),1))]}),_:1}),t(c,{label:"\u5BC6\u94A5",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",dl,[i(n(o.value.key?o.value.key.length>0?o.value.key.substr(0,o.value.key.length/2>10?10:o.value.key.length/2)+"************************************"+o.value.key.substr(-(o.value.key.length/2>5?5:o.value.key.length/2)):o.value.key:"-")+" ",1),t(L,{class:"copy-btn",onClick:F[5]||(F[5]=D=>M(o.value.id,"key"))})]))]),_:1}),t(c,{label:"\u63D0\u95EE",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",rl,n(o.value.prompt||"-"),1))]),_:1}),t(c,{label:"\u56DE\u7B54",span:2},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",_l,n(o.value.completion||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",ml,n(o.value.spend.group_name||"-"),1))]),_:1}),t(c,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",cl,n(o.value.spend.group_discount>0?Number((o.value.spend.group_discount*100).toFixed(2))+"%":"-"),1))]),_:1}),t(c,{label:"\u8BA1\u8D39\u65B9\u5F0F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",pl,n(o.value.spend.billing_methods?g.$t(`model.dict.billing_methods.${o.value.spend.billing_methods}`):"-"),1))]),_:1}),t(c,{label:"\u603B\u82B1\u8D39"},{label:e(()=>[U("span",null,[i(" \u603B\u82B1\u8D39 "),t(re,{content:g.$t("chat.columns.tooltip.total_spend_tokens"),"content-style":{whiteSpace:"nowrap",maxWidth:"none"}},{default:e(()=>[t(R,{style:{color:"var(--color-text-3)"}})]),_:1},8,["content"])])]),default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",{key:1,class:"spend",onClick:F[6]||(F[6]=D=>o.value.status===1||o.value.status===2?H(o.value.spend,o.value.model_type):void 0)},[o.value.status===1||o.value.status===2?(a(),u(xe,{key:0,"model-value":o.value.spend.total_spend_tokens},null,8,["model-value"])):(a(),r("span",fl," - "))]))]),_:1}),t(c,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",vl,[o.value.conn_time>1e4?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>5e3?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.conn_time)+" ms ",1)]),_:1})):o.value.conn_time>3e3?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.conn_time)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",yl,[o.value.duration>12e4?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>9e4?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.duration)+" ms ",1)]),_:1})):o.value.duration>6e4?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.duration)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u603B\u8017\u65F6"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",kl,[o.value.total_time>12e4?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>9e4?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.total_time)+" ms ",1)]),_:1})):o.value.total_time>6e4?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.total_time)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u5185\u8017"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",hl,[o.value.internal_time>500?(a(),u(h,{key:0,color:"red"},{default:e(()=>[i(n(o.value.internal_time)+" ms ",1)]),_:1})):o.value.internal_time>300?(a(),u(h,{key:1,color:"orange"},{default:e(()=>[i(n(o.value.internal_time)+" ms ",1)]),_:1})):o.value.internal_time>100?(a(),u(h,{key:2,color:"gold"},{default:e(()=>[i(n(o.value.internal_time)+" ms ",1)]),_:1})):(a(),u(h,{key:3,color:"green"},{default:e(()=>[i(n(o.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),t(c,{label:"\u7ED3\u679C"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",bl,[o.value.status===1?(a(),u(h,{key:0,color:"green"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===2?(a(),u(h,{key:1,color:"gold"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):o.value.status===3?(a(),u(h,{key:2,color:"orange"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1})):(a(),u(h,{key:3,color:"red"},{default:e(()=>[i(n(g.$t(`chat.dict.status.${o.value.status}`)),1)]),_:1}))]))]),_:1}),t(c,{label:"\u672C\u5730IP"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",gl,n(o.value.local_ip||"-"),1))]),_:1}),t(c,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",wl,n(o.value.client_ip||"-"),1))]),_:1}),t(c,{label:"\u8FDC\u7A0BIP"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",$l,n(o.value.remote_ip||"-"),1))]),_:1}),t(c,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Fl,n(o.value.req_time||"-"),1))]),_:1}),t(c,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{widths:["200px"],rows:1})]),_:1})):(a(),r("span",Cl,n(o.value.created_at||"-"),1))]),_:1}),t(c,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:1})]),_:1})):(a(),r("span",Vl,n(o.value.err_msg||"-"),1))]),_:1})]),_:1})),[[j,["admin"]]]),t(Y,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,null,{default:e(()=>[t(Z,{type:"card"},{default:e(()=>[t(me,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:3})]),_:1})):(a(),u(_e,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[o.value.messages?(a(),u(_(Ge),{key:0,path:"res",data:o.value.messages,"show-length":!0},null,8,["data"])):(a(),r("span",Dl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),v((a(),u(Y,{layout:"inline-vertical",column:1,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[t(c,null,{default:e(()=>[t(Z,{type:"card"},{default:e(()=>[t(me,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[_(m)?(a(),u(f,{key:0,animation:!0},{default:e(()=>[t(p,{rows:3})]),_:1})):(a(),u(_e,{key:1},{default:e(()=>[o.value.model_agent?(a(),u(_(Ge),{key:0,data:o.value.model_agent,"show-length":!0},null,8,["data"])):(a(),r("span",Bl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[j,["admin"]]]),t(he,{visible:T.value,"onUpdate:visible":F[8]||(F[8]=D=>T.value=D),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[t(nt,{modelValue:q.value,"onUpdate:modelValue":F[7]||(F[7]=D=>q.value=D),"model-type":de.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])])}}});const Al=Ke(xl,[["__scopeId","data-v-e17fe7f9"]]),Il={class:"container"},ql={class:"action-icon"},Ul={class:"action-icon"},Sl={id:"tableSetting"},Ll={style:{"margin-right":"4px",cursor:"move"}},zl={class:"title"},Nl=["onClick"],Ml={key:1},Pl={name:"ChatList"},Tl=Xe({...Pl,setup(Ae){const{loading:ke,setLoading:m}=ut(!0),{t:$}=Ct(),o=localStorage.getItem("userRole"),se=Qe({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),X=()=>({app_id:w(),trace_id:w(),user_id:w(),key:"",models:[],model_agents:[],total_time:w(),status:w(),req_time:[We().format("YYYY-MM-DD 00:00:00"),We().format("YYYY-MM-DD 23:59:59")]}),ie=w([]),y=w(X()),S=w([]),M=w([]),T=w("medium"),q=w([]),de=w(!0),H=w(),g={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},F=Qe({...g}),p=De(()=>[{name:$("size.mini"),value:"mini"},{name:$("size.small"),value:"small"},{name:$("size.medium"),value:"medium"},{name:$("size.large"),value:"large"}]),f=De(()=>[{title:$(o==="reseller"||o==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:o==="reseller"||o==="admin"?"user_id":"app_id",slotName:o==="reseller"||o==="admin"?"user_id":"app_id",align:"center",width:75},{title:$("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:$("chat.columns.input_tokens"),dataIndex:"input_tokens",slotName:"input_tokens",align:"center",width:85},{title:$("chat.columns.output_tokens"),dataIndex:"output_tokens",slotName:"output_tokens",align:"center",width:85},{title:$("chat.columns.total_spend_tokens"),dataIndex:"total_spend_tokens",slotName:"total_spend_tokens",align:"center",width:110,slots:{title:()=>[P("div",{style:{display:"flex",alignItems:"center",gap:"3px",justifyContent:"center"}},[P("span",$("chat.columns.total_spend_tokens")),P(ye,{content:$("chat.columns.tooltip.total_spend_tokens"),contentStyle:{whiteSpace:"nowrap",maxWidth:"none"}},{default:()=>P(Ee,{style:{color:"var(--color-text-3)"}})})])]}},{title:$("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:$("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:$("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:$("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center",slots:{title:()=>[P("div",{style:{display:"flex",alignItems:"center",gap:"3px",justifyContent:"center"}},[P("span",$("chat.columns.total_time")),P(ye,{content:$("chat.columns.tooltip.total_time"),contentStyle:{whiteSpace:"nowrap",maxWidth:"none"}},{default:()=>P(Ee,{style:{color:"var(--color-text-3)"}})})])]}},{title:$("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:$("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:$("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:$("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);(o==="reseller"||o==="user")&&f.value.splice(9,1);const L=De(()=>[{label:$("chat.dict.status.1"),value:1},{label:$("chat.dict.status.2"),value:2},{label:$("chat.dict.status.-1"),value:-1}]);o==="admin"&&L.value.push({label:$("chat.dict.status.3"),value:3},{label:$("chat.dict.status.-100"),value:-100});const c=async(s={...g,...y.value})=>{m(!0);try{const{data:d}=await ma(s);ie.value=d.items,F.current=s.current,F.pageSize=s.pageSize,F.total=d.paging.total}catch{}finally{m(!1),H.value.selectAll(!1)}};c();const R=()=>{c({...g,...y.value})},re=s=>{c({...g,...y.value,current:s})},h=s=>{g.pageSize=s,c({...g,...y.value})},Y=()=>{y.value=X(),R()},_e=(s,d)=>{T.value=s},me=(s,d,B)=>{s?S.value.splice(B,0,d):S.value=M.value.filter(A=>A.dataIndex!==d.dataIndex)},Z=(s,d,B,A=!1)=>{const x=A?Be(s):s;return d>-1&&B>-1&&x.splice(d,1,x.splice(B,1,x[d]).pop()),x},he=s=>{s&&Ht(()=>{const d=document.getElementById("tableSetting");new ya(d,{onEnd(B){const{oldIndex:A,newIndex:x}=B;Z(S.value,A,x),Z(M.value,A,x)}})})};Ze(()=>f.value,s=>{S.value=Be(s),S.value.forEach((d,B)=>{d.checked=!0}),M.value=Be(S.value)},{deep:!0,immediate:!0});const j=w([]);o==="user"&&(async()=>{try{const{data:s}=await fa();j.value=s.items}catch{}})();const I=w([]);(async()=>{try{const{data:s}=await ka();I.value=s.items}catch{}})();const Ie=w([]);o==="admin"&&(async()=>{try{const{data:s}=await ha();Ie.value=s.items}catch{}})();const{proxy:ce}=tt(),be=w(!1),qe=w(),st=s=>{be.value=!0,qe.value=s},it=()=>{be.value=!1},Ue=w(0),Se=w(0),Le=async(s={...y.value})=>{const{data:d}=await va(s);Ue.value=d.rpm||0,Se.value=d.tpm||0};Le();let ze;const Ne=()=>{clearInterval(ze)},Me=()=>{ze=setInterval(Le,3e3)},Pe=()=>{document.visibilityState==="hidden"?Ne():Me()};Mt(()=>{Me(),document.addEventListener("visibilitychange",Pe)}),Pt(()=>{Ne(),document.removeEventListener("visibilitychange",Pe)});const Te=w(),ee=w(!1),O=w({}),dt=async s=>{var B;if(await((B=Te.value)==null?void 0:B.validate())){ee.value=!0,s(!1);return}s(),He({req_time:O.value.req_time,user_id:O.value.user_id})},rt=()=>{ee.value=!1},He=s=>{if(q.value.length===0&&!s.req_time){ee.value=!0;return}m(!0),s.ids=q.value,ca(s).then(d=>{m(!1),ce.$message.success("\u5BFC\u51FA\u6210\u529F"),H.value.selectAll(!1);const B=new Blob([d.data],{type:"application/vnd.ms-excel"}),A=window.URL.createObjectURL(B),x=document.createElement("a");x.href=A,x.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(A)}).catch(d=>{ce.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",d)})},Re=w(),te=w(!1),E=w({status:[1,2,3,-1]}),_t=async s=>{var B;if(await((B=Re.value)==null?void 0:B.validate())){te.value=!0,s(!1);return}s(),Oe({action:"time",value:E.value.value,user_id:E.value.user_id,status:E.value.status})},mt=()=>{te.value=!1},ct=s=>{q.value=s,de.value=!s.length},Oe=s=>{if(q.value.length===0&&!s.value)te.value=!0;else{let d=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${q.value.length}\u6761\u6570\u636E?`;switch(s.action){case"delete":d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${q.value.length}\u6761\u6570\u636E?`;break;case"time":s.user_id?d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${s.user_id} \u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`:d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`;break}ce.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:d,hideCancel:!1,onOk:()=>{m(!0),s.ids=q.value,pa(s).then(B=>{m(!1),ce.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),R(),H.value.selectAll(!1)})}})}},ge=w(!1),we=w(),Ye=w(),pt=async(s,d)=>{ge.value=!0,we.value=s,Ye.value=d};return(s,d)=>{const B=Vt,A=Rt,x=Ot,pe=Yt,J=jt,V=Jt,C=Qt,ae=Wt,Q=Gt,fe=Kt,ve=Xt,$e=Zt,je=ea,ft=ta,le=aa,Je=Dt,Fe=lt,Ce=ye,vt=Bt,yt=la,kt=oa,ht=Et,bt=xt,oe=ua,gt=na,b=at,wt=sa,$t=ia,Ve=ot,Ft=da,k=et("permission");return a(),r("div",Il,[t(x,{class:"container-breadcrumb"},{default:e(()=>[t(A,null,{default:e(()=>[t(B)]),_:1}),t(A,null,{default:e(()=>[i(n(s.$t("menu.chat")),1)]),_:1}),t(A,null,{default:e(()=>[i(n(s.$t("menu.chat.list")),1)]),_:1})]),_:1}),t(Ft,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[t(ve,null,{default:e(()=>[t(C,{flex:1},{default:e(()=>[t($e,{model:y.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[v((a(),u(ve,{gutter:16},{default:e(()=>[v((a(),u(C,{span:8},{default:e(()=>[t(V,{field:"app_id",label:s.$t("chat.form.app_id")},{default:e(()=>[t(J,{modelValue:y.value.app_id,"onUpdate:modelValue":d[0]||(d[0]=l=>y.value.app_id=l),placeholder:s.$t("chat.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(W,null,G(j.value,l=>(a(),u(pe,{key:l.app_id,value:l.app_id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),u(C,{span:8},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(ae,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[1]||(d[1]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((a(),u(C,{span:8},{default:e(()=>[t(V,{field:"user_id",label:s.$t("chat.form.reseller.user_id")},{default:e(()=>[t(Q,{modelValue:y.value.user_id,"onUpdate:modelValue":d[2]||(d[2]=l=>y.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((a(),u(C,{span:8},{default:e(()=>[t(V,{field:"key",label:s.$t("chat.form.key")},{default:e(()=>[t(ae,{modelValue:y.value.key,"onUpdate:modelValue":d[3]||(d[3]=l=>y.value.key=l),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),u(C,{span:8},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[t(ae,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[4]||(d[4]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((a(),u(C,{span:8},{default:e(()=>[t(V,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(Q,{modelValue:y.value.total_time,"onUpdate:modelValue":d[5]||(d[5]=l=>y.value.total_time=l),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},{append:e(()=>[i(" ms ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),t(C,{span:8},{default:e(()=>[t(V,{field:"models",label:s.$t("chat.form.models")},{default:e(()=>[t(J,{modelValue:y.value.models,"onUpdate:modelValue":d[6]||(d[6]=l=>y.value.models=l),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(W,null,G(I.value,l=>(a(),u(pe,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"status",label:s.$t("chat.form.status")},{default:e(()=>[t(J,{modelValue:y.value.status,"onUpdate:modelValue":d[7]||(d[7]=l=>y.value.status=l),placeholder:s.$t("chat.form.selectDefault"),options:_(L),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(fe,{modelValue:y.value.req_time,"onUpdate:modelValue":d[8]||(d[8]=l=>y.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["reseller","user"]]]),v((a(),u(ve,{gutter:16},{default:e(()=>[t(C,{span:5},{default:e(()=>[t(V,{field:"trace_id",label:s.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[t(ae,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[9]||(d[9]=l=>y.value.trace_id=l),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:6},{default:e(()=>[t(V,{field:"models",label:s.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[t(J,{modelValue:y.value.models,"onUpdate:modelValue":d[10]||(d[10]=l=>y.value.models=l),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(W,null,G(I.value,l=>(a(),u(pe,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"key",label:s.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[t(ae,{modelValue:y.value.key,"onUpdate:modelValue":d[11]||(d[11]=l=>y.value.key=l),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[t(Q,{modelValue:y.value.total_time,"onUpdate:modelValue":d[12]||(d[12]=l=>y.value.total_time=l),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},{append:e(()=>[i(" ms ")]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"user_id",label:s.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[t(Q,{modelValue:y.value.user_id,"onUpdate:modelValue":d[13]||(d[13]=l=>y.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:6},{default:e(()=>[t(V,{field:"model_agents",label:s.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[t(J,{modelValue:y.value.model_agents,"onUpdate:modelValue":d[14]||(d[14]=l=>y.value.model_agents=l),placeholder:s.$t("key.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(a(!0),r(W,null,G(Ie.value,l=>(a(),u(pe,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(C,{span:5},{default:e(()=>[t(V,{field:"status",label:s.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[t(J,{modelValue:y.value.status,"onUpdate:modelValue":d[15]||(d[15]=l=>y.value.status=l),placeholder:s.$t("chat.form.selectDefault"),options:_(L),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),t(C,{span:8},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[t(fe,{modelValue:y.value.req_time,"onUpdate:modelValue":d[16]||(d[16]=l=>y.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["admin"]]])]),_:1},8,["model"])]),_:1}),t(je,{style:{height:"84px"},direction:"vertical"}),t(C,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[t(Fe,{direction:"vertical",size:18},{default:e(()=>[t(le,{type:"primary",onClick:R},{icon:e(()=>[t(ft)]),default:e(()=>[i(" "+n(s.$t("chat.form.search")),1)]),_:1}),t(le,{onClick:Y},{icon:e(()=>[t(Je)]),default:e(()=>[i(" "+n(s.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(je,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(ve,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[t(C,{span:16},{default:e(()=>[t(Fe,null,{default:e(()=>[t(le,{type:"primary",onClick:d[17]||(d[17]=l=>He({}))},{default:e(()=>[i(" \u5BFC\u51FA ")]),_:1}),v((a(),u(le,{type:"primary",status:"danger",onClick:d[18]||(d[18]=l=>Oe({action:"delete"}))},{default:e(()=>[i(" \u5220\u9664 ")]),_:1})),[[k,["admin"]]])]),_:1})]),_:1}),t(C,{span:3},{default:e(()=>[i(" RPM: \xA0"+n(Ue.value.toLocaleString()),1)]),_:1}),t(C,{span:3},{default:e(()=>[i(" TPM: \xA0"+n(Se.value.toLocaleString()),1)]),_:1}),t(C,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[t(Ce,{content:s.$t("actions.refresh")},{default:e(()=>[U("div",{class:"action-icon",onClick:R},[t(Je,{size:"18"})])]),_:1},8,["content"]),t(kt,{onSelect:_e},{content:e(()=>[(a(!0),r(W,null,G(_(p),l=>(a(),u(yt,{key:l.value,value:l.value,class:Tt({active:l.value===T.value})},{default:e(()=>[U("span",null,n(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[t(Ce,{content:s.$t("actions.density")},{default:e(()=>[U("div",ql,[t(vt,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(Ce,{content:s.$t("actions.column_setting")},{default:e(()=>[t(gt,{trigger:"click",position:"bl",onPopupVisibleChange:he},{content:e(()=>[U("div",Sl,[(a(!0),r(W,null,G(M.value,(l,z)=>(a(),r("div",{key:l.dataIndex,class:"setting"},[U("div",Ll,[t(bt)]),U("div",null,[t(oe,{modelValue:l.checked,"onUpdate:modelValue":N=>l.checked=N,onChange:N=>me(N,l,z)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),U("div",zl,n(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:e(()=>[U("div",Ul,[t(ht,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t(wt,{ref_key:"tableRef",ref:H,"row-key":"id",loading:_(ke),pagination:F,columns:S.value,data:ie.value,bordered:!1,size:T.value,"row-selection":se,onPageChange:re,onPageSizeChange:h,onSelectionChange:ct},{user_id:e(({record:l})=>[i(n(l.is_smart_match?"-":l.user_id),1)]),input_tokens:e(({record:l})=>{var z,N,ue,ne;return[i(n((z=l.spend.text)!=null&&z.input_tokens?_(K)((N=l.spend.text)==null?void 0:N.input_tokens):_(K)((ue=l.spend.tiered_text)==null?void 0:ue.input_tokens)?_(K)((ne=l.spend.tiered_text)==null?void 0:ne.input_tokens):l.status===1?0:"-"),1)]}),output_tokens:e(({record:l})=>{var z,N,ue,ne;return[i(n((z=l.spend.text)!=null&&z.output_tokens?_(K)((N=l.spend.text)==null?void 0:N.output_tokens):_(K)((ue=l.spend.tiered_text)==null?void 0:ue.output_tokens)?_(K)((ne=l.spend.tiered_text)==null?void 0:ne.output_tokens):l.status===1?0:"-"),1)]}),total_spend_tokens:e(({record:l})=>[U("span",{class:"spend",onClick:z=>l.status===1||l.status===2?pt(l.spend,l.model_type):void 0},[l.status===1||l.status===2?(a(),u(xe,{key:0,"model-value":l.spend.total_spend_tokens},null,8,["model-value"])):(a(),r("span",Ml," - "))],8,Nl)]),stream:e(({record:l})=>[i(n(s.$t(`chat.dict.stream.${l.stream||!1}`)),1)]),conn_time:e(({record:l})=>[l.conn_time>3e4?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.conn_time>15e3?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.conn_time>5e3?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[i(n(l.conn_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.conn_time>1e4?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):l.conn_time>5e3?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):l.conn_time>3e3?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[i(n(l.conn_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),duration:e(({record:l})=>[l.duration>18e4?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.duration>12e4?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.duration>9e4?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[i(n(l.duration||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.duration>12e4?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):l.duration>9e4?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):l.duration>6e4?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.duration),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[i(n(l.duration||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),total_time:e(({record:l})=>[l.total_time>18e4?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.total_time>12e4?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.total_time>9e4?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[i(n(l.total_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.total_time>12e4?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):l.total_time>9e4?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):l.total_time>6e4?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.total_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[i(n(l.total_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),internal_time:e(({record:l})=>[l.internal_time>1e3?v((a(),u(b,{key:0,color:"red"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.internal_time>500?v((a(),u(b,{key:1,color:"orange"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):l.internal_time>300?v((a(),u(b,{key:2,color:"gold"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((a(),u(b,{key:3,color:"green"},{default:e(()=>[i(n(l.internal_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),l.internal_time>500?v((a(),u(b,{key:4,color:"red"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):l.internal_time>300?v((a(),u(b,{key:5,color:"orange"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):l.internal_time>100?v((a(),u(b,{key:6,color:"gold"},{default:e(()=>[i(n(l.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):v((a(),u(b,{key:7,color:"green"},{default:e(()=>[i(n(l.internal_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),status:e(({record:l})=>[l.status===-1?(a(),u(b,{key:0,color:"red"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===2?(a(),u(b,{key:1,color:"gold"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):l.status===3?(a(),u(b,{key:2,color:"orange"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024)):(a(),u(b,{key:3,color:"green"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${l.status}`)),1)]),_:2},1024))]),operations:e(({record:l})=>[t(le,{type:"text",size:"small",onClick:z=>st(l.id)},{default:e(()=>[i(n(s.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),t($t,{title:s.$t("menu.chat.detail"),width:700,footer:!1,visible:be.value,"unmount-on-close":"","render-to-body":"",onCancel:it},{default:e(()=>[t(Al,{id:qe.value},null,8,["id"])]),_:1},8,["title","visible"]),t(Ve,{visible:ee.value,"onUpdate:visible":d[21]||(d[21]=l=>ee.value=l),title:s.$t("chat.form.title.chat_export"),onCancel:rt,onBeforeOk:dt},{default:e(()=>[t($e,{ref_key:"chatExportForm",ref:Te,model:O.value},{default:e(()=>[t(V,{field:"req_time",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(fe,{modelValue:O.value.req_time,"onUpdate:modelValue":d[19]||(d[19]=l=>O.value.req_time=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),v((a(),u(V,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[t(Q,{modelValue:O.value.user_id,"onUpdate:modelValue":d[20]||(d[20]=l=>O.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[k,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(Ve,{visible:te.value,"onUpdate:visible":d[28]||(d[28]=l=>te.value=l),title:s.$t("chat.form.title.chat_del"),onCancel:mt,onBeforeOk:_t},{default:e(()=>[t($e,{ref_key:"chatDelForm",ref:Re,model:E.value},{default:e(()=>[t(V,{field:"value",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[t(fe,{modelValue:E.value.value,"onUpdate:modelValue":d[22]||(d[22]=l=>E.value.value=l),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(V,{field:"status",label:s.$t("chat.form.req.status"),rules:[{required:!0,message:s.$t("chat.error.req.status.required")}]},{default:e(()=>[t(Fe,{size:"large"},{default:e(()=>[t(oe,{modelValue:E.value.status,"onUpdate:modelValue":d[23]||(d[23]=l=>E.value.status=l),value:1},{default:e(()=>[i(" \u6210\u529F ")]),_:1},8,["modelValue"]),t(oe,{modelValue:E.value.status,"onUpdate:modelValue":d[24]||(d[24]=l=>E.value.status=l),value:2},{default:e(()=>[i(" \u4E2D\u6B62 ")]),_:1},8,["modelValue"]),t(oe,{modelValue:E.value.status,"onUpdate:modelValue":d[25]||(d[25]=l=>E.value.status=l),value:3},{default:e(()=>[i(" \u91CD\u8BD5 ")]),_:1},8,["modelValue"]),t(oe,{modelValue:E.value.status,"onUpdate:modelValue":d[26]||(d[26]=l=>E.value.status=l),value:-1},{default:e(()=>[i(" \u5931\u8D25 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),t(V,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[t(Q,{modelValue:E.value.user_id,"onUpdate:modelValue":d[27]||(d[27]=l=>E.value.user_id=l),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(Ve,{visible:ge.value,"onUpdate:visible":d[30]||(d[30]=l=>ge.value=l),width:888,"body-style":{maxHeight:"520px"},"modal-style":{padding:"25px 20px 20px 20px"},"hide-title":"","hide-cancel":"","unmount-on-close":"",simple:"","ok-text":"\u5173\u95ED"},{default:e(()=>[t(nt,{modelValue:we.value,"onUpdate:modelValue":d[29]||(d[29]=l=>we.value=l),"model-type":Ye.value},null,8,["modelValue","model-type"])]),_:1},8,["visible"])]),_:1})])}}});const wo=Ke(Tl,[["__scopeId","data-v-0b97305b"]]);export{wo as default};

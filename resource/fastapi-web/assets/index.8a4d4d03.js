import{u as Cl,H as $l,p as El,y as Fl,i as hl,z as wl,_ as Bl}from"./index.d6462cde.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{d as Dl,r as Se,e as i,c as ee,w as Vl,B as n,C as p,aH as t,aG as a,aL as o,aM as s,aJ as S,aI as M,aD as _,u as m,aE as w,F as z,D as ql,n as Al,aK as xl,aF as zl,bA as Il,bB as Ul,b2 as Sl,bC as Ml,b1 as Ll,bD as Ol,b5 as Hl,bE as Ql,ab as Nl,aU as Pl,bi as Tl,bj as Rl,bl as jl,bm as Gl,b4 as Jl,bF as Kl,aT as Wl,bG as Xl,bH as Yl,aV as Zl,a_ as et,bQ as lt,b_ as tt,bI as at,g as ut}from"./arco.54c7388d.js";import{u as ot}from"./loading.7321a6c2.js";import{p as F,q as K}from"./common.df364eef.js";import{q as nt,s as it,b as st,c as dt,d as rt,e as mt}from"./model.e72c4173.js";import{c as pe,S as ct}from"./sortable.esm.777e758f.js";import{f as pt}from"./agent.885aff6b.js";import{q as vt}from"./corp.e8a3355a.js";import{_ as _t}from"./index.vue_vue_type_script_setup_true_lang.423d86ff.js";import"./chart.f14251fc.js";import"./vue.aa90ed69.js";import"./base.87fcf6e2.js";/* empty css                *//* empty css                */const ft={class:"container"},gt={class:"action-icon"},bt={class:"action-icon"},yt={id:"tableSetting"},kt={style:{"margin-right":"4px",cursor:"move"}},Ct={class:"title"},$t={key:0},Et={key:1},Ft={key:2},ht={key:3},wt={key:4},Bt={key:5},Dt={key:0},Vt={key:1},qt={key:2},At={key:3},xt={key:4},zt={key:5},It={key:6},Ut={name:"ModelList"},St=Dl({...Ut,setup(Mt){const{loading:Me,setLoading:k}=ot(!0),{proxy:H}=ut(),Le=Se({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),ve=i([]);(async()=>{k(!0);try{const{data:l}=await vt();ve.value=l.items}catch{}finally{k(!1)}})();const le=i([]);(async()=>{try{const{data:l}=await nt();le.value=l.items}catch{}})();const te=i([]);(async()=>{try{const{data:l}=await pt();te.value=l.items}catch{}})();const Oe=async l=>{k(!0);try{await it(l),H.$message.success("\u5220\u9664\u6210\u529F"),Q()}catch{}finally{k(!1)}},_e=()=>({corp:"",name:"",model:"",type:i(),status:i(),remark:""}),{t:v}=Cl(),C=i([]),f=i(_e()),I=i([]),W=i([]),ae=i("medium"),b=i([]),r=i(!0),fe=i();let ge=!1;const L={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},X=Se({...L}),He=ee(()=>[{name:v("size.mini"),value:"mini"},{name:v("size.small"),value:"small"},{name:v("size.medium"),value:"medium"},{name:v("size.large"),value:"large"}]),Qe=ee(()=>[{title:v("model.columns.corp"),dataIndex:"corp_name",slotName:"corp_name",align:"center",width:110},{title:v("model.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:v("model.columns.prompt_price"),dataIndex:"prompt_ratio",slotName:"prompt_ratio",align:"center"},{title:v("model.columns.completion_price"),dataIndex:"completion_ratio",slotName:"completion_ratio",align:"center"},{title:v("model.columns.lb_strategy"),dataIndex:"lb_strategy",slotName:"lb_strategy",align:"center"},{title:v("model.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:v("model.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:v("model.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:170}]),Ne=ee(()=>[{label:v("dict.model_type.1"),value:1},{label:v("dict.model_type.2"),value:2},{label:v("dict.model_type.3"),value:3},{label:v("dict.model_type.4"),value:4},{label:v("dict.model_type.100"),value:100},{label:v("dict.model_type.101"),value:101},{label:v("dict.model_type.102"),value:102}]),Pe=ee(()=>[{label:v("model.dict.status.1"),value:1},{label:v("model.dict.status.2"),value:2}]),Y=async(l={...L})=>{k(!0);try{const{data:u}=await st(l);C.value=u.items,X.current=l.current,X.pageSize=l.pageSize,X.total=u.paging.total,ge=u.items.length===0}catch{}finally{k(!1)}},Q=()=>{Y({...L,...f.value})},Te=l=>{Y({...L,...f.value,current:l})},Re=l=>{L.pageSize=l,Y({...L,...f.value})};Y();const je=()=>{f.value=_e()},Ge=async l=>{k(!0);try{await dt(l),H.$message.success("\u64CD\u4F5C\u6210\u529F"),Q()}catch{}finally{k(!1)}},Je=(l,u)=>{ae.value=l},Ke=(l,u,c)=>{l?I.value.splice(c,0,u):I.value=W.value.filter(D=>D.dataIndex!==u.dataIndex)},be=(l,u,c,D=!1)=>{const A=D?pe(l):l;return u>-1&&c>-1&&A.splice(u,1,A.splice(c,1,A[u]).pop()),A},We=l=>{l&&Al(()=>{const u=document.getElementById("tableSetting");new ct(u,{onEnd(c){const{oldIndex:D,newIndex:A}=c;be(I.value,D,A),be(W.value,D,A)}})})};Vl(()=>Qe.value,l=>{I.value=pe(l),I.value.forEach((u,c)=>{u.checked=!0}),W.value=pe(I.value)},{deep:!0,immediate:!0});const N=i(!1),ye=i(),B=i({}),ke=i(),P=i(!1),V=i({});V.value.lb_strategy="1";const Xe=async()=>{k(!0);try{B.value.url="",B.value.key="",B.value.is_config_model_agent=!0,N.value=!0}catch{}finally{k(!1)}},Ye=async l=>{var c;if(await((c=ye.value)==null?void 0:c.validate())){N.value=!0,l(!1);return}k(!0);try{await rt(B.value),l(),window.location.reload()}catch{l(!1)}finally{k(!1)}},Ze=()=>{N.value=!1},el=async l=>{var c;if(await((c=ke.value)==null?void 0:c.validate())){P.value=!0,l(!1);return}l(),y({action:"agent",value:"all",lb_strategy:V.value.lb_strategy,model_agents:V.value.model_agents})},ll=()=>{P.value=!1},Ce=i(),T=i(!1),Z=i({}),tl=async l=>{var c;if(await((c=Ce.value)==null?void 0:c.validate())){T.value=!0,l(!1);return}l(),y({action:"forward",value:"all",target_model:Z.value.target_model})},al=()=>{T.value=!1},$e=i(),R=i(!1),h=i({}),ul=async l=>{var c;if(await((c=$e.value)==null?void 0:c.validate())){R.value=!0,l(!1);return}l(),y({action:"fallback",value:"all",fallback_config:{model_agent:h.value.model_agent,model:h.value.model}})},ol=()=>{R.value=!1},nl=l=>{b.value=l,r.value=!l.length},y=l=>{if(b.value.length===0)H.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let u=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${b.value.length}\u6761\u6570\u636E?`;switch(l.action){case"agent":l.value===!0?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u4EE3\u7406?`:l.value===!1?u=`\u662F\u5426\u786E\u5B9A\u5173\u95ED\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u4EE3\u7406?`:l.value==="all"&&(l.model_agents?u=`\u662F\u5426\u786E\u5B9A\u5C06\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u4EE3\u7406\u542F\u7528\u5E76\u4F7F\u7528\u6240\u9009\u7684\u6A21\u578B\u4EE3\u7406?`:P.value=!0);break;case"forward":l.value===!0?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u8F6C\u53D1?`:l.value===!1?u=`\u662F\u5426\u786E\u5B9A\u5173\u95ED\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u8F6C\u53D1?`:l.value==="all"&&(l.target_model?u=`\u662F\u5426\u786E\u5B9A\u5C06\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u6A21\u578B\u8F6C\u53D1\u542F\u7528\u5E76\u5168\u90E8\u8F6C\u53D1\u5230\u6240\u9009\u6A21\u578B?`:T.value=!0);break;case"fallback":l.value===!0?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u540E\u5907\u6A21\u578B?`:l.value===!1?u=`\u662F\u5426\u786E\u5B9A\u5173\u95ED\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u540E\u5907\u6A21\u578B?`:l.value==="all"&&(l.fallback_config?u=`\u662F\u5426\u786E\u5B9A\u5C06\u6240\u9009${b.value.length}\u6761\u6570\u636E\u7684\u540E\u5907\u914D\u7F6E\u542F\u7528\u5E76\u5168\u90E8\u540E\u5907\u5230\u6240\u9009\u914D\u7F6E?`:R.value=!0);break;case"status":l.value===1?u=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${b.value.length}\u6761\u6570\u636E?`:u=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${b.value.length}\u6761\u6570\u636E?`;break;case"delete":u=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${b.value.length}\u6761\u6570\u636E?`;break}if(l.action==="agent"&&l.value==="all"&&!l.model_agents||l.action==="forward"&&l.value==="all"&&!l.target_model||l.action==="fallback"&&l.value==="all"&&!l.fallback_config)return;H.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:u,hideCancel:!1,onOk:()=>{k(!0),l.ids=b.value,mt(l).then(c=>{k(!1),H.$message.success("\u64CD\u4F5C\u6210\u529F"),Q(),fe.value.selectAll(!1)})}})}},ue=i(!1),Ee=i([]),il=l=>{Ee.value=l,ue.value=!0},oe=i(!1),Fe=i([]),he=i([]),we=l=>{oe.value=!0,Fe.value[0]=l.text_quota,he.value=l.image_quotas},ne=i(!1),Be=i([]),De=l=>{Be.value[0]=l,ne.value=!0},ie=i(!1),Ve=i([]),qe=l=>{Ve.value[0]=l,ie.value=!0},se=i(!1),Ae=i(),sl=l=>{se.value=!0,Ae.value=l},dl=()=>{se.value=!1};return(l,u)=>{const c=$l,D=xl,A=zl,j=Il,U=Ul,$=Sl,q=Ml,G=Ll,de=Ol,J=Hl,xe=Ql,rl=Nl,d=Pl,ze=El,re=Tl,me=Rl,ml=Fl,cl=jl,pl=Gl,vl=hl,_l=wl,fl=Jl,gl=Kl,Ie=Wl,bl=Xl,O=Yl,yl=Zl,x=et,Ue=lt,g=tt,kl=at;return n(),p("div",ft,[t(A,{class:"container-breadcrumb"},{default:a(()=>[t(D,null,{default:a(()=>[t(c)]),_:1}),t(D,null,{default:a(()=>[o(s(l.$t("menu.model")),1)]),_:1}),t(D,null,{default:a(()=>[o(s(l.$t("menu.model.list")),1)]),_:1})]),_:1}),t(kl,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[t(de,null,{default:a(()=>[t(q,{flex:1},{default:a(()=>[t(J,{model:f.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[t(de,{gutter:16},{default:a(()=>[t(q,{span:8},{default:a(()=>[t($,{field:"corp",label:l.$t("model.form.corp")},{default:a(()=>[t(U,{modelValue:f.value.corp,"onUpdate:modelValue":u[0]||(u[0]=e=>f.value.corp=e),placeholder:l.$t("model.form.selectDefault"),"allow-search":"","allow-clear":""},{default:a(()=>[(n(!0),p(S,null,M(ve.value,e=>(n(),_(j,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(q,{span:8},{default:a(()=>[t($,{field:"name",label:l.$t("model.form.name")},{default:a(()=>[t(G,{modelValue:f.value.name,"onUpdate:modelValue":u[1]||(u[1]=e=>f.value.name=e),placeholder:l.$t("model.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(q,{span:8},{default:a(()=>[t($,{field:"model",label:l.$t("model.form.model")},{default:a(()=>[t(G,{modelValue:f.value.model,"onUpdate:modelValue":u[2]||(u[2]=e=>f.value.model=e),placeholder:l.$t("model.form.model.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(q,{span:8},{default:a(()=>[t($,{field:"type",label:l.$t("model.form.type")},{default:a(()=>[t(U,{modelValue:f.value.type,"onUpdate:modelValue":u[3]||(u[3]=e=>f.value.type=e),options:m(Ne),placeholder:l.$t("model.form.selectDefault"),"allow-search":"","allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(q,{span:8},{default:a(()=>[t($,{field:"status",label:l.$t("model.form.status")},{default:a(()=>[t(U,{modelValue:f.value.status,"onUpdate:modelValue":u[4]||(u[4]=e=>f.value.status=e),options:m(Pe),placeholder:l.$t("model.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(q,{span:8},{default:a(()=>[t($,{field:"remark",label:l.$t("model.form.remark")},{default:a(()=>[t(G,{modelValue:f.value.remark,"onUpdate:modelValue":u[5]||(u[5]=e=>f.value.remark=e),placeholder:l.$t("model.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(xe,{style:{height:"84px"},direction:"vertical"}),t(q,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[t(re,{direction:"vertical",size:18},{default:a(()=>[t(d,{type:"primary",onClick:Q},{icon:a(()=>[t(rl)]),default:a(()=>[o(" "+s(l.$t("model.form.search")),1)]),_:1}),t(d,{onClick:je},{icon:a(()=>[t(ze)]),default:a(()=>[o(" "+s(l.$t("model.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(xe,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(de,{style:{"margin-bottom":"16px"}},{default:a(()=>[t(q,{span:12},{default:a(()=>[t(re,null,{default:a(()=>[t(d,{type:"primary",onClick:u[6]||(u[6]=e=>l.$router.push({name:"ModelCreate"}))},{default:a(()=>[o(s(l.$t("model.operation.create")),1)]),_:1}),m(ge)?(n(),_(d,{key:0,type:"primary",status:"success",onClick:u[7]||(u[7]=e=>Xe())},{default:a(()=>[o(" \u521D\u59CB\u5316 ")]),_:1})):w("",!0),C.value.length!==0?(n(),_(d,{key:1,type:"primary",status:"warning",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[8]||(u[8]=e=>y({action:"agent",value:"all"}))},{default:a(()=>[o(" \u5168\u90E8\u4EE3\u7406 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:2,type:"primary",status:"success",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[9]||(u[9]=e=>y({action:"agent",value:!0}))},{default:a(()=>[o(" \u542F\u7528\u4EE3\u7406 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:3,type:"primary",status:"danger",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[10]||(u[10]=e=>y({action:"agent",value:!1}))},{default:a(()=>[o(" \u5173\u95ED\u4EE3\u7406 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:4,type:"primary",status:"warning",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[11]||(u[11]=e=>y({action:"forward",value:"all"}))},{default:a(()=>[o(" \u5168\u90E8\u8F6C\u53D1 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:5,type:"primary",status:"success",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[12]||(u[12]=e=>y({action:"forward",value:!0}))},{default:a(()=>[o(" \u542F\u7528\u8F6C\u53D1 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:6,type:"primary",status:"danger",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[13]||(u[13]=e=>y({action:"forward",value:!1}))},{default:a(()=>[o(" \u5173\u95ED\u8F6C\u53D1 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:7,type:"primary",status:"warning",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[14]||(u[14]=e=>y({action:"fallback",value:"all"}))},{default:a(()=>[o(" \u5168\u90E8\u540E\u5907 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:8,type:"primary",status:"success",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[15]||(u[15]=e=>y({action:"fallback",value:!0}))},{default:a(()=>[o(" \u542F\u7528\u540E\u5907 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:9,type:"primary",status:"danger",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[16]||(u[16]=e=>y({action:"fallback",value:!1}))},{default:a(()=>[o(" \u5173\u95ED\u540E\u5907 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:10,type:"primary",status:"success",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[17]||(u[17]=e=>y({action:"status",value:1}))},{default:a(()=>[o(" \u542F\u7528 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:11,type:"primary",status:"danger",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[18]||(u[18]=e=>y({action:"status",value:2}))},{default:a(()=>[o(" \u7981\u7528 ")]),_:1},8,["disabled","title"])):w("",!0),C.value.length!==0?(n(),_(d,{key:12,type:"primary",status:"danger",disabled:r.value,title:r.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:u[19]||(u[19]=e=>y({action:"delete"}))},{default:a(()=>[o(" \u5220\u9664 ")]),_:1},8,["disabled","title"])):w("",!0)]),_:1})]),_:1}),t(q,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[t(me,{content:l.$t("actions.refresh")},{default:a(()=>[z("div",{class:"action-icon",onClick:Q},[t(ze,{size:"18"})])]),_:1},8,["content"]),t(pl,{onSelect:Je},{content:a(()=>[(n(!0),p(S,null,M(m(He),e=>(n(),_(cl,{key:e.value,value:e.value,class:ql({active:e.value===ae.value})},{default:a(()=>[z("span",null,s(e.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[t(me,{content:l.$t("actions.density")},{default:a(()=>[z("div",gt,[t(ml,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(me,{content:l.$t("actions.column_setting")},{default:a(()=>[t(gl,{trigger:"click",position:"bl",onPopupVisibleChange:We},{content:a(()=>[z("div",yt,[(n(!0),p(S,null,M(W.value,(e,E)=>(n(),p("div",{key:e.dataIndex,class:"setting"},[z("div",kt,[t(_l)]),z("div",null,[t(fl,{modelValue:e.checked,"onUpdate:modelValue":ce=>e.checked=ce,onChange:ce=>Ke(ce,e,E)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),z("div",Ct,s(e.title==="#"?"\u5E8F\u5217\u53F7":e.title),1)]))),128))])]),default:a(()=>[z("div",bt,[t(vl,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t(O,{ref_key:"tableRef",ref:fe,"row-key":"id",loading:m(Me),pagination:X,columns:I.value,data:C.value,bordered:!1,size:ae.value,"row-selection":Le,onPageChange:Te,onPageSizeChange:Re,onSelectionChange:nl},{type:a(({record:e})=>[o(s(l.$t(`dict.model_type.${e.type}`)),1)]),prompt_ratio:a(({record:e})=>[e.type===5?(n(),p("span",$t,s(e.audio_quota.billing_method===1?`$${m(F)(e.audio_quota.prompt_ratio)}/k`:`$${m(K)(e.audio_quota.fixed_quota)}/\u6B21`),1)):e.type===6?(n(),p("span",Et,"-")):e.type===100?(n(),p("span",Ft,[t(d,{type:"text",size:"small",onClick:E=>we(e.multimodal_quota)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):e.type===101?(n(),p("span",ht,[t(d,{type:"text",size:"small",onClick:E=>De(e.realtime_quota)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):e.type===102?(n(),p("span",wt,[t(d,{type:"text",size:"small",onClick:E=>qe(e.multimodal_audio_quota)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):(n(),p("span",Bt,s(e.text_quota.billing_method===1?`$${m(F)(e.text_quota.prompt_ratio)}/k`:"-"),1))]),completion_ratio:a(({record:e})=>[e.type===2?(n(),p("span",Dt,[t(d,{type:"text",size:"small",onClick:E=>il(e.image_quotas)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):e.type===5?(n(),p("span",Vt,"-")):e.type===6?(n(),p("span",qt,s(e.audio_quota.billing_method===1?`$${m(F)(e.audio_quota.completion_ratio)}/min`:`$${m(K)(e.audio_quota.fixed_quota)}/\u6B21`),1)):e.type===100?(n(),p("span",At,[t(d,{type:"text",size:"small",onClick:E=>we(e.multimodal_quota)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):e.type===101?(n(),p("span",xt,[t(d,{type:"text",size:"small",onClick:E=>De(e.realtime_quota)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):e.type===102?(n(),p("span",zt,[t(d,{type:"text",size:"small",onClick:E=>qe(e.multimodal_audio_quota)},{default:a(()=>[o(" \u67E5\u770B ")]),_:2},1032,["onClick"])])):(n(),p("span",It,s(e.text_quota.billing_method===1?`$${m(F)(e.text_quota.completion_ratio)}/k`:`$${m(K)(e.text_quota.fixed_quota)}/\u6B21`),1))]),lb_strategy:a(({record:e})=>[o(s(e.is_enable_model_agent?l.$t(`dict.lb_strategy.${e.lb_strategy||1}`):"-"),1)]),status:a(({record:e})=>[t(Ie,{modelValue:e.status,"onUpdate:modelValue":E=>e.status=E,"checked-value":1,"unchecked-value":2,onChange:E=>Ge({id:`${e.id}`,status:Number(`${e.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:e})=>[t(d,{type:"text",size:"small",onClick:E=>sl(e.id)},{default:a(()=>[o(s(l.$t("model.columns.operations.view")),1)]),_:2},1032,["onClick"]),t(d,{type:"text",size:"small",onClick:E=>l.$router.push({name:"ModelUpdate",query:{id:`${e.id}`}})},{default:a(()=>[o(s(l.$t("model.columns.operations.update")),1)]),_:2},1032,["onClick"]),t(bl,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:E=>Oe({id:`${e.id}`})},{default:a(()=>[t(d,{type:"text",size:"small"},{default:a(()=>[o(s(l.$t("model.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),t(yl,{title:l.$t("menu.model.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:se.value,onCancel:dl},{default:a(()=>[t(_t,{id:Ae.value},null,8,["id"])]),_:1},8,["title","visible"]),t(x,{visible:N.value,"onUpdate:visible":u[23]||(u[23]=e=>N.value=e),title:l.$t("model.form.title.init_model"),onCancel:Ze,onBeforeOk:Ye},{default:a(()=>[t(J,{ref_key:"initForm",ref:ye,model:B.value},{default:a(()=>[t($,{field:"url",label:l.$t("model.label.url"),rules:[{required:!0,message:l.$t("model.error.url.required")}]},{default:a(()=>[t(G,{modelValue:B.value.url,"onUpdate:modelValue":u[20]||(u[20]=e=>B.value.url=e),placeholder:l.$t("model.placeholder.url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t($,{field:"key",label:l.$t("model.label.key"),rules:[{required:!0,message:l.$t("model.error.key.required")}]},{default:a(()=>[t(G,{modelValue:B.value.key,"onUpdate:modelValue":u[21]||(u[21]=e=>B.value.key=e),placeholder:l.$t("model.placeholder.key"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t($,{field:"is_config_model_agent",label:l.$t("model.label.is_config_model_agent")},{default:a(()=>[t(Ie,{modelValue:B.value.is_config_model_agent,"onUpdate:modelValue":u[22]||(u[22]=e=>B.value.is_config_model_agent=e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(x,{visible:P.value,"onUpdate:visible":u[27]||(u[27]=e=>P.value=e),title:l.$t("model.form.title.model_agent"),onCancel:ll,onBeforeOk:el},{default:a(()=>[t(J,{ref_key:"agentForm",ref:ke,model:V.value},{default:a(()=>[t($,{field:"lb_strategy",label:l.$t("model.label.lb_strategy"),rules:[{required:!0}]},{default:a(()=>[t(re,{size:"large"},{default:a(()=>[t(Ue,{modelValue:V.value.lb_strategy,"onUpdate:modelValue":u[24]||(u[24]=e=>V.value.lb_strategy=e),value:"1","default-checked":!0},{default:a(()=>[o(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),t(Ue,{modelValue:V.value.lb_strategy,"onUpdate:modelValue":u[25]||(u[25]=e=>V.value.lb_strategy=e),value:"2"},{default:a(()=>[o("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),t($,{field:"model_agents",label:l.$t("model.label.model_agents"),rules:[{required:!0,message:l.$t("model.error.model_agents.required")}]},{default:a(()=>[t(U,{modelValue:V.value.model_agents,"onUpdate:modelValue":u[26]||(u[26]=e=>V.value.model_agents=e),placeholder:l.$t("model.placeholder.model_agents"),"max-tag-count":15,multiple:"","allow-search":"","allow-clear":""},{default:a(()=>[(n(!0),p(S,null,M(te.value,e=>(n(),_(j,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(x,{visible:T.value,"onUpdate:visible":u[29]||(u[29]=e=>T.value=e),title:l.$t("model.form.title.forward"),onCancel:al,onBeforeOk:tl},{default:a(()=>[t(J,{ref_key:"forwardForm",ref:Ce,model:Z.value},{default:a(()=>[t($,{field:"target_model",label:l.$t("model.label.target_model"),rules:[{required:!0,message:l.$t("model.error.target_model.required")}]},{default:a(()=>[t(U,{modelValue:Z.value.target_model,"onUpdate:modelValue":u[28]||(u[28]=e=>Z.value.target_model=e),placeholder:l.$t("model.placeholder.target_model"),"allow-search":""},{default:a(()=>[(n(!0),p(S,null,M(le.value,e=>(n(),_(j,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(x,{visible:R.value,"onUpdate:visible":u[32]||(u[32]=e=>R.value=e),title:l.$t("model.form.title.fallback"),onCancel:ol,onBeforeOk:ul},{default:a(()=>[t(J,{ref_key:"fallbackForm",ref:$e,model:h.value},{default:a(()=>[t($,{field:"model_agent",label:l.$t("model.label.fallback_model_agent"),rules:[{required:!h.value.model_agent&&!h.value.model||!h.value.model,message:l.$t("model.error.fallback.required")}]},{default:a(()=>[t(U,{modelValue:h.value.model_agent,"onUpdate:modelValue":u[30]||(u[30]=e=>h.value.model_agent=e),placeholder:l.$t("model.placeholder.fallback_model_agent"),"allow-search":"","allow-clear":""},{default:a(()=>[(n(!0),p(S,null,M(te.value,e=>(n(),_(j,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t($,{field:"model",label:l.$t("model.label.fallback_model"),rules:[{required:!h.value.model_agent&&!h.value.model||!h.value.model_agent,message:l.$t("model.error.fallback.required")}]},{default:a(()=>[t(U,{modelValue:h.value.model,"onUpdate:modelValue":u[31]||(u[31]=e=>h.value.model=e),placeholder:l.$t("model.placeholder.fallback_model"),"allow-search":"","allow-clear":""},{default:a(()=>[(n(!0),p(S,null,M(le.value,e=>(n(),_(j,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),t(x,{visible:ue.value,"onUpdate:visible":u[33]||(u[33]=e=>ue.value=e),title:l.$t("model.columns.image_price"),width:"500px","hide-cancel":"",simple:""},{default:a(()=>[t(O,{data:Ee.value,pagination:!1,bordered:!1},{columns:a(()=>[t(g,{title:"\u5BBD\u5EA6","data-index":"width",align:"center"}),t(g,{title:"\u9AD8\u5EA6","data-index":"height",align:"center"}),t(g,{title:"\u4EF7\u683C","data-index":"fixed_quota",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(K)(e.fixed_quota)}/\u5F20`),1)]),_:1}),t(g,{title:"\u9ED8\u8BA4","data-index":"is_default",align:"center"},{cell:a(({record:e})=>[o(s(e.is_default?"\u662F":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","title"]),t(x,{visible:oe.value,"onUpdate:visible":u[34]||(u[34]=e=>oe.value=e),title:l.$t("model.columns.multimodal_price"),width:"550px","hide-cancel":"",simple:""},{default:a(()=>[t(O,{data:Fe.value,pagination:!1,bordered:!1},{columns:a(()=>[t(g,{title:"\u6587\u672C\u63D0\u95EE\u4EF7\u683C","data-index":"prompt_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.prompt_ratio)}/k`),1)]),_:1}),t(g,{title:"\u6587\u672C\u56DE\u7B54\u4EF7\u683C","data-index":"completion_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.completion_ratio)}/k`),1)]),_:1})]),_:1},8,["data"]),t(O,{style:{"margin-top":"15px"},data:he.value,pagination:!1,bordered:!1},{columns:a(()=>[t(g,{title:"\u8BC6\u56FE\u6A21\u5F0F","data-index":"mode",align:"center"}),t(g,{title:"\u8BC6\u56FE\u4EF7\u683C","data-index":"fixed_quota",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(K)(e.fixed_quota)}/\u5F20`),1)]),_:1}),t(g,{title:"\u9ED8\u8BA4","data-index":"is_default",align:"center"},{cell:a(({record:e})=>[o(s(e.is_default?"\u662F":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","title"]),t(x,{visible:ne.value,"onUpdate:visible":u[35]||(u[35]=e=>ne.value=e),title:l.$t("model.columns.realtime_price"),width:"550px","hide-cancel":"",simple:""},{default:a(()=>[t(O,{data:Be.value,pagination:!1,bordered:!1},{columns:a(()=>[t(g,{title:"\u6587\u672C\u63D0\u95EE\u4EF7\u683C","data-index":"text_quota.prompt_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.text_quota.prompt_ratio)}/k`),1)]),_:1}),t(g,{title:"\u6587\u672C\u56DE\u7B54\u4EF7\u683C","data-index":"text_quota.completion_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.text_quota.completion_ratio)}/k`),1)]),_:1}),t(g,{title:"\u97F3\u9891\u63D0\u95EE\u4EF7\u683C","data-index":"audio_quota.prompt_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.audio_quota.prompt_ratio)}/k`),1)]),_:1}),t(g,{title:"\u97F3\u9891\u56DE\u7B54\u4EF7\u683C","data-index":"audio_quota.completion_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.audio_quota.completion_ratio)}/k`),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","title"]),t(x,{visible:ie.value,"onUpdate:visible":u[36]||(u[36]=e=>ie.value=e),title:l.$t("model.columns.multimodal_audio_price"),width:"550px","hide-cancel":"",simple:""},{default:a(()=>[t(O,{data:Ve.value,pagination:!1,bordered:!1},{columns:a(()=>[t(g,{title:"\u6587\u672C\u63D0\u95EE\u4EF7\u683C","data-index":"text_quota.prompt_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.text_quota.prompt_ratio)}/k`),1)]),_:1}),t(g,{title:"\u6587\u672C\u56DE\u7B54\u4EF7\u683C","data-index":"text_quota.completion_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.text_quota.completion_ratio)}/k`),1)]),_:1}),t(g,{title:"\u97F3\u9891\u63D0\u95EE\u4EF7\u683C","data-index":"audio_quota.prompt_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.audio_quota.prompt_ratio)}/k`),1)]),_:1}),t(g,{title:"\u97F3\u9891\u56DE\u7B54\u4EF7\u683C","data-index":"audio_quota.completion_ratio",align:"center"},{cell:a(({record:e})=>[o(s(`$${m(F)(e.audio_quota.completion_ratio)}/k`),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","title"])]),_:1})])}}});const ka=Bl(St,[["__scopeId","data-v-75d870f8"]]);export{ka as default};
